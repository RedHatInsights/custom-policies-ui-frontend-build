!function(e){function t(t){for(var n,r,o=t[0],a=t[1],l=t[2],s=0,c=[];s<o.length;s++)r=o[s],Object.prototype.hasOwnProperty.call(x,r)&&x[r]&&c.push(x[r][0]),x[r]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(D&&D(t);c.length;)c.shift()();return A.push.apply(A,l||[]),i()}function i(){for(var e,t=0;t<A.length;t++){for(var i=A[t],n=!0,r=1;r<i.length;r++){var o=i[r];0!==x[o]&&(n=!1)}n&&(A.splice(t--,1),e=I(I.s=i[0]))}return e}var n=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!P[e]||!E[e])return;for(var i in E[e]=!1,t)Object.prototype.hasOwnProperty.call(t,i)&&(h[i]=t[i]);0==--_&&0===v&&S()}(e,t),n&&n(e,t)};var r,o=!0,a="49bfe8140193fff4dcd5",l=1e4,s={},c=[],u=[];function d(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:r!==e,active:!0,accept:function(e,i){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._acceptedDependencies[e[n]]=i||function(){};else t._acceptedDependencies[e]=i||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var i=0;i<e.length;i++)t._declinedDependencies[e[i]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var i=t._disposeHandlers.indexOf(e);i>=0&&t._disposeHandlers.splice(i,1)},check:C,apply:j,status:function(e){if(!e)return f;p.push(e)},addStatusHandler:function(e){p.push(e)},removeStatusHandler:function(e){var t=p.indexOf(e);t>=0&&p.splice(t,1)},data:s[e]};return r=void 0,t}var p=[],f="idle";function m(e){f=e;for(var t=0;t<p.length;t++)p[t].call(null,e)}var y,h,g,_=0,v=0,b={},E={},P={};function O(e){return+e+""===e?+e:e}function C(e){if("idle"!==f)throw new Error("check() is only allowed in idle status");return o=e,m("check"),(t=l,t=t||1e4,new Promise((function(e,i){if("undefined"==typeof XMLHttpRequest)return i(new Error("No browser support"));try{var n=new XMLHttpRequest,r=I.p+""+a+".hot-update.json";n.open("GET",r,!0),n.timeout=t,n.send(null)}catch(e){return i(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)i(new Error("Manifest request to "+r+" timed out."));else if(404===n.status)e();else if(200!==n.status&&304!==n.status)i(new Error("Manifest request to "+r+" failed."));else{try{var t=JSON.parse(n.responseText)}catch(e){return void i(e)}e(t)}}}))).then((function(e){if(!e)return m("idle"),null;E={},b={},P=e.c,g=e.h,m("prepare");var t=new Promise((function(e,t){y={resolve:e,reject:t}}));for(var i in h={},x)T(i);return"prepare"===f&&0===v&&0===_&&S(),t}));var t}function T(e){P[e]?(E[e]=!0,_++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=I.p+""+e+"."+a+".hot-update.js",document.head.appendChild(t)}(e)):b[e]=!0}function S(){m("ready");var e=y;if(y=null,e)if(o)Promise.resolve().then((function(){return j(o)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&t.push(O(i));e.resolve(t)}}function j(t){if("ready"!==f)throw new Error("apply() is only allowed in ready status");var i,n,r,o,l;function u(e){for(var t=[e],i={},n=t.map((function(e){return{chain:[e],id:e}}));n.length>0;){var r=n.pop(),a=r.id,l=r.chain;if((o=M[a])&&!o.hot._selfAccepted){if(o.hot._selfDeclined)return{type:"self-declined",chain:l,moduleId:a};if(o.hot._main)return{type:"unaccepted",chain:l,moduleId:a};for(var s=0;s<o.parents.length;s++){var c=o.parents[s],u=M[c];if(u){if(u.hot._declinedDependencies[a])return{type:"declined",chain:l.concat([c]),moduleId:a,parentId:c};-1===t.indexOf(c)&&(u.hot._acceptedDependencies[a]?(i[c]||(i[c]=[]),d(i[c],[a])):(delete i[c],t.push(c),n.push({chain:l.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:i}}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];-1===e.indexOf(n)&&e.push(n)}}t=t||{};var p={},y=[],_={},v=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var b in h)if(Object.prototype.hasOwnProperty.call(h,b)){var E;l=O(b);var C=!1,T=!1,S=!1,j="";switch((E=h[b]?u(l):{type:"disposed",moduleId:b}).chain&&(j="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(C=new Error("Aborted because of self decline: "+E.moduleId+j));break;case"declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(C=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+j));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(E),t.ignoreUnaccepted||(C=new Error("Aborted because "+l+" is not accepted"+j));break;case"accepted":t.onAccepted&&t.onAccepted(E),T=!0;break;case"disposed":t.onDisposed&&t.onDisposed(E),S=!0;break;default:throw new Error("Unexception type "+E.type)}if(C)return m("abort"),Promise.reject(C);if(T)for(l in _[l]=h[l],d(y,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,l)&&(p[l]||(p[l]=[]),d(p[l],E.outdatedDependencies[l]));S&&(d(y,[E.moduleId]),_[l]=v)}var A,w=[];for(n=0;n<y.length;n++)l=y[n],M[l]&&M[l].hot._selfAccepted&&_[l]!==v&&w.push({module:l,errorHandler:M[l].hot._selfAccepted});m("dispose"),Object.keys(P).forEach((function(e){!1===P[e]&&function(e){delete x[e]}(e)}));for(var N,R,D=y.slice();D.length>0;)if(l=D.pop(),o=M[l]){var k={},L=o.hot._disposeHandlers;for(r=0;r<L.length;r++)(i=L[r])(k);for(s[l]=k,o.hot.active=!1,delete M[l],delete p[l],r=0;r<o.children.length;r++){var F=M[o.children[r]];F&&((A=F.parents.indexOf(l))>=0&&F.parents.splice(A,1))}}for(l in p)if(Object.prototype.hasOwnProperty.call(p,l)&&(o=M[l]))for(R=p[l],r=0;r<R.length;r++)N=R[r],(A=o.children.indexOf(N))>=0&&o.children.splice(A,1);for(l in m("apply"),a=g,_)Object.prototype.hasOwnProperty.call(_,l)&&(e[l]=_[l]);var B=null;for(l in p)if(Object.prototype.hasOwnProperty.call(p,l)&&(o=M[l])){R=p[l];var V=[];for(n=0;n<R.length;n++)if(N=R[n],i=o.hot._acceptedDependencies[N]){if(-1!==V.indexOf(i))continue;V.push(i)}for(n=0;n<V.length;n++){i=V[n];try{i(R)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:l,dependencyId:R[n],error:e}),t.ignoreErrored||B||(B=e)}}}for(n=0;n<w.length;n++){var U=w[n];l=U.module,c=[l];try{I(l)}catch(e){if("function"==typeof U.errorHandler)try{U.errorHandler(e)}catch(i){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:i,originalError:e}),t.ignoreErrored||B||(B=i),B||(B=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:l,error:e}),t.ignoreErrored||B||(B=e)}}return B?(m("fail"),Promise.reject(B)):(m("idle"),new Promise((function(e){e(y)})))}var M={},x={0:0},A=[];function I(t){if(M[t])return M[t].exports;var i=M[t]={i:t,l:!1,exports:{},hot:d(t),parents:(u=c,c=[],u),children:[]};return e[t].call(i.exports,i,i.exports,function(e){var t=M[e];if(!t)return I;var i=function(i){return t.hot.active?(M[i]?-1===M[i].parents.indexOf(e)&&M[i].parents.push(e):(c=[e],r=i),-1===t.children.indexOf(i)&&t.children.push(i)):(console.warn("[HMR] unexpected require("+i+") from disposed module "+e),c=[]),I(i)},n=function(e){return{configurable:!0,enumerable:!0,get:function(){return I[e]},set:function(t){I[e]=t}}};for(var o in I)Object.prototype.hasOwnProperty.call(I,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(i,o,n(o));return i.e=function(e){return"ready"===f&&m("prepare"),v++,I.e(e).then(t,(function(e){throw t(),e}));function t(){v--,"prepare"===f&&(b[e]||T(e),0===v&&0===_&&S())}},i.t=function(e,t){return 1&t&&(e=i(e)),I.t(e,-2&t)},i}(t)),i.l=!0,i.exports}I.m=e,I.c=M,I.d=function(e,t,i){I.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},I.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},I.t=function(e,t){if(1&t&&(e=I(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(I.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)I.d(i,n,function(t){return e[t]}.bind(null,n));return i},I.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return I.d(t,"a",t),t},I.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},I.p="/beta/apps/policies/",I.h=function(){return a};var w=window.webpackJsonp=window.webpackJsonp||[],N=w.push.bind(w);w.push=t,w=w.slice();for(var R=0;R<w.length;R++)t(w[R]);var D=N;A.push([616,1,3,2,4]),i()}({1043:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionLexer=void 0;const a=i(269),l=i(151),s=i(263),c=i(153),u=o(i(115));class d extends l.Lexer{constructor(e){super(e),this._interp=new s.LexerATNSimulator(d._ATN,this)}get vocabulary(){return d.VOCABULARY}get grammarFileName(){return"Expression.g4"}get ruleNames(){return d.ruleNames}get serializedATN(){return d._serializedATN}get channelNames(){return d.channelNames}get modeNames(){return d.modeNames}static get _ATN(){return d.__ATN||(d.__ATN=(new a.ATNDeserializer).deserialize(u.toCharArray(d._serializedATN))),d.__ATN}}t.ExpressionLexer=d,d.T__0=1,d.T__1=2,d.T__2=3,d.T__3=4,d.T__4=5,d.OR=6,d.AND=7,d.NOT=8,d.EQUAL=9,d.NOTEQUAL=10,d.CONTAINS=11,d.MATCHES=12,d.NEG=13,d.GT=14,d.GTE=15,d.LT=16,d.LTE=17,d.IN=18,d.QUOTED_NUMBER=19,d.NUMBER=20,d.FLOAT=21,d.INTEGER=22,d.SIMPLETEXT=23,d.STRING=24,d.WS=25,d.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],d.modeNames=["DEFAULT_MODE"],d.ruleNames=["T__0","T__1","T__2","T__3","T__4","OR","AND","NOT","EQUAL","NOTEQUAL","CONTAINS","MATCHES","NEG","GT","GTE","LT","LTE","IN","QUOTED_NUMBER","NUMBER","FLOAT","INTEGER","SIMPLETEXT","STRING","WS","ESC","UNICODE","HEX","ESC_DOT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","NEG_OP"],d._LITERAL_NAMES=[void 0,"'('","')'","'['","','","']'",void 0,void 0,void 0,"'='","'!='",void 0,void 0,void 0,"'>'","'>='","'<'","'<='"],d._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,"OR","AND","NOT","EQUAL","NOTEQUAL","CONTAINS","MATCHES","NEG","GT","GTE","LT","LTE","IN","QUOTED_NUMBER","NUMBER","FLOAT","INTEGER","SIMPLETEXT","STRING","WS"],d.VOCABULARY=new c.VocabularyImpl(d._LITERAL_NAMES,d._SYMBOLIC_NAMES,[]),d._serializedATN="ì¤ìªºÖê¾ºä½“Ø‡îª‹ì‰Ä¯\b\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t !\t!\"\t\"#\t#$\t$%\t%&\t&'\t'(\t()\t)*\t*+\t+,\t,-\t-.\t./\t/0\t01\t12\t23\t34\t45\t56\t67\t78\t89\t9\b\b\b\b\t\t\t\t\n\n\v\v\v\f\f\f\f\f\f\f\f\f\r\r\r\r\r\r\r\rÂ¶\nÂ»\nÃ‚\n\rÃƒÃ‰\n\fÃŒ\vÃ‘\n\fÃ”\vÃš\n\fÃ\vÃ \nÃ£\n\rÃ¤Ã­\n  !!\"\"##$$%%&&''(())**++,,--..//00112233445566778899:\t\v\r\b\t\n\v\f\r!#%')+-/13579;=?ACEGIKMOQSUWY[]_acegikmoq$2;002;C\\aac|/02;C\\aac|))^^$$^^\v\f\"\"\n))11^^ddhhppttvv2;CHchCCccDDddEEeeFFffGGggHHhhIIiiJJjjKKkkLLllMMmmNNnnOOooPPppQQqqRRrrSSssTTttUUuuVVvvWWwwXXxxYYyyZZzz[[{{\\\\||Äœ\t\v\r!#%')+-/13suw\ty\v{\r}Â€Â„ÂˆÂŠÂÂ–ÂÂ Â¢!Â¥#Â§%Âª'Âµ)Â·+Â¼-Ã/Ã…1ÃŸ3Ã¢5Ã¨7Ã®9Ã´;Ã¶=Ã¹?Ã»AÃ½CÃ¿EÄGÄƒIÄ…KÄ‡MÄ‰OÄ‹QÄSÄUÄ‘WÄ“YÄ•[Ä—]Ä™_Ä›aÄcÄŸeÄ¡gÄ£iÄ¥kÄ§mÄ©oÄ«qÄ­st*tuv+vwx]x\byz.z\n{|_|\f}~Y-~_0Â€Â=ÂÂ‚W,Â‚ÂƒC\"ÂƒÂ„Â…W,Â…Â†Y-Â†Â‡c2Â‡ÂˆÂ‰?Â‰ÂŠÂ‹#Â‹ÂŒ?ÂŒÂÂA!ÂÂY-ÂÂW,ÂÂ‘c2Â‘Â’=Â’Â“M'Â“Â”W,Â”Â•a1Â•Â–Â—U+Â—Â˜=Â˜Â™c2Â™ÂšA!ÂšÂ›K&Â›ÂœE#ÂœÂa1ÂÂÂŸq9ÂŸÂ Â¡@Â¡Â¢Â£@Â£Â¤?Â¤ Â¥Â¦>Â¦\"Â§Â¨>Â¨Â©?Â©$ÂªÂ«M'Â«Â¬W,Â¬&Â­Â®)Â®Â¯)Â¯Â°)Â°Â¶Â±Â²$Â²Â³)Â³Â´$Â´Â¶ÂµÂ­ÂµÂ±Â¶(Â·Âº-Â¸Â¹0Â¹Â»-ÂºÂ¸ÂºÂ»Â»*Â¼Â½-Â½Â¾0Â¾Â¿-Â¿,Ã€Ã‚\tÃÃ€Ã‚ÃƒÃƒÃÃƒÃ„Ã„.Ã…ÃŠ\tÃ†Ã‰\tÃ‡Ã‰;ÃˆÃ†ÃˆÃ‡Ã‰ÃŒÃŠÃˆÃŠÃ‹Ã‹0ÃŒÃŠÃÃ’)ÃÃ‘5ÃÃ‘\nÃÃÃÃÃ‘Ã”Ã’ÃÃ’Ã“Ã“Ã•Ã”Ã’Ã•Ã )Ã–Ã›$Ã—Ãš5Ã˜Ãš\nÃ™Ã—Ã™Ã˜ÃšÃÃ›Ã™Ã›ÃœÃœÃÃÃ›ÃÃ $ÃŸÃÃŸÃ–Ã 2Ã¡Ã£\tÃ¢Ã¡Ã£Ã¤Ã¤Ã¢Ã¤Ã¥Ã¥Ã¦Ã¦Ã§\bÃ§4Ã¨Ã¬^Ã©Ã­\t\bÃªÃ­7Ã«Ã­q9Ã¬Ã©Ã¬ÃªÃ¬Ã«Ã­6Ã®Ã¯wÃ¯Ã°9Ã°Ã±9Ã±Ã²9Ã²Ã³9Ã³8Ã´Ãµ\t\tÃµ:Ã¶Ã·^Ã·Ã¸0Ã¸<Ã¹Ãº\t\nÃº>Ã»Ã¼\t\vÃ¼@Ã½Ã¾\t\fÃ¾BÃ¿Ä€\t\rÄ€DÄÄ‚\tÄ‚FÄƒÄ„\tÄ„HÄ…Ä†\tÄ†JÄ‡Äˆ\tÄˆLÄ‰ÄŠ\tÄŠNÄ‹ÄŒ\tÄŒPÄÄ\tÄRÄÄ\tÄTÄ‘Ä’\tÄ’VÄ“Ä”\tÄ”XÄ•Ä–\tÄ–ZÄ—Ä˜\tÄ˜\\Ä™Äš\tÄš^Ä›Äœ\tÄœ`ÄÄ\tÄbÄŸÄ \tÄ dÄ¡Ä¢\tÄ¢fÄ£Ä¤\tÄ¤hÄ¥Ä¦\t Ä¦jÄ§Ä¨\t!Ä¨lÄ©Äª\t\"ÄªnÄ«Ä¬\t#Ä¬pÄ­Ä®#Ä®rÂµÂºÃƒÃˆÃŠÃÃ’Ã™Ã›ÃŸÃ¤Ã¬\b"},1044:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionVisitor=t.ElementType=void 0;const n=i(536),r=i(1045),o=i(564);var a;!function(e){e.FACT="FACT",e.VALUE="VALUE",e.LOGICAL_OPERATOR="LOGICAL_OPERATOR",e.BOOLEAN_OPERATOR="BOOLEAN_OPERATOR",e.NUMERIC_COMPARE_OPERATOR="NUMERIC_COMPARE_OPERATOR",e.OPEN_ROUND_BRACKET="OPEN_ROUND_BRACKET",e.CLOSE_ROUND_BRACKET="CLOSE_ROUND_BRACKET",e.UNKNOWN="UNKNOWN",e.ERROR="ERROR"}(a=t.ElementType||(t.ElementType={}));const l=e=>({type:a.FACT,value:e}),s=e=>({type:a.VALUE,value:e}),c=e=>({type:a.LOGICAL_OPERATOR,value:e}),u=e=>({type:a.BOOLEAN_OPERATOR,value:e}),d=e=>({type:a.OPEN_ROUND_BRACKET,value:e}),p=e=>({type:a.CLOSE_ROUND_BRACKET,value:e}),f=e=>({type:a.NUMERIC_COMPARE_OPERATOR,value:e}),m=e=>({type:a.ERROR,value:e}),y=e=>({type:a.UNKNOWN,value:e}),h=e=>0===e.length?void 0:e[0],g=e=>0===e.length?void 0:e[e.length-1];class _ extends r.AbstractParseTreeVisitor{defaultResult(){return[]}aggregateResult(e,t){const i=g(e.filter(e=>e.type!==a.ERROR)),n=h(t.filter(e=>e.type!==a.ERROR));return i&&n&&i.type===a.LOGICAL_OPERATOR&&n.type===a.LOGICAL_OPERATOR&&(n.type=a.ERROR),[...e,...t]}visitTerminal(e){return e.symbol.type===n.Token.EOF?[]:"("===e.text?[d("(")]:")"===e.text?[p(")")]:[y(e.text)]}visitErrorNode(e){return"<missing ')'>"===e.text?[p(")")]:[m(e.text)]}visitLogical_operator(e){return[c(e.text)]}visitBoolean_operator(e){return[u(e.text)]}visitNumeric_compare_operator(e){return[f(e.text)]}visitKey(e){var t;const i=e.SIMPLETEXT();if(i)return[l(i.text)];const n=null===(t=e.STRING())||void 0===t?void 0:t.text;return n&&n.length>=2?[l(n.substr(1,n.length-2))]:[l("")]}visitValue(e){const t=e.NUMBER()||e.STRING();if(!t){if(e.parent instanceof o.ExprContext||(e.parent,o.ArrayContext),e.text)return e.childCount>1&&e.start.inputStream&&e.stop?[s(`"${e.start.inputStream.toString().slice(e.start.startIndex,e.stop.stopIndex+1)}"`)]:[s(`"${e.text}"`)];if(e.start.inputStream&&e.stop&&e.stop.text){let t=e.start.inputStream.toString().slice(e.stop.stopIndex+1,e.start.startIndex).trimLeft();return t.startsWith('"')&&!t.endsWith('"')?t+='"':t.startsWith("'")&&!t.endsWith("'")&&(t+="'"),[s(t)]}return this.visitChildren(e)}return[s(t.text)]}visitNumerical_value(e){return[s(e.text)]}}t.ConditionVisitor=_},1049:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=i(25),s=o(i(1)),c=i(43),u=a(i(186)),d=i(33),p=i(61),f=c.style({fontFamily:"monospace",fontSize:"14px",fontStyle:"default"}),m=c.style({marginBottom:5}),y=c.style({marginLeft:20});class h extends s.Component{render(){return s.createElement(l.TextContent,{className:y},s.createElement(l.Text,{component:l.TextVariants.p},d.Messages.wizards.policy.hints.hintParagraph1),s.createElement(l.Text,{component:l.TextVariants.a,className:m,href:u.default.pages.factsDocumentation,target:"_blank",rel:"noopener noreferrer"},d.Messages.wizards.policy.hints.hintLinkTitle),s.createElement(l.Text,{component:l.TextVariants.h5,className:"lg"},d.Messages.wizards.policy.hints.hintSyntaxExamplesSection),s.createElement(l.Text,null,d.Messages.wizards.policy.hints.hintQuestion1),s.createElement(l.Text,{component:l.TextVariants.p,className:f},s.createElement("i",null,d.Messages.wizards.policy.hints.hintQuestion1Ans)),s.createElement(l.Text,null,d.Messages.wizards.policy.hints.hintQuestion2),s.createElement(l.Text,{component:l.TextVariants.p,className:f},s.createElement("i",null,d.Messages.wizards.policy.hints.hintQuestion2Ans)),s.createElement(l.Text,null,d.Messages.wizards.policy.hints.hintQuestion3),s.createElement(l.Text,{component:l.TextVariants.p,className:f},s.createElement("i",null,d.Messages.wizards.policy.hints.hintQuestion3Ans)),s.createElement(l.Text,null,d.Messages.wizards.policy.hints.hintQuestion4),s.createElement(l.Text,{component:l.TextVariants.p,className:f},s.createElement("i",null,d.Messages.wizards.policy.hints.hintQuestion4Ans)))}}t.default=e=>s.createElement(s.Fragment,null,s.createElement(l.StackItem,Object.assign({},p.getOuiaProps("Policy/Wizard/Usage",e)),s.createElement(l.ExpandableSection,{toggleText:d.Messages.wizards.policy.hints.hintTitle},s.createElement(h,null))))},1050:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CreatePolicyStepContextProvider=t.defaultPerPage=void 0;const a=i(22),l=o(i(1)),s=i(135),c=i(499),u=i(413),d=i(565);t.defaultPerPage=5,t.CreatePolicyStepContextProvider=e=>{var i;const[n,r]=l.useState(!1),[o,p]=l.useState({}),f=c.usePolicyFilter(void 0,!1),m=a.useSort(),y=c.usePolicyPage(f.debouncedFilters,t.defaultPerPage,m.sortBy),h=u.useGetPoliciesQuery(y.page,!1);let g=void 0,_=0;"PagedResponseOfPolicy"===(null===(i=h.payload)||void 0===i?void 0:i.type)&&(g=h.payload.value.data,_=h.payload.value.count);const v=c.usePolicyRows(g,h.loading,_,y.page),{query:b}=h;return s.useUpdateEffect(()=>{e.showCreateStep&&b()},[b,y.page,f.debouncedFilters,e.showCreateStep]),e.showCreateStep?l.createElement(d.CreatePolicyStepContext.Provider,{value:{copyPolicy:n,setCopyPolicy:r,copiedPolicy:o,setCopiedPolicy:p,policyFilter:f,policyPage:y,policySort:m,policyQuery:h,policyRows:v}},e.children):l.createElement(l.Fragment,null,e.children)}},1051:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.createPolicyStep=t.CreatePolicyStep=t.useCreatePolicyStep=void 0;const l=i(25),s=i(22),c=i(177),u=o(i(1)),d=i(1),p=i(135),f=o(i(171)),m=i(33),y=i(145),h=i(191),g=i(1052),_=i(565);t.useCreatePolicyStep=()=>{const e=u.useContext(_.CreatePolicyStepContext);if(void 0===e)throw Error("Invalid usage of CreatePolicyStep without valid context");const{copyPolicy:t,setCopyPolicy:i,copiedPolicy:n,setCopiedPolicy:r}=e,o=a(e,["copyPolicy","setCopyPolicy","copiedPolicy","setCopiedPolicy"]),{clearSelection:l}=o.policyRows,{validate:s,validateField:f,setValues:m,setFieldValue:g}=c.useFormikContext(),{setVerifyResponse:v,setMaxStep:b}=d.useContext(h.WizardContext),E=u.useCallback(()=>{i(!1),r({})},[i,r]),P=u.useCallback(()=>{i(!0),r(void 0)},[i,r]);p.useUpdateEffect(()=>{n&&(m(n),t&&v({policy:n,isValid:!0})),b(0),g("isValid",!!n),s&&f("isValid")},[t,n,s,f,g,m,v]),u.useEffect(()=>{t||l()},[t,l]);const O=u.useCallback(e=>{r(y.makeCopyOfPolicy(e))},[r]);return{copyPolicy:t,createFromScratch:E,copyExisting:P,copyFromPolicyHandler:O,copyFromPolicyProps:o}},t.CreatePolicyStep=()=>{const{copyPolicy:e,createFromScratch:i,copyExisting:n,copyFromPolicyHandler:r,copyFromPolicyProps:o}=t.useCreatePolicyStep();return u.createElement(u.Fragment,null,u.createElement(s.Form,{ouiaId:"create-policy-step",className:"pf-c-form"},u.createElement("div",{className:"pf-c-form__group"},u.createElement(l.Title,{headingLevel:"h4",size:"xl",className:"pf-u-mb-sm"},m.Messages.wizards.policy.createPolicy.title),u.createElement(l.Text,{className:s.joinClasses("pf-u-mb-sm","pf-c-title pf-m-sm"),component:l.TextVariants.h6},"Define a new policy:"),u.createElement(l.Radio,{isChecked:!e,name:"new-policy",value:"from-scratch",id:"create-new-custom-policy-from-scratch",onChange:i,label:"From scratch",className:s.joinClasses("pf-u-mb-sm","pf-c-radio")}),u.createElement(l.Radio,{isChecked:e,name:"new-policy",value:"as-copy",id:"create-new-custom-policy-as-copy",onChange:n,label:"As a copy of existing Policy",className:s.joinClasses("pf-u-mb-sm","pf-c-radio")}),e&&u.createElement(u.Fragment,null,u.createElement(g.CopyFromPolicy,Object.assign({onSelect:r},o))))))},t.createPolicyStep=e=>Object.assign({name:m.Messages.wizards.policy.createPolicy.title,component:u.createElement(t.CreatePolicyStep,null),validationSchema:f.object().shape({isValid:f.boolean().oneOf([!0])})},e)},1052:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CopyFromPolicy=void 0;const a=o(i(1)),l=i(135),s=i(493),c=i(411);t.CopyFromPolicy=e=>{var t;const{policyFilter:i,policyPage:n,policySort:r,policyQuery:o,policyRows:u}=e;l.useEffectOnce(()=>{o.payload||o.query()});const d=e.onSelect,p=o.payload,f=u.onSelect,m=a.useCallback((e,t,i)=>{f(e,t,i),p&&"PagedResponseOfPolicy"===p.type&&i&&d(p.value.data[t])},[d,f,p]),{pageCount:y,count:h}="PagedResponseOfPolicy"===(null===(t=o.payload)||void 0===t?void 0:t.type)?{count:o.payload.value.count,pageCount:o.payload.value.data.length}:{count:void 0,pageCount:void 0};return a.createElement(a.Fragment,null,a.createElement(c.PolicyToolbar,{ouiaId:"copy-from-policy-toolbar",onPaginationChanged:n.changePage,page:n.page.index,pageCount:y,perPage:n.page.size,showPerPageOptions:!1,hideActions:!0,hideBulkSelect:!0,filters:i.filters,setFilters:i.setFilters,clearFilters:i.clearFilter,count:h},a.createElement(s.PolicyTable,{ouiaId:"copy-from-policy-table",columnsToShow:["radioSelect","name","actions"],policies:u.rows,onSelect:m,loading:o.loading,loadingRowCount:5,onSort:r.onSort,sortBy:r.sortBy,linkToDetailPolicy:!1})))}},1053:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createDetailsStep=t.DetailsStep=void 0;const a=i(25),l=i(22),s=o(i(1)),c=i(33),u=i(219),d=i(414),p=i(191);t.DetailsStep=()=>s.createElement(l.Form,{ouiaId:"detail-step"},s.createElement(a.Title,{headingLevel:"h4",size:"xl"},c.Messages.wizards.policy.details.title),s.createElement(l.FormTextInput,{ouiaId:"name",maxLength:d.maxPolicyNameLength,isRequired:!0,label:"Name",type:"text",name:"name",id:"name"}),s.createElement(l.FormTextArea,{ouiaId:"description",label:"Description",type:"text",id:"description",name:"description",resizeOrientation:"vertical"})),t.createDetailsStep=e=>Object.assign({name:c.Messages.wizards.policy.details.title,component:s.createElement(t.DetailsStep,null),validationSchema:u.PolicyFormDetails,onNext:(e,t)=>{e.triggerAction(p.WizardActionType.VALIDATE_NAME).then(t).catch(e=>{console.error("Error when validating:",e)})}},e)},1054:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createReviewStep=void 0;const a=i(25),l=i(102),s=i(22),c=i(495),u=i(177),d=o(i(1)),p=i(1),f=i(43),m=i(33),y=i(219),h=i(191),g=i(497),_=i(498),v=f.style(Object.assign(Object.assign({backgroundColor:l.global_BackgroundColor_light_300.var},c.padding(18,14)),{margin:5})),b=()=>{const e=p.useContext(h.WizardContext),{values:t}=u.useFormikContext();return d.createElement(d.Fragment,null,d.createElement(s.Form,{ouiaId:"review-step"},d.createElement(a.Title,{headingLevel:"h2",size:"xl"},m.Messages.wizards.policy.review.title),d.createElement(s.Switch,{ouiaId:"is-enabled",isDisabled:e.isLoading,id:"isEnabled",name:"isEnabled",labelOn:m.Messages.wizards.policy.review.policyIsEnabled,labelOff:m.Messages.wizards.policy.review.policyIsDisabled,label:m.Messages.wizards.policy.review.enableThisPolicy}),d.createElement(a.Title,{headingLevel:"h2",size:"md"},m.Messages.wizards.policy.review.policy.details),d.createElement(s.FormText,{ouiaId:"name",label:m.Messages.wizards.policy.review.policy.name,name:"name",id:"name"}),d.createElement(s.FormText,{ouiaId:"description",label:m.Messages.wizards.policy.review.policy.description,name:"description",id:"description"}),d.createElement("div",{className:v},d.createElement(_.Conditions,{ouiaId:"review-step.conditions",conditions:t.conditions})),d.createElement("div",{className:v},d.createElement(g.Actions,{ouiaId:"review-step.actions",actions:t.actions||[]}))))};t.createReviewStep=e=>Object.assign({name:m.Messages.wizards.policy.review.title,component:d.createElement(b,null),validationSchema:y.PolicyFormSchema},e)},1055:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFacts=void 0;const n=i(1),r=i(1056);t.useFacts=()=>{const[e,t]=n.useState(),{payload:i}=r.useGetFactsQuery(!0);return n.useEffect(()=>{200===(null==i?void 0:i.status)&&t(i.value)},[i,t]),e}},1056:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGetFactsQuery=t.actionCreator=void 0;const n=i(74),r=i(113);t.actionCreator=r.Operations.GetFacts.actionCreator,t.useGetFactsQuery=e=>n.useQuery(t.actionCreator(),e)},1057:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSavePolicyMutation=t.savePolicyActionCreator=void 0;const n=i(22),r=i(217),o=i(74),a=i(113),l=i(145);t.savePolicyActionCreator=e=>e.id?a.Operations.PutPoliciesByPolicyId.actionCreator({policyId:e.id,body:l.toServerPolicy(e)}):a.Operations.PostPolicies.actionCreator({alsoStore:!0,body:l.toServerPolicy(e)});const s=r.validationResponseTransformer(e=>"Policy"===e.type?r.validatedResponse("Policy",e.status,l.toPolicy(e.value),e.errors):e);t.useSavePolicyMutation=()=>n.useTransformQueryResponse(o.useMutation(t.savePolicyActionCreator),s)},1058:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useValidatePolicyNameParametrizedQuery=t.actionCreator=void 0;const n=i(74),r=i(113);t.actionCreator=e=>{var t;return r.Operations.PostPoliciesValidateName.actionCreator({body:null!==(t=e.name)&&void 0!==t?t:"",id:e.id})},t.useValidatePolicyNameParametrizedQuery=()=>n.useParameterizedQuery(t.actionCreator)},1059:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useVerifyPolicyMutation=t.actionCreator=void 0;const n=i(74),r=i(113),o=i(145);t.actionCreator=e=>r.Operations.PostPoliciesValidate.actionCreator({body:o.toServerPolicy(e)}),t.useVerifyPolicyMutation=()=>n.useMutation(t.actionCreator)},1060:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function l(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDeleteModal=void 0;const l=i(22),s=o(i(1));t.PolicyDeleteModal=e=>{const t=s.useCallback(()=>a(void 0,void 0,void 0,(function*(){const t=e.policy,i=e.onDelete,n=e.getPolicies;if(t)return i([t.id]);if(!n)throw new Error("Expected policy or getPolicies to bet set");try{return i(yield n())}catch(e){l.addDangerNotification("Error while removing","An error occurreds while trying to remove the selection, please try again."),console.error("Error while fetching selection",e)}return!1})),[e.onDelete,e.policy,e.getPolicies]),i=s.useMemo(()=>e.policy?s.createElement(s.Fragment,null,"Do you want to remove the policy ",s.createElement("b",null,e.policy.name),"?"):1===e.count?s.createElement(s.Fragment,null,"Do you want to remove the selected policy?"):s.createElement(s.Fragment,null,"Do you want to remove the ",s.createElement("b",null,e.count)," selected policies?"),[e.policy,e.count]);return e.policy||e.getPolicies?s.createElement(l.DeleteModal,{isOpen:!0,isDeleting:e.isDeleting,title:`Remove ${1===e.count?"policy":"policies"}`,content:i,onClose:e.onClose,onDelete:t,error:e.error}):null}},1061:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMassDeletePoliciesMutation=t.actionCreator=void 0;const n=i(74),r=i(113);t.actionCreator=e=>r.Operations.DeletePoliciesIds.actionCreator({body:e}),t.useMassDeletePoliciesMutation=()=>n.useMutation(t.actionCreator)},1062:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ListPageEmptyState=void 0;const a=i(57),l=i(22),s=o(i(1)),c=i(144),u=i(33),d=()=>s.createElement("br",null);t.ListPageEmptyState=e=>s.createElement(c.EmptyStateSection,{icon:a.CubesIcon,title:u.Messages.pages.listPage.emptyState.title,content:l.join(u.Messages.pages.listPage.emptyState.text,d),action:e.createPolicy,actionLabel:"Create policy"})},1063:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useListPageDelete=void 0;const a=i(22),l=o(i(1));t.useListPageDelete=e=>{const{rows:t,onSelect:i,removeSelection:n,clearSelection:r,selectionCount:o}=e.policyRows,{changePage:s}=e.policyPage,{index:c,size:u}=e.policyPage.page,{close:d,policy:p}=e.policyToDelete,{reload:f,count:m}=e;return{onDeleted:l.useCallback(e=>{const r=t.findIndex(t=>t.id===e);-1===r?n(e):i(t[r],r,!1)},[t,i,n]),onCloseDeletePolicy:l.useCallback(e=>{if(e){f();const e=p?1:o,t=a.Page.lastPageForElements(m-e,u);t.index<c&&s(void 0,t.index),r()}d()},[f,m,d,r,s,c,o,u,p])}}},1064:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useTableActionResolverCallback=void 0;const a=o(i(1)),l=i(145);t.useTableActionResolverCallback=e=>{const{canWriteAll:t,openPolicyToDelete:i,mutateChangePolicyEnabled:n,setPolicyWizardState:r}=e;return a.useCallback(e=>t?[{title:e.isEnabled?"Disable":"Enable",onClick:()=>{n({policyIds:[e.id],shouldBeEnabled:!e.isEnabled})}},{title:"Edit",onClick:()=>{r({isOpen:!0,template:e,showCreateStep:!1,isEditing:!0})}},{title:"Duplicate",onClick:()=>{r({isOpen:!0,template:l.makeCopyOfPolicy(e),showCreateStep:!1,isEditing:!1})}},{title:"Remove",onClick:()=>{i(e)}}]:[],[t,i,n,r])}},1065:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useToolbarActions=void 0;const l=i(22),s=i(271),c=a(i(567)),u=o(i(1)),d=i(1066);t.useToolbarActions=e=>{const{setPolicyWizardState:t,exportAllPoliciesQuery:i,mutateChangePolicyEnabled:n,openPolicyToDelete:r}=e,{selected:o,selectionCount:a,getSelected:p,rows:f}=e.policyRows;return{createCustomPolicy:u.useCallback(()=>{t({isOpen:!0,showCreateStep:!0,template:void 0,isEditing:!1})},[t]),onDeletePolicies:u.useCallback(()=>{if(1===a){const e=f.find(e=>o.contains(e.id));if(e)return void r(e)}r(a)},[a,r,o,f]),onDisablePolicies:u.useCallback(()=>p().then(e=>n({shouldBeEnabled:!1,policyIds:e})),[n,p]),onEnablePolicies:u.useCallback(()=>p().then(e=>n({shouldBeEnabled:!0,policyIds:e})),[n,p]),onExport:u.useCallback((e,t)=>{const n=d.policyExporterFactory(l.exporterTypeFromString(t));return i().then(e=>{var t;"PagedResponseOfPolicy"===(null===(t=e.payload)||void 0===t?void 0:t.type)?c.default(n.export(e.payload.value.data),`policies-${s.format(new Date(Date.now()),"y-dd-MM")}.${n.type}`):l.addDangerNotification("Unable to download policies","We were unable to download the policies for exporting")})},[i])}}},1066:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.policyExporterFactory=void 0;const n=i(22),r=i(75),o=i(1067),a=i(1068);t.policyExporterFactory=e=>{switch(e){case n.ExporterType.CSV:return new o.PolicyExporterCsv;case n.ExporterType.JSON:return new a.PolicyExporterJson}r.assertNever(e)}},1067:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyExporterCsv=void 0;const n=i(22),r=i(145);class o extends n.ExporterCsv{serialize(e){return Object.assign(Object.assign({},e),{actions:r.toServerAction(e.actions)})}headers(){return[["id","id"],["name","name"],["description","description"],["isEnabled","isEnabled"],["conditions","conditions"],["actions","actions"],["lastTriggered","lastTriggered"],["mtime","mtime"],["ctime","ctime"]]}}t.PolicyExporterCsv=o},1068:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyExporterJson=void 0;const n=i(22);class r extends n.ExporterJson{}t.PolicyExporterJson=r},1069:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.policyTableError=void 0;const n=i(57),r=i(102),o=i(33);t.policyTableError=(e,t,i)=>{if(t)switch(i){case 404:return{icon:n.PlusCircleIcon,title:o.Messages.tables.policy.emptyState.notFound.title,content:o.Messages.tables.policy.emptyState.notFound.content};case 401:return{icon:n.ExclamationCircleIcon,title:"Refresh your browser",content:"Your session expired while using the application",action:e.refreshPage,actionLabel:"Reload page"};case 500:case 502:return{icon:n.ExclamationCircleIcon,iconColor:r.global_danger_color_200.value,title:"Internal server error",content:"The server was unable to process the request, please try again.",action:e.tryAgain,actionLabel:"Try again"};default:return{icon:n.ExclamationCircleIcon,iconColor:r.global_danger_color_200.value,title:"Unable to connect",content:"There was an error retrieving data. Check your connection and try again.",action:e.tryAgain,actionLabel:"Try again"}}}},1070:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGetListPagePolicies=void 0;const n=i(1),r=i(413);t.useGetListPagePolicies=e=>{const t=r.useGetPoliciesQuery(e,!1),i=r.useHasPoliciesQuery(),[o,a]=n.useState(),l=n.useMemo(()=>!e.hasFilter()&&1===e.index,[e]),s=n.useCallback(()=>{const e=t.query,n=i.query;return e().then(e=>{if(404===e.status){if(!l)return a(void 0),n().then(t=>(404===t.status?a(!1):200===t.status?a(!0):a(void 0),e));a(!1)}else 200===e.status?a(!0):a(void 0);return e})},[t.query,i.query,l]),c=n.useCallback(()=>{const e=t.abort,n=i.abort;e(),n()},[t.abort,i.abort]),u=n.useCallback(()=>{const e=t.reset,n=i.reset;e(),n()},[t.reset,i.reset]);return Object.assign(Object.assign({},t),{query:s,abort:c,reset:u,status:t.status,loading:i.loading||t.loading,errorObject:i.errorObject||t.errorObject,error:i.error||t.error,hasPolicies:o})}},1071:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetail=void 0;const a=i(25),l=i(133),s=i(22),c=o(i(1)),u=i(1),d=i(492),p=i(156),f=i(43),m=i(247),y=i(494),h=i(506),g=i(33),_=i(170),v=i(1072),b=i(507),E=i(508),P=i(566),O=i(490),C=i(1073),T=i(1074),S=i(1075),j=i(1076),M=i(1077),x=i(1078),A=i(1079),I=i(1080),w=f.style({paddingBottom:8,paddingTop:16});t.PolicyDetail=()=>{var e,t;const{policyId:i,policy:n,setPolicy:r}=j.usePolicy(),o=u.useContext(m.AppContext),{canWriteAll:f,canReadAll:N}=o.rbac,R=p.useHistory(),D=h.usePolicyToDelete(),k=v.useGetPolicyParametrizedQuery(),L=b.useMassChangePolicyEnabledMutation(),F=M.useWizardState(n),B=c.useRef(null),V=c.useCallback(e=>{var t;"Policy"===(null===(t=e.payload)||void 0===t?void 0:t.type)&&r(e.payload.value)},[r]);c.useEffect(()=>{const e=k.query;i!==(null==n?void 0:n.id)&&e(i).then(V)},[i,k.query,n,r,V]);const U=c.useCallback(e=>{const t=F.close;e&&r(e),t()},[r,F.close]),G=c.useCallback(()=>{const e=D.open;n&&e(n)},[n,D.open]),z=c.useCallback(e=>{const t=D.close;e?R.push(_.linkTo.listPage()):t()},[R,D.close]),H=c.useCallback(e=>{n&&r(Object.assign(Object.assign({},n),{isEnabled:e}))},[n,r]),Q=c.useCallback(e=>{(0,L.mutate)({policyIds:[i],shouldBeEnabled:e}).then(t=>{var n;200===(null===(n=t.payload)||void 0===n?void 0:n.status)?t.payload.value.includes(i)?H(e):s.addDangerNotification(g.Messages.pages.policyDetail.errorChangingEnabledStatus.notFound.title,g.Messages.pages.policyDetail.errorChangingEnabledStatus.notFound.text):s.addDangerNotification(g.Messages.pages.policyDetail.errorChangingEnabledStatus.else.title,g.Messages.pages.policyDetail.errorChangingEnabledStatus.else.text)})},[i,L.mutate,H]);if(!N)return c.createElement(O.NoPermissionsPage,null);if(void 0===n){if(404===k.status)return c.createElement(T.PolicyDetailEmptyState,{policyId:i||""});if(!k.loading&&"Policy"!==(null===(e=k.payload)||void 0===e?void 0:e.type)){let e=`code: ${k.status}`;return"Msg"===(null===(t=k.payload)||void 0===t?void 0:t.type)&&k.payload.value.msg&&(e=k.payload.value.msg),c.createElement(S.PolicyDetailErrorState,{action:()=>{var e;null===(e=B.current)||void 0===e||e.refresh(),k.query(i).then(V)},error:e})}return c.createElement(A.PolicyDetailSkeleton,null)}return c.createElement(c.Fragment,null,c.createElement(d.Helmet,null,c.createElement("title",null,n.name," - Policies | Red Hat Insights")),c.createElement(l.PageHeader,null,c.createElement(a.Stack,null,c.createElement(a.StackItem,null,c.createElement(a.Breadcrumb,null,c.createElement(s.BreadcrumbLinkItem,{ouiaId:"to-list-page",to:_.linkTo.listPage()},"Policies"),c.createElement(a.BreadcrumbItem,{to:"#",isActive:!0},n.name))),c.createElement(a.StackItem,null,c.createElement(a.Split,null,c.createElement(a.SplitItem,{isFilled:!0},c.createElement(l.PageHeaderTitle,{title:n.name})),c.createElement(a.SplitItem,null,c.createElement(C.PolicyDetailActions,{isEnabled:n.isEnabled,disabled:!f,edit:F.edit,duplicate:F.duplicate,delete:G,changeEnabled:Q,loadingEnabledChange:L.loading})))))),c.createElement(l.Main,null,c.createElement(s.Section,{ouiaId:"policy-detail",style:{paddingBottom:"4px"}},c.createElement(x.PolicyDetailIsEnabled,{isEnabled:n.isEnabled,loading:L.loading}),c.createElement(y.ExpandedContent,{actions:n.actions,description:n.description,created:n.ctime,updated:n.mtime,conditions:n.conditions})),c.createElement("div",{className:w},c.createElement(a.Title,{headingLevel:"h2",size:"lg"},"Recent trigger history")),c.createElement(I.TriggerDetailSection,{policyId:i,ref:B})),F.data.isOpen&&c.createElement(E.CreatePolicyWizard,{isOpen:!0,close:U,showCreateStep:!1,policiesExist:!1,initialValue:F.data.initialValue,isEditing:F.data.isEditing}),D.isOpen&&c.createElement(P.DeletePolicy,{onClose:z,loading:!1,count:D.count,policy:D.policy}))}},1072:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGetPolicyParametrizedQuery=t.useGetPolicyQuery=t.actionCreator=void 0;const n=i(22),r=i(217),o=i(74),a=i(113),l=i(145);t.actionCreator=e=>a.Operations.GetPoliciesById.actionCreator({id:e});const s=r.validationResponseTransformer(e=>"Policy"===e.type?r.validatedResponse("Policy",e.status,l.toPolicy(e.value),e.errors):e);t.useGetPolicyQuery=(e,i=!0)=>n.useTransformQueryResponse(o.useQuery(t.actionCreator(e),i),s),t.useGetPolicyParametrizedQuery=()=>n.useTransformQueryResponse(o.useParameterizedQuery(t.actionCreator),s)},1073:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetailActions=void 0;const a=i(25),l=o(i(1));t.PolicyDetailActions=e=>{const[t,i]=l.useState(!1),n=l.useCallback(()=>{i(!1)},[]),r=l.useMemo(()=>{const t=e.changeEnabled,i=[];return e.isEnabled?i.push(l.createElement(a.DropdownItem,{isDisabled:e.loadingEnabledChange,onClick:()=>t(!1),key:"disable"},"Disable")):i.push(l.createElement(a.DropdownItem,{isDisabled:e.loadingEnabledChange,onClick:()=>t(!0),key:"enable"},"Enable")),i.push(l.createElement(a.DropdownItem,{key:"edit",onClick:e.edit},"Edit"),l.createElement(a.DropdownItem,{key:"duplicate",onClick:e.duplicate},"Duplicate"),l.createElement(a.DropdownItem,{key:"delete",onClick:e.delete},"Remove")),i},[e.isEnabled,e.changeEnabled,e.edit,e.duplicate,e.delete,e.loadingEnabledChange]);return l.createElement(a.Dropdown,{position:a.DropdownPosition.right,onSelect:n,toggle:l.createElement(a.KebabToggle,{"data-testid":"policy-detail-actions-button",isDisabled:e.disabled,onToggle:i,id:"policy-detail-actions-menu"}),isOpen:t,isPlain:!0,dropdownItems:r})}},1074:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetailEmptyState=void 0;const a=i(57),l=o(i(1)),s=i(156),c=i(568),u=i(144),d=i(33),p=i(170);t.PolicyDetailEmptyState=e=>{const t=s.useHistory(),i=l.useCallback(()=>{t.push(p.linkTo.listPage())},[t]);return l.createElement(u.EmptyStateSection,{icon:a.UnknownIcon,title:d.Messages.pages.policyDetail.emptyState.title,content:c.format(d.Messages.pages.policyDetail.emptyState.text,e.policyId),actionLabel:d.Messages.pages.policyDetail.emptyState.backText,action:i})}},1075:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetailErrorState=void 0;const a=i(57),l=i(102),s=o(i(1)),c=i(144),u=i(569),d=i(33);t.PolicyDetailErrorState=e=>{const t=u.useTextFormat(d.Messages.pages.policyDetail.errorState.text,[e.error]);return s.createElement(c.EmptyStateSection,{icon:a.ExclamationCircleIcon,iconColor:l.global_danger_color_100.value,title:d.Messages.pages.policyDetail.errorState.title,content:t,action:e.action,actionLabel:d.Messages.pages.policyDetail.errorState.actionText})}},1076:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.usePolicy=void 0;const a=o(i(1)),l=i(1),s=i(48),c=i(105),u=i(135),d=i(170);t.usePolicy=()=>{const{policyId:e}=c.useParams(),t=u.usePrevious(e),i=c.useHistory(),[n,r]=a.useState(),o=(null==n?void 0:n.id)||e,p=a.useCallback((e,t)=>{s.unstable_batchedUpdates(()=>{r(t),i.push(d.linkTo.policyDetail(e))})},[i,r]),f=a.useCallback(t=>{e!==t.id?p(t.id,t):r(t)},[p,e]);return l.useEffect(()=>{t!==e&&(n&&n.id===e||r(void 0))},[e,t,p,i,n,o]),{policyId:o,policy:n,setPolicy:f}}},1077:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useWizardState=void 0;const a=i(75),l=o(i(1)),s=i(1),c=i(145);var u;!function(e){e[e.EDIT=0]="EDIT",e[e.DUPLICATE=1]="DUPLICATE",e[e.CLOSE=2]="CLOSE"}(u||(u={}));const d={isEditing:!1,initialValue:void 0,isOpen:!1};t.useWizardState=e=>{const[t,i]=l.useReducer((t,i)=>{if(!e)return d;switch(i){case u.CLOSE:return d;case u.DUPLICATE:return{isEditing:!1,initialValue:c.makeCopyOfPolicy(e),isOpen:!0};case u.EDIT:return{isEditing:!0,initialValue:e,isOpen:!0};default:return a.assertNever(i)}},d);return{data:t,close:s.useCallback(()=>i(u.CLOSE),[i]),duplicate:s.useCallback(()=>i(u.DUPLICATE),[i]),edit:s.useCallback(()=>i(u.EDIT),[i])}}},1078:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetailIsEnabled=void 0;const a=i(25),l=i(102),s=o(i(1)),c=i(43),u=i(248),d=c.style({marginLeft:l.global_spacer_md.var});t.PolicyDetailIsEnabled=e=>{if(e.loading)return s.createElement(a.Stack,{"data-testid":"loading"},s.createElement(a.StackItem,null,s.createElement(a.Skeleton,{width:"140px"})));const{icon:t,text:i}=e.isEnabled?{icon:s.createElement(u.EnabledPolicyIcon,null),text:"Enabled"}:{icon:s.createElement(u.DisabledPolicyIcon,null),text:"Disabled"};return s.createElement(a.Stack,null,s.createElement(a.StackItem,null,t,s.createElement("span",{className:d},i)))}},1079:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetailSkeleton=void 0;const a=i(25),l=i(57),s=i(133),c=i(22),u=o(i(1)),d=i(43),p=i(170),f=d.style({width:200});t.PolicyDetailSkeleton=()=>u.createElement(u.Fragment,null,u.createElement(s.PageHeader,{"data-testid":"policy-loading"},u.createElement(a.Stack,null,u.createElement(a.StackItem,null,u.createElement(a.Breadcrumb,null,u.createElement(c.BreadcrumbLinkItem,{ouiaId:"to-list-page",to:p.linkTo.listPage()},"Policies"),u.createElement(a.BreadcrumbItem,null,u.createElement(a.Skeleton,{className:f})))),u.createElement(a.StackItem,null,u.createElement(a.Split,null,u.createElement(a.SplitItem,{isFilled:!0},u.createElement(s.PageHeaderTitle,{title:u.createElement(a.Skeleton,{width:"25%"})})),u.createElement(a.SplitItem,null,u.createElement(a.Button,{isDisabled:!0,variant:a.ButtonVariant.plain},u.createElement(l.EllipsisVIcon,null))))))),u.createElement(s.Main,null,u.createElement(c.Section,{ouiaId:"loading-spinner"},u.createElement(a.Bullseye,null,u.createElement(s.Spinner,{centered:!0})))))},1080:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerDetailSection=void 0;const l=i(22),s=i(271),c=a(i(567)),u=o(i(1)),d=i(1),p=i(1081),f=i(570),m=i(1082),y=a(i(186)),h=i(1083),g=i(1086),_=i(1088),v=i(1089),b=i(1090),E=i(1091),P=i(1092),O=l.Sort.by("ctime",l.Direction.DESCENDING),C=e=>{var t;return e.errorContent?u.createElement(u.Fragment,null," ",e.errorContent," "):e.payload&&e.payload.count>0||e.loading?u.createElement(p.TriggerTable,{rows:null===(t=e.payload)||void 0===t?void 0:t.data,onSort:e.sort.onSort,sortBy:e.sort.sortBy,loading:e.loading}):u.createElement(f.TriggerTableEmptyState,null)};t.TriggerDetailSection=d.forwardRef((e,t)=>{var i;const{policyId:n}=e,r=v.useTriggerFilter(),o=_.useGetPolicyDetailTriggerHistory(),a=u.useMemo(()=>{const e=o.payload;if("PagedTriggers"===(null==e?void 0:e.type))return e.value},[o.payload]),[p,f]=u.useState(y.default.defaultElementsPerPage),T=l.useSort(O),{page:S,onPaginationChanged:j}=b.useTriggerPage(p,T.sortBy,r.debouncedFilters),M=d.useCallback(()=>{const e=o.query;n&&e({policyId:n,page:S})},[n,o.query,S]);u.useEffect(()=>{M()},[M]),u.useImperativeHandle(t,()=>({refresh:M}),[M]);const x=g.useGetAllTriggers(n,S.filter),A=u.useCallback(e=>{const t=h.triggerExporterFactory(l.exporterTypeFromString(e));x().then(e=>{e.length>0&&c.default(t.export(e),`policy-${n}-triggers-${s.format(new Date(Date.now()),"y-dd-MM")}.${t.type}`)})},[x,n]),I=u.useCallback((e,t)=>{f(t)},[f]);let w;return!o.loading&&o.error&&404!==o.status&&(w=u.createElement(P.TriggerErrorState,{action:M,error:`code: ${o.status}`})),u.createElement(l.Section,{ouiaId:"trigger-detail-section"},!1===o.hasTriggers?u.createElement(E.PolicyDetailTriggerEmptyState,null):u.createElement(u.Fragment,null,u.createElement(m.TriggerTableToolbar,{count:null==a?void 0:a.count,page:S,onPaginationChanged:j,onPaginationSizeChanged:I,pageCount:null===(i=null==a?void 0:a.data)||void 0===i?void 0:i.length,filters:r.filters,setFilters:r.setFilters,clearFilters:r.clearFilter,onExport:A},u.createElement(C,{loading:o.loading,payload:a,sort:T,errorContent:w}))))})},1081:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerTable=void 0;const l=i(436),s=i(133),c=i(22),u=a(i(234)),d=o(i(1)),p=i(33),f=i(61),m=i(570),y=[{title:p.Messages.tables.trigger.columns.date,transforms:[l.sortable],cellTransforms:[l.nowrap]},{title:p.Messages.tables.trigger.columns.system,transforms:[l.sortable],cellTransforms:[l.wrappable,l.breakWord]}],h=e=>c.localUrl(`/insights/inventory/${e}/`,c.getInsights().chrome.isBeta());t.TriggerTable=e=>{const t=d.useMemo(()=>{const t=e.rows;return t?t.map((e,t)=>({id:`${e.id}-${t}`,key:`${e.id}-${t}`,cells:[{title:d.createElement(l.TableText,null,u.default(c.toUtc(e.created),"dd MMM yyyy HH:mm:ss")," UTC")},{title:e.id?d.createElement(l.TableText,null,d.createElement("a",{href:h(e.id)},e.hostName)):d.createElement(l.TableText,null,e.hostName)}]})):[]},[e.rows]),i=d.useCallback((t,i,n)=>{const r=e.onSort;if(r){r(i,0===i?"ctime":"name",n===l.SortByDirection.asc?c.Direction.ASCENDING:c.Direction.DESCENDING)}},[e.onSort]),n=d.useMemo(()=>{if(e.sortBy)return{index:"ctime"===e.sortBy.column?0:1,direction:e.sortBy.direction===c.Direction.ASCENDING?"asc":"desc"}},[e.sortBy]);return e.loading?d.createElement(s.SkeletonTable,{testID:"trigger-table-loading",rowSize:10,columns:y,sortBy:n}):0===t.length?d.createElement(m.TriggerTableEmptyState,null):d.createElement("div",Object.assign({},f.getOuiaProps("Trigger/Table",e)),d.createElement(l.Table,{"aria-label":p.Messages.tables.trigger.title,rows:t,cells:y,onSort:i,sortBy:n},d.createElement(l.TableHeader,null),d.createElement(l.TableBody,null)))}},1082:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerTableToolbar=void 0;const a=i(25),l=i(133),s=i(22),c=o(i(1)),u=i(61),d=i(435),p={[d.TriggerFilterColumn.NAME]:{label:"System",placeholder:"Filter by System"}};t.TriggerTableToolbar=e=>{const t=s.usePrimaryToolbarFilterConfig(d.TriggerFilterColumn,e.filters,e.setFilters,e.clearFilters,p),i=c.useMemo(()=>({itemCount:e.count||0,page:e.page.index,perPage:e.page.size,perPageOptions:void 0,onSetPage:e.onPaginationChanged,onFirstClick:e.onPaginationChanged,onPreviousClick:e.onPaginationChanged,onNextClick:e.onPaginationChanged,onLastClick:e.onPaginationChanged,onPageInput:e.onPaginationChanged,onPerPageSelect:e.onPaginationSizeChanged,isCompact:!0,variant:a.PaginationVariant.top}),[e.onPaginationChanged,e.page,e.count,e.onPaginationSizeChanged]),n=c.useMemo(()=>({itemCount:e.count||0,page:e.page.index,perPage:e.page.size,perPageOptions:void 0,onSetPage:e.onPaginationChanged,onFirstClick:e.onPaginationChanged,onPreviousClick:e.onPaginationChanged,onNextClick:e.onPaginationChanged,onLastClick:e.onPaginationChanged,onPageInput:e.onPaginationChanged,onPerPageSelect:e.onPaginationSizeChanged,isCompact:!1,variant:a.PaginationVariant.bottom}),[e.onPaginationChanged,e.page,e.count,e.onPaginationSizeChanged]),r=c.useMemo(()=>{const t=e.onExport;return{extraItems:[],onSelect:(e,i)=>{t(s.exporterTypeFromString(i))},"data-testid":"trigger-toolbar-export-container"}},[e.onExport]);return c.createElement("div",Object.assign({},u.getOuiaProps("Trigger/TableDualToolbar",e)),c.createElement(l.PrimaryToolbar,{pagination:i,exportConfig:r,filterConfig:t.filterConfig,activeFiltersConfig:t.activeFiltersConfig}),e.children,c.createElement(l.PrimaryToolbar,{pagination:n}))}},1083:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerExporterFactory=void 0;const n=i(22),r=i(75),o=i(1084),a=i(1085);t.triggerExporterFactory=e=>{switch(e){case n.ExporterType.CSV:return new o.TriggerExporterCsv;case n.ExporterType.JSON:return new a.TriggerExporterJson}r.assertNever(e)}},1084:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerExporterCsv=void 0;const n=i(22);class r extends n.ExporterCsv{serialize(e){return Object.assign({},e)}headers(){return[["created","ctime"],["hostName","system"],["id","id"]]}}t.TriggerExporterCsv=r},1085:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerExporterJson=void 0;const n=i(22);class r extends n.ExporterJson{}t.TriggerExporterJson=r},1086:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function l(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useGetAllTriggers=void 0;const r=i(22),o=i(1),a=i(74),l=i(571);t.useGetAllTriggers=(e,t)=>{const i=a.useClient();return o.useCallback(()=>new Promise(o=>n(void 0,void 0,void 0,(function*(){const n=[];let a=r.Page.of(1,200,t);for(;;){const t=yield i.query(l.actionCreator({policyId:e,page:a}));if(t.payload){const e=l.dataToTriggers(t.payload);if("PagedTriggers"===e.type&&e.value.data){if(n.push(...e.value.data),(a=a.nextPage()).index>r.Page.lastPageForElements(e.value.count,a.size).index)break;continue}}break}o(n)}))),[i,e,t])}},1087:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.toTriggers=t.toTrigger=void 0;const r=n(i(249));t.toTrigger=e=>({id:e.id||"",hostName:e.hostName||"",created:e.ctime?r.default(e.ctime/1e3):new Date(Date.now())}),t.toTriggers=e=>e?e.map(t.toTrigger):[]},1088:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGetPolicyDetailTriggerHistory=void 0;const n=i(1),r=i(571);t.useGetPolicyDetailTriggerHistory=()=>{const e=r.useGetPolicyTriggersParametrizedQuery(),t=r.useHasPolicyTriggersParametrizedQuery(),[i,o]=n.useState(),a=n.useCallback((...i)=>{const[{policyId:n,page:r}]=i,a=e.query,l=t.query,s=!r.hasFilter()&&1===r.index;return a({policyId:n,page:r}).then(e=>{if(404===e.status){if(!s)return o(void 0),l(n).then(t=>(404===t.status?o(!1):200===t.status?o(!0):o(void 0),e));o(!1)}else 200===e.status?o(!0):o(void 0);return e})},[e.query,t.query]),l=n.useCallback(()=>{const i=e.abort,n=t.abort;i(),n()},[e.abort,t.abort]),s=n.useCallback(()=>{const i=e.reset,n=t.reset;i(),n()},[e.reset,t.reset]);return Object.assign(Object.assign({},e),{query:a,abort:l,reset:s,status:e.status,loading:t.loading||e.loading,errorObject:t.errorObject||e.errorObject,error:t.error||e.error,hasTriggers:i})}},1089:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTriggerFilter=void 0;const n=i(22),r=i(75),o=i(435),a=e=>n.useUrlStateString("system",e),l=e=>{switch(e){case o.TriggerFilterColumn.NAME:return a;default:r.assertNever(e)}};t.useTriggerFilter=(e=250)=>n.useFilters(o.TriggerFilterColumn,e,l)},1090:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useTriggerPage=void 0;const a=i(22),l=o(i(1)),s=i(1),c=i(435);t.useTriggerPage=(e,t,i)=>{const n=l.useMemo(()=>{const e=new a.Filter,t=a.stringValue(i[c.TriggerFilterColumn.NAME]);return t&&""!==t.trim()&&e.and("name",a.Operator.LIKE,t.trim()),e},[i]),[r,o]=l.useState(()=>a.Page.of(1,e,n,t));return s.useEffect(()=>{o(e=>e.sort!==t?a.Page.of(e.index,e.size,e.filter,t):e)},[t]),s.useEffect(()=>{o(e=>e.filter!==n?a.Page.of(1,e.size,n,e.sort):e)},[n]),s.useEffect(()=>{o(t=>t.size!==e?a.Page.of(1,e,t.filter,t.sort):t)},[e]),{page:r,onPaginationChanged:l.useCallback((e,t)=>{o(e=>e.withPage(t))},[o])}}},1091:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetailTriggerEmptyState=void 0;const a=o(i(1)),l=i(144),s=i(33);t.PolicyDetailTriggerEmptyState=()=>a.createElement(l.EmptyStateSection,{title:s.Messages.pages.policyDetail.triggerEmptyState.title,content:s.Messages.pages.policyDetail.triggerEmptyState.text})},1092:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerErrorState=void 0;const a=i(57),l=i(102),s=o(i(1)),c=i(144),u=i(569),d=i(33);t.TriggerErrorState=e=>{const t=u.useTextFormat(d.Messages.pages.policyDetail.triggerErrorState.text,[e.error]);return s.createElement(c.EmptyStateSection,{icon:a.ExclamationCircleIcon,iconColor:l.global_danger_color_100.value,title:d.Messages.pages.policyDetail.triggerErrorState.title,content:t,action:e.action,actionLabel:d.Messages.pages.policyDetail.triggerErrorState.actionText})}},1093:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useApp=void 0;const r=i(22),o=i(1),a=i(156),l=n(i(186)),s=i(1094);t.useApp=()=>{const e=a.useHistory(),[t,i]=o.useState(void 0),n=s.useUserSettings(9e5);return o.useEffect(()=>(r.waitForInsights().then(e=>{e.chrome.init(),e.chrome.identifyApp(l.default.appId),e.chrome.hasOwnProperty("hideGlobalFilter")&&e.chrome.hideGlobalFilter&&e.chrome.hideGlobalFilter()}),()=>{r.getInsights().chrome.on("APP_NAVIGATION",t=>e.push(`/${t.navId}`))}),[e]),o.useEffect(()=>{r.waitForInsights().then(e=>{e.chrome.auth.getUser().then(()=>{r.fetchRBAC(l.default.appId).then(i)})})},[]),{rbac:t,userSettings:n}}},1094:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useUserSettings=void 0;const n=i(22),r=i(1),o=i(1095);t.useUserSettings=e=>{const t=o.useUserSettingsEmailQuery(),i=t.query;return n.useSyncInterval(e,r.useCallback(()=>{i()},[i])),r.useMemo(()=>{let e=!1;const n=t.payload;return n&&(e=!!n.dailyEmail||!!n.immediateEmail),{settings:t.payload,refresh:i,isSubscribedForNotifications:e}},[t.payload,i])}},1095:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useUserSettingsEmailQuery=t.adapter=void 0;const r=i(22),o=i(407),a=i(74),l=n(i(186)).default.apis.urls;t.adapter=e=>{const t={dailyEmail:!1,immediateEmail:!1};return e.forEach(e=>e.fields.forEach(e=>{"dailyEmail"===e.name?t.dailyEmail=e.initialValue:"immediateEmail"===e.name&&(t.immediateEmail=e.initialValue)})),t},t.useUserSettingsEmailQuery=e=>r.useTransformQueryResponse(a.useQuery(o.actionBuilder("GET",l.userSettings.email).build(),e),t.adapter)},113:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Operations=t.Schemas=void 0;const a=i(217),l=i(407),s=o(i(250));var c;!function(e){function t(){return s.enum(["BOOLEAN","INT","LIST","STRING"])}function i(){return s.object({ctime:s.number().int().optional().nullable(),hostName:s.string().optional().nullable(),id:s.string().optional().nullable()}).nonstrict()}function n(){return s.array(i())}function r(){return s.array(l())}function o(){return s.record(s.string())}function a(){return s.object({count:s.number().int().optional().nullable()}).nonstrict()}function l(){return s.object({actions:s.string().optional().nullable(),conditions:s.string(),ctime:s.string().optional().nullable(),description:s.string().optional().nullable(),id:c().optional().nullable(),isEnabled:s.boolean().optional().nullable(),lastTriggered:s.number().int().optional().nullable(),mtime:s.string().optional().nullable(),name:s.string()}).nonstrict()}function c(){return s.string()}e.Fact=s.object({id:s.number().int().optional().nullable(),name:s.string().optional().nullable(),type:t().optional().nullable()}).nonstrict(),e.FactType=t(),e.HistoryItem=i(),e.ListHistoryItem=n(),e.ListPolicy=r(),e.ListUUID=s.array(s.string()),e.MapStringString=o(),e.Meta=a(),e.Msg=s.object({msg:s.string().optional().nullable()}).nonstrict(),e.PagedResponseOfHistoryItem=s.object({data:n().optional().nullable(),links:o().optional().nullable(),meta:a().optional().nullable()}).nonstrict(),e.PagedResponseOfPolicy=s.object({data:r().optional().nullable(),links:o().optional().nullable(),meta:a().optional().nullable()}).nonstrict(),e.Policy=l(),e.UUID=c(),e.__Empty=s.string().max(0).optional()}(c=t.Schemas||(t.Schemas={})),function(e){let t,i,n,r,o,u,d,p,f,m,y,h,g,_;!function(e){e.actionCreator=()=>{return l.actionBuilder("GET","/api/policies/v1.0/").queryParams({}).config({rules:[new a.ValidateRule(c.__Empty,"__Empty",404)]}).build()}}(t=e.Get||(e.Get={})),function(e){const t=s.array(c.Fact);e.actionCreator=()=>{return l.actionBuilder("GET","/api/policies/v1.0/facts").queryParams({}).config({rules:[new a.ValidateRule(t,"Response200",200)]}).build()}}(i=e.GetFacts||(e.GetFacts={})),function(e){s.enum(["equal","like","ilike","not_equal"]),s.enum(["equal","like","ilike","not_equal"]),s.string(),s.enum(["true","false"]),s.string(),s.number().int(),s.number().int(),s.enum(["name","description","is_enabled","mtime"]),s.enum(["asc","desc"]);e.actionCreator=e=>{const t={};return void 0!==e.filterOpDescription&&(t["filter:op[description]"]=e.filterOpDescription),void 0!==e.filterOpName&&(t["filter:op[name]"]=e.filterOpName),void 0!==e.filterDescription&&(t["filter[description]"]=e.filterDescription),void 0!==e.filterIsEnabled&&(t["filter[is_enabled]"]=e.filterIsEnabled),void 0!==e.filterName&&(t["filter[name]"]=e.filterName),void 0!==e.limit&&(t.limit=e.limit),void 0!==e.offset&&(t.offset=e.offset),void 0!==e.sortColumn&&(t.sortColumn=e.sortColumn),void 0!==e.sortDirection&&(t.sortDirection=e.sortDirection),l.actionBuilder("GET","/api/policies/v1.0/policies").queryParams(t).config({rules:[new a.ValidateRule(c.PagedResponseOfPolicy,"PagedResponseOfPolicy",200),new a.ValidateRule(c.__Empty,"__Empty",400),new a.ValidateRule(c.__Empty,"__Empty",403),new a.ValidateRule(c.__Empty,"__Empty",404)]}).build()}}(n=e.GetPolicies||(e.GetPolicies={})),function(e){s.boolean();e.actionCreator=e=>{const t={};return void 0!==e.alsoStore&&(t.alsoStore=e.alsoStore),l.actionBuilder("POST","/api/policies/v1.0/policies").queryParams(t).data(e.body).config({rules:[new a.ValidateRule(c.__Empty,"__Empty",200),new a.ValidateRule(c.Policy,"Policy",201),new a.ValidateRule(c.Msg,"Msg",400),new a.ValidateRule(c.__Empty,"__Empty",403),new a.ValidateRule(c.Msg,"Msg",409),new a.ValidateRule(c.__Empty,"__Empty",500)]}).build()}}(r=e.PostPolicies||(e.PostPolicies={})),function(e){s.enum(["equal","like","ilike","not_equal"]),s.enum(["equal","like","ilike","not_equal"]),s.string(),s.enum(["true","false"]),s.string();const t=s.array(c.UUID);e.actionCreator=e=>{const i={};return void 0!==e.filterOpDescription&&(i["filter:op[description]"]=e.filterOpDescription),void 0!==e.filterOpName&&(i["filter:op[name]"]=e.filterOpName),void 0!==e.filterDescription&&(i["filter[description]"]=e.filterDescription),void 0!==e.filterIsEnabled&&(i["filter[is_enabled]"]=e.filterIsEnabled),void 0!==e.filterName&&(i["filter[name]"]=e.filterName),l.actionBuilder("GET","/api/policies/v1.0/policies/ids").queryParams(i).config({rules:[new a.ValidateRule(t,"Response200",200),new a.ValidateRule(c.__Empty,"__Empty",400),new a.ValidateRule(c.__Empty,"__Empty",403),new a.ValidateRule(c.__Empty,"__Empty",404)]}).build()}}(o=e.GetPoliciesIds||(e.GetPoliciesIds={})),function(e){const t=s.array(c.UUID);e.actionCreator=e=>{return l.actionBuilder("DELETE","/api/policies/v1.0/policies/ids").queryParams({}).data(e.body).config({rules:[new a.ValidateRule(t,"Response200",200),new a.ValidateRule(c.__Empty,"__Empty",403)]}).build()}}(u=e.DeletePoliciesIds||(e.DeletePoliciesIds={})),function(e){s.boolean();const t=s.array(c.UUID);e.actionCreator=e=>{const i={};return void 0!==e.enabled&&(i.enabled=e.enabled),l.actionBuilder("POST","/api/policies/v1.0/policies/ids/enabled").queryParams(i).data(e.body).config({rules:[new a.ValidateRule(t,"Response200",200),new a.ValidateRule(c.__Empty,"__Empty",403)]}).build()}}(d=e.PostPoliciesIdsEnabled||(e.PostPoliciesIdsEnabled={})),function(e){e.actionCreator=e=>{return l.actionBuilder("POST","/api/policies/v1.0/policies/validate").queryParams({}).data(e.body).config({rules:[new a.ValidateRule(c.Msg,"Msg",200),new a.ValidateRule(c.Msg,"Msg",400),new a.ValidateRule(c.__Empty,"__Empty",500)]}).build()}}(p=e.PostPoliciesValidate||(e.PostPoliciesValidate={})),function(e){s.string();e.actionCreator=e=>{const t={};return void 0!==e.id&&(t.id=e.id),l.actionBuilder("POST","/api/policies/v1.0/policies/validate-name").queryParams(t).data(e.body).config({rules:[new a.ValidateRule(c.Msg,"Msg",200),new a.ValidateRule(c.Msg,"Msg",400),new a.ValidateRule(c.Msg,"Msg",403),new a.ValidateRule(c.__Empty,"__Empty",409),new a.ValidateRule(c.__Empty,"__Empty",500)]}).build()}}(f=e.PostPoliciesValidateName||(e.PostPoliciesValidateName={})),function(e){e.actionCreator=e=>{const t="/api/policies/v1.0/policies/{id}".replace("{id}",e.id.toString());return l.actionBuilder("GET",t).queryParams({}).config({rules:[new a.ValidateRule(c.Policy,"Policy",200),new a.ValidateRule(c.Msg,"Msg",403),new a.ValidateRule(c.__Empty,"__Empty",404)]}).build()}}(m=e.GetPoliciesById||(e.GetPoliciesById={})),function(e){e.actionCreator=e=>{const t="/api/policies/v1.0/policies/{id}".replace("{id}",e.id.toString());return l.actionBuilder("DELETE",t).queryParams({}).config({rules:[new a.ValidateRule(c.__Empty,"__Empty",200),new a.ValidateRule(c.__Empty,"__Empty",403),new a.ValidateRule(c.__Empty,"__Empty",404)]}).build()}}(y=e.DeletePoliciesById||(e.DeletePoliciesById={})),function(e){s.boolean();e.actionCreator=e=>{const t="/api/policies/v1.0/policies/{id}/enabled".replace("{id}",e.id.toString()),i={};return void 0!==e.enabled&&(i.enabled=e.enabled),l.actionBuilder("POST",t).queryParams(i).config({rules:[new a.ValidateRule(c.__Empty,"__Empty",200),new a.ValidateRule(c.__Empty,"__Empty",403),new a.ValidateRule(c.__Empty,"__Empty",404),new a.ValidateRule(c.__Empty,"__Empty",500)]}).build()}}(h=e.PostPoliciesByIdEnabled||(e.PostPoliciesByIdEnabled={})),function(e){s.enum(["equal","not_equal","like"]),s.enum(["equal","like","not_equal"]),s.string(),s.string(),s.number().int(),s.number().int(),s.enum(["hostName","ctime"]),s.enum(["asc","desc"]);e.actionCreator=e=>{const t="/api/policies/v1.0/policies/{id}/history/trigger".replace("{id}",e.id.toString()),i={};return void 0!==e.filterOpId&&(i["filter:op[id]"]=e.filterOpId),void 0!==e.filterOpName&&(i["filter:op[name]"]=e.filterOpName),void 0!==e.filterId&&(i["filter[id]"]=e.filterId),void 0!==e.filterName&&(i["filter[name]"]=e.filterName),void 0!==e.limit&&(i.limit=e.limit),void 0!==e.offset&&(i.offset=e.offset),void 0!==e.sortColumn&&(i.sortColumn=e.sortColumn),void 0!==e.sortDirection&&(i.sortDirection=e.sortDirection),l.actionBuilder("GET",t).queryParams(i).config({rules:[new a.ValidateRule(c.PagedResponseOfHistoryItem,"PagedResponseOfHistoryItem",200),new a.ValidateRule(c.__Empty,"__Empty",400),new a.ValidateRule(c.__Empty,"__Empty",403),new a.ValidateRule(c.__Empty,"__Empty",404),new a.ValidateRule(c.__Empty,"__Empty",500)]}).build()}}(g=e.GetPoliciesByIdHistoryTrigger||(e.GetPoliciesByIdHistoryTrigger={})),function(e){s.boolean();e.actionCreator=e=>{const t="/api/policies/v1.0/policies/{policyId}".replace("{policyId}",e.policyId.toString()),i={};return void 0!==e.dry&&(i.dry=e.dry),l.actionBuilder("PUT",t).queryParams(i).data(e.body).config({rules:[new a.ValidateRule(c.Policy,"Policy",200),new a.ValidateRule(c.__Empty,"__Empty",400),new a.ValidateRule(c.__Empty,"__Empty",403),new a.ValidateRule(c.__Empty,"__Empty",404),new a.ValidateRule(c.Msg,"Msg",409)]}).build()}}(_=e.PutPoliciesByPolicyId||(e.PutPoliciesByPolicyId={}))}(t.Operations||(t.Operations={}))},144:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyStateSection=void 0;const a=i(25),l=i(102),s=i(574),c=o(i(1)),u=i(43),d=i(61),p=u.style({paddingTop:s.calc(`${l.global_spacer_3xl.value} - var(--pf-c-page__main-section--PaddingTop)`)});t.EmptyStateSection=e=>c.createElement(a.EmptyState,Object.assign({variant:a.EmptyStateVariant.full,className:`${p} ${e.className?e.className:""} `},d.getOuiaProps("Policy/EmptyState",e)),e.icon&&c.createElement(a.EmptyStateIcon,{icon:e.icon,color:e.iconColor}),c.createElement(a.Title,{headingLevel:"h5",size:"lg"},e.title),c.createElement(a.EmptyStateBody,null,e.content),e.actionNode,e.actionLabel&&c.createElement(a.Button,{variant:"primary",onClick:e.action,isDisabled:!e.action},e.actionLabel))},145:function(e,t,i){"use strict";var n=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.makeCopyOfPolicy=t.toPolicies=t.toPolicy=t.toServerPolicy=t.fromServerActions=t.toServerAction=void 0;const o=i(75),a=r(i(249)),l=r(i(410)),s=i(83),c=i(414);t.toServerAction=e=>e.map(e=>{if(!e||!e.type)return"";const t=`${e.type}`;switch(e.type){case s.ActionType.NOTIFICATION:case s.ActionType.EMAIL:break;default:o.assertNever(e.type)}return t}).join(";"),t.fromServerActions=e=>{if(!e||""===e)return[];const t=[];for(const i of e.split(";")){const[e]=i.split(" ",2);if("webhook"!==e)switch(e){case s.ActionType.NOTIFICATION:t.push({type:s.ActionType.NOTIFICATION});break;case s.ActionType.EMAIL:t.push({type:s.ActionType.EMAIL});break;default:throw Error(`Unknown action.type=${e} found`)}}return t},t.toServerPolicy=e=>{const{mtime:i,ctime:r}=e,o=n(e,["mtime","ctime"]);return Object.assign(Object.assign({},o),{name:e.name||"",conditions:e.conditions||"",isEnabled:void 0!==e.isEnabled&&e.isEnabled,actions:e.actions?t.toServerAction(e.actions):""})},t.toPolicy=e=>Object.assign(Object.assign({},e),{id:e.id?e.id:"",description:e.description?e.description:"",isEnabled:!!e.isEnabled&&e.isEnabled,actions:t.fromServerActions(e.actions),mtime:e.mtime?l.default(e.mtime):new Date(Date.now()),ctime:e.ctime?l.default(e.ctime):new Date(Date.now()),lastTriggered:e.lastTriggered?a.default(e.lastTriggered/1e3):void 0}),t.toPolicies=e=>e.data?e.data.map(t.toPolicy):[],t.makeCopyOfPolicy=e=>{return Object.assign(Object.assign({},e),{name:`Copy of ${e.name.slice(0,c.maxPolicyNameLength-"Copy of ".length)}`,mtime:void 0,lastTriggered:void 0,ctime:void 0,id:void 0})}},170:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=t.linkTo=void 0;const s=o(i(1)),c=i(105),u=i(818),d=l(i(819)),p=i(1071);t.linkTo={listPage:()=>"/list",policyDetail:e=>`/policy/${e}`};const f=[{path:t.linkTo.listPage(),component:d.default,rootClass:"list"},{path:t.linkTo.policyDetail(":policyId"),component:p.PolicyDetail,rootClass:"policy"}],m=e=>{const{rootClass:t}=e,i=a(e,["rootClass"]),n=document.getElementById("root");if(!n)throw new Error("Root element not found");return n.removeAttribute("class"),n.classList.add(`page__${t}`,"pf-c-page__main"),n.setAttribute("role","main"),s.createElement(u.ErrorPage,null,s.createElement(c.Route,Object.assign({},i)))};t.Routes=()=>s.createElement(c.Switch,null,f.map(e=>s.createElement(m,{key:e.path,rootClass:e.rootClass,component:e.component,path:e.path})),s.createElement(c.Redirect,{to:t.linkTo.listPage()}))},186:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withBaseUrl=void 0;const n=i(22);t.withBaseUrl=e=>`/api/policies/v1.0${e}`;const r={appId:"policies",defaultElementsPerPage:20,apis:{version:"v1.0",urls:{base:"/api/policies/v1.0",userSettings:{email:t.withBaseUrl("/user-config/email-preference")}}},pages:{emailPreferences:()=>n.localUrl("/user-preferences/email",n.getInsights().chrome.isBeta()),notifications:()=>n.localUrl("/settings/notifications",n.getInsights().chrome.isBeta()),factsDocumentation:"https://access.redhat.com/documentation/en-us/red_hat_insights/2020-04/html/monitoring_and_reacting_to_configuration_changes_using_policies/appendix-policies#facts-and-functions"}};t.default=r},191:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WizardContext=t.WizardActionType=t.AlwaysValid=void 0;const a=o(i(1)),l=o(i(171));t.AlwaysValid=l.object(),function(e){e.SAVE="CREATE",e.VALIDATE_CONDITION="VALIDATE_CONDITION",e.VALIDATE_NAME="VALIDATE_NAME",e.NONE="NONE"}(t.WizardActionType||(t.WizardActionType={})),t.WizardContext=a.createContext({isLoading:!1,isFormValid:!1,triggerAction:()=>{throw Error("Action executed without WizardContext")},verifyResponse:{isValid:!1},createResponse:{created:!1},setVerifyResponse:()=>{throw Error("setVerifyResponse executed without WizardContext")},setMaxStep:()=>{throw Error("setMaxStep executed without a WizardContext")}})},219:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyFormSchema=t.PolicyFormConditions=t.PolicyFormActions=t.PolicyFormDetails=void 0;const a=i(75),l=o(i(171)),s=i(171),c=i(83),u=i(962),d=i(414),p=i(963),f=(e,t,i)=>{const n=`Only one ${t} action is allowed`;return[`one-${i}`,n,t=>{const r=t&&t.reduce((t,i,n)=>(null==i?void 0:i.type)===e?t.concat([n]):t,[]);if(!r||r.length<=1)return!0;const o=new s.ValidationError("","","actions","");return o.inner=r.map(e=>new s.ValidationError(n,i,`actions.${e}.type`)),o}]};t.PolicyFormDetails=l.object().shape({description:l.string().notRequired().trim(),isEnabled:l.boolean().notRequired(),name:l.string().required("Write a name for this Policy").max(d.maxPolicyNameLength).trim()}),t.PolicyFormActions=l.object().shape({actions:l.array(l.lazy(e=>{if((null==e?void 0:e.type)&&u.isAction(e)){const t=e.type;switch(t){case c.ActionType.EMAIL:return p.ActionEmailSchema;case c.ActionType.NOTIFICATION:return p.ActionNotificationSchema;default:a.assertNever(t)}}return p.ActionSchema})).test(...f(c.ActionType.EMAIL,"Email","email")).test(...f(c.ActionType.NOTIFICATION,"Hook","notification"))}),t.PolicyFormConditions=l.object().shape({conditions:l.string().required("Enter a condition for the policy.").trim()}),t.PolicyFormSchema=l.object().concat(t.PolicyFormDetails).concat(t.PolicyFormActions).concat(t.PolicyFormConditions)},247:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AppContext=void 0;const a=o(i(1));t.AppContext=a.createContext({rbac:{canReadAll:!1,canWriteAll:!1},userSettings:{settings:void 0,isSubscribedForNotifications:!1,refresh:()=>{console.error("Using default refresh function")}}})},248:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(821),t),r(i(822),t),r(i(823),t)},33:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=void 0;const n=i(83),r={pages:{noPermissions:{title:"Policies",emptyState:{title:"You do not have access to Policies",content:"Contact your organization administrator(s) for more information."}},error:{title:"Policies",emptyState:{title:"Unhandled error",content:"There was a problem trying to process your request.",showDetails:"Show details",actions:{goToIndex:"Go to Policy list"}}},listPage:{title:"Policies",emailOptIn:"One or more of your policies have an email alert. To receive these emails, opt in to email alerts.",emptyState:{title:"No Policies",text:["No policies have been created.","Use self defined-policies to monitor your RHEL configurations with instant or daily alerts."]}},policyDetail:{errorChangingEnabledStatus:{notFound:{title:"Policy not found",text:"The policy does not exists on the server. It may have been removed by another user."},else:{title:"Enabled status change failed for policy",text:"There was an error setting the enabled status for this policy. Please try again."}},emptyState:{title:"Policy not found",text:"This policy with ID {0} cannot be found. It may have been removed by another user.",backText:"Back to previous page"},triggerEmptyState:{title:"No triggers found",text:"This policy does not have any recent triggers"},errorState:{title:"Error when loading policy",text:"Error loading this policy.\nError {0}",actionText:"Try again"},triggerErrorState:{title:"Error when loading trigger history for policy",text:"Error loading trigger history for this policy.\nError {0}",actionText:"Try again"}}},components:{actions:{title:"Trigger actions",noActions:"No actions configured."},actionType:{[n.ActionType.EMAIL]:"Email",[n.ActionType.NOTIFICATION]:"Notification"},emailOptIn:{title:"Enable email alerts",switch:"Get emails when a policy runs",link:"Open email preferences"},lastTriggeredCell:{never:"Never",ago:"ago"},actionNotificationForm:{paragraph1:{head:"This action sends a request notification to process the message as configured in ",link:"notification settings.",tail:""},paragraph2:{head:"To configure it for policies, open the notification in the ",link:"notification settings",tail:' and select your preference for sending under "Policies / All".'}}},tables:{policy:{title:"Policies",columns:{name:"Name",triggerActions:"Trigger actions",lastTriggered:"Last triggered"},emptyState:{neverRun:"Never",noConditions:"No conditions configured.",noDescription:"--",notFound:{title:"No matching policies found",content:"No policies matching the selected filter and search terms."}},actions:{email:"Send email",notification:"Send a notification"}},trigger:{title:"Trigger",columns:{date:"Date",system:"System"},emptyState:{notFound:{title:"No matching triggers found",content:"No triggers matching the search terms."}}}},wizards:{policy:{titleNew:"Create a policy",titleEdit:"Edit a policy",description:"Policies are processed on reception of system profile messages. If condition(s) are met, defined action(s) are triggered.",actions:{title:"Trigger actions",emailOptIn:"To receive emails for custom policies, opt in to email alerts from your user preferences."},conditions:{title:"Conditions",valid:"Valid condition",invalid:"Invalid condition",validating:"Validatingâ€¦",hint:'e.g. facts.arch = "x86_64"',summaryDesc:"Define conditions for your policy using any system facts."},hints:{hintTitle:"What conditions can I define?",hintParagraph1:"You can write a condition for any combination of system facts that apply to your Insights inventory systems.",hintLinkTitle:"Review available system facts",hintSyntaxExamplesSection:"Syntax examples",hintQuestion1:"Is wireshark RPM installed?",hintQuestion1Ans:"facts.installed_packages contains ['wireshark']",hintQuestion2:"Is the release older than RHEL 8.1?",hintQuestion2Ans:"facts.os_release < 8.1",hintQuestion3:"Which of my public cloud instances are missing a tag Owner value set?",hintQuestion3Ans:"facts.cloud_provider in ['alibaba',aws','azure','google'] and not tags.Owner",hintQuestion4:"Is time synchronization configured for RHEL7 and RHEL8?",hintQuestion4Ans:"(facts.os_release >=7 and facts.os_release <8 and not facts.enabled_services contains 'ntpd') or (facts.os_release >=8 and not facts.enabled_services contains 'chronyd')"},createPolicy:{title:"Create Policy"},details:{title:"Policy Details"},review:{title:"Review and enable",enableThisPolicy:"Enable this policy?",policyIsEnabled:"Policy is enabled",policyIsDisabled:"Policy is disabled",policy:{details:"Policy details",name:"Policy name",description:"Description"}}}},labels:{description:"Description"}};t.Messages=r},408:function(e,t,i){(t=e.exports=i(9)(!1)).i(i(816),""),t.i(i(817),""),t.push([e.i,":root{--ins-color--orange: #ec7a08}button:focus{outline:none}.pf-c-wizard__main-body{max-height:100%}\n",""])},409:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionIcon=t.ActionNotificationIcon=t.ActionEmailIcon=void 0;const l=i(57),s=i(75),c=o(i(1)),u=i(83),d=i(248);t.ActionEmailIcon=l.EnvelopeIcon,t.ActionNotificationIcon=d.NotificationIcon,t.ActionIcon=e=>{const{actionType:i}=e,n=a(e,["actionType"]);switch(i){case u.ActionType.NOTIFICATION:return c.createElement(t.ActionNotificationIcon,Object.assign({},n));case u.ActionType.EMAIL:return c.createElement(t.ActionEmailIcon,Object.assign({},n));case void 0:break;default:s.assertNever(i)}return null}},411:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyToolbar=t.SelectionCommand=void 0;const a=i(25),l=i(133),s=i(22),c=o(i(1)),u=i(43),d=i(412),p=i(61),f=i(248);var m;!function(e){e[e.NONE=0]="NONE",e[e.PAGE=1]="PAGE",e[e.ALL=2]="ALL"}(m=t.SelectionCommand||(t.SelectionCommand={}));const y=u.style({marginLeft:4}),h={[d.PolicyFilterColumn.NAME]:{label:"Name",placeholder:"Filter by name"},[d.PolicyFilterColumn.IS_ACTIVE]:{label:"Enabled",placeholder:"Filter by Enable status",options:{default:"all",exclude:["all"],exclusive:!0,items:[{value:"all",label:c.createElement(c.Fragment,null,"All")},{value:"Enabled",label:c.createElement(c.Fragment,null,c.createElement(f.EnabledPolicyIcon,null)," ",c.createElement("span",{className:y},"Enabled"))},{value:"Disabled",label:c.createElement(c.Fragment,null,c.createElement(f.DisabledPolicyIcon,null)," ",c.createElement("span",{className:y},"Disabled"))}]}}};t.PolicyToolbar=e=>{const{pageCount:t,count:i,page:n,perPage:r,showPerPageOptions:o,onPaginationChanged:u,onPaginationSizeChanged:f,onCreatePolicy:y,onDeletePolicy:g,hideActions:_,onSelectionChanged:v,selectedCount:b,hideBulkSelect:E,onEnablePolicy:P,onDisablePolicy:O,onExport:C}=e,T=s.usePrimaryToolbarFilterConfig(d.PolicyFilterColumn,e.filters,e.setFilters,e.clearFilters,h),S=c.useMemo(()=>{if(E)return;const e=()=>v&&v(m.NONE),n=()=>v&&v(m.ALL);return{count:b||0,items:[{title:"Select none (0)",onClick:e},{title:`Select page (${t||0})`,onClick:()=>v&&v(m.PAGE)},{title:`Select all (${i||0})`,onClick:n}],checked:b===i,onSelect:t=>t?n():e()}},[b,t,v,E,i]),j=c.useMemo(()=>({itemCount:i||0,page:n,perPage:r,perPageOptions:o?void 0:[],onSetPage:u,onFirstClick:u,onPreviousClick:u,onNextClick:u,onLastClick:u,onPageInput:u,onPerPageSelect:f,isCompact:!0,variant:a.PaginationVariant.top}),[o,i,n,r,u,f]),M=c.useMemo(()=>({itemCount:i||0,page:n,perPage:r,perPageOptions:o?void 0:[],onSetPage:u,onFirstClick:u,onPreviousClick:u,onNextClick:u,onLastClick:u,onPageInput:u,onPerPageSelect:f,isCompact:!1,variant:a.PaginationVariant.bottom}),[o,i,n,r,u,f]),x=c.useMemo(()=>{if(_)return;return{actions:[{key:"create-policy",label:"Create policy",onClick:y,props:{isDisabled:!y}},{key:"delete-policy",label:"Remove",onClick:g,props:{isDisabled:!(b&&g)}},{key:"enable-policy",label:"Enable",onClick:P,props:{isDisabled:!(b&&P)}},{key:"disable-policy",label:"Disable",onClick:O,props:{isDisabled:!(b&&O)}}],kebabToggleProps:{isDisabled:!1}}},[y,g,b,_,O,P]),A=c.useMemo(()=>{if(C)return{extraItems:[],onSelect:C}},[C]);return c.createElement("div",Object.assign({},p.getOuiaProps("Policy/DualToolbar",e)),c.createElement(l.PrimaryToolbar,{bulkSelect:S,filterConfig:T.filterConfig,pagination:j,actionsConfig:x,activeFiltersConfig:T.activeFiltersConfig,exportConfig:A}),e.children,e.showBottomPagination&&c.createElement(l.PrimaryToolbar,{pagination:M}))}},412:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyFilterColumn=void 0,function(e){e.NAME="name",e.IS_ACTIVE="is_enabled"}(t.PolicyFilterColumn||(t.PolicyFilterColumn={}))},413:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useHasPoliciesQuery=t.hasPoliciesQueryActionCreator=t.useGetPoliciesQuery=t.actionCreator=void 0;const n=i(22),r=i(217),o=i(74),a=i(113),l=i(145);t.actionCreator=e=>{var t;return a.Operations.GetPolicies.actionCreator(null!==(t=null==e?void 0:e.toQuery())&&void 0!==t?t:{})};const s=r.validationResponseTransformer(e=>{var t;return"PagedResponseOfPolicy"===e.type?r.validatedResponse(e.type,e.status,{data:l.toPolicies(e.value),count:(null===(t=e.value.meta)||void 0===t?void 0:t.count)||0},e.errors):e});t.useGetPoliciesQuery=(e,i)=>n.useTransformQueryResponse(o.useQuery(t.actionCreator(e),i),s);const c=r.validationResponseTransformer(e=>{var t;let i=!0;return"PagedResponseOfPolicy"===e.type&&(i=!!(null===(t=e.value.data)||void 0===t?void 0:t.length)),r.validatedResponse("HasPolicies",e.status,i,e.errors)});t.hasPoliciesQueryActionCreator=()=>a.Operations.GetPolicies.actionCreator(n.Page.of(1,1).toQuery()),t.useHasPoliciesQuery=()=>n.useTransformQueryResponse(o.useQuery(t.hasPoliciesQueryActionCreator(),!1),c)},414:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maxPolicyNameLength=void 0,t.maxPolicyNameLength=150},435:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerFilterColumn=void 0,function(e){e.NAME="name"}(t.TriggerFilterColumn||(t.TriggerFilterColumn={}))},490:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NoPermissionsPage=void 0;const a=i(57),l=i(133),s=o(i(1)),c=i(144),u=i(33);t.NoPermissionsPage=()=>s.createElement(s.Fragment,null,s.createElement(l.PageHeader,null,s.createElement(l.PageHeaderTitle,{title:u.Messages.pages.noPermissions.title})),s.createElement(l.Main,null,s.createElement(c.EmptyStateSection,{icon:a.LockIcon,title:u.Messages.pages.noPermissions.emptyState.title,content:u.Messages.pages.noPermissions.emptyState.content})))},491:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0,function(e){e.EMAIL="email",e.NOTIFICATION="notification"}(t.ActionType||(t.ActionType={}))},493:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyTable=void 0;const a=i(25),l=i(436),s=i(133),c=i(22),u=i(75),d=o(i(1)),p=i(156),f=i(43),m=i(33),y=i(170),h=i(61),g=i(144),_=i(820),v=i(494),b=i(833),E=f.style({backgroundColor:"white"}),P=["name","actions","is_enabled"],O=(e,t,i,n)=>t.indexOf(i[e])+n;t.PolicyTable=e=>{const{onSort:t,error:i,policies:n,onCollapse:r,onSelect:o}=e,f=e.columnsToShow||P,C=f.includes("radioSelect");if(C&&!o)throw Error("RadioSelect requires an onSelect");const T=d.useMemo(()=>{const e=t?[l.sortable]:[];return{radioSelect:{title:"",transforms:[]},name:{title:m.Messages.tables.policy.columns.name,transforms:e,cellFormatters:[l.expandable],column:"name"},actions:{title:m.Messages.tables.policy.columns.triggerActions,transforms:[]},is_enabled:{title:m.Messages.tables.policy.columns.lastTriggered,transforms:[],column:"is_enabled"}}},[t]),S=d.useMemo(()=>[r,f.includes("radioSelect")?void 0:o].filter(e=>e).length,[r,o,f]),j=d.useMemo(()=>f.map(e=>T[e]),[T,f]),M=d.useCallback((e,i,n)=>{if(t){const e=((e,t,i)=>t[e-i].column)(i,j,S);e&&t(i,e,n===l.SortByDirection.asc?c.Direction.ASCENDING:c.Direction.DESCENDING)}},[t,j,S]),x=d.useCallback((e,t,i,o)=>{const a=n,l=null==a?void 0:a.findIndex(e=>e.id===o.id);if(r&&a&&void 0!==l&&-1!==l){const e=a[l];r(e,l,i)}},[n,r]),A=d.useCallback((e,t,i,r)=>{const a=n,l=null==a?void 0:a.findIndex(e=>e.id===r.id);if(o&&a&&void 0!==l&&-1!==l){const e=a[l];o(e,l,t)}},[n,o]),I=d.useMemo(()=>{if(e.sortBy)return{index:O(e.sortBy.column,j,T,S),direction:e.sortBy.direction===c.Direction.ASCENDING?"asc":"desc"}},[e.sortBy,j,T,S]),w=d.useMemo(()=>e.error||e.loading?void 0:e.actionResolver||void 0,[e.error,e.loading,e.actionResolver]),N=d.useCallback(e=>{if(void 0===e.parent&&w&&e&&n){const t=n.find(t=>t.id===e.id);if(t)return w(t)}return[]},[w,n]),R=d.useMemo(()=>i?[]:((e,t,i,n)=>e?e.reduce((r,o,l)=>(r.push({id:o.id,key:o.id,isOpen:o.isOpen,selected:o.isSelected,cells:t.map(t=>{switch(t){case"actions":return d.createElement(d.Fragment,null,d.createElement(_.ActionsCell,{ouiaId:o.id,actions:o.actions}));case"is_enabled":return d.createElement(d.Fragment,null,d.createElement(b.LastTriggeredCell,{ouiaId:o.id,isEnabled:o.isEnabled,lastTriggered:o.lastTriggered}));case"name":return d.createElement(d.Fragment,null,i?d.createElement(p.Link,{to:y.linkTo.policyDetail(o.id)},o.name):o.name);case"radioSelect":return d.createElement(d.Fragment,null,d.createElement(a.Radio,{id:`${o.id}-table-radio-id`,"aria-label":`Radio select for policy ${o.name}`,name:"policy-table-radio-select",isChecked:o.isSelected,onChange:n?()=>{const t=e.findIndex(e=>e.isSelected);-1!==t&&n(e[t],t,!1),n(o,l,!0)}:void 0}))}u.assertNever(t)})}),r.push({parent:2*l,fullWidth:!0,showSelect:!1,cells:[{title:d.createElement(d.Fragment,null,d.createElement(v.ExpandedContent,{ouiaId:o.id,key:o.id+"-content",description:o.description?o.description:m.Messages.tables.policy.emptyState.noDescription,conditions:o.conditions?o.conditions:m.Messages.tables.policy.emptyState.noConditions,actions:o.actions,created:o.ctime,updated:o.mtime}))}]}),r),[]):[])(n,f,e.linkToDetailPolicy,o),[i,n,f,o,e.linkToDetailPolicy]);return e.loading?d.createElement(s.SkeletonTable,{rowSize:e.loadingRowCount||10,columns:j,paddingColumnSize:S,sortBy:I}):i?d.createElement(g.EmptyStateSection,Object.assign({},i,{className:E})):d.createElement("div",Object.assign({},h.getOuiaProps("Policy/Table",e)),d.createElement(l.Table,{"aria-label":m.Messages.tables.policy.title,cells:j,rows:R,actionResolver:N,onSort:t?M:void 0,onCollapse:r?x:void 0,onSelect:e.error||!o||C?void 0:A,sortBy:I,canSelectAll:!1},d.createElement(l.TableHeader,null),d.createElement(l.TableBody,null)))}},494:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandedContent=void 0;const a=i(25),l=i(102),s=i(22),c=i(495),u=o(i(1)),d=i(43),p=i(61),f=i(497),m=i(498),y=i(831),h=i(832),g=d.style({margin:12}),_=d.style({maxWidth:800,marginBottom:12}),v=d.style({marginBottom:12}),b=d.style(Object.assign(Object.assign({backgroundColor:l.global_BackgroundColor_light_300.var},c.padding(18,14)),{margin:5}));t.ExpandedContent=e=>u.createElement(a.Stack,Object.assign({},p.getOuiaProps("Policy/Table/Expanded",e),{className:g}),e.description&&u.createElement(a.StackItem,{className:_},u.createElement(h.Description,{ouiaId:s.ouiaIdConcat(e.ouiaId,"description"),description:e.description})),u.createElement(a.StackItem,{className:v},u.createElement(y.Dates,{ouiaId:s.ouiaIdConcat(e.ouiaId,"dates"),updated:e.updated,created:e.created})),u.createElement(a.StackItem,null,u.createElement(a.Grid,null,u.createElement(a.GridItem,{className:b,span:6},u.createElement(m.Conditions,{ouiaId:s.ouiaIdConcat(e.ouiaId,"conditions"),conditions:e.conditions})),u.createElement(a.GridItem,{className:b,span:6},u.createElement(f.Actions,{ouiaId:s.ouiaIdConcat(e.ouiaId,"actions"),actions:e.actions})))))},497:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=void 0;const a=i(25),l=i(22),s=i(75),c=o(i(1)),u=i(43),d=i(33),p=i(83),f=i(61),m=i(409),y=u.style({marginBottom:5}),h=u.style({marginBottom:5,marginLeft:10,display:"inline"}),g=u.style({marginBottom:10,marginTop:10,marginLeft:10}),_=u.style({marginLeft:25,marginBottom:8,marginTop:8}),v=e=>c.createElement(a.StackItem,{className:g},c.createElement(e.icon,null),c.createElement(a.Title,{headingLevel:"h2",className:h,size:"md"},e.title),e.children&&c.createElement("div",{className:_},e.children));t.Actions=e=>c.createElement(c.Fragment,null,c.createElement(a.Stack,Object.assign({},f.getOuiaProps("Policy/Table/Expanded/Actions",e)),c.createElement(a.StackItem,null,c.createElement(a.Title,{headingLevel:"h2",className:y,size:"md"},d.Messages.components.actions.title)),0===e.actions.length?c.createElement(a.Text,null," ",d.Messages.components.actions.noActions," "):(e=>{const t=[];for(const i in e){const n=e[i];switch(n.type){case p.ActionType.EMAIL:t.push(c.createElement(c.Fragment,{key:i},c.createElement(v,{title:"Send Email",icon:m.ActionEmailIcon})));break;case p.ActionType.NOTIFICATION:t.push(c.createElement(c.Fragment,{key:i},c.createElement(v,{title:d.Messages.tables.policy.actions.notification,icon:m.ActionNotificationIcon})));break;default:s.assertNever(n)}}return l.join(t,a.Divider)})(e.actions)))},498:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Conditions=void 0;const a=i(25),l=o(i(1)),s=i(43),c=i(33),u=i(61),d=s.style({marginBottom:5});t.Conditions=e=>l.createElement("div",Object.assign({},u.getOuiaProps("Policy/Table/Expanded/Conditions",e)),l.createElement(a.Title,{headingLevel:"h2",className:d,size:"md"},"Conditions"),l.createElement(a.Text,null,e.conditions||c.Messages.tables.policy.emptyState.noConditions))},499:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(834),t),r(i(835),t),r(i(836),t)},506:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.usePolicyToDelete=void 0;const a=o(i(1));t.usePolicyToDelete=()=>{const[e,t]=a.useState(),[i,n]=a.useState(0),r=a.useCallback(()=>{t(void 0),n(0)},[n,t]);return{open:a.useCallback(e=>{"number"==typeof e?(t(void 0),n(e)):(t(e),n(1))},[]),close:r,count:i,policy:e,isOpen:i>0}}},507:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMassChangePolicyEnabledMutation=t.actionCreator=void 0;const n=i(74),r=i(113);t.actionCreator=e=>r.Operations.PostPoliciesIdsEnabled.actionCreator({body:e.policyIds,enabled:e.shouldBeEnabled}),t.useMassChangePolicyEnabledMutation=()=>n.useMutation(t.actionCreator)},508:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CreatePolicyWizard=t.formatConditionError=void 0;const a=i(22),l=o(i(861)),s=o(i(1)),c=i(862),u=i(1055),d=i(1057),p=i(1058),f=i(1059);t.formatConditionError=e=>e=(e=e.replace("line 1 ","")).replace(/position (\d+)$/,(e,t)=>`position ${+t+1}`),t.CreatePolicyWizard=e=>{const t=d.useSavePolicyMutation(),i=f.useVerifyPolicyMutation(),n=p.useValidatePolicyNameParametrizedQuery(),r=u.useFacts(),o=s.useCallback(e=>{return(0,n.query)(e).then(e=>e.status===l.OK?{created:!1}:{created:!1,error:`Invalid name (Code: ${e.status})`})},[n.query]),m=t.loading||i.loading||n.loading;return s.createElement(s.Fragment,null,e.isOpen&&s.createElement(c.PolicyWizard,{initialValue:e.initialValue||{},onClose:()=>{e.close(void 0)},onSave:i=>t.mutate(i).then(t=>{var n,r,o;if("Policy"===(null===(n=t.payload)||void 0===n?void 0:n.type))return void 0===i.id?a.addSuccessNotification("Created",`Policy "${i.name}" created`):a.addSuccessNotification("Saved",`Policy "${i.name}" has been updated`),e.close&&e.close(t.payload.value),{created:!0};if(t.status===l.NOT_FOUND&&void 0!==i.id)return{created:!1,error:"This policy cannot be found. It may have been deleted by another user. Your changes cannot be saved."};let s=`Unknown Error when trying to ${void 0===i.id?"create":"update"} the policy: (Code ${t.status})`;return"Msg"===(null===(r=t.payload)||void 0===r?void 0:r.type)&&(s=null!==(o=t.payload.value.msg)&&void 0!==o?o:s),{created:!1,error:s}}),onVerify:e=>i.mutate(e).then(t=>{var i;return t.status===l.OK?{isValid:!0,policy:e}:"Msg"===(null===(i=t.payload)||void 0===i?void 0:i.type)&&t.payload.value.msg?{isValid:!1,error:t.payload.value.msg,policy:e}:{isValid:!1,error:`Unknown Error when trying to validate: (Code ${t.status})`,policy:e}}),onValidateName:o,showCreateStep:!!e.policiesExist&&e.showCreateStep,isLoading:m,facts:r,isEditing:e.isEditing}))}},564:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyContext=t.Negative_exprContext=t.ValueContext=t.Numerical_valueContext=t.ArrayContext=t.Array_operatorContext=t.String_compare_operatorContext=t.Numeric_compare_operatorContext=t.Boolean_operatorContext=t.Logical_operatorContext=t.ExprContext=t.ObjectContext=t.ExpressionContext=t.ExpressionParser=void 0;const a=i(116),l=i(269),s=i(260),c=i(268),u=i(226),d=i(101),p=i(227),f=i(148),m=i(41),y=i(153),h=o(i(115));class g extends u.Parser{constructor(e){super(e),this._interp=new p.ParserATNSimulator(g._ATN,this)}get vocabulary(){return g.VOCABULARY}get grammarFileName(){return"Expression.g4"}get ruleNames(){return g.ruleNames}get serializedATN(){return g._serializedATN}expression(){let e=new _(this._ctx,this.state);this.enterRule(e,0,g.RULE_expression);try{this.enterOuterAlt(e,1),this.state=26,this.object(0),this.state=27,this.match(g.EOF)}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}object(e){void 0===e&&(e=0);let t=this._ctx,i=this.state,n=new v(this._ctx,i),r=n;this.enterRecursionRule(n,2,g.RULE_object,e);try{let e;switch(this.enterOuterAlt(n,1),this.state=38,this._errHandler.sync(this),this._input.LA(1)){case g.NOT:case g.NEG:this.state=30,this.negative_expr(),this.state=31,this.object(4);break;case g.SIMPLETEXT:case g.STRING:this.state=33,this.expr();break;case g.T__0:this.state=34,this.match(g.T__0),this.state=35,this.object(0),this.state=36,this.match(g.T__1);break;default:throw new c.NoViableAltException(this)}for(this._ctx._stop=this._input.tryLT(-1),this.state=46,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,1,this._ctx);2!==e&&e!==a.ATN.INVALID_ALT_NUMBER;){if(1===e){if(null!=this._parseListeners&&this.triggerExitRuleEvent(),r=n,n=new v(t,i),this.pushNewRecursionContext(n,2,g.RULE_object),this.state=40,!this.precpred(this._ctx,1))throw new s.FailedPredicateException(this,"this.precpred(this._ctx, 1)");this.state=41,this.logical_operator(),this.state=42,this.object(2)}this.state=48,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,1,this._ctx)}}catch(e){if(!(e instanceof f.RecognitionException))throw e;n.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.unrollRecursionContexts(t)}return n}expr(){let e=new b(this._ctx,this.state);this.enterRule(e,4,g.RULE_expr);try{switch(this.state=70,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,2,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=49,this.key();break;case 2:this.enterOuterAlt(e,2),this.state=50,this.key(),this.state=51,this.boolean_operator(),this.state=52,this.value();break;case 3:this.enterOuterAlt(e,3),this.state=54,this.key(),this.state=55,this.numeric_compare_operator(),this.state=56,this.numerical_value();break;case 4:this.enterOuterAlt(e,4),this.state=58,this.key(),this.state=59,this.string_compare_operator(),this.state=60,this.array();break;case 5:this.enterOuterAlt(e,5),this.state=62,this.key(),this.state=63,this.string_compare_operator(),this.state=64,this.value();break;case 6:this.enterOuterAlt(e,6),this.state=66,this.key(),this.state=67,this.array_operator(),this.state=68,this.array()}}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}logical_operator(){let e,t=new E(this._ctx,this.state);this.enterRule(t,6,g.RULE_logical_operator);try{this.enterOuterAlt(t,1),this.state=72,(e=this._input.LA(1))!==g.OR&&e!==g.AND?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}boolean_operator(){let e,t=new P(this._ctx,this.state);this.enterRule(t,8,g.RULE_boolean_operator);try{this.enterOuterAlt(t,1),this.state=74,(e=this._input.LA(1))!==g.EQUAL&&e!==g.NOTEQUAL?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}numeric_compare_operator(){let e,t=new O(this._ctx,this.state);this.enterRule(t,10,g.RULE_numeric_compare_operator);try{this.enterOuterAlt(t,1),this.state=76,0!=(-32&(e=this._input.LA(1)))||0==(1<<e&(1<<g.GT|1<<g.GTE|1<<g.LT|1<<g.LTE))?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}string_compare_operator(){let e,t=new C(this._ctx,this.state);this.enterRule(t,12,g.RULE_string_compare_operator);try{this.enterOuterAlt(t,1),this.state=78,(e=this._input.LA(1))!==g.CONTAINS&&e!==g.MATCHES?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}array_operator(){let e,t=new T(this._ctx,this.state);this.enterRule(t,14,g.RULE_array_operator);try{this.enterOuterAlt(t,1),this.state=80,(e=this._input.LA(1))!==g.CONTAINS&&e!==g.IN?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}array(){let e,t=new S(this._ctx,this.state);this.enterRule(t,16,g.RULE_array);try{switch(this.state=95,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,4,this._ctx)){case 1:for(this.enterOuterAlt(t,1),this.state=82,this.match(g.T__2),this.state=83,this.value(),this.state=88,this._errHandler.sync(this),e=this._input.LA(1);e===g.T__3;)this.state=84,this.match(g.T__3),this.state=85,this.value(),this.state=90,this._errHandler.sync(this),e=this._input.LA(1);this.state=91,this.match(g.T__4);break;case 2:this.enterOuterAlt(t,2),this.state=93,this.match(g.T__2),this.state=94,this.match(g.T__4)}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}numerical_value(){let e,t=new j(this._ctx,this.state);this.enterRule(t,18,g.RULE_numerical_value);try{this.enterOuterAlt(t,1),this.state=97,(e=this._input.LA(1))!==g.QUOTED_NUMBER&&e!==g.NUMBER?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}value(){let e,t=new M(this._ctx,this.state);this.enterRule(t,20,g.RULE_value);try{this.enterOuterAlt(t,1),this.state=99,0!=(-32&(e=this._input.LA(1)))||0==(1<<e&(1<<g.QUOTED_NUMBER|1<<g.NUMBER|1<<g.STRING))?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}negative_expr(){let e,t=new x(this._ctx,this.state);this.enterRule(t,22,g.RULE_negative_expr);try{this.enterOuterAlt(t,1),this.state=101,(e=this._input.LA(1))!==g.NOT&&e!==g.NEG?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}key(){let e,t=new A(this._ctx,this.state);this.enterRule(t,24,g.RULE_key);try{this.enterOuterAlt(t,1),this.state=103,(e=this._input.LA(1))!==g.SIMPLETEXT&&e!==g.STRING?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}sempred(e,t,i){switch(t){case 1:return this.object_sempred(e,i)}return!0}object_sempred(e,t){switch(t){case 0:return this.precpred(this._ctx,1)}return!0}static get _ATN(){return g.__ATN||(g.__ATN=(new l.ATNDeserializer).deserialize(h.toCharArray(g._serializedATN))),g.__ATN}}t.ExpressionParser=g,g.T__0=1,g.T__1=2,g.T__2=3,g.T__3=4,g.T__4=5,g.OR=6,g.AND=7,g.NOT=8,g.EQUAL=9,g.NOTEQUAL=10,g.CONTAINS=11,g.MATCHES=12,g.NEG=13,g.GT=14,g.GTE=15,g.LT=16,g.LTE=17,g.IN=18,g.QUOTED_NUMBER=19,g.NUMBER=20,g.FLOAT=21,g.INTEGER=22,g.SIMPLETEXT=23,g.STRING=24,g.WS=25,g.RULE_expression=0,g.RULE_object=1,g.RULE_expr=2,g.RULE_logical_operator=3,g.RULE_boolean_operator=4,g.RULE_numeric_compare_operator=5,g.RULE_string_compare_operator=6,g.RULE_array_operator=7,g.RULE_array=8,g.RULE_numerical_value=9,g.RULE_value=10,g.RULE_negative_expr=11,g.RULE_key=12,g.ruleNames=["expression","object","expr","logical_operator","boolean_operator","numeric_compare_operator","string_compare_operator","array_operator","array","numerical_value","value","negative_expr","key"],g._LITERAL_NAMES=[void 0,"'('","')'","'['","','","']'",void 0,void 0,void 0,"'='","'!='",void 0,void 0,void 0,"'>'","'>='","'<'","'<='"],g._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,"OR","AND","NOT","EQUAL","NOTEQUAL","CONTAINS","MATCHES","NEG","GT","GTE","LT","LTE","IN","QUOTED_NUMBER","NUMBER","FLOAT","INTEGER","SIMPLETEXT","STRING","WS"],g.VOCABULARY=new y.VocabularyImpl(g._LITERAL_NAMES,g._SYMBOLIC_NAMES,[]),g._serializedATN="ì¤ìªºÖê¾ºä½“Ø‡îª‹ì‰l\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t)\n/\n\f2\vI\n\b\b\t\t\n\n\n\n\nY\n\n\f\n\n\\\v\n\n\n\n\n\nb\n\n\v\v\f\f\r\r\b\n\f\v\b\t\v\f\r\r\r\n\nh(H\bJ\nL\fNPRacegi \b !\r!\"\")#)$%%&&'')((#($)0*+\f+,\b,--/.*/20.011203I4556\n67\f7I899:\f:;\v;I<==>\b>?\n?I@AAB\bBC\fCIDEEF\tFG\nGIH3H4H8H<H@HDIJK\tK\tLM\tM\vNO\tO\rPQ\tQRS\tSTUUZ\fVWWY\fXVY\\ZXZ[[]\\Z]^^b_``baTa_bcd\tdef\t\bfgh\t\thij\t\nj(0HZa";class _ extends d.ParserRuleContext{object(){return this.getRuleContext(0,v)}EOF(){return this.getToken(g.EOF,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_expression}enterRule(e){e.enterExpression&&e.enterExpression(this)}exitRule(e){e.exitExpression&&e.exitExpression(this)}accept(e){return e.visitExpression?e.visitExpression(this):e.visitChildren(this)}}t.ExpressionContext=_;class v extends d.ParserRuleContext{negative_expr(){return this.tryGetRuleContext(0,x)}object(e){return void 0===e?this.getRuleContexts(v):this.getRuleContext(e,v)}expr(){return this.tryGetRuleContext(0,b)}logical_operator(){return this.tryGetRuleContext(0,E)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_object}enterRule(e){e.enterObject&&e.enterObject(this)}exitRule(e){e.exitObject&&e.exitObject(this)}accept(e){return e.visitObject?e.visitObject(this):e.visitChildren(this)}}t.ObjectContext=v;class b extends d.ParserRuleContext{key(){return this.getRuleContext(0,A)}boolean_operator(){return this.tryGetRuleContext(0,P)}value(){return this.tryGetRuleContext(0,M)}numeric_compare_operator(){return this.tryGetRuleContext(0,O)}numerical_value(){return this.tryGetRuleContext(0,j)}string_compare_operator(){return this.tryGetRuleContext(0,C)}array(){return this.tryGetRuleContext(0,S)}array_operator(){return this.tryGetRuleContext(0,T)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_expr}enterRule(e){e.enterExpr&&e.enterExpr(this)}exitRule(e){e.exitExpr&&e.exitExpr(this)}accept(e){return e.visitExpr?e.visitExpr(this):e.visitChildren(this)}}t.ExprContext=b;class E extends d.ParserRuleContext{AND(){return this.tryGetToken(g.AND,0)}OR(){return this.tryGetToken(g.OR,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_logical_operator}enterRule(e){e.enterLogical_operator&&e.enterLogical_operator(this)}exitRule(e){e.exitLogical_operator&&e.exitLogical_operator(this)}accept(e){return e.visitLogical_operator?e.visitLogical_operator(this):e.visitChildren(this)}}t.Logical_operatorContext=E;class P extends d.ParserRuleContext{EQUAL(){return this.tryGetToken(g.EQUAL,0)}NOTEQUAL(){return this.tryGetToken(g.NOTEQUAL,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_boolean_operator}enterRule(e){e.enterBoolean_operator&&e.enterBoolean_operator(this)}exitRule(e){e.exitBoolean_operator&&e.exitBoolean_operator(this)}accept(e){return e.visitBoolean_operator?e.visitBoolean_operator(this):e.visitChildren(this)}}t.Boolean_operatorContext=P;class O extends d.ParserRuleContext{GT(){return this.tryGetToken(g.GT,0)}GTE(){return this.tryGetToken(g.GTE,0)}LT(){return this.tryGetToken(g.LT,0)}LTE(){return this.tryGetToken(g.LTE,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_numeric_compare_operator}enterRule(e){e.enterNumeric_compare_operator&&e.enterNumeric_compare_operator(this)}exitRule(e){e.exitNumeric_compare_operator&&e.exitNumeric_compare_operator(this)}accept(e){return e.visitNumeric_compare_operator?e.visitNumeric_compare_operator(this):e.visitChildren(this)}}t.Numeric_compare_operatorContext=O;class C extends d.ParserRuleContext{CONTAINS(){return this.tryGetToken(g.CONTAINS,0)}MATCHES(){return this.tryGetToken(g.MATCHES,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_string_compare_operator}enterRule(e){e.enterString_compare_operator&&e.enterString_compare_operator(this)}exitRule(e){e.exitString_compare_operator&&e.exitString_compare_operator(this)}accept(e){return e.visitString_compare_operator?e.visitString_compare_operator(this):e.visitChildren(this)}}t.String_compare_operatorContext=C;class T extends d.ParserRuleContext{IN(){return this.tryGetToken(g.IN,0)}CONTAINS(){return this.tryGetToken(g.CONTAINS,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_array_operator}enterRule(e){e.enterArray_operator&&e.enterArray_operator(this)}exitRule(e){e.exitArray_operator&&e.exitArray_operator(this)}accept(e){return e.visitArray_operator?e.visitArray_operator(this):e.visitChildren(this)}}t.Array_operatorContext=T;class S extends d.ParserRuleContext{value(e){return void 0===e?this.getRuleContexts(M):this.getRuleContext(e,M)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_array}enterRule(e){e.enterArray&&e.enterArray(this)}exitRule(e){e.exitArray&&e.exitArray(this)}accept(e){return e.visitArray?e.visitArray(this):e.visitChildren(this)}}t.ArrayContext=S;class j extends d.ParserRuleContext{NUMBER(){return this.tryGetToken(g.NUMBER,0)}QUOTED_NUMBER(){return this.tryGetToken(g.QUOTED_NUMBER,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_numerical_value}enterRule(e){e.enterNumerical_value&&e.enterNumerical_value(this)}exitRule(e){e.exitNumerical_value&&e.exitNumerical_value(this)}accept(e){return e.visitNumerical_value?e.visitNumerical_value(this):e.visitChildren(this)}}t.Numerical_valueContext=j;class M extends d.ParserRuleContext{NUMBER(){return this.tryGetToken(g.NUMBER,0)}QUOTED_NUMBER(){return this.tryGetToken(g.QUOTED_NUMBER,0)}STRING(){return this.tryGetToken(g.STRING,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_value}enterRule(e){e.enterValue&&e.enterValue(this)}exitRule(e){e.exitValue&&e.exitValue(this)}accept(e){return e.visitValue?e.visitValue(this):e.visitChildren(this)}}t.ValueContext=M;class x extends d.ParserRuleContext{NEG(){return this.tryGetToken(g.NEG,0)}NOT(){return this.tryGetToken(g.NOT,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_negative_expr}enterRule(e){e.enterNegative_expr&&e.enterNegative_expr(this)}exitRule(e){e.exitNegative_expr&&e.exitNegative_expr(this)}accept(e){return e.visitNegative_expr?e.visitNegative_expr(this):e.visitChildren(this)}}t.Negative_exprContext=x;class A extends d.ParserRuleContext{SIMPLETEXT(){return this.tryGetToken(g.SIMPLETEXT,0)}STRING(){return this.tryGetToken(g.STRING,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_key}enterRule(e){e.enterKey&&e.enterKey(this)}exitRule(e){e.exitKey&&e.exitKey(this)}accept(e){return e.visitKey?e.visitKey(this):e.visitChildren(this)}}t.KeyContext=A},565:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CreatePolicyStepContext=void 0;const a=o(i(1));t.CreatePolicyStepContext=a.createContext(void 0)},566:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DeletePolicy=void 0;const a=i(22),l=o(i(1)),s=i(1060),c=i(1061);t.DeletePolicy=e=>{const{onDeleted:t}=e,{mutate:i,loading:n}=c.useMassDeletePoliciesMutation(),r=n||e.loading,o=l.useCallback(e=>i(e).then(i=>{var n;let r=e.length;if(200===(null===(n=i.payload)||void 0===n?void 0:n.status)){const n=i.payload.value;r=e.filter(e=>!n.includes(e)).length,i.payload.value.forEach(e=>t&&t(e))}return r>0&&(1===r?a.addDangerNotification("Error removing policy","There was an error when trying to remove a policy."):a.addDangerNotification("Error removing policies",`There was an error when trying to remove ${r} policies.`)),r!==e.length}),[i,t]);return l.createElement(s.PolicyDeleteModal,{policy:e.policy,count:e.count,getPolicies:e.getPolicies,isDeleting:r,onClose:e.onClose,onDelete:o})}},569:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useTextFormat=void 0;const a=i(22),l=o(i(1)),s=i(568);t.useTextFormat=(e,t,i="br")=>l.useMemo(()=>{const n=s.format(e,...t);return i?a.join(n.split("\n"),i):n},[i,...t])},570:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerTableEmptyState=void 0;const a=o(i(1)),l=i(33),s=i(144);t.TriggerTableEmptyState=()=>a.createElement(s.EmptyStateSection,{title:l.Messages.tables.trigger.emptyState.notFound.title,content:l.Messages.tables.trigger.emptyState.notFound.content})},571:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useHasPolicyTriggersParametrizedQuery=t.hasTriggersQueryActionCreator=t.useGetPolicyTriggersParametrizedQuery=t.dataToTriggers=t.actionCreator=void 0;const n=i(22),r=i(217),o=i(74),a=i(113),l=i(1087);t.actionCreator=e=>a.Operations.GetPoliciesByIdHistoryTrigger.actionCreator(Object.assign({id:e.policyId},e.page.toQuery())),t.dataToTriggers=r.validationResponseTransformer(e=>{var t,i;if("PagedResponseOfHistoryItem"===e.type){const n=e.value;return Object.assign(Object.assign({},e),{type:"PagedTriggers",value:{count:(null===(t=n.meta)||void 0===t?void 0:t.count)||0,data:l.toTriggers(null!==(i=n.data)&&void 0!==i?i:[])}})}return e}),t.useGetPolicyTriggersParametrizedQuery=()=>n.useTransformQueryResponse(o.useParameterizedQuery(t.actionCreator),t.dataToTriggers);const s=r.validationResponseTransformer(e=>"PagedResponseOfHistoryItem"===e.type?Object.assign(Object.assign({},e),{type:"boolean",value:e.value.data&&e.value.data.length}):e);t.hasTriggersQueryActionCreator=e=>a.Operations.GetPoliciesByIdHistoryTrigger.actionCreator(Object.assign({id:e},n.Page.of(1,1).toQuery())),t.useHasPolicyTriggersParametrizedQuery=()=>n.useTransformQueryResponse(o.useParameterizedQuery(t.hasTriggersQueryActionCreator),s)},61:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOuiaProps=void 0;const n=i(22);t.getOuiaProps=n.getOuiaPropsFactory("Policies")},616:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(22),o=i(407),a=n(i(1)),l=n(i(48)),s=i(74),c=i(437),u=i(156),d=n(i(814)),p=r.createFetchingClient(r.getInsights,{responseInterceptors:[o.validateSchemaResponseInterceptor]});r.initStore(),l.default.render(a.default.createElement(c.Provider,{store:r.getStore()},a.default.createElement(u.BrowserRouter,{basename:r.getBaseName(window.location.pathname)},a.default.createElement(s.ClientContextProvider,{client:p},a.default.createElement(d.default,null)))),document.getElementById("root"))},814:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),i(815);const a=i(472),l=i(22),s=o(i(1)),c=i(105),u=i(490),d=i(170),p=i(247),f=i(1093);t.default=c.withRouter(()=>{const{rbac:e,userSettings:t}=f.useApp();return e?s.createElement(p.AppContext.Provider,{value:{rbac:e,userSettings:t}},e.canReadAll?s.createElement(s.Fragment,null,s.createElement(a.NotificationsPortal,null),s.createElement(d.Routes,null)):s.createElement(u.NoPermissionsPage,null)):s.createElement(l.AppSkeleton,null)})},815:function(e,t,i){var n=i(408);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},o=i(10)(n,r);n.locals&&(e.exports=n.locals),e.hot.accept(408,(function(){var t=i(408);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var i,n=0;for(i in e){if(!t||e[i]!==t[i])return!1;n++}for(i in t)n--;return 0===n}(n.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");o(t)})),e.hot.dispose((function(){o()}))},818:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorPage=t.ErrorPageInternal=void 0;const a=i(22),l=o(i(1)),s=i(156),c=i(33),u=i(170);t.ErrorPageInternal=e=>{const t=l.useCallback(()=>{e.history.push(u.linkTo.listPage())},[e.history]);return l.createElement(a.ErrorBoundaryPage,{action:t,actionLabel:c.Messages.pages.error.emptyState.actions.goToIndex,pageHeader:c.Messages.pages.error.title,title:c.Messages.pages.error.emptyState.title,description:c.Messages.pages.error.emptyState.content},e.children)},t.ErrorPage=s.withRouter(t.ErrorPageInternal)},819:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=i(25),s=i(133),c=i(22),u=o(i(1)),d=i(1),p=i(492),f=i(135),m=i(43),y=i(247),h=i(493),g=i(411),_=a(i(186)),v=i(499),b=i(506),E=i(33),P=i(413),O=i(507),C=i(860),T=i(508),S=i(566),j=i(1062),M=i(1063),x=i(1064),A=i(1065),I=i(1069),w=i(1070),N=m.style({paddingBottom:0});t.default=e=>{var t;const[i,n]=u.useState({isOpen:!1}),r=O.useMassChangePolicyEnabledMutation(),o=v.usePolicyFilter(),a=c.useSort(),m=v.usePolicyPage(o.debouncedFilters,_.default.defaultElementsPerPage,a.sortBy),R=w.useGetListPagePolicies(m.page),{query:D}=P.useGetPoliciesQuery(c.Page.of(0,c.Page.NO_SIZE,m.page.filter,m.page.sort),!1),k=b.usePolicyToDelete(),L=d.useContext(y.AppContext);let F=R.loading||r.loading;const B="PagedResponseOfPolicy"===(null===(t=R.payload)||void 0===t?void 0:t.type)?R.payload.value.count:0,V=v.usePolicyRows((e=>{if(200===(null==e?void 0:e.status))return e.value.data})(R.payload),F,B,m.page),{clearSelection:U,loadingSelected:G}=V;F=F||G;const{canWriteAll:z,canReadAll:H}=L.rbac,{query:Q}=R,{mutate:W,loading:q}=r,{open:$}=k,K=f.usePrevious(q);u.useEffect(()=>{U()},[o.debouncedFilters,U]),u.useEffect(()=>{!0!==K||q||Q()},[q,Q,K]);const Y=M.useListPageDelete({policyPage:m,policyRows:V,policyToDelete:k,reload:Q,count:B}),J=x.useTableActionResolverCallback({canWriteAll:z,openPolicyToDelete:$,mutateChangePolicyEnabled:W,setPolicyWizardState:n}),X=A.useToolbarActions({setPolicyWizardState:n,policyRows:V,openPolicyToDelete:$,mutateChangePolicyEnabled:W,exportAllPoliciesQuery:D});u.useEffect(()=>{H&&Q()},[H,Q]);const Z=u.useCallback(e=>{const t=L.userSettings.refresh;e&&(Q(),t()),n({isOpen:!1})},[L.userSettings.refresh,n,Q]),ee=u.useMemo(()=>I.policyTableError({refreshPage:()=>{window.location.reload()},tryAgain:()=>{Q()}},R.error,R.status),[R.error,R.status,Q]);return u.createElement(u.Fragment,null,u.createElement(p.Helmet,null,u.createElement("title",null,"Policies | Red Hat Insights")),u.createElement(s.PageHeader,null,u.createElement(s.PageHeaderTitle,{title:E.Messages.pages.listPage.title})),!L.userSettings.isSubscribedForNotifications&&V.rows.find(e=>e.actions.find(e=>e.type===C.ActionType.EMAIL))&&u.createElement(l.PageSection,{className:N},u.createElement(c.InsightsEmailOptIn,{ouiaId:"list-email-required",content:E.Messages.pages.listPage.emailOptIn,insights:c.getInsights()})),u.createElement(s.Main,null,!1===R.hasPolicies?u.createElement(j.ListPageEmptyState,{createPolicy:z?X.createCustomPolicy:void 0}):u.createElement(s.Section,null,u.createElement(g.PolicyToolbar,{ouiaId:"main-toolbar",onCreatePolicy:z?X.createCustomPolicy:void 0,onDeletePolicy:z?X.onDeletePolicies:void 0,onEnablePolicy:z?X.onEnablePolicies:void 0,onDisablePolicy:z?X.onDisablePolicies:void 0,onPaginationChanged:m.changePage,onPaginationSizeChanged:m.changeItemsPerPage,onSelectionChanged:V.onSelectionChanged,selectedCount:V.selectionCount,page:m.page.index,pageCount:V.rows.length,perPage:m.page.size,showPerPageOptions:!0,filters:o.filters,setFilters:o.setFilters,clearFilters:o.clearFilter,count:B,onExport:X.onExport,showBottomPagination:!0},u.createElement(h.PolicyTable,{ouiaId:"main-table",policies:V.rows,onCollapse:V.onCollapse,onSelect:V.onSelect,actionResolver:J,loading:F,error:ee,onSort:a.onSort,sortBy:a.sortBy,linkToDetailPolicy:!0})))),i.isOpen&&u.createElement(T.CreatePolicyWizard,{isOpen:i.isOpen,close:Z,initialValue:i.template,showCreateStep:i.showCreateStep,policiesExist:!0===R.hasPolicies,isEditing:i.isEditing}),k.isOpen&&u.createElement(S.DeletePolicy,{onClose:Y.onCloseDeletePolicy,onDeleted:Y.onDeleted,loading:V.loadingSelected,count:k.count,getPolicies:V.getSelected,policy:k.policy}))}},820:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionsCell=void 0;const a=i(25),l=i(75),s=o(i(1)),c=i(43),u=i(33),d=i(83),p=i(61),f=i(409),m=c.style({borderRadius:3}),y=c.style({marginRight:5}),h=c.style({minWidth:145}),g=a.TooltipPosition.bottom,_=()=>s.createElement(a.Tooltip,{content:u.Messages.tables.policy.actions.email,position:g},s.createElement(f.ActionEmailIcon,null)),v=()=>s.createElement(a.Tooltip,{content:u.Messages.tables.policy.actions.notification,position:g},s.createElement(f.ActionNotificationIcon,null));t.ActionsCell=e=>{const t=e.actions.slice(0,4),i=e.actions.slice(4),n=t.map((e,t)=>{let i;switch(e.type){case d.ActionType.EMAIL:i=s.createElement(_,null);break;case d.ActionType.NOTIFICATION:i=s.createElement(v,null);break;default:l.assertNever(e)}return s.createElement(a.SplitItem,{key:t,className:y},i)});return i.length>0&&n.push(s.createElement(a.SplitItem,{key:"remaining",className:y},s.createElement(a.Badge,{className:m,isRead:!0},`${i.length} more`))),s.createElement(a.Split,Object.assign({},p.getOuiaProps("Policy/Table/Actions",e),{className:h}),n)}},821:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DisabledPolicyIcon=void 0;const a=i(57),l=o(i(1));t.DisabledPolicyIcon=()=>l.createElement(a.OffIcon,null)},822:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EnabledPolicyIcon=void 0;const a=i(57),l=o(i(1));t.EnabledPolicyIcon=()=>l.createElement(a.CheckCircleIcon,{color:"green"})},823:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationIcon=void 0;const a=i(57),l=o(i(1));t.NotificationIcon=()=>l.createElement(a.BellIcon,null)},83:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(491);Object.defineProperty(t,"ActionType",{enumerable:!0,get:function(){return n.ActionType}})},831:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Dates=void 0;const a=i(25),l=i(271),s=o(i(1)),c=i(61);t.Dates=e=>s.createElement(s.Fragment,null,s.createElement(a.Text,Object.assign({},c.getOuiaProps("Policy/Table/Expanded/Dates",e)),"Last updated ",l.format(e.updated,"dd MMM yyyy")," | Created ",l.format(e.created,"dd MMM yyyy")))},832:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Description=void 0;const a=i(25),l=o(i(1)),s=i(33),c=i(61);t.Description=e=>l.createElement("div",Object.assign({},c.getOuiaProps("Policy/Table/Expanded/Description",e)),l.createElement(a.Form,null,l.createElement(a.FormGroup,{fieldId:"",label:s.Messages.labels.description})),l.createElement(a.Text,null," ",e.description," "))},833:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LastTriggeredCell=void 0;const a=i(271),l=o(i(1)),s=i(43),c=i(33),u=i(61),d=i(248),p=s.style({marginLeft:10});t.LastTriggeredCell=e=>{let t;if(e.lastTriggered){const i=a.add(e.lastTriggered,{months:1}),n=new Date(Date.now());t=a.isAfter(n,i)?a.format(e.lastTriggered,"MMM dd y"):`${a.formatDistanceToNow(e.lastTriggered)} ${c.Messages.components.lastTriggeredCell.ago}`}else t=c.Messages.components.lastTriggeredCell.never;return l.createElement("div",Object.assign({},u.getOuiaProps("Policy/Table/LastTriggered",e)),e.isEnabled?l.createElement(d.EnabledPolicyIcon,null):l.createElement(d.DisabledPolicyIcon,null),l.createElement("span",{className:p},t))}},834:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usePolicyFilter=void 0;const n=i(22),r=i(75),o=i(412),a=e=>n.useUrlStateString("name",e),l=e=>n.useUrlStateExclusiveOptions("enabled",["Enabled","Disabled",""],""),s=e=>{switch(e){case o.PolicyFilterColumn.NAME:return a;case o.PolicyFilterColumn.IS_ACTIVE:return l;default:r.assertNever(e)}};t.usePolicyFilter=(e=250,t=!0)=>n.useFilters(o.PolicyFilterColumn,e,t?s:void 0)},835:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.usePolicyPage=void 0;const a=i(22),l=o(i(1)),s=i(412);t.usePolicyPage=(e,t,i)=>{const[n,r]=l.useState(1),[o,c]=l.useState(t);return l.useEffect(()=>{r(1)},[r,e]),{page:l.useMemo(()=>{const t=new a.Filter,r=a.stringValue(e[s.PolicyFilterColumn.NAME]).trim(),l=a.stringValue(e[s.PolicyFilterColumn.IS_ACTIVE]).trim();return""!==r&&t.and(s.PolicyFilterColumn.NAME,a.Operator.ILIKE,`%${r}%`),""!==l&&t.and(s.PolicyFilterColumn.IS_ACTIVE,a.Operator.BOOLEAN_IS,"Enabled"===l?"true":"false"),a.Page.of(n,o,t,i)},[n,o,i,e]),changePage:l.useCallback((e,t)=>{r(t)},[r]),changeItemsPerPage:l.useCallback((e,t)=>{r(1),c(t)},[r,c])}}},836:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.usePolicyRows=void 0;const a=i(22),l=i(75),s=o(i(1)),c=i(135),u=i(411),d=i(837),p=new a.ImmutableContainerSet(void 0,a.ImmutableContainerSetMode.INCLUDE),f=new a.ImmutableContainerSet(void 0,a.ImmutableContainerSetMode.EXCLUDE);t.usePolicyRows=(e,t,i,n)=>{const[r,o]=s.useState([]),[m,y]=s.useState(p),h=c.usePrevious(e),{query:g,loading:_}=d.useGetPoliciesIdsQuery(),v=s.useCallback(()=>{y(p),o(e=>e.map(e=>Object.assign(Object.assign({},e),{isOpen:!1,isSelected:!1})))},[y]);s.useEffect(()=>{t||!e?o([]):e!==h&&o(null==e?void 0:e.map(e=>Object.assign(Object.assign({},e),{isOpen:!1,isSelected:m.contains(e.id)})))},[e,t,o,h,m]);const b=s.useCallback((e,t,i)=>{o(n=>{const r=[...n];return r[t]=Object.assign(Object.assign({},e),{isOpen:i}),r})},[o]),E=s.useCallback(e=>{y(t=>t.remove(e))},[y]),P=s.useCallback((e,t,i)=>{y(t=>i?t.add(e.id):t.remove(e.id)),o(n=>{const r=[...n];return r[t]=Object.assign(Object.assign({},e),{isSelected:i}),r})},[y]),O=s.useCallback(e=>{e===u.SelectionCommand.NONE?(y(p),o(e=>e.map(e=>Object.assign(Object.assign({},e),{isSelected:!1})))):e===u.SelectionCommand.PAGE?(y(e=>e.addIterable(r.map(e=>e.id))),o(e=>e.map(e=>Object.assign(Object.assign({},e),{isSelected:!0})))):e===u.SelectionCommand.ALL?(y(f),o(e=>e.map(e=>Object.assign(Object.assign({},e),{isSelected:!0})))):l.assertNever(e)},[r]),C=s.useMemo(()=>m.size(i),[m,i]),T=s.useCallback(()=>m.mode===a.ImmutableContainerSetMode.INCLUDE?Promise.resolve(m.values()):g(n).then(e=>{var t;if(e.error)throw e.errorObject;let i=[];if(200===(null===(t=e.payload)||void 0===t?void 0:t.status)){const t=new Set(e.payload.value);m.values().forEach(e=>{t.delete(e)}),i=t}return Array.from(i.values())}),[g,n,m]);return{rows:r,onCollapse:b,onSelect:P,onSelectionChanged:O,selectionCount:C,clearSelection:v,getSelected:T,loadingSelected:_,selected:m,removeSelection:E}}},837:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGetPoliciesIdsQuery=t.actionCreator=void 0;const n=i(74),r=i(113);t.actionCreator=e=>r.Operations.GetPoliciesIds.actionCreator(e.toQuery()),t.useGetPoliciesIdsQuery=()=>n.useParameterizedQuery(t.actionCreator)},860:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(83),t)},862:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyWizard=void 0;const a=i(25),l=i(75),s=i(177),c=o(i(1)),u=i(135),d=i(33),p=i(219),f=i(967),m=i(191),y=i(968),h=i(977),g=i(1050),_=i(1051),v=i(1053),b=i(1054),E=(e,t,i,n,r)=>!r&&(e===i||(t?e<=n:e<=i)),P=(e,t)=>!t&&e,O=e=>{const t=s.useFormikContext(),i=t.validateForm,n=t.handleSubmit;c.useEffect(()=>{i()},[e.currentStep,i]),c.useEffect(()=>{e.triggeredAction!==m.WizardActionType.NONE&&n()},[e.triggeredAction,n]);const r={isLoading:e.isLoading,isFormValid:t.isValid,triggerAction:e.triggerAction,verifyResponse:e.verifyResponse,createResponse:e.createResponse,setVerifyResponse:e.setVerifyResponse,facts:e.facts,setMaxStep:e.setMaxStep},o=e.steps[e.currentStep],l=((e,t,i)=>e.isValid?e.isValid(t,i):t.isFormValid)(o,r,t.values);r.isValid=l;const u=e.steps.map(t=>Object.assign(Object.assign({},t),{enableNext:P(l,e.isLoading),canJumpTo:E(t.id,l,e.currentStep,e.maxStep,e.isLoading)}));return c.createElement(a.Form,null,c.createElement(m.WizardContext.Provider,{value:r},c.createElement(a.Wizard,{isOpen:!0,onSave:()=>{e.triggerAction(m.WizardActionType.SAVE)},onClose:e.onClose,steps:u,startAtStep:e.currentStep+1,onNext:e.onMove,onBack:e.onMove,onGoToStep:e.onMove,title:e.isEditing?d.Messages.wizards.policy.titleEdit:d.Messages.wizards.policy.titleNew,description:d.Messages.wizards.policy.description,footer:c.createElement(f.PolicyWizardFooter,{onNext:o.onNext,loadingText:"Loading",isLoading:e.isLoading,error:e.createResponse.error})})))};t.PolicyWizard=e=>{const[t,i]=c.useState(0),[n,r]=c.useState(0),[o,a]=c.useState({type:m.WizardActionType.NONE}),[d,f]=c.useState({isValid:!1}),E=u.useMountedState(),[P,C]=c.useState({created:!1}),T=c.useCallback(e=>{let t,i;const n=new Promise((e,n)=>{t=e,i=n});return a(n=>(n.rejecter&&n.rejecter(),{type:e,resolver:t,rejecter:i})),n},[a]),S=c.useCallback(e=>{a(t=>(e&&t.resolver?t.resolver():t.rejecter&&t.rejecter(),{type:m.WizardActionType.NONE}))},[a]);c.useEffect(()=>{var t;(null===(t=e.initialValue)||void 0===t?void 0:t.conditions)&&f({isValid:!0,policy:e.initialValue})},[e.initialValue]);const j=(e=>{const t=[];return e&&t.push(_.createPolicyStep()),t.push(v.createDetailsStep(),h.createConditionsStep(),y.createActionsStep(),b.createReviewStep({nextButtonText:"Finish"})),t.map((e,t)=>Object.assign(Object.assign({},e),{id:t}))})(e.showCreateStep);return c.createElement(c.Fragment,null,c.createElement(g.CreatePolicyStepContextProvider,{showCreateStep:e.showCreateStep},c.createElement(s.Formik,{initialValues:e.initialValue,initialStatus:{},validateOnMount:!1,validationSchema:j[t].validationSchema,onSubmit:(t,i)=>{i.setSubmitting(!1),a(e=>Object.assign(Object.assign({},e),{type:m.WizardActionType.NONE}));const n=p.PolicyFormSchema.cast(t);switch(i.setValues(n),o.type){case m.WizardActionType.SAVE:e.onSave(n).then(e=>{E()&&(C(e),S(e.created))});break;case m.WizardActionType.VALIDATE_CONDITION:case m.WizardActionType.NONE:case m.WizardActionType.VALIDATE_NAME:break;default:l.assertNever(o.type)}},validate:t=>{const i=p.PolicyFormSchema.cast(t);switch(o.type){case m.WizardActionType.SAVE:case m.WizardActionType.NONE:break;case m.WizardActionType.VALIDATE_CONDITION:e.onVerify(i).then(e=>{f(e),S(e.isValid)});break;case m.WizardActionType.VALIDATE_NAME:e.onValidateName(i).then(e=>{C(e),S(!e.error)});break;default:l.assertNever(o.type)}}},c.createElement(O,{currentStep:t,maxStep:n,isLoading:e.isLoading,triggeredAction:o.type,triggerAction:T,steps:j,verifyResponse:d,createResponse:P,setVerifyResponse:f,onClose:e.onClose,onMove:(e,t)=>{const o=e.id;i(o),o>n&&r(o)},showCreateStep:e.showCreateStep,facts:e.facts,setMaxStep:r,isEditing:e.isEditing}))))}},962:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAction=t.isActionNotification=t.isActionEmail=void 0;const n=i(491);t.isActionEmail=e=>e.type===n.ActionType.EMAIL,t.isActionNotification=e=>e.type===n.ActionType.NOTIFICATION,t.isAction=e=>t.isActionEmail(e)||t.isActionNotification(e)},963:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(964);Object.defineProperty(t,"ActionEmailSchema",{enumerable:!0,get:function(){return n.ActionEmailSchema}});var r=i(965);Object.defineProperty(t,"ActionNotificationSchema",{enumerable:!0,get:function(){return r.ActionNotificationSchema}});var o=i(966);Object.defineProperty(t,"ActionSchema",{enumerable:!0,get:function(){return o.ActionSchema}})},964:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionEmailSchema=void 0;const a=o(i(171)),l=i(83);t.ActionEmailSchema=a.object().shape({type:a.mixed().oneOf([l.ActionType.EMAIL]).required()})},965:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionNotificationSchema=void 0;const a=o(i(171)),l=i(83);t.ActionNotificationSchema=a.object().shape({type:a.mixed().oneOf([l.ActionType.NOTIFICATION]).required()})},966:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionSchema=void 0;const a=o(i(171)),l=i(83);t.ActionSchema=a.object().shape({type:a.mixed().required("Specify the action type").oneOf(Object.values(l.ActionType))})},967:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyWizardFooter=void 0;const a=i(25),l=i(25),s=i(57),c=i(102),u=o(i(1)),d=i(1),p=i(43),f=i(191),m=p.style({marginTop:"auto",marginBottom:14}),y=p.style({marginRight:5});t.PolicyWizardFooter=e=>{const t=d.useContext(f.WizardContext);return u.createElement(a.WizardFooter,null,u.createElement(a.WizardContextConsumer,null,i=>{const n=e.onNext&&(()=>{e.onNext&&e.onNext(t,i.onNext)});return u.createElement(u.Fragment,null,u.createElement(a.Button,{variant:a.ButtonVariant.primary,type:"submit",onClick:n||i.onNext,isDisabled:e.isLoading||!i.activeStep.enableNext},i.activeStep.nextButtonText||"Next"),!i.activeStep.hideBackButton&&u.createElement(a.Button,{variant:a.ButtonVariant.secondary,onClick:i.onBack,isDisabled:0===i.activeStep.id||e.isLoading},"Back"),!i.activeStep.hideCancelButton&&u.createElement(a.Button,{variant:a.ButtonVariant.link,onClick:i.onClose,isDisabled:e.isLoading},"Cancel"),e.isLoading&&u.createElement("div",{className:m},e.loadingText," Â ",u.createElement(l.Spinner,{size:"md"})),!e.isLoading&&e.error&&u.createElement(a.Split,{className:m},u.createElement(a.SplitItem,null,u.createElement(s.ExclamationCircleIcon,{className:y,color:c.global_danger_color_100.value})),u.createElement(a.SplitItem,null,e.error)))}))}},968:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createActionsStep=t.ActionsStep=void 0;const a=i(25),l=i(177),s=o(i(1)),c=i(33),u=i(219),d=i(969),p=i(973);t.ActionsStep=()=>{var e;const{validateForm:t,values:i}=l.useFormikContext(),n=null===(e=i.actions)||void 0===e?void 0:e.length;return s.useEffect(()=>{t()},[t,n]),s.createElement(s.Fragment,null,s.createElement(a.Title,{headingLevel:"h4",size:"xl"},c.Messages.wizards.policy.actions.title),s.createElement(l.FieldArray,{name:"actions"},e=>{return s.createElement(s.Fragment,null,s.createElement(p.AddTriggersDropdown,{isTypeEnabled:t=>{var i;return 0===((null===(i=e.form.values.actions)||void 0===i?void 0:i.filter(e=>e.type===t))||[]).length},onTypeSelected:t=>{e.push({type:t})}}),s.createElement(d.ActionsForm,{id:"actions",name:"actions",actions:e.form.values.actions,arrayHelpers:e}))}))},t.createActionsStep=e=>Object.assign({name:c.Messages.wizards.policy.actions.title,component:s.createElement(t.ActionsStep,null),validationSchema:u.PolicyFormActions},e)},969:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionsForm=void 0;const a=i(25),l=i(57),s=i(102),c=i(75),u=o(i(1)),d=i(43),p=i(33),f=i(83),m=i(970),y=i(409),h=d.style({gridGap:s.global_spacer_md.var}),g=d.style({backgroundColor:"white",border:"1px var(--pf-global--BorderColor--200) solid",boxShadow:"none"}),_=d.style({marginLeft:10,display:"inline"});t.ActionsForm=e=>{var t;return u.createElement(a.Form,{className:h},null===(t=e.actions)||void 0===t?void 0:t.map((t,i)=>u.createElement(u.Fragment,{key:i},u.createElement(a.Card,{className:g},u.createElement(a.CardHeader,{"data-codemods":"true"},u.createElement(a.CardActions,null,u.createElement(a.Button,{variant:"plain","aria-label":"Action",onClick:e.arrayHelpers.handleRemove(i)},u.createElement(l.TimesIcon,null))),u.createElement(a.CardTitle,null,u.createElement(u.Fragment,null,u.createElement(y.ActionIcon,{actionType:null==t?void 0:t.type}),u.createElement(a.Title,{headingLevel:"h2",className:_,size:"md"},(null==t?void 0:t.type)?(e=>{switch(e){case f.ActionType.EMAIL:return p.Messages.tables.policy.actions.email;case f.ActionType.NOTIFICATION:return p.Messages.tables.policy.actions.notification;default:c.assertNever(e)}})(t.type):"")))),u.createElement(a.CardBody,{className:"pf-c-form"},u.createElement(m.ActionForm,{ouiaId:`actions-form.${i.toString()}`,isReadOnly:e.isReadOnly,action:t,prefix:`actions.${i}`}))))))}},970:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionForm=void 0;const a=o(i(1)),l=i(83),s=i(971),c=i(972);t.ActionForm=e=>{var t,i;switch((null===(t=e.action)||void 0===t?void 0:t.type)||void 0){case l.ActionType.EMAIL:return a.createElement(s.ActionEmailForm,Object.assign({},e));case l.ActionType.NOTIFICATION:return a.createElement(c.ActionNotificationForm,Object.assign({},e));case void 0:return null;default:throw new Error("Unexpected action type:["+(null===(i=e.action)||void 0===i?void 0:i.type)+"]")}}},971:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionEmailForm=void 0;const a=i(25),l=i(22),s=o(i(1)),c=i(1),u=i(247),d=i(33),p=i(61);t.ActionEmailForm=e=>{const t=c.useContext(u.AppContext);return s.createElement("div",Object.assign({},p.getOuiaProps("Policy/Action/Email",e)),s.createElement(a.Text,null,"An email will be sent to all users on this account with access to Policies according to their email preferences."),!t.userSettings.isSubscribedForNotifications&&s.createElement(l.InsightsEmailOptIn,{ouiaId:"action-email.wizard-email-required",content:d.Messages.wizards.policy.actions.emailOptIn,insights:l.getInsights()}))}},972:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionNotificationForm=void 0;const l=i(25),s=o(i(1)),c=a(i(186)),u=i(33),d=i(61),p=e=>s.createElement(l.Text,null,e.head,s.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.link),e.tail);t.ActionNotificationForm=e=>{const t=s.useMemo(()=>c.default.pages.notifications(),[]);return s.createElement("div",Object.assign({},d.getOuiaProps("Policy/Action/Hook",e)),s.createElement(p,Object.assign({},u.Messages.components.actionNotificationForm.paragraph1,{url:t})),s.createElement(p,Object.assign({},u.Messages.components.actionNotificationForm.paragraph2,{url:t})))}},973:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AddTriggersDropdown=void 0;const a=i(25),l=i(974),s=i(57),c=i(22),u=o(i(1)),d=i(43),p=i(33),f=i(83),m=i(61),y=d.style({marginBottom:16});t.AddTriggersDropdown=e=>{const[t,i]=u.useState(!1),n=c.getInsights().chrome.isBeta(),r=c.getInsights().chrome.isProd,o=[!n||r?f.ActionType.EMAIL:f.ActionType.NOTIFICATION].map(t=>u.createElement(a.DropdownItem,{key:t,onClick:()=>(t=>{e.onTypeSelected(t),i(!1)})(t),isDisabled:!e.isTypeEnabled(t)},p.Messages.components.actionType[t]));return u.createElement(a.Dropdown,Object.assign({isOpen:t,dropdownItems:o,isPlain:!0,className:y,toggle:u.createElement(l.Toggle,{isPlain:!0,onToggle:e=>i(e),id:"add-action-toggle"},u.createElement(a.Button,{component:"a",variant:a.ButtonVariant.link,isInline:!0}," Add trigger actions ",u.createElement(s.AngleDownIcon,null)," "))},m.getOuiaProps("Policy/Wizard/AddTrigger",e)))}},977:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createConditionsStep=void 0;const l=i(25),s=i(57),c=i(102),u=i(22),d=i(177),p=o(i(1)),f=i(43),m=i(33),y=i(219),h=i(978),g=i(191),_=a(i(1049)),v=f.style({marginTop:"auto",marginBottom:"auto",marginLeft:8}),b=f.style({width:"100%"}),E=f.style({marginTop:12}),P=f.style({color:c.global_danger_color_100.var}),O=f.style({color:c.global_success_color_200.var}),C=f.style({fontWeight:"bold"}),T=f.style({marginBottom:5}),S=e=>e.loading?p.createElement(l.Split,null,p.createElement(l.SplitItem,null,p.createElement("span",{className:v},p.createElement(l.Spinner,{size:"md"})),p.createElement("span",{className:v}," ",m.Messages.wizards.policy.conditions.validating," "))):e.changed?null:e.isValid?p.createElement(l.Split,null,p.createElement(l.SplitItem,null,p.createElement(s.CheckCircleIcon,{className:v,color:c.global_success_color_200.value})),p.createElement(l.SplitItem,null,p.createElement("div",{className:u.joinClasses(v,O,C)},m.Messages.wizards.policy.conditions.valid))):e.error?p.createElement(l.Stack,null,p.createElement(l.StackItem,null,p.createElement(l.Split,null,p.createElement(l.SplitItem,null,p.createElement(s.ExclamationCircleIcon,{className:v,color:c.global_danger_color_100.value})),p.createElement(l.SplitItem,null,p.createElement("div",{className:u.joinClasses(v,P,C)},m.Messages.wizards.policy.conditions.invalid)))),p.createElement(l.StackItem,null,p.createElement("div",{className:u.joinClasses(v,P)}," ",e.error," "))):null,j=()=>{var e;const t=p.useContext(g.WizardContext),{values:i}=d.useFormikContext(),n=!i.conditions||""===i.conditions||t.isLoading;return p.createElement(u.Form,{ouiaId:"condition-step"},p.createElement(l.Title,{className:T,headingLevel:"h4",size:"xl"},m.Messages.wizards.policy.conditions.title),m.Messages.wizards.policy.conditions.summaryDesc,p.createElement(h.ConditionFieldWithForkmik,{ouiaId:"conditions",label:"Condition text",id:"conditions",name:"conditions",facts:t.facts||[],hint:m.Messages.wizards.policy.conditions.hint}),p.createElement(l.Stack,{className:b},p.createElement(l.StackItem,null,p.createElement(l.Button,{onClick:()=>{t.triggerAction(g.WizardActionType.VALIDATE_CONDITION)},isDisabled:n,variant:l.ButtonVariant.secondary},"Validate condition")),p.createElement(l.StackItem,{className:E},p.createElement(S,Object.assign({loading:t.isLoading},t.verifyResponse,{changed:(null===(e=t.verifyResponse.policy)||void 0===e?void 0:e.conditions)!==i.conditions})))),p.createElement(_.default,null))};t.createConditionsStep=e=>Object.assign({name:m.Messages.wizards.policy.conditions.title,component:p.createElement(j,null),validationSchema:y.PolicyFormConditions,isValid:(e,t)=>{var i;return t.conditions===(null===(i=e.verifyResponse.policy)||void 0===i?void 0:i.conditions)&&e.verifyResponse.isValid}},e)},978:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionFieldWithForkmik=void 0;const l=i(25),s=i(177),c=o(i(1)),u=i(979);t.ConditionFieldWithForkmik=e=>{const{hint:t}=e,i=a(e,["hint"]),[n,r,{setValue:o}]=s.useField(Object.assign({},i)),d=!r.error||!r.touched,p=c.useCallback(e=>{o(e)},[o]);return c.createElement(l.FormGroup,{fieldId:e.id,helperTextInvalid:r.error,isRequired:e.isRequired,validated:d?"default":"error",label:e.label},c.createElement(u.ConditionField,Object.assign({},i,n,{value:n.value?n.value.toString():"",onSelect:p})),t&&c.createElement(l.Text,{component:l.TextVariants.small},t))}},979:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionField=t.buildOptionList=t.factToOptions=void 0;const a=i(25),l=o(i(1)),s=i(135),c=i(43),u=i(61),d=i(980),p=c.style({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"});t.factToOptions=(e,t,i)=>((e=e.trim()).length>0&&t.length>0&&(e+=" "),i.length>0&&t.length>0&&(i=" "+i),(t||[" "]).map(t=>l.createElement(a.SelectOption,{className:p,key:e+t+i,value:e+t+i},e,l.createElement("b",null,t),i))),t.buildOptionList=(e,i)=>{try{const n=d.computeOptions(e,i);if(n)return t.factToOptions(n.prefix,n.options,n.postfix)}catch(t){console.log(`Exception when computing options for condition [${e}]`,t)}return[]},t.ConditionField=e=>{const{facts:i,onSelect:n,value:r}=e,[o,c]=l.useState(!1),[d,p]=l.useState(),f=l.useCallback(e=>t.buildOptionList(e,i),[i]),m=l.useCallback(e=>{const t=f(r);if(e){let e=t.length>0;1===t.length&&t[0].props.value===r&&(e=!1),c(e)}p(t)},[r,f,p]);s.useUpdateEffect(()=>{m(!0)},[m]),s.useEffectOnce(()=>{m(!1)});const y=l.useCallback(e=>{const t=e.target.value;return n(t),[]},[n]),h=l.useCallback((e,t)=>{n(t.toString()),p(e=>(e&&1===e.length&&e[0].props.value===t&&c(!1),e))},[n]),g=l.useCallback(()=>{n("")},[n]),_=l.useCallback(e=>{c(e)},[]);return l.createElement(a.Select,Object.assign({},u.getOuiaProps("ConditionField",e),{label:e.label,toggleId:e.id,name:e.name,onToggle:_,isOpen:o,selections:r,variant:a.SelectVariant.typeahead,onSelect:h,onFilter:y,onClear:g,typeAheadAriaLabel:"Condition writer",style:{maxWidth:"100%"}}),d)}},980:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeOptions=void 0;const n=i(536),r=i(1043),o=i(564),a=i(1044),l=e=>e.map(e=>e.value).join(" ");t.computeOptions=(e,t)=>{const i=(e=>{const t=n.CharStreams.fromString(e),i=new r.ExpressionLexer(t);i.removeErrorListeners();const a=new n.CommonTokenStream(i),l=new o.ExpressionParser(a);return l.removeErrorListeners(),l})(e).expression(),s=(new a.ConditionVisitor).visit(i).filter(e=>e.type!==a.ElementType.ERROR);let c=s.pop();const u=[];if(void 0===c)return{prefix:"",options:t.slice(0,10).map(e=>e.name||""),postfix:""};for(;c.type===a.ElementType.CLOSE_ROUND_BRACKET;){const e=s.pop();if(void 0===e)break;u.unshift(c),c=e}const d=l(s),p=l(u),f=c;return f.type===a.ElementType.FACT?{prefix:d,options:t.filter(e=>e.name&&e.name.toUpperCase().includes(f.value.toUpperCase())).slice(0,10).map(e=>e.name||""),postfix:p}:(u.unshift(f),{prefix:d,options:[],postfix:l(u)})}}});
//# sourceMappingURL=App.49bfe8140193fff4dcd5.js.map