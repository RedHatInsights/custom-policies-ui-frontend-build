!function(e){function t(t){for(var n,i,o=t[0],a=t[1],s=t[2],l=0,c=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(M,i)&&M[i]&&c.push(M[i][0]),M[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(R&&R(t);c.length;)c.shift()();return A.push.apply(A,s||[]),r()}function r(){for(var e,t=0;t<A.length;t++){for(var r=A[t],n=!0,i=1;i<r.length;i++){var o=r[i];0!==M[o]&&(n=!1)}n&&(A.splice(t--,1),e=N(N.s=r[0]))}return e}var n=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!O[e]||!b[e])return;for(var r in b[e]=!1,t)Object.prototype.hasOwnProperty.call(t,r)&&(y[r]=t[r]);0==--g&&0===E&&T()}(e,t),n&&n(e,t)};var i,o=!0,a="6fdddb9b59b019fc6fd6",s=1e4,l={},c=[],u=[];function d(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:i!==e,active:!0,accept:function(e,r){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._acceptedDependencies[e[n]]=r||function(){};else t._acceptedDependencies[e]=r||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._declinedDependencies[e[r]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var r=t._disposeHandlers.indexOf(e);r>=0&&t._disposeHandlers.splice(r,1)},check:S,apply:x,status:function(e){if(!e)return m;p.push(e)},addStatusHandler:function(e){p.push(e)},removeStatusHandler:function(e){var t=p.indexOf(e);t>=0&&p.splice(t,1)},data:l[e]};return i=void 0,t}var p=[],m="idle";function f(e){m=e;for(var t=0;t<p.length;t++)p[t].call(null,e)}var h,y,_,g=0,E=0,v={},b={},O={};function P(e){return+e+""===e?+e:e}function S(e){if("idle"!==m)throw new Error("check() is only allowed in idle status");return o=e,f("check"),(t=s,t=t||1e4,new Promise((function(e,r){if("undefined"==typeof XMLHttpRequest)return r(new Error("No browser support"));try{var n=new XMLHttpRequest,i=N.p+""+a+".hot-update.json";n.open("GET",i,!0),n.timeout=t,n.send(null)}catch(e){return r(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)r(new Error("Manifest request to "+i+" timed out."));else if(404===n.status)e();else if(200!==n.status&&304!==n.status)r(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(n.responseText)}catch(e){return void r(e)}e(t)}}}))).then((function(e){if(!e)return f("idle"),null;b={},v={},O=e.c,_=e.h,f("prepare");var t=new Promise((function(e,t){h={resolve:e,reject:t}}));for(var r in y={},M)C(r);return"prepare"===m&&0===E&&0===g&&T(),t}));var t}function C(e){O[e]?(b[e]=!0,g++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=N.p+""+e+"."+a+".hot-update.js",document.head.appendChild(t)}(e)):v[e]=!0}function T(){f("ready");var e=h;if(h=null,e)if(o)Promise.resolve().then((function(){return x(o)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var r in y)Object.prototype.hasOwnProperty.call(y,r)&&t.push(P(r));e.resolve(t)}}function x(t){if("ready"!==m)throw new Error("apply() is only allowed in ready status");var r,n,i,o,s;function u(e){for(var t=[e],r={},n=t.map((function(e){return{chain:[e],id:e}}));n.length>0;){var i=n.pop(),a=i.id,s=i.chain;if((o=w[a])&&!o.hot._selfAccepted){if(o.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:a};if(o.hot._main)return{type:"unaccepted",chain:s,moduleId:a};for(var l=0;l<o.parents.length;l++){var c=o.parents[l],u=w[c];if(u){if(u.hot._declinedDependencies[a])return{type:"declined",chain:s.concat([c]),moduleId:a,parentId:c};-1===t.indexOf(c)&&(u.hot._acceptedDependencies[a]?(r[c]||(r[c]=[]),d(r[c],[a])):(delete r[c],t.push(c),n.push({chain:s.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:r}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];-1===e.indexOf(n)&&e.push(n)}}t=t||{};var p={},h=[],g={},E=function(){console.warn("[HMR] unexpected require("+b.moduleId+") to disposed module")};for(var v in y)if(Object.prototype.hasOwnProperty.call(y,v)){var b;s=P(v);var S=!1,C=!1,T=!1,x="";switch((b=y[v]?u(s):{type:"disposed",moduleId:v}).chain&&(x="\nUpdate propagation: "+b.chain.join(" -> ")),b.type){case"self-declined":t.onDeclined&&t.onDeclined(b),t.ignoreDeclined||(S=new Error("Aborted because of self decline: "+b.moduleId+x));break;case"declined":t.onDeclined&&t.onDeclined(b),t.ignoreDeclined||(S=new Error("Aborted because of declined dependency: "+b.moduleId+" in "+b.parentId+x));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(b),t.ignoreUnaccepted||(S=new Error("Aborted because "+s+" is not accepted"+x));break;case"accepted":t.onAccepted&&t.onAccepted(b),C=!0;break;case"disposed":t.onDisposed&&t.onDisposed(b),T=!0;break;default:throw new Error("Unexception type "+b.type)}if(S)return f("abort"),Promise.reject(S);if(C)for(s in g[s]=y[s],d(h,b.outdatedModules),b.outdatedDependencies)Object.prototype.hasOwnProperty.call(b.outdatedDependencies,s)&&(p[s]||(p[s]=[]),d(p[s],b.outdatedDependencies[s]));T&&(d(h,[b.moduleId]),g[s]=E)}var A,I=[];for(n=0;n<h.length;n++)s=h[n],w[s]&&w[s].hot._selfAccepted&&g[s]!==E&&I.push({module:s,errorHandler:w[s].hot._selfAccepted});f("dispose"),Object.keys(O).forEach((function(e){!1===O[e]&&function(e){delete M[e]}(e)}));for(var j,k,R=h.slice();R.length>0;)if(s=R.pop(),o=w[s]){var L={},F=o.hot._disposeHandlers;for(i=0;i<F.length;i++)(r=F[i])(L);for(l[s]=L,o.hot.active=!1,delete w[s],delete p[s],i=0;i<o.children.length;i++){var D=w[o.children[i]];D&&((A=D.parents.indexOf(s))>=0&&D.parents.splice(A,1))}}for(s in p)if(Object.prototype.hasOwnProperty.call(p,s)&&(o=w[s]))for(k=p[s],i=0;i<k.length;i++)j=k[i],(A=o.children.indexOf(j))>=0&&o.children.splice(A,1);for(s in f("apply"),a=_,g)Object.prototype.hasOwnProperty.call(g,s)&&(e[s]=g[s]);var B=null;for(s in p)if(Object.prototype.hasOwnProperty.call(p,s)&&(o=w[s])){k=p[s];var U=[];for(n=0;n<k.length;n++)if(j=k[n],r=o.hot._acceptedDependencies[j]){if(-1!==U.indexOf(r))continue;U.push(r)}for(n=0;n<U.length;n++){r=U[n];try{r(k)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:s,dependencyId:k[n],error:e}),t.ignoreErrored||B||(B=e)}}}for(n=0;n<I.length;n++){var G=I[n];s=G.module,c=[s];try{N(s)}catch(e){if("function"==typeof G.errorHandler)try{G.errorHandler(e)}catch(r){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:s,error:r,originalError:e}),t.ignoreErrored||B||(B=r),B||(B=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:s,error:e}),t.ignoreErrored||B||(B=e)}}return B?(f("fail"),Promise.reject(B)):(f("idle"),new Promise((function(e){e(h)})))}var w={},M={0:0},A=[];function N(t){if(w[t])return w[t].exports;var r=w[t]={i:t,l:!1,exports:{},hot:d(t),parents:(u=c,c=[],u),children:[]};return e[t].call(r.exports,r,r.exports,function(e){var t=w[e];if(!t)return N;var r=function(r){return t.hot.active?(w[r]?-1===w[r].parents.indexOf(e)&&w[r].parents.push(e):(c=[e],i=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),c=[]),N(r)},n=function(e){return{configurable:!0,enumerable:!0,get:function(){return N[e]},set:function(t){N[e]=t}}};for(var o in N)Object.prototype.hasOwnProperty.call(N,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(r,o,n(o));return r.e=function(e){return"ready"===m&&f("prepare"),E++,N.e(e).then(t,(function(e){throw t(),e}));function t(){E--,"prepare"===m&&(v[e]||C(e),0===E&&0===g&&T())}},r.t=function(e,t){return 1&t&&(e=r(e)),N.t(e,-2&t)},r}(t)),r.l=!0,r.exports}N.m=e,N.c=w,N.d=function(e,t,r){N.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},N.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},N.t=function(e,t){if(1&t&&(e=N(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(N.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)N.d(r,n,function(t){return e[t]}.bind(null,n));return r},N.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return N.d(t,"a",t),t},N.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},N.p="/apps/policies/",N.h=function(){return a};var I=window.webpackJsonp=window.webpackJsonp||[],j=I.push.bind(I);I.push=t,I=I.slice();for(var k=0;k<I.length;k++)t(I[k]);var R=j;A.push([557,1]),r()}({1023:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1024),i=r(2),o=r(1025);t.useUserSettings=e=>{const t=n.useUserSettingsEmailQuery(),r=t.query;return o.useSyncInterval(e,i.useCallback(()=>{r()},[r])),i.useMemo(()=>{let e=!1;const n=t.payload;return n&&(e=!!n.dailyEmail||!!n.immediateEmail),{settings:t.payload,refresh:r,isSubscribedForNotifications:e}},[t.payload,r])}},1024:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(148)),o=r(236),a=r(56),s=r(235),l=i.default.apis.urls;t.adapter=e=>{const t={dailyEmail:!1,immediateEmail:!1};return e.forEach(e=>e.fields.forEach(e=>{"dailyEmail"===e.name?t.dailyEmail=e.initialValue:"immediateEmail"===e.name&&(t.immediateEmail=e.initialValue)})),t},t.useUserSettingsEmailQuery=e=>o.useTransformQueryResponse(a.useQuery(s.actionBuilder("GET",l.userSettings.email).build(),e),t.adapter)},1025:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(2);t.useSyncInterval=(e,t,r=!1)=>{i.useEffect(()=>{let i,o=!1;const a=()=>n(void 0,void 0,void 0,(function*(){const r=t();r&&r.then&&(yield r),o||(i=setTimeout(a,e))}));return r?a():i=setTimeout(a,e),()=>{o=!0,clearTimeout(i)}},[e,t,r])}},110:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=50;class i{constructor(e,t,r,i){this.index=e,this.size=t||n,this.filter=r,this.sort=i}hasFilter(){return void 0!==this.filter&&this.filter.elements.length>0}start(){return(this.index-1)*this.size}end(){return this.index*this.size}withPage(e){return i.of(e,this.size,this.filter,this.sort)}withSort(e){return i.of(this.index,this.size,this.filter,e)}static of(e,t,r,n){return new i(e,t,r,n)}static defaultPage(){return new i(1,n)}static lastPageForElements(e,t){return new i(Math.max(Math.trunc((e+t-1)/t),1),t)}}t.Page=i,i.NO_SIZE=-1;class o{constructor(e,t,r){this.column=e,this.operator=t,this.value=r}}t.Filter=class{constructor(){this.elements=this._elements=[]}and(e,t,r){return this._elements.push(new o(e,t,r)),this}};class a{constructor(e,t){this.column=e,this.direction=t}static by(e,t){return new a(e,t)}}t.Sort=a,function(e){e.ASCENDING="ASC",e.DESCENDING="DESC"}(t.Direction||(t.Direction={})),function(e){e.EQUAL="EQUAL",e.LIKE="LIKE",e.ILIKE="ILIKE",e.NOT_EQUAL="NOT_EQUAL",e.BOOLEAN_IS="BOOLEAN_IS"}(t.Operator||(t.Operator={}))},147:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(350)),a=i(r(208)),s=r(360),l=r(66),c=r(78);t.toServerAction=e=>e.map(e=>{if(!e||!e.type)return"";const t=`${e.type}`;switch(e.type){case l.ActionType.WEBHOOK:case l.ActionType.EMAIL:break;default:c.assertNever(e.type)}return t}).join(";"),t.fromServerActions=e=>{if(!e||""===e)return[];const t=[];for(const r of e.split(";")){const[e]=r.split(" ",2);switch(e){case l.ActionType.WEBHOOK:t.push({type:l.ActionType.WEBHOOK});break;case l.ActionType.EMAIL:t.push({type:l.ActionType.EMAIL});break;default:throw Error(`Unknown action.type=${e} found`)}}return t},t.toServerPolicy=e=>{const{mtime:r,ctime:i}=e,o=n(e,["mtime","ctime"]);return Object.assign(Object.assign({},o),{name:e.name||"",conditions:e.conditions||"",isEnabled:void 0!==e.isEnabled&&e.isEnabled,actions:e.actions?t.toServerAction(e.actions):""})},t.toPolicy=e=>Object.assign(Object.assign({},e),{id:e.id?e.id:"",description:e.description?e.description:"",isEnabled:!!e.isEnabled&&e.isEnabled,actions:t.fromServerActions(e.actions),mtime:e.mtime?o.default(e.mtime):new Date(Date.now()),ctime:e.ctime?o.default(e.ctime):new Date(Date.now()),lastTriggered:e.lastTriggered?a.default(e.lastTriggered/1e3):void 0}),t.toPolicies=e=>e.data?e.data.map(t.toPolicy):[],t.makeCopyOfPolicy=e=>{return Object.assign(Object.assign({},e),{name:`Copy of ${e.name.slice(0,s.maxPolicyNameLength-"Copy of ".length)}`,mtime:void 0,lastTriggered:void 0,ctime:void 0,id:void 0})}},148:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(180);t.withBaseUrl=e=>`/api/policies/v1.0${e}`,t.localUrl=e=>{return n.getInsights().chrome.isBeta()?`/beta${e}`:e};const i={appId:"policies",apis:{version:"v1.0",urls:{base:"/api/policies/v1.0",userSettings:{email:t.withBaseUrl("/user-config/email-preference")}}},pages:{emailPreferences:()=>t.localUrl("/user-preferences/email"),hooks:()=>t.localUrl("/settings/hooks"),factsDocumentation:"https://access.redhat.com/documentation/en-us/red_hat_insights/2020-04/html/monitoring_and_reacting_to_configuration_changes_using_policies/appendix-policies#facts-and-functions"}};t.default=i},151:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.JSON="json",e.CSV="csv"}(n=t.ExporterType||(t.ExporterType={})),t.exporterTypeFromString=e=>{const t=e.toLowerCase();if(t===n.CSV)return n.CSV;if(t===n.JSON)return n.JSON;throw new Error(`Invalid ExporterType requested [${e}]`)}},160:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=n(r(143));t.AlwaysValid=o.object(),function(e){e.SAVE="CREATE",e.VALIDATE_CONDITION="VALIDATE_CONDITION",e.VALIDATE_NAME="VALIDATE_NAME",e.NONE="NONE"}(t.WizardActionType||(t.WizardActionType={})),t.WizardContext=i.createContext({isLoading:!1,isFormValid:!1,triggerAction:()=>{throw Error("Action executed without WizardContext")},verifyResponse:{isValid:!1},createResponse:{created:!1},setVerifyResponse:()=>{throw Error("setVerifyResponse executed without WizardContext")},setMaxStep:()=>{throw Error("setMaxStep executed without a WizardContext")}})},174:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(r(2)),s=r(103),l=o(r(610)),c=r(976);t.linkTo={listPage:()=>"/list",policyDetail:e=>`/policy/${e}`};const u=[{path:t.linkTo.listPage(),component:l.default,rootClass:"list"},{path:t.linkTo.policyDetail(":policyId"),component:c.PolicyDetail,rootClass:"policy"}],d=e=>{const{rootClass:t}=e,r=n(e,["rootClass"]),i=document.getElementById("root");if(!i)throw new Error("Root element not found");return i.removeAttribute("class"),i.classList.add(`page__${t}`,"pf-c-page__main"),i.setAttribute("role","main"),a.createElement(s.Route,Object.assign({},r))};t.Routes=()=>a.createElement(s.Switch,null,u.map(e=>a.createElement(d,{key:e.path,rootClass:e.rootClass,component:e.component,path:e.path})),a.createElement(s.Redirect,{to:t.linkTo.listPage()}))},178:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalBackgroundColor100="#fff",t.GlobalBackgroundColor150="#f5f5f5",t.GlobalBackgroundColor200="#fafafa",t.GlobalBackgroundColor300="#ededed",t.GlobalBackgroundColorDark100="#151515",t.GlobalBackgroundColorDark200="#3c3f42",t.GlobalBackgroundColorDark300="#212427",t.GlobalBackgroundColorDark400="#4f5255",t.GlobalBackgroundColorLight100="#fff",t.GlobalBackgroundColorLight200="#fafafa",t.GlobalBackgroundColorLight300="#ededed",t.GlobalDangerColor100="#c9190b",t.GlobalDangerColor200="#a30000",t.GlobalDangerColor300="#470000",t.GlobalSuccessColor100="#92d400",t.GlobalSuccessColor200="#486b00"},179:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(36),s=r(1026),l=r(352),c=a.style({paddingTop:s.calc(`${l.Spacer.XL_3}px - var(--pf-c-page__main-section--PaddingTop)`)});t.EmptyStateSection=e=>i.createElement(o.EmptyState,{variant:o.EmptyStateVariant.full,className:`${c} ${e.className?e.className:""} `},e.icon&&i.createElement(o.EmptyStateIcon,{icon:e.icon,color:e.iconColor}),i.createElement(o.Title,{headingLevel:"h5",size:"lg"},e.title),i.createElement(o.EmptyStateBody,null,e.content),e.actionNode,e.actionLabel&&i.createElement(o.Button,{variant:"primary",onClick:e.action,isDisabled:!e.action},e.actionLabel))},180:function(e,t,r){"use strict";(function(e){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};let n;Object.defineProperty(t,"__esModule",{value:!0}),t.waitForInsights=()=>(n||(n=new Promise(t=>r(void 0,void 0,void 0,(function*(){for(;!e.hasOwnProperty("insights");)yield new Promise(e=>setTimeout(e,250));t(insights)})))),n),t.getInsights=()=>insights}).call(this,r(76))},183:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onChangePFAdapter=e=>(t,r)=>e.onChange(r),t.onChangePFAdapterCheckbox=e=>(t,r)=>{return(0,e.onChange)(t,r.target.name)}},184:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(66),o=n(r(143)),a=r(143),s=r(360),l=r(861),c=r(78),u=r(865),d=(e,t,r)=>{const n=`Only one ${t} action is allowed`;return[`one-${r}`,n,t=>{const i=t&&t.reduce((t,r,n)=>{var i;return(null===(i=r)||void 0===i?void 0:i.type)===e?t.concat([n]):t},[]);if(!i||i.length<=1)return!0;const o=new a.ValidationError("","","actions","");return o.inner=i.map(e=>new a.ValidationError(n,r,`actions.${e}.type`)),o}]};t.PolicyFormDetails=o.object().shape({description:o.string().notRequired().trim(),isEnabled:o.boolean().notRequired(),name:o.string().required("Write a name for this Policy").max(s.maxPolicyNameLength).trim()}),t.PolicyFormActions=o.object().shape({actions:o.array(o.lazy(e=>{var t;if((null===(t=e)||void 0===t?void 0:t.type)&&u.isAction(e)){const t=e.type;switch(t){case i.ActionType.EMAIL:return l.ActionEmailSchema;case i.ActionType.WEBHOOK:return l.ActionWebhookSchema;default:c.assertNever(t)}}return l.ActionSchema})).test(...d(i.ActionType.EMAIL,"Email","email")).test(...d(i.ActionType.WEBHOOK,"Hook","webhook"))}),t.PolicyFormConditions=o.object().shape({conditions:o.string().required("Enter a condition for the policy.").trim()}),t.PolicyFormSchema=o.object().concat(t.PolicyFormDetails).concat(t.PolicyFormActions).concat(t.PolicyFormConditions)},209:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2));t.join=(e,t)=>{return e.reduce((r,n,o)=>(r.push(n),o!==e.length-1&&r.push(i.createElement(t,{key:`${o}_joined_element`})),r),[])},t.joinClasses=(...e)=>e.join(" ")},210:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(742)),n(r(743)),n(r(744))},211:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NAME="name",e.IS_ACTIVE="is_enabled"}(t.PolicyFilterColumn||(t.PolicyFilterColumn={}))},221:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=e=>e.preventDefault();t.Form=e=>i.createElement(o.Form,Object.assign({onSubmit:a},e),e.children)},233:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2));t.AppContext=i.createContext({rbac:{canReadAll:!1,canWriteAll:!1},userSettings:{settings:void 0,isSubscribedForNotifications:!1,refresh:()=>{}}})},234:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(504)),n(r(948)),n(r(949)),n(r(950)),n(r(958)),n(r(959))},235:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(110),o=n(r(957));class a{constructor(e,t){this._method=e,this._url=t}queryParams(e){return this._queryParams=e,this}data(e){return this._data=e,this}build(){const e=this.getUrl()+this.buildQueryString();return{method:this.getMethod(),endpoint:e,body:this.getData()}}getMethod(){return this._method}getUrl(){return this._url}getQueryParams(){return this._queryParams}getData(){return this._data}buildQueryString(){const e=""===new URL(this.getUrl(),"http://dummybase").searchParams.toString()?"?":"&",t=this.getQueryParams()?new URLSearchParams(this.stringParams(this.getQueryParams())).toString():"";return""===t?"":e+t}stringParams(e){return e?Object.keys(e).reduce((t,r)=>{const n=e[r];return void 0!==n&&(t[r]=n.toString()),t},{}):{}}}t.ActionBuilder=a,t.actionBuilder=(e,t)=>new a(e,t),t.pageToQuery=e=>{const t={};if(e||(e=i.Page.defaultPage()),e.size===i.Page.NO_SIZE?(t.offset=e.index,t.limit=i.Page.NO_SIZE):(t.offset=(e.index-1)*e.size,t.limit=e.size),e.filter)for(const r of e.filter.elements)t[`filter${o.default(r.column,{pascalCase:!0})}`]=r.value,t[`filterOp${o.default(r.column,{pascalCase:!0})}`]=r.operator;return e.sort&&(t.sortColumn=e.sort.column,t.sortDirection=e.sort.direction),t}},236:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=(e,t,r)=>200===t&&e?r(e):void 0;t.useTransformQueryResponse=(e,t)=>{const{payload:r,query:n,status:a}=e,s=i.useCallback((...e)=>n(...e).then(e=>Object.assign(Object.assign({},e),{payload:o(e.payload,e.status,t)})),[n,t]),l=i.useMemo(()=>o(r,a,t),[t,r,a]);return Object.assign(Object.assign({},e),{payload:l,query:s})}},351:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(2)),a=r(69),s=r(66),l=r(78),c=r(210);t.ActionEmailIcon=a.EnvelopeIcon,t.ActionWebhookIcon=c.WebhookIcon,t.ActionIcon=e=>{const{actionType:r}=e,i=n(e,["actionType"]);switch(r){case s.ActionType.WEBHOOK:return o.createElement(t.ActionWebhookIcon,Object.assign({},i));case s.ActionType.EMAIL:return o.createElement(t.ActionEmailIcon,Object.assign({},i));case void 0:break;default:l.assertNever(r)}return null}},352:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Spacer={XS:4,SM:8,MD:16,LG:24,XL:32,XL_2:48,XL_3:64,FORM_ELEMENT:6}},353:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(84),s=r(211),l=r(210),c=r(36);var u;!function(e){e[e.NONE=0]="NONE",e[e.PAGE=1]="PAGE",e[e.ALL=2]="ALL"}(u=t.SelectionCommand||(t.SelectionCommand={}));const d={[s.PolicyFilterColumn.NAME]:"Name",[s.PolicyFilterColumn.IS_ACTIVE]:"Enabled"},p={enabled:"Enabled",disabled:"Disabled"},m=c.style({marginLeft:4}),f=e=>"enabled"===e.isActiveFilter?i.createElement(i.Fragment,null,i.createElement(l.EnabledPolicyIcon,null)," ",i.createElement("span",{className:m},"Enabled")):"disabled"===e.isActiveFilter?i.createElement(i.Fragment,null,i.createElement(l.DisabledPolicyIcon,null)," ",i.createElement("span",{className:m},"Disabled")):null,h=(e,t)=>{const r=e[t];return"string"==typeof r?((e,t)=>{const r=e.trim();if(""!==r)return{category:d[t],chips:[{name:r,isRead:!0}]}})(r,t):((e,t)=>{if(e.enabled||e.disabled)return{category:d[t],chips:Object.keys(e).filter(t=>e[t]).map(e=>({name:p[e],isRead:!0,key:e}))}})(r,t)};t.PolicyToolbar=e=>{const{clearFilters:t,filterElements:r,setFilterElements:n,pageCount:l,count:c,page:p,perPage:m,showPerPageOptions:y,onPaginationChanged:_,onPaginationSizeChanged:g,onCreatePolicy:E,onDeletePolicy:v,hideActions:b,onSelectionChanged:O,selectedCount:P,hideBulkSelect:S,onEnablePolicy:C,onDisablePolicy:T,onExport:x}=e,w=i.useCallback((e,n)=>{const i=[];for(const e of n)switch(e.category){case d[s.PolicyFilterColumn.NAME]:i.push({filter:s.PolicyFilterColumn.NAME,data:""});break;case d[s.PolicyFilterColumn.IS_ACTIVE]:i.push({filter:s.PolicyFilterColumn.IS_ACTIVE,data:Object.assign(Object.assign({},r[s.PolicyFilterColumn.IS_ACTIVE]),e.chips.reduce((e,t)=>(e[t.key]=!1,e),{}))});break;default:throw new Error(`Unknown filter found: ${e.category}`)}t(i)},[t,r]),M=i.useMemo(()=>{if(S)return;const e=()=>O&&O(u.NONE),t=()=>O&&O(u.ALL);return{count:P||0,items:[{title:"Select none (0)",onClick:e},{title:`Select page (${l||0})`,onClick:()=>O&&O(u.PAGE)},{title:`Select all (${c||0})`,onClick:t}],checked:P===c,onSelect:r=>r?t():e()}},[P,l,O,S,c]),A=i.useMemo(()=>({items:[{label:"Name",type:"text",filterValues:{id:"filter-name",value:r[s.PolicyFilterColumn.NAME],placeholder:"Filter by name",onChange:(e,t)=>n[s.PolicyFilterColumn.NAME](t)}},{label:d[s.PolicyFilterColumn.IS_ACTIVE],type:"radio",filterValues:{id:"filter-active",value:Object.keys(r[s.PolicyFilterColumn.IS_ACTIVE]).reduce((e,t)=>(r[s.PolicyFilterColumn.IS_ACTIVE][t]&&(e=t),e),"all"),items:[{label:i.createElement(i.Fragment,null,"All"),value:"all"}].concat(Object.keys(r[s.PolicyFilterColumn.IS_ACTIVE]).map(e=>({label:i.createElement(f,{key:e,isActiveFilter:e}),value:e}))),placeholder:"Filter by Enable status",onChange:(e,t)=>{const r={enabled:!1,disabled:!1};["enabled","disabled"].includes(t)&&(r[t]=!0),n[s.PolicyFilterColumn.IS_ACTIVE](r)}}}]}),[r,n]),N=i.useMemo(()=>({itemCount:c||0,page:p,perPage:m,perPageOptions:y?void 0:[],onSetPage:_,onFirstClick:_,onPreviousClick:_,onNextClick:_,onLastClick:_,onPageInput:_,onPerPageSelect:g,isCompact:!0,variant:o.PaginationVariant.right}),[y,c,p,m,_,g]),I=i.useMemo(()=>{const e=[];for(const t of Object.values(s.PolicyFilterColumn)){const n=h(r,t);n&&e.push(n)}return{filters:e,onDelete:w}},[r,w]),j=i.useMemo(()=>{if(b)return;return{actions:[{key:"create-policy",label:"Create policy",onClick:E,props:{isDisabled:!E}},{key:"delete-policy",label:"Delete",onClick:v,props:{isDisabled:!(P&&v)}},{key:"enable-policy",label:"Enable",onClick:C,props:{isDisabled:!(P&&C)}},{key:"disable-policy",label:"Disable",onClick:T,props:{isDisabled:!(P&&T)}}],kebabToggleProps:{isDisabled:!1}}},[E,v,P,b,T,C]),k=i.useMemo(()=>{if(x)return{extraItems:[],onSelect:x}},[x]);return i.createElement(i.Fragment,null,i.createElement(a.PrimaryToolbar,{bulkSelect:M,filterConfig:A,pagination:N,actionsConfig:j,activeFiltersConfig:I,exportConfig:k}))}},360:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maxPolicyNameLength=150},37:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(66),i={pages:{noPermissions:{title:"Policies",emptyState:{title:"You do not have access to Policies",content:"Contact your organization administrator(s) for more information."}},listPage:{title:"Policies",emailOptIn:"One or more of your policies have an email alert. To receive these emails, opt in to email alerts.",emptyState:{title:"No Policies",text:["No policies have been created.","Use self defined-policies to monitor your RHEL configurations with instant or daily alerts."]}},policyDetail:{emptyState:{title:"Policy not found",text:"This policy with ID {0} cannot be found. It may have been deleted by another user.",backText:"Back to previous page"},errorState:{title:"Error when loading policy",text:"Error found when trying to load policy with ID {0}. (Error: {1})",actionText:"Try again"}}},components:{actions:{title:"Trigger actions",noActions:"No actions configured."},actionType:{[n.ActionType.EMAIL]:"Email",[n.ActionType.WEBHOOK]:"Hook"},emailOptIn:{title:"Enable email alerts",switch:"Get emails when a policy runs",link:"Open email preferences"},lastTriggeredCell:{never:"Never",ago:"ago"},actionWebhookForm:{paragraph1:{head:"This action sends a post to all hooks which have been activated for policies in the ",link:"application settings.",tail:""},paragraph2:{head:"To activate a hook for policies, open the hook in the ",link:"application settings",tail:' and select your preference for sending a post under "Policies".'}}},tables:{policy:{title:"Policies",columns:{name:"Name",triggerActions:"Trigger actions",lastTriggered:"Last triggered"},emptyState:{neverRun:"Never",noConditions:"No conditions configured.",noDescription:"--",notFound:{title:"No matching policies found",content:"No policies matching the selected filter and search terms."}},toolTips:{email:"Send email",hook:"Send to hook"}},trigger:{title:"Trigger",columns:{date:"Date",system:"System"}}},wizards:{policy:{titleNew:"Create a policy",titleEdit:"Edit a policy",description:"Policies are processed on reception of system profile messages. If condition(s) are met, defined action(s) are triggered.",actions:{title:"Trigger actions",emailOptIn:"To receive emails for custom policies, opt in to email alerts from your user preferences."},conditions:{title:"Conditions",valid:"Valid condition",invalid:"Invalid condition",validating:"Validatingâ€¦",hint:'e.g. facts.arch = "x86_64"',summaryDesc:"Define conditions for your policy using any system facts."},hints:{hintTitle:"What conditions can I define?",hintParagraph1:"You can write a condition for any combination of system facts that apply to your Insights inventory systems.",hintLinkTitle:"Review available system facts",hintSyntaxExamplesSection:"Syntax examples",hintQuestion1:"Is wireshark RPM installed?",hintQuestion1Ans:"facts.installed_packages contains ['wireshark']",hintQuestion2:"Is the release older than RHEL 8.1?",hintQuestion2Ans:"facts.os_release < 8.1",hintQuestion3:"Which of my public cloud instances are missing a tag Owner value set?",hintQuestion3Ans:"facts.cloud_provider in ['alibaba',aws','azure','google'] and not tags.Owner",hintQuestion4:"Is time synchronization configured for RHEL7 and RHEL8?",hintQuestion4Ans:"(facts.os_release >=7 and facts.os_release <8 and not facts.enabled_services contains 'ntpd') or (facts.os_release >=8 and not facts.enabled_services contains 'chronyd')"},createPolicy:{title:"Create Policy"},details:{title:"Policy Details"},review:{title:"Review and enable",enableThisPolicy:"Enable this policy?",policyIsEnabled:"Policy is enabled",policyIsDisabled:"Policy is disabled",policy:{details:"Policy details",name:"Policy name",description:"Description"}}}}};t.Messages=i},375:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(110);t.useSort=()=>{const[e,t]=i.useState();return{sortBy:e,onSort:i.useCallback((e,r,n)=>{t(o.Sort.by(r,n))},[t])}}},376:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(110),i=r(236),o=r(234),a=r(147),s=r(56),l=r(97),c=r(235);t.actionCreator=e=>l.actionGetPolicies(c.pageToQuery(e)),t.useGetPoliciesQuery=(e,r)=>i.useTransformQueryResponse(o.useNewPaginatedQuery(t.actionCreator(e),r),a.toPolicies);const u=e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.length};t.hasPoliciesQueryActionCreator=()=>l.actionGetPolicies(c.pageToQuery(n.Page.of(1,1))),t.useHasPoliciesQuery=()=>i.useTransformQueryResponse(s.useQuery(t.hasPoliciesQueryActionCreator(),!1),u)},377:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(264),i=r(382);var o;!function(e){e.SUCCESS="success",e.DANGER="danger",e.WARNING="warning",e.INFO="info",e.DEFAULT="default"}(o=t.NotificationType||(t.NotificationType={})),t.addNotification=(e,t,r)=>{i.getStore().dispatch(n.addNotification({variant:e,title:t,description:r}))},t.addSuccessNotification=(e,r)=>{t.addNotification(o.SUCCESS,e,r)},t.addDangerNotification=(e,r)=>{t.addNotification(o.DANGER,e,r)}},378:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(234),i=r(505),o=r(78),a=r(2);var s;!function(e){e.SYSTEM="system"}(s=t.TriggerFilterColumn||(t.TriggerFilterColumn={}));const l=e=>i.useUrlStateString("system",e),c=e=>a.useMemo(()=>({[s.SYSTEM]:e}),[e]);t.useTriggerFilter=(e=250)=>{const[t,r,i]=n.useDebouncedState("",e,l),u=a.useCallback(e=>{for(const t of e)switch(t){case s.SYSTEM:r("");break;default:o.assertNever(t)}},[r]);return{filters:c(t),setFilters:c(r),debouncedFilters:c(i),clearFilter:u}}},382:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(565)),o=n(r(1027)),a=r(264);let s;t.init=function(...e){if(s)throw new Error("store already initialized");return(s=new i.default({},[o.default(),...e])).register({notifications:a.notifications}),s},t.getStore=function(){return s.getStore()},t.register=function(...e){return s.register(...e)}},436:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(381),a=r(18),s=r(84),l=r(110),c=r(437),u=r(37),d=r(78),p=r(746),m=r(747),f=r(179),h=r(36),y=r(112),_=r(174),g=r(748),E=h.style({backgroundColor:"white"}),v=["name","actions","is_enabled"],b=(e,t,r,n)=>t.indexOf(r[e])+n;t.PolicyTable=e=>{const{onSort:t,error:r,policies:n,onCollapse:h,onSelect:O}=e,P=e.columnsToShow||v,S=P.includes("radioSelect");if(S&&!O)throw Error("RadioSelect requires an onSelect");const C=i.useMemo(()=>{const e=t?[o.sortable]:[];return{radioSelect:{title:"",transforms:[]},name:{title:u.Messages.tables.policy.columns.name,transforms:e,cellFormatters:[o.expandable],column:"name"},actions:{title:u.Messages.tables.policy.columns.triggerActions,transforms:[]},is_enabled:{title:u.Messages.tables.policy.columns.lastTriggered,transforms:e,column:"is_enabled"}}},[t]),T=i.useMemo(()=>[h,P.includes("radioSelect")?void 0:O].filter(e=>e).length,[h,O,P]),x=i.useMemo(()=>P.map(e=>C[e]),[C,P]),w=i.useCallback((e,r,n)=>{if(t){const e=((e,t,r)=>t[e-r].column)(r,x,T);e&&t(r,e,n===o.SortByDirection.asc?l.Direction.ASCENDING:l.Direction.DESCENDING)}},[t,x,T]),M=i.useCallback((e,t,r,i)=>{var o;const a=null===(o=n)||void 0===o?void 0:o.findIndex(e=>e.id===i.id);if(h&&n&&void 0!==a&&-1!==a){const e=n[a];h(e,a,r)}},[n,h]),A=i.useCallback((e,t,r,i)=>{var o;const a=null===(o=n)||void 0===o?void 0:o.findIndex(e=>e.id===i.id);if(O&&n&&void 0!==a&&-1!==a){const e=n[a];O(e,a,t)}},[n,O]),N=i.useMemo(()=>{if(e.sortBy)return{index:b(e.sortBy.column,x,C,T),direction:e.sortBy.direction===l.Direction.ASCENDING?"asc":"desc"}},[e.sortBy,x,C,T]),I=i.useMemo(()=>e.error||e.loading?void 0:e.actionResolver||void 0,[e.error,e.loading,e.actionResolver]),j=i.useCallback(e=>{if(void 0===e.parent&&I&&e&&n){const t=n.find(t=>t.id===e.id);if(t)return I(t)}return[]},[I,n]),k=i.useMemo(()=>r?[]:((e,t,r,n)=>e?e.reduce((o,s,l)=>(o.push({id:s.id,key:s.id,isOpen:s.isOpen,selected:s.isSelected,cells:t.map(t=>{switch(t){case"actions":return i.createElement(i.Fragment,null,i.createElement(p.ActionsCell,{actions:s.actions}));case"is_enabled":return i.createElement(i.Fragment,null,i.createElement(m.LastTriggeredCell,{isEnabled:s.isEnabled,lastTriggered:s.lastTriggered}));case"name":return i.createElement(i.Fragment,null,r?i.createElement(g.BetaDetector,null,i.createElement(g.BetaIf,null,i.createElement(y.Link,{to:_.linkTo.policyDetail(s.id)},s.name)),i.createElement(g.BetaIfNot,null,s.name)):s.name);case"radioSelect":return i.createElement(i.Fragment,null,i.createElement(a.Radio,{id:`${s.id}-table-radio-id`,"aria-label":`Radio select for policy ${s.name}`,name:"policy-table-radio-select",isChecked:s.isSelected,onChange:n?()=>{const t=e.findIndex(e=>e.isSelected);-1!==t&&n(e[t],t,!1),n(s,l,!0)}:void 0}))}d.assertNever(t)})}),o.push({parent:2*l,fullWidth:!0,showSelect:!1,cells:[i.createElement(i.Fragment,null,i.createElement(c.ExpandedContent,{key:s.id+"-content",description:s.description?s.description:u.Messages.tables.policy.emptyState.noDescription,conditions:s.conditions?s.conditions:u.Messages.tables.policy.emptyState.noConditions,actions:s.actions,created:s.ctime,updated:s.mtime}))]}),o),[]):[])(n,P,e.linkToDetailPolicy,O),[r,n,P,O,e.linkToDetailPolicy]);return e.loading?i.createElement(s.SkeletonTable,{rowSize:e.loadingRowCount||10,columns:x,paddingColumnSize:T,sortBy:N}):r?i.createElement(f.EmptyStateSection,Object.assign({},r,{className:E})):i.createElement(o.Table,{"aria-label":u.Messages.tables.policy.title,cells:x,rows:k,actionResolver:j,onSort:t?w:void 0,onCollapse:h?M:void 0,onSelect:e.error||!O||S?void 0:A,sortBy:N,canSelectAll:!1},i.createElement(o.TableHeader,null),i.createElement(o.TableBody,null))}},437:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(36),a=r(18),s=r(733),l=r(734),c=r(439),u=n(r(178)),d=r(441),p=r(443),m=o.style({margin:12}),f=o.style({maxWidth:800,marginBottom:12}),h=o.style({marginBottom:12}),y=o.style(Object.assign(Object.assign({backgroundColor:u.GlobalBackgroundColorLight300},d.padding(18,14)),{margin:5}));t.ExpandedContent=e=>i.createElement(a.Stack,{className:m},e.description&&i.createElement(a.StackItem,{className:f},i.createElement(s.Description,{description:e.description})),i.createElement(a.StackItem,{className:h},i.createElement(l.Dates,{updated:e.updated,created:e.created})),i.createElement(a.StackItem,null,i.createElement(a.Grid,null,i.createElement(a.GridItem,{className:y,span:6},i.createElement(c.Conditions,{conditions:e.conditions})),i.createElement(a.GridItem,{className:y,span:6},i.createElement(p.Actions,{actions:e.actions})))))},439:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(36),s=r(37),l=a.style({marginBottom:5});t.Conditions=e=>i.createElement(i.Fragment,null,i.createElement(o.Title,{className:l,size:o.TitleSize.md},"Conditions"),i.createElement(o.Text,null,e.conditions||s.Messages.tables.policy.emptyState.noConditions))},440:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EMAIL="email",e.WEBHOOK="webhook"}(t.ActionType||(t.ActionType={}))},443:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(36),s=r(66),l=r(37),c=r(78),u=r(209),d=r(351),p=a.style({marginBottom:5}),m=a.style({marginBottom:5,marginLeft:10}),f=a.style({marginBottom:10,marginTop:10,marginLeft:10}),h=a.style({marginLeft:25,marginBottom:8,marginTop:8}),y=e=>i.createElement(o.StackItem,{className:f},i.createElement(e.icon,null),i.createElement(o.Title,{className:m,size:o.TitleSize.md},e.title),e.children&&i.createElement("div",{className:h},e.children));t.Actions=e=>i.createElement(i.Fragment,null,i.createElement(o.Stack,null,i.createElement(o.StackItem,null,i.createElement(o.Title,{className:p,size:o.TitleSize.md},l.Messages.components.actions.title)),0===e.actions.length?i.createElement(o.Text,null," ",l.Messages.components.actions.noActions," "):(e=>{const t=[];for(const r in e){const n=e[r];switch(n.type){case s.ActionType.EMAIL:t.push(i.createElement(i.Fragment,{key:r},i.createElement(y,{title:"Send Email",icon:d.ActionEmailIcon})));break;case s.ActionType.WEBHOOK:t.push(i.createElement(i.Fragment,{key:r},i.createElement(y,{title:"Send to Hook",icon:d.ActionWebhookIcon})));break;default:c.assertNever(n)}}return u.join(t,o.Divider)})(e.actions)))},444:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(749),a=r(960),s=r(961),l=n(r(962)),c=r(377),u=r(963),d=r(964);t.formatConditionError=e=>e=(e=e.replace("line 1 ","")).replace(/position (\d+)$/,(e,t)=>`position ${+t+1}`),t.CreatePolicyWizard=e=>{const r=s.useSavePolicyMutation(),n=a.useVerifyPolicyMutation(),p=u.useValidatePolicyNameParametrizedQuery(),m=d.useFacts(),f=i.useCallback(e=>{return(0,p.query)(e).then(e=>{var t;return e.status===l.OK?{created:!1}:{created:!1,error:(null===(t=e.payload)||void 0===t?void 0:t.msg)||`Invalid name (Code: ${e.status})`}})},[p.query]),h=r.loading||n.loading||p.loading;return i.createElement(i.Fragment,null,e.isOpen&&i.createElement(o.PolicyWizard,{initialValue:e.initialValue||{},onClose:()=>{e.close(!1)},onSave:t=>r.mutate(t).then(r=>{var n;switch(r.status){case l.CREATED:case l.OK:return void 0===t.id?c.addSuccessNotification("Created",`Policy "${t.name}" created`):c.addSuccessNotification("Saved",`Policy "${t.name}" has been updated`),e.close&&e.close(!0),{created:!0};case l.NOT_FOUND:if(void 0!==t.id)return{created:!1,error:"This policy cannot be found. It may have been deleted by another user. Your changes cannot be saved."};default:return{created:!1,error:(null===(n=r.payload)||void 0===n?void 0:n.msg)||`Unknown Error when trying to ${void 0===t.id?"create":"update"} the policy: (Code ${r.status})`}}}),onVerify:e=>n.mutate(e).then(r=>{var n,i;if(r.status===l.OK)return{isValid:!0,policy:e};return{isValid:!1,error:((null===(n=r.payload)||void 0===n?void 0:n.msg)?t.formatConditionError(null===(i=r.payload)||void 0===i?void 0:i.msg):void 0)||`Unknown Error when trying to validate: (Code ${r.status})`,policy:e}}),onValidateName:f,showCreateStep:!!e.policiesExist&&e.showCreateStep,isLoading:h,facts:m,isEditing:e.isEditing}))}},472:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2));t.CreatePolicyStepContext=i.createContext(void 0)},473:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(855);t.Checkbox=n.Checkbox;const i=r(856);t.FormSelect=i.FormSelect;const o=r(857);t.Switch=o.Switch;const a=r(858);t.FormTextInput=a.FormTextInput;const s=r(859);t.FormTextArea=s.FormTextArea;const l=r(860);t.FormText=l.FormText},502:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(96),o=r(231),a=r(222),s=r(230),l=r(189),c=r(86),u=r(190),d=r(127),p=r(34),m=r(132),f=n(r(95));class h extends l.Parser{constructor(e){super(e),this._interp=new u.ParserATNSimulator(h._ATN,this)}get vocabulary(){return h.VOCABULARY}get grammarFileName(){return"Expression.g4"}get ruleNames(){return h.ruleNames}get serializedATN(){return h._serializedATN}expression(){let e=new y(this._ctx,this.state);this.enterRule(e,0,h.RULE_expression);try{this.enterOuterAlt(e,1),this.state=26,this.object(0),this.state=27,this.match(h.EOF)}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}object(e){void 0===e&&(e=0);let t=this._ctx,r=this.state,n=new _(this._ctx,r),o=n;this.enterRecursionRule(n,2,h.RULE_object,e);try{let e;switch(this.enterOuterAlt(n,1),this.state=38,this._errHandler.sync(this),this._input.LA(1)){case h.NOT:case h.NEG:this.state=30,this.negative_expr(),this.state=31,this.object(4);break;case h.SIMPLETEXT:this.state=33,this.expr();break;case h.T__0:this.state=34,this.match(h.T__0),this.state=35,this.object(0),this.state=36,this.match(h.T__1);break;default:throw new s.NoViableAltException(this)}for(this._ctx._stop=this._input.tryLT(-1),this.state=46,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,1,this._ctx);2!==e&&e!==i.ATN.INVALID_ALT_NUMBER;){if(1===e){if(null!=this._parseListeners&&this.triggerExitRuleEvent(),o=n,n=new _(t,r),this.pushNewRecursionContext(n,2,h.RULE_object),this.state=40,!this.precpred(this._ctx,1))throw new a.FailedPredicateException(this,"this.precpred(this._ctx, 1)");this.state=41,this.logical_operator(),this.state=42,this.object(2)}this.state=48,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,1,this._ctx)}}catch(e){if(!(e instanceof d.RecognitionException))throw e;n.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.unrollRecursionContexts(t)}return n}expr(){let e=new g(this._ctx,this.state);this.enterRule(e,4,h.RULE_expr);try{switch(this.state=70,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,2,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=49,this.key();break;case 2:this.enterOuterAlt(e,2),this.state=50,this.key(),this.state=51,this.boolean_operator(),this.state=52,this.value();break;case 3:this.enterOuterAlt(e,3),this.state=54,this.key(),this.state=55,this.numeric_compare_operator(),this.state=56,this.numerical_value();break;case 4:this.enterOuterAlt(e,4),this.state=58,this.key(),this.state=59,this.string_compare_operator(),this.state=60,this.array();break;case 5:this.enterOuterAlt(e,5),this.state=62,this.key(),this.state=63,this.string_compare_operator(),this.state=64,this.value();break;case 6:this.enterOuterAlt(e,6),this.state=66,this.key(),this.state=67,this.array_operator(),this.state=68,this.array()}}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}logical_operator(){let e,t=new E(this._ctx,this.state);this.enterRule(t,6,h.RULE_logical_operator);try{this.enterOuterAlt(t,1),this.state=72,(e=this._input.LA(1))!==h.OR&&e!==h.AND?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}boolean_operator(){let e,t=new v(this._ctx,this.state);this.enterRule(t,8,h.RULE_boolean_operator);try{this.enterOuterAlt(t,1),this.state=74,(e=this._input.LA(1))!==h.EQUAL&&e!==h.NOTEQUAL?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}numeric_compare_operator(){let e,t=new b(this._ctx,this.state);this.enterRule(t,10,h.RULE_numeric_compare_operator);try{this.enterOuterAlt(t,1),this.state=76,0!=(-32&(e=this._input.LA(1)))||0==(1<<e&(1<<h.GT|1<<h.GTE|1<<h.LT|1<<h.LTE))?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}string_compare_operator(){let e=new O(this._ctx,this.state);this.enterRule(e,12,h.RULE_string_compare_operator);try{this.enterOuterAlt(e,1),this.state=78,this.match(h.CONTAINS)}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}array_operator(){let e,t=new P(this._ctx,this.state);this.enterRule(t,14,h.RULE_array_operator);try{this.enterOuterAlt(t,1),this.state=80,(e=this._input.LA(1))!==h.CONTAINS&&e!==h.IN?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}array(){let e,t=new S(this._ctx,this.state);this.enterRule(t,16,h.RULE_array);try{switch(this.state=95,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,4,this._ctx)){case 1:for(this.enterOuterAlt(t,1),this.state=82,this.match(h.T__2),this.state=83,this.value(),this.state=88,this._errHandler.sync(this),e=this._input.LA(1);e===h.T__3;)this.state=84,this.match(h.T__3),this.state=85,this.value(),this.state=90,this._errHandler.sync(this),e=this._input.LA(1);this.state=91,this.match(h.T__4);break;case 2:this.enterOuterAlt(t,2),this.state=93,this.match(h.T__2),this.state=94,this.match(h.T__4)}}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}numerical_value(){let e=new C(this._ctx,this.state);this.enterRule(e,18,h.RULE_numerical_value);try{this.enterOuterAlt(e,1),this.state=97,this.match(h.NUMBER)}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}value(){let e,t=new T(this._ctx,this.state);this.enterRule(t,20,h.RULE_value);try{this.enterOuterAlt(t,1),this.state=99,(e=this._input.LA(1))!==h.NUMBER&&e!==h.STRING?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}negative_expr(){let e,t=new x(this._ctx,this.state);this.enterRule(t,22,h.RULE_negative_expr);try{this.enterOuterAlt(t,1),this.state=101,(e=this._input.LA(1))!==h.NOT&&e!==h.NEG?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}key(){let e=new w(this._ctx,this.state);this.enterRule(e,24,h.RULE_key);try{this.enterOuterAlt(e,1),this.state=103,this.match(h.SIMPLETEXT)}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}sempred(e,t,r){switch(t){case 1:return this.object_sempred(e,r)}return!0}object_sempred(e,t){switch(t){case 0:return this.precpred(this._ctx,1)}return!0}static get _ATN(){return h.__ATN||(h.__ATN=(new o.ATNDeserializer).deserialize(f.toCharArray(h._serializedATN))),h.__ATN}}t.ExpressionParser=h,h.T__0=1,h.T__1=2,h.T__2=3,h.T__3=4,h.T__4=5,h.OR=6,h.AND=7,h.NOT=8,h.EQUAL=9,h.NOTEQUAL=10,h.CONTAINS=11,h.NEG=12,h.GT=13,h.GTE=14,h.LT=15,h.LTE=16,h.IN=17,h.NUMBER=18,h.FLOAT=19,h.INTEGER=20,h.SIMPLETEXT=21,h.STRING=22,h.WS=23,h.RULE_expression=0,h.RULE_object=1,h.RULE_expr=2,h.RULE_logical_operator=3,h.RULE_boolean_operator=4,h.RULE_numeric_compare_operator=5,h.RULE_string_compare_operator=6,h.RULE_array_operator=7,h.RULE_array=8,h.RULE_numerical_value=9,h.RULE_value=10,h.RULE_negative_expr=11,h.RULE_key=12,h.ruleNames=["expression","object","expr","logical_operator","boolean_operator","numeric_compare_operator","string_compare_operator","array_operator","array","numerical_value","value","negative_expr","key"],h._LITERAL_NAMES=[void 0,"'('","')'","'['","','","']'",void 0,void 0,void 0,"'='","'!='",void 0,void 0,"'>'","'>='","'<'","'<='"],h._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,"OR","AND","NOT","EQUAL","NOTEQUAL","CONTAINS","NEG","GT","GTE","LT","LTE","IN","NUMBER","FLOAT","INTEGER","SIMPLETEXT","STRING","WS"],h.VOCABULARY=new m.VocabularyImpl(h._LITERAL_NAMES,h._SYMBOLIC_NAMES,[]),h._serializedATN="ì¤ìªºÖê¾ºä½“Ø‡îª‹ì‰l\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t)\n/\n\f2\vI\n\b\b\t\t\n\n\n\n\nY\n\n\f\n\n\\\v\n\n\n\n\n\nb\n\n\v\v\f\f\r\r\b\n\f\b\b\t\v\f\r\r\n\nh(H\bJ\nL\fNPRacegi \b !\r!\"\")#)$%%&&'')((#($)0*+\f+,\b,--/.*/20.011203I4556\n67\f7I899:\f:;\v;I<==>\b>?\n?I@AAB\bBC\fCIDEEF\tFG\nGIH3H4H8H<H@HDIJK\tK\tLM\tM\vNO\tO\rPQ\rQRS\tSTUUZ\fVWWY\fXVY\\ZXZ[[]\\Z]^^b_``baTa_bcddef\tfgh\thijj(0HZa";class y extends c.ParserRuleContext{object(){return this.getRuleContext(0,_)}EOF(){return this.getToken(h.EOF,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_expression}enterRule(e){e.enterExpression&&e.enterExpression(this)}exitRule(e){e.exitExpression&&e.exitExpression(this)}accept(e){return e.visitExpression?e.visitExpression(this):e.visitChildren(this)}}t.ExpressionContext=y;class _ extends c.ParserRuleContext{negative_expr(){return this.tryGetRuleContext(0,x)}object(e){return void 0===e?this.getRuleContexts(_):this.getRuleContext(e,_)}expr(){return this.tryGetRuleContext(0,g)}logical_operator(){return this.tryGetRuleContext(0,E)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_object}enterRule(e){e.enterObject&&e.enterObject(this)}exitRule(e){e.exitObject&&e.exitObject(this)}accept(e){return e.visitObject?e.visitObject(this):e.visitChildren(this)}}t.ObjectContext=_;class g extends c.ParserRuleContext{key(){return this.getRuleContext(0,w)}boolean_operator(){return this.tryGetRuleContext(0,v)}value(){return this.tryGetRuleContext(0,T)}numeric_compare_operator(){return this.tryGetRuleContext(0,b)}numerical_value(){return this.tryGetRuleContext(0,C)}string_compare_operator(){return this.tryGetRuleContext(0,O)}array(){return this.tryGetRuleContext(0,S)}array_operator(){return this.tryGetRuleContext(0,P)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_expr}enterRule(e){e.enterExpr&&e.enterExpr(this)}exitRule(e){e.exitExpr&&e.exitExpr(this)}accept(e){return e.visitExpr?e.visitExpr(this):e.visitChildren(this)}}t.ExprContext=g;class E extends c.ParserRuleContext{AND(){return this.tryGetToken(h.AND,0)}OR(){return this.tryGetToken(h.OR,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_logical_operator}enterRule(e){e.enterLogical_operator&&e.enterLogical_operator(this)}exitRule(e){e.exitLogical_operator&&e.exitLogical_operator(this)}accept(e){return e.visitLogical_operator?e.visitLogical_operator(this):e.visitChildren(this)}}t.Logical_operatorContext=E;class v extends c.ParserRuleContext{EQUAL(){return this.tryGetToken(h.EQUAL,0)}NOTEQUAL(){return this.tryGetToken(h.NOTEQUAL,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_boolean_operator}enterRule(e){e.enterBoolean_operator&&e.enterBoolean_operator(this)}exitRule(e){e.exitBoolean_operator&&e.exitBoolean_operator(this)}accept(e){return e.visitBoolean_operator?e.visitBoolean_operator(this):e.visitChildren(this)}}t.Boolean_operatorContext=v;class b extends c.ParserRuleContext{GT(){return this.tryGetToken(h.GT,0)}GTE(){return this.tryGetToken(h.GTE,0)}LT(){return this.tryGetToken(h.LT,0)}LTE(){return this.tryGetToken(h.LTE,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_numeric_compare_operator}enterRule(e){e.enterNumeric_compare_operator&&e.enterNumeric_compare_operator(this)}exitRule(e){e.exitNumeric_compare_operator&&e.exitNumeric_compare_operator(this)}accept(e){return e.visitNumeric_compare_operator?e.visitNumeric_compare_operator(this):e.visitChildren(this)}}t.Numeric_compare_operatorContext=b;class O extends c.ParserRuleContext{CONTAINS(){return this.getToken(h.CONTAINS,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_string_compare_operator}enterRule(e){e.enterString_compare_operator&&e.enterString_compare_operator(this)}exitRule(e){e.exitString_compare_operator&&e.exitString_compare_operator(this)}accept(e){return e.visitString_compare_operator?e.visitString_compare_operator(this):e.visitChildren(this)}}t.String_compare_operatorContext=O;class P extends c.ParserRuleContext{IN(){return this.tryGetToken(h.IN,0)}CONTAINS(){return this.tryGetToken(h.CONTAINS,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_array_operator}enterRule(e){e.enterArray_operator&&e.enterArray_operator(this)}exitRule(e){e.exitArray_operator&&e.exitArray_operator(this)}accept(e){return e.visitArray_operator?e.visitArray_operator(this):e.visitChildren(this)}}t.Array_operatorContext=P;class S extends c.ParserRuleContext{value(e){return void 0===e?this.getRuleContexts(T):this.getRuleContext(e,T)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_array}enterRule(e){e.enterArray&&e.enterArray(this)}exitRule(e){e.exitArray&&e.exitArray(this)}accept(e){return e.visitArray?e.visitArray(this):e.visitChildren(this)}}t.ArrayContext=S;class C extends c.ParserRuleContext{NUMBER(){return this.getToken(h.NUMBER,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_numerical_value}enterRule(e){e.enterNumerical_value&&e.enterNumerical_value(this)}exitRule(e){e.exitNumerical_value&&e.exitNumerical_value(this)}accept(e){return e.visitNumerical_value?e.visitNumerical_value(this):e.visitChildren(this)}}t.Numerical_valueContext=C;class T extends c.ParserRuleContext{NUMBER(){return this.tryGetToken(h.NUMBER,0)}STRING(){return this.tryGetToken(h.STRING,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_value}enterRule(e){e.enterValue&&e.enterValue(this)}exitRule(e){e.exitValue&&e.exitValue(this)}accept(e){return e.visitValue?e.visitValue(this):e.visitChildren(this)}}t.ValueContext=T;class x extends c.ParserRuleContext{NEG(){return this.tryGetToken(h.NEG,0)}NOT(){return this.tryGetToken(h.NOT,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_negative_expr}enterRule(e){e.enterNegative_expr&&e.enterNegative_expr(this)}exitRule(e){e.exitNegative_expr&&e.exitNegative_expr(this)}accept(e){return e.visitNegative_expr?e.visitNegative_expr(this):e.visitChildren(this)}}t.Negative_exprContext=x;class w extends c.ParserRuleContext{SIMPLETEXT(){return this.getToken(h.SIMPLETEXT,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_key}enterRule(e){e.enterKey&&e.enterKey(this)}exitRule(e){e.exitKey&&e.exitKey(this)}accept(e){return e.visitKey?e.visitKey(this):e.visitChildren(this)}}t.KeyContext=w},503:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(2)),a=r(18),s=r(37),l=i(r(148)).default.pages.emailPreferences();t.EmailOptIn=e=>o.createElement(a.Alert,{title:s.Messages.components.emailOptIn.title,variant:a.AlertVariant.warning,isInline:!0},o.createElement(a.TextContent,null,o.createElement(a.Text,null,e.content),o.createElement(a.Text,null,o.createElement("a",{href:l,target:"_blank",rel:"noopener noreferrer"},s.Messages.components.emailOptIn.link))))},504:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(98),i=r(2);t.useDebouncedState=(e,t,r)=>{r||(r=i.useState);const[o,a]=r(e),[s,l]=i.useState(o),c=i.useCallback(()=>{s!==o&&a(s)},[s,a,o]);n.useUpdateEffect(()=>{l(o)},[o]);const[u]=n.useDebounce(c,t,[s]);return[s,l,o,u]}},505:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(112),i=r(2),o=r(98);t.useUrlState=(e,t,r,a)=>{const s=n.useHistory(),l=n.useLocation(),c=i.useCallback(t=>{const r=new URLSearchParams(l.search);void 0===t?r.delete(e):r.set(e,t);const n="?"+r.toString();n!==l.search&&s.replace(Object.assign(Object.assign({},l),{search:n}))},[l,s,e]),u=i.useCallback(()=>{return new URLSearchParams(l.search).get(e)||void 0},[l,e]),[d,p]=i.useState(()=>{const e=u();return void 0===e?(c(t(a)),a):r(e)}),m=i.useCallback(e=>{let r;if((r="function"==typeof e?e(d):e)!==d){p(r);const e=void 0===r?void 0:t(r);c(e)}},[t,d,c]);return o.useUpdateEffect(()=>{const e=t(d),n=u();e!==n&&p(r(n))},[l]),[d,m]};const a=e=>""===e?void 0:e,s=e=>void 0===e?"":e;t.useUrlStateString=(e,r)=>t.useUrlState(e,a,s,r)},506:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(151);t.ExporterCsv=class{constructor(){this.type=n.ExporterType.CSV}export(e){const t=this.headers(),r=t.map(e=>e[1]).join(",")+"\r",n=e.map(this.serialize).map(e=>Object.values(t).map(t=>{let r=e[t[0]];return r||(r=""),'"'+r.toString().replace(/"/g,'""')+'"'}).join(",")+"\r");return new Blob([r].concat(n),{type:"text/csv"})}}},507:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(151);t.ExporterJson=class{constructor(){this.type=n.ExporterType.JSON}export(e){return new Blob([JSON.stringify(e)],{type:"application/json"})}}},508:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(56),i=r(97);t.actionCreator=e=>i.actionPostPoliciesIdsEnabled({body:e.policyIds,enabled:e.shouldBeEnabled}),t.useMassChangePolicyEnabledMutation=()=>n.useMutation(t.actionCreator)},509:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(977);t.BreadcrumbLinkItem=e=>i.createElement(o.BreadcrumbItem,Object.assign({},e,{component:a.LinkAdapter}),e.children)},510:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(84),a=r(36);t.Section=e=>i.createElement(o.DarkContext.Consumer,null,(t="light")=>{const r=a.classes(e.className,"pf-l-page__main-section","pf-c-page__main-section","dark"===t?"pf-m-dark-200":"","light"===t?"pf-m-light":"");return i.createElement(o.Section,{style:e.style,className:r}," ",e.children," ")})},512:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(84),a=r(37),s=r(69),l=r(179);t.NoPermissionsPage=()=>i.createElement(i.Fragment,null,i.createElement(o.PageHeader,null,i.createElement(o.PageHeaderTitle,{title:a.Messages.pages.noPermissions.title})),i.createElement(o.Main,null,i.createElement(l.EmptyStateSection,{icon:s.LockIcon,title:a.Messages.pages.noPermissions.emptyState.title,content:a.Messages.pages.noPermissions.emptyState.content})))},527:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(103),a=r(264),s=r(174),l=r(993);r(994),r(995);const c=r(233),u=r(512),d=r(996);t.default=o.withRouter(()=>{const{rbac:e,userSettings:t}=d.useApp();return e?i.createElement(c.AppContext.Provider,{value:{rbac:e,userSettings:t}},e.canReadAll?i.createElement(i.Fragment,null,i.createElement(a.NotificationsPortal,null),i.createElement(s.Routes,null)):i.createElement(u.NoPermissionsPage,null)):i.createElement(l.AppSkeleton,null)})},554:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t="/";const r=e.split("/");return r.shift(),"beta"===r[0]&&(r.shift(),t="/beta/"),`${t}${r[0]}/${r[1]||""}`}},555:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(56),i=r(180);t.client=n.createClient({requestInterceptors:[e=>e=>i.getInsights().chrome.auth.getUser().then(()=>e)]})},557:function(e,t,r){"use strict";r.r(t);var n=r(2),i=r.n(n),o=r(29),a=r.n(o),s=r(112),l=r(248),c=r(382),u=r(527),d=r.n(u),p=r(554),m=r.n(p),f=r(555),h=r(56);a.a.render(i.a.createElement(l.Provider,{store:Object(c.init)().getStore()},i.a.createElement(s.BrowserRouter,{basename:m()(window.location.pathname)},i.a.createElement(h.ClientContextProvider,{client:f.client},i.a.createElement(d.a,null)))),document.getElementById("root"))},610:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(2)),a=r(2),s=r(18),l=i(r(428)),c=r(84),u=r(436),d=r(353),p=r(444),m=r(233),f=r(966),h=r(967),y=r(968),_=r(234),g=r(375),E=r(147),v=r(211),b=r(503),O=r(37),P=r(36),S=r(970),C=r(98),T=r(376),x=r(110),w=r(971),M=r(377),A=r(237),N=r(974),I=r(508),j=r(975),k=r(151),R=P.style({paddingBottom:0});t.default=e=>{var t;const[r,n]=o.useState({isOpen:!1}),i=I.useMassChangePolicyEnabledMutation(),P=_.usePolicyFilter(),L=g.useSort(),F=_.usePolicyPage(P.debouncedFilters,void 0,L.sortBy),D=j.useGetListPagePolicies(F.page),{query:B}=T.useGetPoliciesQuery(x.Page.of(0,x.Page.NO_SIZE,F.page.filter,F.page.sort),!1),U=N.usePolicyToDelete(),G=a.useContext(m.AppContext);let V=D.loading||i.loading;const z=_.usePolicyRows(D.payload,V,D.count,F.page),{rows:H,onSelect:W,clearSelection:Q,selectionCount:q,selected:$,getSelected:K,loadingSelected:X,removeSelection:Y}=z;V=V||X;const{canWriteAll:J,canReadAll:Z}=G.rbac,{query:ee,count:te}=D,{mutate:re,loading:ne}=i,{changePage:ie}=F,{index:oe,size:ae}=F.page,{close:se,open:le,policy:ce}=U,ue=C.usePrevious(ne);o.useEffect(()=>{Q()},[P.debouncedFilters,Q]),o.useEffect(()=>{!0!==ue||ne||ee()},[ne,ee,ue]);const de=o.useCallback(e=>{const t=H.findIndex(t=>t.id===e);-1===t?Y(e):W(H[t],t,!1)},[H,W,Y]),pe=o.useCallback(e=>{if(e){ee();const e=ce?1:q,t=x.Page.lastPageForElements(te-e,ae);t.index<oe&&ie(void 0,t.index),Q()}se()},[ee,te,se,Q,ie,oe,q,ae,ce]),me=o.useCallback(e=>J?[{title:e.isEnabled?"Disable":"Enable",onClick:()=>{re({policyIds:[e.id],shouldBeEnabled:!e.isEnabled})}},{title:"Edit",onClick:()=>{n({isOpen:!0,template:e,showCreateStep:!1,isEditing:!0})}},{title:"Duplicate",onClick:()=>{n({isOpen:!0,template:E.makeCopyOfPolicy(e),showCreateStep:!1,isEditing:!1})}},{title:"Delete",onClick:()=>{le(e)}}]:[],[J,le,re]);o.useEffect(()=>{Z&&ee()},[Z,ee]);const fe=o.useCallback(()=>{n({isOpen:!0,showCreateStep:!0,template:void 0,isEditing:!1})},[n]),he=o.useCallback(e=>{const t=G.userSettings.refresh;e&&(ee(),t()),n({isOpen:!1})},[G.userSettings.refresh,n,ee]),ye=o.useMemo(()=>f.policyTableError({clearAllFiltersAndTryAgain:()=>{P.setFilters[v.PolicyFilterColumn.NAME](""),P.setFilters[v.PolicyFilterColumn.IS_ACTIVE]({disabled:!1,enabled:!1}),ie(void 0,1)},refreshPage:()=>{window.location.reload()},tryAgain:()=>{ee()}},D.error,D.status),[D.error,D.status,P.setFilters,ie,ee]),_e=o.useCallback(()=>{if(1===q){const e=H.find(e=>$.contains(e.id));if(e)return void le(e)}le(q)},[q,le,$,H]),ge=o.useCallback(()=>K().then(e=>re({shouldBeEnabled:!1,policyIds:e})),[re,K]),Ee=o.useCallback(()=>K().then(e=>re({shouldBeEnabled:!0,policyIds:e})),[re,K]),ve=o.useCallback((e,t)=>{const r=w.policyExporterFactory(k.exporterTypeFromString(t));B().then(e=>{e.payload?l.default(r.export(e.payload),`policies-${A.format(new Date,"y-dd-MM")}.${r.type}`):M.addDangerNotification("Unable to download policies","We were unable to download the policies for exporting")})},[B]);return o.createElement(o.Fragment,null,o.createElement(c.PageHeader,null,o.createElement(c.PageHeaderTitle,{title:O.Messages.pages.listPage.title})),!G.userSettings.isSubscribedForNotifications&&D.payload&&D.payload.find(e=>e.actions.find(e=>e.type===h.ActionType.EMAIL))&&o.createElement(s.PageSection,{className:R},o.createElement(b.EmailOptIn,{content:O.Messages.pages.listPage.emailOptIn})),o.createElement(c.Main,null,!1===D.hasPolicies?o.createElement(S.ListPageEmptyState,{createPolicy:J?fe:void 0}):o.createElement(c.Section,null,o.createElement(d.PolicyToolbar,{onCreatePolicy:J?fe:void 0,onDeletePolicy:J?_e:void 0,onEnablePolicy:J?Ee:void 0,onDisablePolicy:J?ge:void 0,onPaginationChanged:F.changePage,onPaginationSizeChanged:F.changeItemsPerPage,onSelectionChanged:z.onSelectionChanged,selectedCount:z.selectionCount,page:F.page.index,pageCount:null===(t=D.payload)||void 0===t?void 0:t.length,perPage:F.page.size,showPerPageOptions:!0,filterElements:P.filters,setFilterElements:P.setFilters,clearFilters:P.clearFilterHandler,count:D.count,onExport:ve}),o.createElement(u.PolicyTable,{policies:z.rows,onCollapse:z.onCollapse,onSelect:z.onSelect,actionResolver:me,loading:V,error:ye,onSort:L.onSort,sortBy:L.sortBy,linkToDetailPolicy:!0}))),r.isOpen&&o.createElement(p.CreatePolicyWizard,{isOpen:r.isOpen,close:he,initialValue:r.template,showCreateStep:r.showCreateStep,policiesExist:!0===D.hasPolicies,isEditing:r.isEditing}),U.isOpen&&o.createElement(y.DeletePolicy,{onClose:pe,onDeleted:de,loading:z.loadingSelected,count:U.count,getPolicies:z.getSelected,policy:U.policy}))}},66:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(440);t.ActionType=n.ActionType},733:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18);t.Description=e=>i.createElement(i.Fragment,null,i.createElement(o.Title,{size:o.TitleSize.md},"Description"),i.createElement(o.Text,null," ",e.description," "))},734:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(237);t.Dates=e=>i.createElement(i.Fragment,null,i.createElement(o.Text,null,"Last updated ",a.format(e.updated,"dd MMM yyyy")," | Created ",a.format(e.created,"dd MMM yyyy")))},742:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(69);t.DisabledPolicyIcon=()=>i.createElement(o.OffIcon,null)},743:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(69);t.EnabledPolicyIcon=()=>i.createElement(o.CheckCircleIcon,{color:"green"})},744:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(2)),a=r(36),s=i(r(745)),l=a.style({verticalAlign:"-0.125em",width:"1em",height:"1em"});t.WebhookIcon=()=>o.createElement("img",{className:l,src:s.default})},745:function(e,t,r){e.exports=r.p+"fonts/WebhookIcon.svg"},746:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(66),a=r(78),s=r(18),l=r(36),c=r(351),u=r(37),d=l.style({borderRadius:3}),p=l.style({marginRight:5}),m=l.style({minWidth:145}),f=s.TooltipPosition.bottom,h=()=>i.createElement(s.Tooltip,{content:u.Messages.tables.policy.toolTips.email,position:f},i.createElement(c.ActionEmailIcon,null)),y=()=>i.createElement(s.Tooltip,{content:u.Messages.tables.policy.toolTips.hook,position:f},i.createElement(c.ActionWebhookIcon,null));t.ActionsCell=e=>{const t=e.actions.slice(0,4),r=e.actions.slice(4),n=t.map((e,t)=>{let r;switch(e.type){case o.ActionType.EMAIL:r=i.createElement(h,null);break;case o.ActionType.WEBHOOK:r=i.createElement(y,null);break;default:a.assertNever(e)}return i.createElement(s.SplitItem,{key:t,className:p},r)});return r.length>0&&n.push(i.createElement(s.SplitItem,{key:"remaining",className:p},i.createElement(s.Badge,{className:d,isRead:!0},`${r.length} more`))),i.createElement(s.Split,{className:m},n)}},747:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(36),a=r(237),s=r(37),l=r(210),c=o.style({marginLeft:10});t.LastTriggeredCell=e=>{let t;if(e.lastTriggered){const r=a.add(e.lastTriggered,{months:1}),n=new Date(Date.now());t=a.isAfter(n,r)?a.format(e.lastTriggered,"MMM dd y"):`${a.formatDistanceToNow(e.lastTriggered)} ${s.Messages.components.lastTriggeredCell.ago}`}else t=s.Messages.components.lastTriggeredCell.never;return i.createElement(i.Fragment,null,e.isEnabled?i.createElement(l.EnabledPolicyIcon,null):i.createElement(l.DisabledPolicyIcon,null),i.createElement("span",{className:c},t))}},748:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(180),a=e=>{const t=o.getInsights().chrome.isBeta();return e.renderIfBeta===t?i.createElement(i.Fragment,null,e.children):i.createElement(i.Fragment,null)};t.BetaIf=e=>i.createElement(a,{renderIfBeta:!0},e.children),t.BetaIfNot=e=>i.createElement(a,{renderIfBeta:!1},e.children),t.BetaDetector=e=>{let r=0,n=0;if(i.Children.forEach(e.children,e=>{if(e&&e.type){const i=e.type;if(i===t.BetaIf)++r;else{if(i!==t.BetaIfNot)throw new Error("Only BetaIf and BetaIfNot are accepted Elements in BetaDecorator");++n}}}),r>1||n>1)throw new Error("Only one of each BetaIf and BetaIfNot is allowed on each BetaDetector");return i.createElement(i.Fragment,null,e.children)}},749:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(79),s=r(160),l=r(850),c=r(854),u=r(866),d=r(939),p=r(945),m=r(184),f=r(946),h=r(98),y=r(37),_=r(947),g=r(78),E=(e,t,r,n,i)=>!i&&(e===r||(t?e<=n:e<=r)),v=(e,t)=>!t&&e,b=e=>{const t=a.useFormikContext(),r=t.validateForm,n=t.handleSubmit;i.useEffect(()=>{r()},[e.currentStep,r]),i.useEffect(()=>{e.triggeredAction!==s.WizardActionType.NONE&&n()},[e.triggeredAction,n]);const l={isLoading:e.isLoading,isFormValid:t.isValid,triggerAction:e.triggerAction,verifyResponse:e.verifyResponse,createResponse:e.createResponse,setVerifyResponse:e.setVerifyResponse,facts:e.facts,setMaxStep:e.setMaxStep},c=e.steps[e.currentStep],u=((e,t,r)=>e.isValid?e.isValid(t,r):t.isFormValid)(c,l,t.values);l.isValid=u;const d=e.steps.map(t=>Object.assign(Object.assign({},t),{enableNext:v(u,e.isLoading),canJumpTo:E(t.id,u,e.currentStep,e.maxStep,e.isLoading)}));return i.createElement(o.Form,null,i.createElement(s.WizardContext.Provider,{value:l},i.createElement(o.Wizard,{isOpen:!0,onSave:()=>{e.triggerAction(s.WizardActionType.SAVE)},onClose:e.onClose,steps:d,startAtStep:e.currentStep+1,onNext:e.onMove,onBack:e.onMove,onGoToStep:e.onMove,title:e.isEditing?y.Messages.wizards.policy.titleEdit:y.Messages.wizards.policy.titleNew,description:y.Messages.wizards.policy.description,footer:i.createElement(f.PolicyWizardFooter,{onNext:c.onNext,loadingText:"Loading",isLoading:e.isLoading,error:e.createResponse.error})})))};t.PolicyWizard=e=>{const[t,r]=i.useState(0),[n,o]=i.useState(0),[f,y]=i.useState({type:s.WizardActionType.NONE}),[E,v]=i.useState({isValid:!1}),O=h.useMountedState(),[P,S]=i.useState({created:!1}),C=i.useCallback(e=>{let t,r;const n=new Promise((e,n)=>{t=e,r=n});return y(n=>(n.rejecter&&n.rejecter(),{type:e,resolver:t,rejecter:r})),n},[y]),T=i.useCallback(e=>{y(t=>(e&&t.resolver?t.resolver():t.rejecter&&t.rejecter(),{type:s.WizardActionType.NONE}))},[y]);i.useEffect(()=>{var t;(null===(t=e.initialValue)||void 0===t?void 0:t.conditions)&&v({isValid:!0,policy:e.initialValue})},[e.initialValue]);const x=(e=>{const t=[];return e&&t.push(l.createPolicyStep()),t.push(c.createDetailsStep(),u.createConditionsStep(),d.createActionsStep(),p.createReviewStep({nextButtonText:"Finish"})),t.map((e,t)=>Object.assign(Object.assign({},e),{id:t}))})(e.showCreateStep);return i.createElement(i.Fragment,null,i.createElement(_.CreatePolicyStepContextProvider,{showCreateStep:e.showCreateStep},i.createElement(a.Formik,{initialValues:e.initialValue,initialStatus:{},validateOnMount:!1,validationSchema:x[t].validationSchema,onSubmit:(t,r)=>{r.setSubmitting(!1),y(e=>Object.assign(Object.assign({},e),{type:s.WizardActionType.NONE}));const n=m.PolicyFormSchema.cast(t);switch(r.setValues(n),f.type){case s.WizardActionType.SAVE:e.onSave(n).then(e=>{O()&&(S(e),T(e.created))});break;case s.WizardActionType.VALIDATE_CONDITION:case s.WizardActionType.NONE:case s.WizardActionType.VALIDATE_NAME:break;default:g.assertNever(f.type)}},validate:t=>{const r=m.PolicyFormSchema.cast(t);switch(f.type){case s.WizardActionType.SAVE:case s.WizardActionType.NONE:break;case s.WizardActionType.VALIDATE_CONDITION:e.onVerify(r).then(e=>{v(e),T(e.isValid)});break;case s.WizardActionType.VALIDATE_NAME:e.onValidateName(r).then(e=>{S(e),T(!e.error)});break;default:g.assertNever(f.type)}}},i.createElement(b,{currentStep:t,maxStep:n,isLoading:e.isLoading,triggeredAction:f.type,triggerAction:C,steps:x,verifyResponse:E,createResponse:P,setVerifyResponse:v,onClose:e.onClose,onMove:(e,t)=>{const i=e.id;r(i),i>n&&o(i)},showCreateStep:e.showCreateStep,facts:e.facts,setMaxStep:o,isEditing:e.isEditing}))))}},78:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertNever=e=>{throw new Error(`Invalid value received [${e}]`)}},850:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(2)),a=r(18),s=r(160),l=r(37),c=r(851),u=r(79),d=i(r(143)),p=r(2),m=r(147),f=r(221),h=r(98),y=r(472),_=r(209);t.useCreatePolicyStep=()=>{const e=o.useContext(y.CreatePolicyStepContext);if(void 0===e)throw Error("Invalid usage of CreatePolicyStep without valid context");const{copyPolicy:t,setCopyPolicy:r,copiedPolicy:i,setCopiedPolicy:a}=e,l=n(e,["copyPolicy","setCopyPolicy","copiedPolicy","setCopiedPolicy"]),{clearSelection:c}=l.policyRows,{validate:d,validateField:f,setValues:_,setFieldValue:g}=u.useFormikContext(),{setVerifyResponse:E,setMaxStep:v}=p.useContext(s.WizardContext),b=o.useCallback(()=>{r(!1),a({})},[r,a]),O=o.useCallback(()=>{r(!0),a(void 0)},[r,a]);h.useUpdateEffect(()=>{i&&(_(i),t&&E({policy:i,isValid:!0})),v(0),g("isValid",!!i),d&&f("isValid")},[t,i,d,f,g,_,E]),o.useEffect(()=>{t||c()},[t,c]);const P=o.useCallback(e=>{a(m.makeCopyOfPolicy(e))},[a]);return{copyPolicy:t,createFromScratch:b,copyExisting:O,copyFromPolicyHandler:P,copyFromPolicyProps:l}},t.CreatePolicyStep=()=>{const{copyPolicy:e,createFromScratch:r,copyExisting:n,copyFromPolicyHandler:i,copyFromPolicyProps:s}=t.useCreatePolicyStep();return o.createElement(o.Fragment,null,o.createElement(f.Form,{className:"pf-c-form"},o.createElement("div",{className:"pf-c-form__group"},o.createElement(a.Title,{headingLevel:"h4",size:"xl",className:"pf-u-mb-sm"},l.Messages.wizards.policy.createPolicy.title),o.createElement(a.Text,{className:_.joinClasses("pf-u-mb-sm","pf-c-title pf-m-sm"),component:a.TextVariants.h6},"Define a new policy:"),o.createElement(a.Radio,{isChecked:!e,name:"new-policy",value:"from-scratch",id:"create-new-custom-policy-from-scratch",onChange:r,label:"From scratch",className:_.joinClasses("pf-u-mb-sm","pf-c-radio")}),o.createElement(a.Radio,{isChecked:e,name:"new-policy",value:"as-copy",id:"create-new-custom-policy-as-copy",onChange:n,label:"As a copy of existing Policy",className:_.joinClasses("pf-u-mb-sm","pf-c-radio")}),e&&o.createElement(o.Fragment,null,o.createElement(c.CopyFromPolicy,Object.assign({onSelect:i},s))))))},t.createPolicyStep=e=>Object.assign({name:l.Messages.wizards.policy.createPolicy.title,component:o.createElement(t.CreatePolicyStep,null),validationSchema:d.object().shape({isValid:d.boolean().oneOf([!0])})},e)},851:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(353),a=r(436),s=r(98);t.CopyFromPolicy=e=>{var t;const{policyFilter:r,policyPage:n,policySort:l,policyQuery:c,policyRows:u}=e;s.useEffectOnce(()=>{c.payload||c.query()});const d=e.onSelect,p=c.payload,m=u.onSelect,f=i.useCallback((e,t,r)=>{m(e,t,r),p&&r&&d(p[t])},[d,m,p]);return i.createElement(i.Fragment,null,i.createElement(o.PolicyToolbar,{onPaginationChanged:n.changePage,page:n.page.index,pageCount:null===(t=c.payload)||void 0===t?void 0:t.length,perPage:n.page.size,showPerPageOptions:!1,hideActions:!0,hideBulkSelect:!0,filterElements:r.filters,setFilterElements:r.setFilters,clearFilters:r.clearFilterHandler,count:c.count}),i.createElement(a.PolicyTable,{columnsToShow:["radioSelect","name","actions"],policies:u.rows,onSelect:f,loading:c.loading,loadingRowCount:5,onSort:l.onSort,sortBy:l.sortBy,linkToDetailPolicy:!1}))}},854:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(473),s=r(160),l=r(184),c=r(37),u=r(221),d=r(360);t.DetailsStep=()=>i.createElement(u.Form,null,i.createElement(o.Title,{headingLevel:"h4",size:"xl"},c.Messages.wizards.policy.details.title),i.createElement(a.FormTextInput,{maxLength:d.maxPolicyNameLength,isRequired:!0,label:"Name",type:"text",name:"name",id:"name"}),i.createElement(a.FormTextArea,{label:"Description",type:"text",id:"description",name:"description",resizeOrientation:"vertical"})),t.createDetailsStep=e=>Object.assign({name:c.Messages.wizards.policy.details.title,component:i.createElement(t.DetailsStep,null),validationSchema:l.PolicyFormDetails,onNext:(e,t)=>{e.triggerAction(s.WizardActionType.VALIDATE_NAME).then(t).catch(()=>{})}},e)},855:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(79),a=r(18),s=r(183);t.Checkbox=e=>{const[t,r]=o.useField(Object.assign(Object.assign({},e),{type:"checkbox"})),n=!r.error||!r.touched;return i.createElement(a.FormGroup,{fieldId:e.id,helperTextInvalid:r.error,isRequired:e.isRequired,isValid:n,label:e.label},i.createElement(a.Checkbox,Object.assign({isChecked:t.checked},e,t,{isValid:n,onChange:s.onChangePFAdapter(t)})))}},856:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(79),a=r(18),s=r(183);t.FormSelect=e=>{const[t,r]=o.useField(Object.assign({},e)),n=!r.error||!r.touched;return i.createElement(a.FormGroup,{fieldId:e.id,helperTextInvalid:r.error,isRequired:e.isRequired,isValid:n,label:e.label},i.createElement(a.FormSelect,Object.assign({},e,t,{onChange:s.onChangePFAdapter(t),isValid:n}),e.children))}},857:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(2)),a=r(79),s=r(18),l=r(183);t.Switch=e=>{const[t,r]=a.useField(Object.assign(Object.assign({},e),{type:"checkbox"})),{labelOn:i}=e,c=n(e,["labelOn"]),u=!r.error||!r.touched;return o.createElement(s.FormGroup,{fieldId:e.id,helperTextInvalid:r.error,isRequired:e.isRequired,isValid:u,label:e.label},o.createElement("div",null,o.createElement(s.Switch,Object.assign({isChecked:t.checked},c,t,{label:i,onChange:l.onChangePFAdapter(t)}))))}},858:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(2)),a=r(79),s=r(18),l=r(183);t.FormTextInput=e=>{const{hint:t}=e,r=n(e,["hint"]),[i,c]=a.useField(Object.assign({},r)),u=!c.error||!c.touched;return o.createElement(s.FormGroup,{fieldId:e.id,helperTextInvalid:c.error,isRequired:e.isRequired,isValid:u,label:e.label},o.createElement(s.TextInput,Object.assign({},r,i,{value:void 0!==i.value?i.value.toString():"",isValid:u,onChange:l.onChangePFAdapter(i)})),t&&o.createElement(s.Text,{component:s.TextVariants.small},t))}},859:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(79),a=r(18),s=r(183);t.FormTextArea=e=>{const[t,r]=o.useField(Object.assign({},e)),n=!r.error||!r.touched;return i.createElement(a.FormGroup,{fieldId:e.id,helperTextInvalid:r.error,isRequired:e.isRequired,isValid:n,label:e.label},i.createElement(a.TextArea,Object.assign({},e,t,{value:t.value||"",isValid:n,onChange:s.onChangePFAdapter(t)})))}},860:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(79),a=r(18);t.FormText=e=>{const[t,r]=o.useField(Object.assign({},e)),n=!r.error||!r.touched;return i.createElement(a.FormGroup,{fieldId:e.id,helperTextInvalid:r.error,isRequired:e.isRequired,isValid:n,label:e.label},i.createElement(a.Text,Object.assign({component:a.TextVariants.p},e,t),t.value||""))}},861:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(862);t.ActionSchema=n.ActionSchema;var i=r(863);t.ActionEmailSchema=i.ActionEmailSchema;var o=r(864);t.ActionWebhookSchema=o.ActionWebhookSchema},862:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(143)),o=r(66);t.ActionSchema=i.object().shape({type:i.mixed().required("Specify the action type").oneOf(Object.values(o.ActionType))})},863:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(143)),o=r(66);t.ActionEmailSchema=i.object().shape({type:i.mixed().oneOf([o.ActionType.EMAIL]).required()})},864:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(143)),o=r(66);t.ActionWebhookSchema=i.object().shape({type:i.mixed().oneOf([o.ActionType.WEBHOOK]).required()})},865:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(440);t.isActionEmail=e=>e.type===n.ActionType.EMAIL,t.isActionWebhook=e=>e.type===n.ActionType.WEBHOOK,t.isAction=e=>t.isActionEmail(e)||t.isActionWebhook(e)},866:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(2)),a=r(18),s=r(69),l=r(160),c=r(184),u=r(79),d=r(36),p=r(178),m=r(37),f=r(209),h=r(221),y=i(r(867)),_=r(868),g=d.style({marginTop:"auto",marginBottom:"auto",marginLeft:8}),E=d.style({width:"100%"}),v=d.style({marginTop:12}),b=d.style({color:p.GlobalDangerColor100}),O=d.style({color:p.GlobalSuccessColor200}),P=d.style({fontWeight:"bold"}),S=d.style({marginBottom:5}),C=e=>e.loading?o.createElement(a.Split,null,o.createElement(a.SplitItem,null,o.createElement("span",{className:g},o.createElement(a.Spinner,{size:"md"})),o.createElement("span",{className:g}," ",m.Messages.wizards.policy.conditions.validating," "))):e.changed?null:e.isValid?o.createElement(a.Split,null,o.createElement(a.SplitItem,null,o.createElement(s.CheckCircleIcon,{className:g,color:p.GlobalSuccessColor200})),o.createElement(a.SplitItem,null,o.createElement("div",{className:f.joinClasses(g,O,P)},m.Messages.wizards.policy.conditions.valid))):e.error?o.createElement(a.Stack,null,o.createElement(a.StackItem,null,o.createElement(a.Split,null,o.createElement(a.SplitItem,null,o.createElement(s.ExclamationCircleIcon,{className:g,color:p.GlobalDangerColor100})),o.createElement(a.SplitItem,null,o.createElement("div",{className:f.joinClasses(g,b,P)},m.Messages.wizards.policy.conditions.invalid)))),o.createElement(a.StackItem,null,o.createElement("div",{className:f.joinClasses(g,b)}," ",e.error," "))):null,T=()=>{var e;const t=o.useContext(l.WizardContext),{values:r}=u.useFormikContext(),n=!r.conditions||""===r.conditions||t.isLoading;return o.createElement(h.Form,null,o.createElement(a.Title,{className:S,headingLevel:"h4",size:"xl"},m.Messages.wizards.policy.conditions.title),m.Messages.wizards.policy.conditions.summaryDesc,o.createElement(_.ConditionFieldWithForkmik,{label:"Condition text",id:"conditions",name:"conditions",facts:t.facts||[],hint:m.Messages.wizards.policy.conditions.hint}),o.createElement(a.Stack,{className:E},o.createElement(a.StackItem,null,o.createElement(a.Button,{onClick:()=>{t.triggerAction(l.WizardActionType.VALIDATE_CONDITION)},isDisabled:n,variant:a.ButtonVariant.secondary},"Validate condition")),o.createElement(a.StackItem,{className:v},o.createElement(C,Object.assign({loading:t.isLoading},t.verifyResponse,{changed:(null===(e=t.verifyResponse.policy)||void 0===e?void 0:e.conditions)!==r.conditions})))),o.createElement(y.default,null))};t.createConditionsStep=e=>Object.assign({name:m.Messages.wizards.policy.conditions.title,component:o.createElement(T,null),validationSchema:c.PolicyFormConditions,isValid:(e,t)=>{var r;return t.conditions===(null===(r=e.verifyResponse.policy)||void 0===r?void 0:r.conditions)&&e.verifyResponse.isValid}},e)},867:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(2)),a=r(18),s=r(37),l=r(36),c=i(r(148)),u=l.style({fontFamily:"monospace",fontSize:"14px",fontStyle:"default"}),d=l.style({marginBottom:5}),p=l.style({marginLeft:20});class m extends o.Component{render(){return o.createElement(a.TextContent,{className:p},o.createElement(a.Text,{component:a.TextVariants.p},s.Messages.wizards.policy.hints.hintParagraph1),o.createElement(a.Text,{component:a.TextVariants.a,className:d,href:c.default.pages.factsDocumentation,target:"_blank",rel:"noopener noreferrer"},s.Messages.wizards.policy.hints.hintLinkTitle),o.createElement(a.Text,{component:a.TextVariants.h5,className:"lg"},s.Messages.wizards.policy.hints.hintSyntaxExamplesSection),o.createElement(a.Text,null,s.Messages.wizards.policy.hints.hintQuestion1),o.createElement(a.Text,{component:a.TextVariants.p,className:u},o.createElement("i",null,s.Messages.wizards.policy.hints.hintQuestion1Ans)),o.createElement(a.Text,null,s.Messages.wizards.policy.hints.hintQuestion2),o.createElement(a.Text,{component:a.TextVariants.p,className:u},o.createElement("i",null,s.Messages.wizards.policy.hints.hintQuestion2Ans)),o.createElement(a.Text,null,s.Messages.wizards.policy.hints.hintQuestion3),o.createElement(a.Text,{component:a.TextVariants.p,className:u},o.createElement("i",null,s.Messages.wizards.policy.hints.hintQuestion3Ans)),o.createElement(a.Text,null,s.Messages.wizards.policy.hints.hintQuestion4),o.createElement(a.Text,{component:a.TextVariants.p,className:u},o.createElement("i",null,s.Messages.wizards.policy.hints.hintQuestion4Ans)))}}t.default=e=>o.createElement(o.Fragment,null,o.createElement(a.StackItem,null,o.createElement(a.Expandable,{toggleText:s.Messages.wizards.policy.hints.hintTitle},o.createElement(m,null))))},868:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(2)),a=r(869),s=r(79),l=r(18);t.ConditionFieldWithForkmik=e=>{const{hint:t}=e,r=n(e,["hint"]),[i,c,{setValue:u}]=s.useField(Object.assign({},r)),d=!c.error||!c.touched,p=o.useCallback(e=>{u(e)},[u]);return o.createElement(l.FormGroup,{fieldId:e.id,helperTextInvalid:c.error,isRequired:e.isRequired,isValid:d,label:e.label},o.createElement(a.ConditionField,Object.assign({},r,i,{value:i.value?i.value.toString():"",onSelect:p})),t&&o.createElement(l.Text,{component:l.TextVariants.small},t))}},869:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(36),s=r(98),l=r(870),c=a.style({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"});t.factToOptions=(e,t,r)=>((e=e.trim()).length>0&&t.length>0&&(e+=" "),r.length>0&&t.length>0&&(r=" "+r),(t||[" "]).map(t=>i.createElement(o.SelectOption,{className:c,key:e+t+r,value:e+t+r},e,i.createElement("b",null,t),r))),t.buildOptionList=(e,r)=>{try{const n=l.computeOptions(e,r);if(n)return t.factToOptions(n.prefix,n.options,n.postfix)}catch(t){console.log(`Exception when computing options for condition [${e}]`,t)}return[]},t.ConditionField=e=>{const{facts:r,onSelect:n,value:a}=e,[l,c]=i.useState(!1),[u,d]=i.useState(),p=i.useCallback(e=>t.buildOptionList(e,r),[r]),m=i.useCallback(e=>{const t=p(a);if(e){let e=t.length>0;1===t.length&&t[0].props.value===a&&(e=!1),c(e)}d(t)},[a,p,d]);s.useUpdateEffect(()=>{m(!0)},[m]),s.useEffectOnce(()=>{m(!1)});const f=i.useCallback(e=>{const t=e.target.value;return n(t),[]},[n]),h=i.useCallback((e,t)=>{n(t.toString()),d(e=>(e&&1===e.length&&e[0].props.value===t&&c(!1),e))},[n]),y=i.useCallback(()=>{n("")},[n]);return i.createElement(o.Select,{label:e.label,toggleId:e.id,name:e.name,onToggle:()=>c(()=>!l),isExpanded:l,selections:a,variant:o.SelectVariant.typeahead,onSelect:h,onFilter:f,onClear:y,ariaLabelTypeAhead:"Condition writer",style:{maxWidth:"100%"}},u)}},870:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(474),i=r(933),o=r(502),a=r(934),s=e=>e.map(e=>e.value).join(" ");t.computeOptions=(e,t)=>{const r=(e=>{const t=n.CharStreams.fromString(e),r=new i.ExpressionLexer(t);r.removeErrorListeners();const a=new n.CommonTokenStream(r),s=new o.ExpressionParser(a);return s.removeErrorListeners(),s})(e).expression(),l=(new a.ConditionVisitor).visit(r).filter(e=>e.type!==a.ElementType.ERROR);let c=l.pop();const u=[];if(void 0===c)return{prefix:"",options:t.slice(0,10).map(e=>e.name||""),postfix:""};for(;c.type===a.ElementType.CLOSE_ROUND_BRACKET;){const e=l.pop();if(void 0===e)break;u.unshift(c),c=e}const d=s(l),p=s(u),m=c;return m.type===a.ElementType.FACT?{prefix:d,options:t.filter(e=>e.name&&e.name.toUpperCase().includes(m.value.toUpperCase())).slice(0,10).map(e=>e.name||""),postfix:p}:(u.unshift(m),{prefix:d,options:[],postfix:s(u)})}},933:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(231),o=r(130),a=r(225),s=r(132),l=n(r(95));class c extends o.Lexer{constructor(e){super(e),this._interp=new a.LexerATNSimulator(c._ATN,this)}get vocabulary(){return c.VOCABULARY}get grammarFileName(){return"Expression.g4"}get ruleNames(){return c.ruleNames}get serializedATN(){return c._serializedATN}get channelNames(){return c.channelNames}get modeNames(){return c.modeNames}static get _ATN(){return c.__ATN||(c.__ATN=(new i.ATNDeserializer).deserialize(l.toCharArray(c._serializedATN))),c.__ATN}}t.ExpressionLexer=c,c.T__0=1,c.T__1=2,c.T__2=3,c.T__3=4,c.T__4=5,c.OR=6,c.AND=7,c.NOT=8,c.EQUAL=9,c.NOTEQUAL=10,c.CONTAINS=11,c.NEG=12,c.GT=13,c.GTE=14,c.LT=15,c.LTE=16,c.IN=17,c.NUMBER=18,c.FLOAT=19,c.INTEGER=20,c.SIMPLETEXT=21,c.STRING=22,c.WS=23,c.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],c.modeNames=["DEFAULT_MODE"],c.ruleNames=["T__0","T__1","T__2","T__3","T__4","OR","AND","NOT","EQUAL","NOTEQUAL","CONTAINS","NEG","GT","GTE","LT","LTE","IN","NUMBER","FLOAT","INTEGER","SIMPLETEXT","STRING","WS","ESC","UNICODE","HEX","ESC_DOT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","NEG_OP"],c._LITERAL_NAMES=[void 0,"'('","')'","'['","','","']'",void 0,void 0,void 0,"'='","'!='",void 0,void 0,"'>'","'>='","'<'","'<='"],c._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,"OR","AND","NOT","EQUAL","NOTEQUAL","CONTAINS","NEG","GT","GTE","LT","LTE","IN","NUMBER","FLOAT","INTEGER","SIMPLETEXT","STRING","WS"],c.VOCABULARY=new s.VocabularyImpl(c._LITERAL_NAMES,c._SYMBOLIC_NAMES,[]),c._serializedATN='ì¤ìªºÖê¾ºä½“Ø‡îª‹ì‰Ä™\b\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t !\t!"\t"#\t#$\t$%\t%&\t&\'\t\'(\t()\t)*\t*+\t+,\t,-\t-.\t./\t/0\t01\t12\t23\t34\t45\t56\t67\t7\b\b\b\b\t\t\t\t\n\n\v\v\v\f\f\f\f\f\f\f\f\f\r\rÂ¥\nÂ¬\n\rÂ­Â³\n\fÂ¶\vÂ»\n\fÂ¾\vÃ„\n\fÃ‡\vÃŠ\nÃ\n\rÃŽÃ—\n  !!""##$$%%&&\'\'(())**++,,--..//00112233445566778\t\v\r\b\t\n\v\f\r!#%\')+-/13579;=?ACEGIKMOQSUWY[]_acegikm$2;002;C\\aac|/02;C\\aac|))^^$$^^\v\f""\n))11^^ddhhppttvv2;CHchCCccDDddEEeeFFffGGggHHhhIIiiJJjjKKkkLLllMMmmNNnnOOooPPppQQqqRRrrSSssTTttUUuuVVvvWWwwXXxxYYyyZZzz[[{{\\\\||Ä…\t\v\r!#%\')+-/oqs\tu\vw\ry|Â€Â„Â†Â‰Â’Â”Â–Â™!Â›#Âž%Â¡\'Â¦)Â«+Â¯-Ã‰/ÃŒ1Ã’3Ã˜5Ãž7Ã 9Ã£;Ã¥=Ã§?Ã©AÃ«CÃ­EÃ¯GÃ±IÃ³KÃµMÃ·OÃ¹QÃ»SÃ½UÃ¿WÄYÄƒ[Ä…]Ä‡_Ä‰aÄ‹cÄeÄgÄ‘iÄ“kÄ•mÄ—op*pqr+rst]t\buv.v\nwx_x\fyzU+z{[.{|}9}~S*~? Â€ÂS*ÂÂ‚U+Â‚Âƒ_0ÂƒÂ„Â…?Â…Â†Â‡#Â‡Âˆ?ÂˆÂ‰ÂŠ=ÂŠÂ‹U+Â‹ÂŒS*ÂŒÂ_0ÂÂŽ9ÂŽÂI%ÂÂS*ÂÂ‘]/Â‘Â’Â“m7Â“Â”Â•@Â•Â–Â—@Â—Â˜?Â˜Â™Âš>Âš Â›Âœ>ÂœÂ?Â"ÂžÂŸI%ÂŸÂ S*Â $Â¡Â¤)Â¢Â£0Â£Â¥)Â¤Â¢Â¤Â¥Â¥&Â¦Â§)Â§Â¨0Â¨Â©)Â©(ÂªÂ¬\tÂ«ÂªÂ¬Â­Â­Â«Â­Â®Â®*Â¯Â´\tÂ°Â³\tÂ±Â³7Â²Â°Â²Â±Â³Â¶Â´Â²Â´ÂµÂµ,Â¶Â´Â·Â¼)Â¸Â»1Â¹Â»\nÂºÂ¸ÂºÂ¹Â»Â¾Â¼ÂºÂ¼Â½Â½Â¿Â¾Â¼Â¿ÃŠ)Ã€Ã…$ÃÃ„1Ã‚Ã„\nÃƒÃÃƒÃ‚Ã„Ã‡Ã…ÃƒÃ…Ã†Ã†ÃˆÃ‡Ã…ÃˆÃŠ$Ã‰Â·Ã‰Ã€ÃŠ.Ã‹Ã\tÃŒÃ‹ÃÃŽÃŽÃŒÃŽÃÃÃÃÃ‘\bÃ‘0Ã’Ã–^Ã“Ã—\t\bÃ”Ã—3Ã•Ã—m7Ã–Ã“Ã–Ã”Ã–Ã•Ã—2Ã˜Ã™wÃ™Ãš5ÃšÃ›5Ã›Ãœ5ÃœÃ5Ã4ÃžÃŸ\t\tÃŸ6Ã Ã¡^Ã¡Ã¢0Ã¢8Ã£Ã¤\t\nÃ¤:Ã¥Ã¦\t\vÃ¦<Ã§Ã¨\t\fÃ¨>Ã©Ãª\t\rÃª@Ã«Ã¬\tÃ¬BÃ­Ã®\tÃ®DÃ¯Ã°\tÃ°FÃ±Ã²\tÃ²HÃ³Ã´\tÃ´JÃµÃ¶\tÃ¶LÃ·Ã¸\tÃ¸NÃ¹Ãº\tÃºPÃ»Ã¼\tÃ¼RÃ½Ã¾\tÃ¾TÃ¿Ä€\tÄ€VÄÄ‚\tÄ‚XÄƒÄ„\tÄ„ZÄ…Ä†\tÄ†\\Ä‡Äˆ\tÄˆ^Ä‰ÄŠ\tÄŠ`Ä‹ÄŒ\tÄŒbÄÄŽ\tÄŽdÄÄ\t ÄfÄ‘Ä’\t!Ä’hÄ“Ä”\t"Ä”jÄ•Ä–\t#Ä–lÄ—Ä˜#Ä˜nÂ¤Â­Â²Â´ÂºÂ¼ÃƒÃ…Ã‰ÃŽÃ–\b'},934:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(935),i=r(502),o=r(474);var a;!function(e){e.FACT="FACT",e.VALUE="VALUE",e.LOGICAL_OPERATOR="LOGICAL_OPERATOR",e.BOOLEAN_OPERATOR="BOOLEAN_OPERATOR",e.NUMERIC_COMPARE_OPERATOR="NUMERIC_COMPARE_OPERATOR",e.OPEN_ROUND_BRACKET="OPEN_ROUND_BRACKET",e.CLOSE_ROUND_BRACKET="CLOSE_ROUND_BRACKET",e.UNKNOWN="UNKNOWN",e.ERROR="ERROR"}(a=t.ElementType||(t.ElementType={}));const s=e=>({type:a.FACT,value:e}),l=e=>({type:a.VALUE,value:e}),c=e=>({type:a.LOGICAL_OPERATOR,value:e}),u=e=>({type:a.BOOLEAN_OPERATOR,value:e}),d=e=>({type:a.OPEN_ROUND_BRACKET,value:e}),p=e=>({type:a.CLOSE_ROUND_BRACKET,value:e}),m=e=>({type:a.NUMERIC_COMPARE_OPERATOR,value:e}),f=e=>({type:a.ERROR,value:e}),h=e=>({type:a.UNKNOWN,value:e}),y=e=>0===e.length?void 0:e[0],_=e=>0===e.length?void 0:e[e.length-1];class g extends n.AbstractParseTreeVisitor{defaultResult(){return[]}aggregateResult(e,t){const r=_(e.filter(e=>e.type!==a.ERROR)),n=y(t.filter(e=>e.type!==a.ERROR));return r&&n&&r.type===a.LOGICAL_OPERATOR&&n.type===a.LOGICAL_OPERATOR&&(n.type=a.ERROR),[...e,...t]}visitTerminal(e){return e.symbol.type===o.Token.EOF?[]:"("===e.text?[d("(")]:")"===e.text?[p(")")]:[h(e.text)]}visitErrorNode(e){return"<missing ')'>"===e.text?[p(")")]:[f(e.text)]}visitLogical_operator(e){return[c(e.text)]}visitBoolean_operator(e){return[u(e.text)]}visitNumeric_compare_operator(e){return[m(e.text)]}visitKey(e){return[s(e.SIMPLETEXT().text)]}visitValue(e){const t=e.NUMBER()||e.STRING();if(!t){if(e.parent instanceof i.ExprContext||(e.parent,i.ArrayContext),e.text)return e.childCount>1&&e.start.inputStream&&e.stop?[l(`"${e.start.inputStream.toString().slice(e.start.startIndex,e.stop.stopIndex+1)}"`)]:[l(`"${e.text}"`)];if(e.start.inputStream&&e.stop&&e.stop.text){let t=e.start.inputStream.toString().slice(e.stop.stopIndex+1,e.start.startIndex).trimLeft();return t.startsWith('"')&&!t.endsWith('"')?t+='"':t.startsWith("'")&&!t.endsWith("'")&&(t+="'"),[l(t)]}return this.visitChildren(e)}return[l(t.text)]}visitNumerical_value(e){return[l(e.text)]}}t.ConditionVisitor=g},939:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(184),s=r(79),l=r(940),c=r(37),u=r(944);t.ActionsStep=()=>{var e;const{validateForm:t,values:r}=s.useFormikContext(),n=null===(e=r.actions)||void 0===e?void 0:e.length;return i.useEffect(()=>{t()},[t,n]),i.createElement(i.Fragment,null,i.createElement(o.Title,{headingLevel:"h4",size:"xl"},c.Messages.wizards.policy.actions.title),i.createElement(s.FieldArray,{name:"actions"},e=>{return i.createElement(i.Fragment,null,i.createElement(u.AddTriggersDropdown,{isTypeEnabled:t=>{var r;return 0===((null===(r=e.form.values.actions)||void 0===r?void 0:r.filter(e=>e.type===t))||[]).length},onTypeSelected:t=>{e.push({type:t})}}),i.createElement(l.ActionsForm,{id:"actions",name:"actions",actions:e.form.values.actions,arrayHelpers:e}))}))},t.createActionsStep=e=>Object.assign({name:c.Messages.wizards.policy.actions.title,component:i.createElement(t.ActionsStep,null),validationSchema:a.PolicyFormActions},e)},940:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(66),o=r(18),a=n(r(2)),s=r(69),l=r(941),c=r(78),u=r(36),d=r(351),p=r(352),m=u.style({gridGap:p.Spacer.MD}),f=u.style({backgroundColor:"white",border:"1px var(--pf-global--BorderColor--200) solid",boxShadow:"none"}),h=u.style({marginLeft:10});t.ActionsForm=e=>{var t;return a.createElement(o.Form,{className:m},null===(t=e.actions)||void 0===t?void 0:t.map((t,r)=>{var n,u;return a.createElement(a.Fragment,{key:r},a.createElement(o.Card,{className:f},a.createElement(o.CardHead,null,a.createElement(o.CardActions,null,a.createElement(o.Button,{variant:"plain","aria-label":"Action",onClick:e.arrayHelpers.handleRemove(r)},a.createElement(s.TimesIcon,null))),a.createElement(o.CardHeader,null,a.createElement(a.Fragment,null,a.createElement(d.ActionIcon,{actionType:null===(n=t)||void 0===n?void 0:n.type}),a.createElement(o.Title,{className:h,size:"sm"},(null===(u=t)||void 0===u?void 0:u.type)?(e=>{switch(e){case i.ActionType.EMAIL:return"Send email";case i.ActionType.WEBHOOK:return"Send to hook";default:c.assertNever(e)}})(t.type):"")))),a.createElement(o.CardBody,{className:"pf-c-form"},a.createElement(l.ActionForm,{isReadOnly:e.isReadOnly,action:t,prefix:`actions.${r}`}))))}))}},941:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(66),a=r(942),s=r(943);t.ActionForm=e=>{var t,r;switch((null===(t=e.action)||void 0===t?void 0:t.type)||void 0){case o.ActionType.EMAIL:return i.createElement(a.ActionEmailForm,Object.assign({},e));case o.ActionType.WEBHOOK:return i.createElement(s.ActionWebhookForm,Object.assign({},e));case void 0:return null;default:throw new Error("Unexpected action type:["+(null===(r=e.action)||void 0===r?void 0:r.type)+"]")}}},942:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(37),s=r(503),l=r(2),c=r(233);t.ActionEmailForm=e=>{const t=l.useContext(c.AppContext);return i.createElement(i.Fragment,null,i.createElement(o.Text,null,"An email will be sent to all users on this account with access to Policies according to their email preferences."),!t.userSettings.isSubscribedForNotifications&&i.createElement(s.EmailOptIn,{content:a.Messages.wizards.policy.actions.emailOptIn}))}},943:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(2)),a=r(18),s=i(r(148)),l=r(37),c=e=>o.createElement(a.Text,null,e.head,o.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.link),e.tail),u=s.default.pages.hooks();t.ActionWebhookForm=e=>o.createElement(o.Fragment,null,o.createElement(c,Object.assign({},l.Messages.components.actionWebhookForm.paragraph1,{url:u})),o.createElement(c,Object.assign({},l.Messages.components.actionWebhookForm.paragraph2,{url:u})))},944:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(180),a=r(66),s=r(18),l=r(37),c=r(277),u=r(69),d=r(36).style({marginBottom:16});t.AddTriggersDropdown=e=>{const[t,r]=i.useState(!1),n=o.getInsights().chrome.isBeta(),p=Object.values(a.ActionType).filter(e=>n||e!==a.ActionType.WEBHOOK).map(t=>i.createElement(s.DropdownItem,{key:t,onClick:()=>(t=>{e.onTypeSelected(t),r(!1)})(t),isDisabled:!e.isTypeEnabled(t)},l.Messages.components.actionType[t]));return i.createElement(s.Dropdown,{isOpen:t,dropdownItems:p,isPlain:!0,className:d,toggle:i.createElement(c.Toggle,{isPlain:!0,onToggle:e=>r(e),id:"add-action-toggle"},i.createElement(s.Button,{component:"a",variant:s.ButtonVariant.link,isInline:!0}," Add trigger actions ",i.createElement(u.AngleDownIcon,null)," "))})}},945:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(79),a=r(160),s=r(473),l=r(18),c=r(184),u=r(2),d=r(178),p=r(36),m=r(37),f=r(221),h=r(439),y=r(443),_=r(441),g=p.style(Object.assign(Object.assign({backgroundColor:d.GlobalBackgroundColorLight300},_.padding(18,14)),{margin:5})),E=()=>{const e=u.useContext(a.WizardContext),{values:t}=o.useFormikContext();return i.createElement(i.Fragment,null,i.createElement(f.Form,null,i.createElement(l.Title,{size:"xl"},m.Messages.wizards.policy.review.title),i.createElement(s.Switch,{isDisabled:e.isLoading,type:"checkbox",id:"isEnabled",name:"isEnabled",labelOn:m.Messages.wizards.policy.review.policyIsEnabled,labelOff:m.Messages.wizards.policy.review.policyIsDisabled,label:m.Messages.wizards.policy.review.enableThisPolicy}),i.createElement(l.Title,{size:"md"},m.Messages.wizards.policy.review.policy.details),i.createElement(s.FormText,{label:m.Messages.wizards.policy.review.policy.name,name:"name",id:"name"}),i.createElement(s.FormText,{label:m.Messages.wizards.policy.review.policy.description,name:"description",id:"description"}),i.createElement("div",{className:g},i.createElement(h.Conditions,{conditions:t.conditions})),i.createElement("div",{className:g},i.createElement(y.Actions,{actions:t.actions||[]}))))};t.createReviewStep=e=>Object.assign({name:m.Messages.wizards.policy.review.title,component:i.createElement(E,null),validationSchema:c.PolicyFormSchema},e)},946:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(348),s=r(36),l=r(69),c=r(178),u=r(2),d=r(160),p=s.style({marginTop:"auto",marginBottom:14}),m=s.style({marginRight:5});t.PolicyWizardFooter=e=>{const t=u.useContext(d.WizardContext);return i.createElement(o.WizardFooter,null,i.createElement(o.WizardContextConsumer,null,r=>{const n=e.onNext&&(()=>{e.onNext&&e.onNext(t,r.onNext)});return i.createElement(i.Fragment,null,i.createElement(o.Button,{variant:o.ButtonVariant.primary,type:"submit",onClick:n||r.onNext,isDisabled:e.isLoading||!r.activeStep.enableNext},r.activeStep.nextButtonText||"Next"),!r.activeStep.hideBackButton&&i.createElement(o.Button,{variant:o.ButtonVariant.secondary,onClick:r.onBack,isDisabled:0===r.activeStep.id||e.isLoading},"Back"),!r.activeStep.hideCancelButton&&i.createElement(o.Button,{variant:o.ButtonVariant.link,onClick:r.onClose,isDisabled:e.isLoading},"Cancel"),e.isLoading&&i.createElement("div",{className:p},e.loadingText," Â ",i.createElement(a.Spinner,{size:"md"})),!e.isLoading&&e.error&&i.createElement(o.Split,{className:p},i.createElement(o.SplitItem,null,i.createElement(l.ExclamationCircleIcon,{className:m,color:c.GlobalDangerColor100})),i.createElement(o.SplitItem,null,e.error)))}))}},947:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(234),a=r(375),s=r(376),l=r(98),c=r(472);t.defaultPerPage=5,t.CreatePolicyStepContextProvider=e=>{const[r,n]=i.useState(!1),[u,d]=i.useState({}),p=o.usePolicyFilter(void 0,!1),m=a.useSort(),f=o.usePolicyPage(p.debouncedFilters,t.defaultPerPage,m.sortBy),h=s.useGetPoliciesQuery(f.page,!1),y=o.usePolicyRows(h.payload,h.loading,h.count,f.page),{query:_}=h;return l.useUpdateEffect(()=>{e.showCreateStep&&_()},[_,f.page,p.debouncedFilters,e.showCreateStep]),e.showCreateStep?i.createElement(c.CreatePolicyStepContext.Provider,{value:{copyPolicy:r,setCopyPolicy:n,copiedPolicy:u,setCopiedPolicy:d,policyFilter:p,policyPage:f,policySort:m,policyQuery:h,policyRows:y}},e.children):i.createElement(i.Fragment,null,e.children)}},948:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(504),a=r(505),s=r(211),l=(e,t)=>i.useMemo(()=>({[s.PolicyFilterColumn.NAME]:e,[s.PolicyFilterColumn.IS_ACTIVE]:t}),[e,t]),c={enabled:!1,disabled:!1},u=e=>a.useUrlStateString("name",e),d=e=>{const t=i.useCallback(e=>{if(void 0!==e&&e.enabled!==e.disabled)return e.enabled?"1":"0"},[]),r=i.useCallback(e=>{const t={enabled:!1,disabled:!1};return"1"===e?t.enabled=!0:"0"===e&&(t.disabled=!0),t},[]);return a.useUrlState("enabled",t,r,e)};t.usePolicyFilter=(e=250,t=!0)=>{const[r,n,a]=o.useDebouncedState("",e,t?u:void 0),[p,m,f]=o.useDebouncedState(c,e,t?d:void 0),h=i.useCallback(e=>{for(const t of e)switch(t.filter){case s.PolicyFilterColumn.NAME:n("");break;case s.PolicyFilterColumn.IS_ACTIVE:m(c)}},[n,m]);return{filters:l(r,p),setFilters:l(n,m),debouncedFilters:l(a,f),clearFilterHandler:h,isClear:i.useMemo(()=>""===a&&f===c,[a,f])}}},949:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(110),a=r(211);t.usePolicyPage=(e,t,r)=>{const[n,s]=i.useState(1),[l,c]=i.useState(t||o.Page.defaultPage().size);return i.useEffect(()=>{s(1)},[s,e]),{page:i.useMemo(()=>{const t=new o.Filter;return""!==e[a.PolicyFilterColumn.NAME].trim()&&t.and(a.PolicyFilterColumn.NAME,o.Operator.ILIKE,`%${e[a.PolicyFilterColumn.NAME].trim()}%`),e[a.PolicyFilterColumn.IS_ACTIVE].disabled!==e[a.PolicyFilterColumn.IS_ACTIVE].enabled&&t.and(a.PolicyFilterColumn.IS_ACTIVE,o.Operator.BOOLEAN_IS,e[a.PolicyFilterColumn.IS_ACTIVE].enabled?"true":"false"),o.Page.of(n,l,t,r)},[n,l,r,e]),changePage:i.useCallback((e,t)=>{s(t)},[s]),changeItemsPerPage:i.useCallback((e,t)=>{s(1),c(t)},[s,c])}}},950:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(353),a=r(78),s=r(98),l=r(951),c=r(952),u=new l.ImmutableContainerSet(void 0,l.ImmutableContainerSetMode.INCLUDE),d=new l.ImmutableContainerSet(void 0,l.ImmutableContainerSetMode.EXCLUDE);t.usePolicyRows=(e,t,r,n)=>{const[p,m]=i.useState([]),[f,h]=i.useState(u),y=s.usePrevious(e),{query:_,loading:g}=c.useGetPoliciesIdsQuery(),E=i.useCallback(()=>{h(u),m(e=>e.map(e=>Object.assign(Object.assign({},e),{isOpen:!1,isSelected:!1})))},[h]);i.useEffect(()=>{var r;t||!e?m([]):e!==y&&m(null===(r=e)||void 0===r?void 0:r.map(e=>Object.assign(Object.assign({},e),{isOpen:!1,isSelected:f.contains(e.id)})))},[e,t,m,y,f]);const v=i.useCallback((e,t,r)=>{m(n=>{const i=[...n];return i[t]=Object.assign(Object.assign({},e),{isOpen:r}),i})},[m]),b=i.useCallback(e=>{h(t=>t.remove(e))},[h]),O=i.useCallback((e,t,r)=>{h(t=>r?t.add(e.id):t.remove(e.id)),m(n=>{const i=[...n];return i[t]=Object.assign(Object.assign({},e),{isSelected:r}),i})},[h]),P=i.useCallback(e=>{e===o.SelectionCommand.NONE?(h(u),m(e=>e.map(e=>Object.assign(Object.assign({},e),{isSelected:!1})))):e===o.SelectionCommand.PAGE?(h(e=>e.addIterable(p.map(e=>e.id))),m(e=>e.map(e=>Object.assign(Object.assign({},e),{isSelected:!0})))):e===o.SelectionCommand.ALL?(h(d),m(e=>e.map(e=>Object.assign(Object.assign({},e),{isSelected:!0})))):a.assertNever(e)},[p]),S=i.useMemo(()=>f.size(r),[f,r]),C=i.useCallback(()=>f.mode===l.ImmutableContainerSetMode.INCLUDE?Promise.resolve(f.values()):_(n).then(e=>{if(e.error)throw e.errorObject;const t=new Set(e.payload);return f.values().forEach(e=>{t.delete(e)}),Array.from(t.values())}),[_,n,f]);return{rows:p,onCollapse:v,onSelect:O,onSelectionChanged:P,selectionCount:S,clearSelection:E,getSelected:C,loadingSelected:g,selected:f,removeSelection:b}}},951:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE"}(n=t.ImmutableContainerSetMode||(t.ImmutableContainerSetMode={}));class i{constructor(e,t){this.mode=t||n.INCLUDE,this.set=new Set(e||[])}static include(e){return new i(e,n.INCLUDE)}static exclude(e){return new i(e,n.EXCLUDE)}values(){return Array.from(this.set)}add(e){return this.update([e],this.mode===n.INCLUDE)}addIterable(e){return this.update(e,this.mode===n.INCLUDE)}remove(e){return this.update([e],this.mode===n.EXCLUDE)}removeIterable(e){return this.update(e,this.mode===n.EXCLUDE)}size(e){if(this.mode===n.INCLUDE)return this.set.size;if(void 0===e)throw new Error("Requesting size of an ImmutableContainerSet with Mode:"+this.mode);return e-this.set.size}contains(e){const t=this.set.has(e);return this.mode===n.INCLUDE?t:!t}update(e,t){const r=new i(this.set,this.mode);if(t)for(const t of e)r.set.add(t);else for(const t of e)r.set.delete(t);return r}}t.ImmutableContainerSet=i},952:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(56),i=r(97),o=r(235);t.actionCreator=e=>i.actionGetPoliciesIds(o.pageToQuery(e)),t.useGetPoliciesIdsQuery=()=>n.useParameterizedQuery(t.actionCreator)},958:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(98);t.usePromiseState=e=>{const[t,r]=i.useState(),n=o.usePromise();return i.useEffect(()=>{n(e).then(r)},[e,n]),t}},959:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(56),i=e=>{var t;const r=null===(t=e.headers)||void 0===t?void 0:t.get("TotalCount");return Object.assign({count:r?+r:r},e)};t.useNewPaginatedQuery=(e,t)=>((e,t)=>t(e))(n.useQuery(e,t),i)},960:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(56),i=r(147),o=r(97);t.useVerifyPolicyMutation=()=>n.useMutation(e=>o.actionPostPoliciesValidate({body:i.toServerPolicy(e)}))},961:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(147),i=r(56),o=r(97);t.savePolicyActionCreator=e=>e.id?o.actionPutPoliciesByPolicyId({policyId:e.id,body:n.toServerPolicy(e)}):o.actionPostPolicies({alsoStore:!0,body:n.toServerPolicy(e)}),t.useSavePolicyMutation=()=>i.useMutation(t.savePolicyActionCreator),t.useBulkSavePolicyMutation=()=>i.useBulkMutation(t.savePolicyActionCreator)},963:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(56),i=r(97);t.actionCreator=e=>i.actionPostPoliciesValidateName({body:e.name,id:e.id}),t.useValidatePolicyNameParametrizedQuery=()=>n.useParameterizedQuery(t.actionCreator)},964:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2),i=r(965);t.useFacts=()=>{const[e,t]=n.useState(),{payload:r}=i.useGetFactsQuery(!0);return n.useEffect(()=>{r&&t(r)},[r,t]),e}},965:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(56),i=r(97);t.actionCreator=i.actionGetFacts,t.useGetFactsQuery=e=>n.useQuery(t.actionCreator(),e)},966:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(69),i=r(178),o=r(37);t.policyTableError=(e,t,r)=>{if(t)switch(r){case 404:return{icon:n.PlusCircleIcon,title:o.Messages.tables.policy.emptyState.notFound.title,content:o.Messages.tables.policy.emptyState.notFound.content};case 401:return{icon:n.ExclamationCircleIcon,title:"Refresh your browser",content:"Your session expired while using the application",action:e.refreshPage,actionLabel:"Reload page"};case 500:return{icon:n.ExclamationCircleIcon,iconColor:i.GlobalDangerColor200,title:"Internal server error",content:"The server was unable to process the request, please try again.",action:e.tryAgain,actionLabel:"Try again"};default:return{icon:n.ExclamationCircleIcon,iconColor:i.GlobalDangerColor200,title:"Unable to connect",content:"There was an error retrieving data. Check your connection and try again.",action:e.tryAgain,actionLabel:"Try again"}}}},967:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(66))},968:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(2)),a=r(18),s=r(348),l=r(377),c=r(969);t.DeletePolicy=e=>{const{getPolicies:t,onClose:r,onDeleted:i,policy:u}=e,{mutate:d,loading:p}=c.useMassDeletePoliciesMutation(),m=p||e.loading,f=o.useCallback(()=>{r(!1)},[r]),h=o.useCallback(e=>{d(e).then(t=>{var n;let o=t.error?e.length:0;0===o&&(o=e.filter(e=>t.payload&&!t.payload.includes(e)).length,null===(n=t.payload)||void 0===n||n.forEach(e=>i(e))),o>0&&(1===o?l.addDangerNotification("Error deleting policy","There was an error when trying to delete a policy."):l.addDangerNotification("Error deleting policies",`There was an error when trying to delete ${o} policies.`)),o!==e.length&&r(!0)})},[d,r,i]),y=o.useCallback(()=>n(void 0,void 0,void 0,(function*(){if(u)h([u.id]);else try{const e=yield t();h(e)}catch(e){l.addDangerNotification("Error while deleting","An error occurred while trying to delete the selection, please try again."),console.error("Error while fetching selection",e)}})),[t,h,u]),_=o.useMemo(()=>[o.createElement(a.Button,{key:"confirm",variant:a.ButtonVariant.danger,onClick:y,isDisabled:m},m?o.createElement(s.Spinner,{size:"md"}):"Delete"),o.createElement(a.Button,{key:"cancel",variant:a.ButtonVariant.link,onClick:f,isDisabled:m},"Cancel")],[m,f,y]);let g;return g=e.policy?o.createElement(o.Fragment,null,"Do you want to delete the policy ",o.createElement("b",null,e.policy.name),"?"):1===e.count?o.createElement(o.Fragment,null,"Do you want to delete the selected policy?"):o.createElement(o.Fragment,null,"Do you want to delete the ",o.createElement("b",null,e.count)," selected policies?"),o.createElement(a.Modal,{title:`Delete ${1===e.count?"policy":"policies"}`,isOpen:!0,onClose:f,actions:_,isFooterLeftAligned:!0,isSmall:!0},g)}},969:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(56),i=r(97);t.actionCreator=e=>i.actionDeletePoliciesIds({body:e}),t.useMassDeletePoliciesMutation=()=>n.useMutation(t.actionCreator)},97:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(235),i=r(148);t.actionGet=()=>{const e=i.withBaseUrl("/");return n.actionBuilder("GET",e).queryParams({}).build()},t.actionGetFacts=()=>{const e=i.withBaseUrl("/facts");return n.actionBuilder("GET",e).queryParams({}).build()},t.actionGetPolicies=e=>{const t=i.withBaseUrl("/policies"),r={};return r["filter:op[description]"]=e.filterOpDescription,r["filter:op[name]"]=e.filterOpName,r["filter[description]"]=e.filterDescription,r["filter[is_enabled]"]=e.filterIsEnabled,r["filter[name]"]=e.filterName,r.limit=e.limit,r.offset=e.offset,r.sortColumn=e.sortColumn,r.sortDirection=e.sortDirection,n.actionBuilder("GET",t).queryParams(r).build()},t.actionPostPolicies=e=>{const t=i.withBaseUrl("/policies"),r={};return r.alsoStore=e.alsoStore,n.actionBuilder("POST",t).queryParams(r).data(e.body).build()},t.actionGetPoliciesIds=e=>{const t=i.withBaseUrl("/policies/ids"),r={};return r["filter:op[description]"]=e.filterOpDescription,r["filter:op[name]"]=e.filterOpName,r["filter[description]"]=e.filterDescription,r["filter[is_enabled]"]=e.filterIsEnabled,r["filter[name]"]=e.filterName,n.actionBuilder("GET",t).queryParams(r).build()},t.actionDeletePoliciesIds=e=>{const t=i.withBaseUrl("/policies/ids");return n.actionBuilder("DELETE",t).queryParams({}).data(e.body).build()},t.actionPostPoliciesIdsEnabled=e=>{const t=i.withBaseUrl("/policies/ids/enabled"),r={};return r.enabled=e.enabled,n.actionBuilder("POST",t).queryParams(r).data(e.body).build()},t.actionPostPoliciesValidate=e=>{const t=i.withBaseUrl("/policies/validate");return n.actionBuilder("POST",t).queryParams({}).data(e.body).build()},t.actionPostPoliciesValidateName=e=>{const t=i.withBaseUrl("/policies/validate-name"),r={};return r.id=e.id,n.actionBuilder("POST",t).queryParams(r).data(e.body).build()},t.actionGetPoliciesById=e=>{const t=i.withBaseUrl("/policies/{id}").replace("{id}",e.id);return n.actionBuilder("GET",t).queryParams({}).build()},t.actionDeletePoliciesById=e=>{const t=i.withBaseUrl("/policies/{id}").replace("{id}",e.id);return n.actionBuilder("DELETE",t).queryParams({}).build()},t.actionPostPoliciesByIdEnabled=e=>{const t=i.withBaseUrl("/policies/{id}/enabled").replace("{id}",e.id),r={};return r.enabled=e.enabled,n.actionBuilder("POST",t).queryParams(r).build()},t.actionGetPoliciesByIdHistoryTrigger=e=>{const t=i.withBaseUrl("/policies/{id}/history/trigger").replace("{id}",e.id);return n.actionBuilder("GET",t).queryParams({}).build()},t.actionPutPoliciesByPolicyId=e=>{const t=i.withBaseUrl("/policies/{policyId}").replace("{policyId}",e.policyId),r={};return r.dry=e.dry,n.actionBuilder("PUT",t).queryParams(r).data(e.body).build()}},970:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(69),a=r(37),s=r(209),l=r(179),c=()=>i.createElement("br",null);t.ListPageEmptyState=e=>i.createElement(l.EmptyStateSection,{icon:o.CubesIcon,title:a.Messages.pages.listPage.emptyState.title,content:s.join(a.Messages.pages.listPage.emptyState.text,c),action:e.createPolicy,actionLabel:"Create policy"})},971:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(78),i=r(972),o=r(973),a=r(151);t.policyExporterFactory=e=>{switch(e){case a.ExporterType.CSV:return new i.PolicyExporterCsv;case a.ExporterType.JSON:return new o.PolicyExporterJson}n.assertNever(e)}},972:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(147),i=r(506);class o extends i.ExporterCsv{serialize(e){return Object.assign(Object.assign({},e),{actions:n.toServerAction(e.actions)})}headers(){return[["id","id"],["name","name"],["description","description"],["isEnabled","isEnabled"],["conditions","conditions"],["actions","actions"],["lastTriggered","lastTriggered"],["mtime","mtime"],["ctime","ctime"]]}}t.PolicyExporterCsv=o},973:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(507);class i extends n.ExporterJson{}t.PolicyExporterJson=i},974:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2));t.usePolicyToDelete=()=>{const[e,t]=i.useState(),[r,n]=i.useState(0),o=i.useCallback(()=>{t(void 0),n(0)},[n,t]);return{open:i.useCallback(e=>{"number"==typeof e?(t(void 0),n(e)):(t(e),n(1))},[]),close:o,count:r,policy:e,isOpen:r>0}}},975:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(376),i=r(2);t.useGetListPagePolicies=e=>{const t=n.useGetPoliciesQuery(e,!1),r=n.useHasPoliciesQuery(),[o,a]=i.useState(),s=i.useMemo(()=>!e.hasFilter()&&1===e.index,[e]),l=i.useCallback(()=>{const e=t.query,n=r.query;return e().then(e=>{if(404===e.status){if(!s)return a(void 0),n().then(t=>(404===t.status?a(!1):200===t.status?a(!0):a(void 0),e));a(!1)}else 200===e.status?a(!0):a(void 0);return e})},[t.query,r.query,s]),c=i.useCallback(()=>{const e=t.abort,n=r.abort;e(),n()},[t.abort,r.abort]),u=i.useCallback(()=>{const e=t.reset,n=r.reset;e(),n()},[t.reset,r.reset]);return Object.assign(Object.assign({},t),{query:l,abort:c,reset:u,status:t.status,loading:r.loading||t.loading,errorObject:r.errorObject||t.errorObject,error:r.error||t.error,hasPolicies:o})}},976:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(2)),a=r(84),s=r(18),l=r(112),c=i(r(428)),u=r(174),d=r(509),p=r(978),m=r(437),f=r(510),h=r(36),y=r(979),_=r(981),g=r(375),E=r(983),v=r(444),b=r(2),O=r(233),P=r(984),S=r(985),C=r(986),T=r(987),x=r(512),w=r(988),M=r(989),A=r(378),N=r(151),I=r(237),j=r(990),k=h.style({paddingBottom:8,paddingTop:16});t.PolicyDetail=()=>{var e;const{policyId:t}=l.useParams(),r=b.useContext(O.AppContext),{canWriteAll:n,canReadAll:i}=r.rbac,h=p.useGetPolicyQuery(t,void 0!==t),R=y.useGetPolicyTriggersParametrizedQuery(),L=A.useTriggerFilter(),F=g.useSort(),{page:D,onPaginationChanged:B}=M.useTriggerPage(F.sortBy,L.debouncedFilters),{count:U,pagedTriggers:G,processedTriggers:V}=w.usePagedTriggers(R.payload,D),[z,H]=o.useState(!1),[W,Q]=o.useState();o.useEffect(()=>{const e=R.query;t&&e(t)},[t,R.query]),o.useEffect(()=>{!h.error&&h.payload&&Q(h.payload)},[h.payload,h.error]);const q=o.useCallback(e=>{const t=h.query;H(!1),e&&(Q(void 0),t())},[H,h.query]),$=o.useCallback(()=>{H(!0)},[H]),K=o.useCallback(e=>{Q(t=>t?Object.assign(Object.assign({},t),{isEnabled:e}):void 0),h.query()},[h,Q]),X=o.useCallback(e=>{const r=j.triggerExporterFactory(N.exporterTypeFromString(e));V.length>0&&c.default(r.export(V),`policy-${t}-triggers-${I.format(new Date,"y-dd-MM")}.${r.type}`)},[V,t]),Y=void 0===W&&h.loading;if(!i)return o.createElement(x.NoPermissionsPage,null);if(Y)return o.createElement(P.PolicyDetailSkeleton,null);if(void 0===W){if(404===h.status)return o.createElement(S.PolicyDetailEmptyState,{policyId:t||""});const r=(null===(e=h.payload)||void 0===e?void 0:e.msg)||`code: ${h.status}`;return o.createElement(C.PolicyDetailErrorState,{action:()=>{R.query(t),h.query()},policyId:t,error:r})}return o.createElement(o.Fragment,null,o.createElement(a.PageHeader,null,o.createElement(s.Stack,null,o.createElement(s.StackItem,null,o.createElement(s.Breadcrumb,null,o.createElement(d.BreadcrumbLinkItem,{to:u.linkTo.listPage()},"Policies"),o.createElement(s.BreadcrumbItem,{to:"#",isActive:!0},W.name))),o.createElement(s.StackItem,null,o.createElement(s.Split,null,o.createElement(s.SplitItem,{isFilled:!0},o.createElement(a.PageHeaderTitle,{title:W.name})),o.createElement(s.SplitItem,null,o.createElement(s.Button,{variant:s.ButtonVariant.secondary,onClick:$,disabled:!n},"Edit policy")))))),o.createElement(a.Main,null,o.createElement(f.Section,{style:{paddingBottom:"4px"},className:"pf-l-page__main-section pf-c-page__main-section pf-m-light"},o.createElement(T.PolicyDetailIsEnabled,{policyId:W.id,isEnabled:W.isEnabled,statusChanged:K}),o.createElement(m.ExpandedContent,{actions:W.actions,description:W.description,created:W.ctime,updated:W.mtime,conditions:W.conditions})),o.createElement("div",{className:k},o.createElement(s.Title,{size:"lg"},"Recent trigger history")),o.createElement(f.Section,null,o.createElement(E.TriggerTableToolbar,{count:U,page:D,onPaginationChanged:B,pageCount:G.length,filters:L.filters,setFilters:L.setFilters,clearFilters:L.clearFilter,onExport:X}),o.createElement(_.TriggerTable,{rows:G,onSort:F.onSort,sortBy:F.sortBy,loading:R.loading}))),z&&o.createElement(v.CreatePolicyWizard,{isOpen:!0,close:q,initialValue:W,showCreateStep:!1,policiesExist:!1,isEditing:!0}))}},977:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(2)),a=r(112);t.LinkAdapter=e=>{const{href:t}=e,r=n(e,["href"]);return o.createElement(a.Link,Object.assign({to:t},r),e.children)}},978:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(56),i=r(97),o=r(236),a=r(147);t.actionCreator=e=>i.actionGetPoliciesById({id:e}),t.useGetPolicyQuery=(e,r=!0)=>o.useTransformQueryResponse(n.useQuery(t.actionCreator(e),r),a.toPolicy)},979:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(97),i=r(56),o=r(236),a=r(980),s=e=>n.actionGetPoliciesByIdHistoryTrigger({id:e});t.useGetPolicyTriggersParametrizedQuery=()=>o.useTransformQueryResponse(i.useParameterizedQuery(s),a.toTriggers)},980:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(208));t.toTrigger=e=>({id:e.id||"",hostName:e.hostName||"",created:e.ctime?i.default(e.ctime/1e3):new Date(Date.now())}),t.toTriggers=e=>e.map(t.toTrigger)},981:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(2)),a=r(381),s=r(84),l=r(37),c=i(r(195)),u=r(110),d=r(982),p=[{title:l.Messages.tables.trigger.columns.date,transforms:[a.sortable]},{title:l.Messages.tables.trigger.columns.system,transforms:[a.sortable]}];t.TriggerTable=e=>{const t=o.useMemo(()=>{const t=e.rows;return t?t.map((e,t)=>({id:`${e.id}-${t}`,key:`${e.id}-${t}`,cells:[o.createElement(o.Fragment,null,c.default(d.toUtc(e.created),"dd MMM yyyy HH:mm:ss")," UTC"),o.createElement(o.Fragment,null,e.hostName)]})):[]},[e.rows]),r=o.useCallback((t,r,n)=>{const i=e.onSort;if(i){i(r,0===r?"date":"system",n===a.SortByDirection.asc?u.Direction.ASCENDING:u.Direction.DESCENDING)}},[e.onSort]),n=o.useMemo(()=>{if(e.sortBy)return{index:"date"===e.sortBy.column?0:1,direction:e.sortBy.direction===u.Direction.ASCENDING?"asc":"desc"}},[e.sortBy]);return e.loading?o.createElement(s.SkeletonTable,{rowSize:10,columns:p,sortBy:n}):o.createElement(a.Table,{"aria-label":l.Messages.tables.trigger.title,rows:t,cells:p,onSort:r,sortBy:n},o.createElement(a.TableHeader,null),o.createElement(a.TableBody,null))}},982:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toUtc=e=>new Date(e.getTime()+60*e.getTimezoneOffset()*1e3)},983:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(84),s=r(378),l=r(151),c={[s.TriggerFilterColumn.SYSTEM]:"System"},u=(e,t)=>{const r=e[t].trim();if(""!==r)return{category:c[t],chips:[{name:r,isRead:!0}]}};t.TriggerTableToolbar=e=>{const t=i.useMemo(()=>({itemCount:e.count||0,page:e.page.index,perPage:e.page.size,perPageOptions:[],onSetPage:e.onPaginationChanged,onFirstClick:e.onPaginationChanged,onPreviousClick:e.onPaginationChanged,onNextClick:e.onPaginationChanged,onLastClick:e.onPaginationChanged,onPageInput:e.onPaginationChanged,isCompact:!0,variant:o.PaginationVariant.right}),[e.onPaginationChanged,e.page,e.count]),r=i.useMemo(()=>{const t=e.filters,r=e.setFilters;return{items:[{label:"System",type:"text",filterValues:{id:"filter-system",value:t[s.TriggerFilterColumn.SYSTEM],placeholder:"Filter by system",onChange:(e,t)=>r[s.TriggerFilterColumn.SYSTEM](t)}}]}},[e.filters,e.setFilters]),n=i.useCallback((t,r)=>{const n=e.clearFilters,i=[];for(const e of r){if(e.category!==c[s.TriggerFilterColumn.SYSTEM])throw new Error(`Unknown filter found: ${e.category}`);i.push(s.TriggerFilterColumn.SYSTEM)}n(i)},[e.clearFilters]),d=i.useMemo(()=>{const t=e.filters,r=[];for(const e of Object.values(s.TriggerFilterColumn)){const n=u(t,e);n&&r.push(n)}return{filters:r,onDelete:n}},[e.filters,n]),p=i.useMemo(()=>{const t=e.onExport;return{extraItems:[],onSelect:(e,r)=>{t(l.exporterTypeFromString(r))}}},[e.onExport]);return i.createElement(i.Fragment,null,i.createElement(a.PrimaryToolbar,{pagination:t,filterConfig:r,activeFiltersConfig:d,exportConfig:p}))}},984:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(84),a=r(18),s=r(510),l=r(509),c=r(174);t.PolicyDetailSkeleton=()=>i.createElement(i.Fragment,null,i.createElement(o.PageHeader,null,i.createElement(a.Stack,null,i.createElement(a.StackItem,null,i.createElement(a.Breadcrumb,null,i.createElement(l.BreadcrumbLinkItem,{to:c.linkTo.listPage()},"Policies"),i.createElement(o.Skeleton,{size:"sm"}))),i.createElement(a.StackItem,null,i.createElement(a.Split,null,i.createElement(a.SplitItem,{isFilled:!0},i.createElement(o.PageHeaderTitle,{title:i.createElement(o.Skeleton,{size:"sm"})})),i.createElement(a.SplitItem,null,i.createElement(a.Button,{variant:a.ButtonVariant.secondary,isDisabled:!0},"Edit policy")))))),i.createElement(o.Main,null,i.createElement(s.Section,null,i.createElement(a.Bullseye,null,i.createElement(o.Spinner,{centered:!0})))))},985:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(112),a=r(69),s=r(37),l=r(179),c=r(511),u=r(174);t.PolicyDetailEmptyState=e=>{const t=o.useHistory(),r=i.useCallback(()=>{t.push(u.linkTo.listPage())},[t]);return i.createElement(l.EmptyStateSection,{icon:a.UnknownIcon,title:s.Messages.pages.policyDetail.emptyState.title,content:c.format(s.Messages.pages.policyDetail.emptyState.text,e.policyId),actionLabel:s.Messages.pages.policyDetail.emptyState.backText,action:r})}},986:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(69),a=r(37),s=r(179),l=r(511);t.PolicyDetailErrorState=e=>i.createElement(s.EmptyStateSection,{icon:o.ExclamationCircleIcon,title:a.Messages.pages.policyDetail.errorState.title,content:l.format(a.Messages.pages.policyDetail.errorState.text,e.policyId,e.error),action:e.action,actionLabel:a.Messages.pages.policyDetail.errorState.actionText})},987:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(18),a=r(36),s=r(84),l=r(210),c=r(352),u=r(508),d=a.style({marginLeft:c.Spacer.MD}),p=a.style({minHeight:60});t.PolicyDetailIsEnabled=e=>{const t=u.useMassChangePolicyEnabledMutation(),r=i.useCallback(r=>{const n=t.mutate,i=e.statusChanged;n({policyIds:[e.policyId],shouldBeEnabled:r}).then(()=>i(r))},[e.policyId,t.mutate,e.statusChanged]),n=i.useCallback(()=>{r(!0)},[r]),a=i.useCallback(()=>{r(!1)},[r]);if(t.loading)return i.createElement(o.Stack,{"data-testid":"loading",className:p},i.createElement(o.StackItem,null,i.createElement(s.Skeleton,{size:"sm"})));const{icon:c,text:m,switchLink:f}=e.isEnabled?{icon:i.createElement(l.EnabledPolicyIcon,null),text:"Enabled",switchLink:i.createElement(o.Button,{onClick:a,variant:o.ButtonVariant.link}," Disable policy ")}:{icon:i.createElement(l.DisabledPolicyIcon,null),text:"Disabled",switchLink:i.createElement(o.Button,{onClick:n,variant:o.ButtonVariant.link}," Enable policy ")};return i.createElement(o.Stack,null,i.createElement(o.StackItem,null,c,i.createElement("span",{className:d},m)),i.createElement(o.StackItem,null,f))}},988:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(110),a=r(2);t.usePagedTriggers=(e,t)=>{const[r,n]=a.useState(0),[s,l]=a.useState([]),[c,u]=a.useState([]),d=i.useCallback(e=>{let r=e;const i=t.sort;i&&(r=[...e].sort((e,t)=>{let r=0;return"date"===i.column?r=e.created<t.created?-1:e.created>t.created?1:0:"system"===i.column&&(r=e.hostName<t.hostName?-1:e.hostName>t.hostName?1:0),i.direction===o.Direction.DESCENDING&&(r*=-1),r}));const a=t.filter;if(a)for(const e of a.elements){if("system"!==e.column)throw new Error(`Invalid filter ${e.column}`);r=r.filter(t=>t.hostName.toLowerCase().includes(e.value))}n(r.length),u(r),r=r.slice(t.start(),t.end()),l(r)},[l,t,u]);return i.useEffect(()=>{d(e||[])},[d,e,t]),{count:r,pagedTriggers:s,processedTriggers:c}}},989:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(2),a=r(110),s=r(378);t.useTriggerPage=(e,t)=>{const[r,n]=i.useState(()=>a.Page.of(1,10)),l=i.useMemo(()=>{const e=new a.Filter,r=t[s.TriggerFilterColumn.SYSTEM];return r&&""!==r.trim()&&e.and("system",a.Operator.ILIKE,r.trim().toLowerCase()),e},[t]);return o.useEffect(()=>{n(t=>a.Page.of(t.index,t.size,t.filter,e))},[e]),o.useEffect(()=>{n(e=>a.Page.of(1,e.size,l,e.sort))},[l]),{page:r,onPaginationChanged:i.useCallback((e,t)=>{n(e=>e.withPage(t))},[n])}}},990:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(78),i=r(991),o=r(992),a=r(151);t.triggerExporterFactory=e=>{switch(e){case a.ExporterType.CSV:return new i.TriggerExporterCsv;case a.ExporterType.JSON:return new o.TriggerExporterJson}n.assertNever(e)}},991:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(506);class i extends n.ExporterCsv{serialize(e){return Object.assign({},e)}headers(){return[["id","id"],["hostName","system"],["created","ctime"]]}}t.TriggerExporterCsv=i},992:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(507);class i extends n.ExporterJson{}t.TriggerExporterJson=i},993:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2)),o=r(84),a=r(18);t.AppSkeleton=()=>i.createElement(i.Fragment,null,i.createElement(o.PageHeader,null,i.createElement("div",{className:"pf-c-content"},i.createElement(o.PageHeaderTitle,{title:i.createElement(o.Skeleton,{size:"sm"})}))),i.createElement(o.Main,null,i.createElement(o.Section,null,i.createElement(a.Bullseye,null,i.createElement(o.Spinner,{centered:!0})))))},996:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(2),o=r(112),a=r(180),s=n(r(148)),l=r(997),c=r(1023);t.useApp=()=>{const e=o.useHistory(),[t,r]=i.useState(void 0),n=c.useUserSettings(9e5);return i.useEffect(()=>(a.waitForInsights().then(e=>{e.chrome.init(),e.chrome.identifyApp(s.default.appId)}),()=>{a.getInsights().chrome.on("APP_NAVIGATION",t=>e.push(`/${t.navId}`))}),[e]),i.useEffect(()=>{a.waitForInsights().then(e=>{e.chrome.auth.getUser().then(()=>{l.fetchRBAC().then(r)})})},[]),{rbac:t,userSettings:n}}},997:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(998),o=n(r(513)),a=n(r(148));class s{constructor(e){this.accessPagination=e}canRead(e){return this.findPermission(e,"read")}canWrite(e){return this.findPermission(e,"write")}canReadAll(){return this.canRead("*")}canWriteAll(){return this.canWrite("*")}findPermission(e,t){var r;if(!(null===(r=this.accessPagination)||void 0===r?void 0:r.data)||0===this.accessPagination.data.length)return!1;for(const r of this.accessPagination.data){const n=r.permission.split(":");if(n[1]===e&&(n[2]===t||"*"===n[2]))return!0}return!1}}t.RawRbac=s,t.fetchRBAC=()=>{const e=o.default.create();return new i.AccessApi(void 0,"/api/rbac/v1",e).getPrincipalAccess(a.default.appId).then(e=>new s(e.data)).then(e=>({canReadAll:e.canReadAll(),canWriteAll:e.canWriteAll()}))}}});
//# sourceMappingURL=App.js.map