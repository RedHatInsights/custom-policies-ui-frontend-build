!function(e){function t(t){for(var r,i,o=t[0],a=t[1],l=t[2],c=0,u=[];c<o.length;c++)i=o[c],Object.prototype.hasOwnProperty.call(M,i)&&M[i]&&u.push(M[i][0]),M[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(D&&D(t);u.length;)u.shift()();return F.push.apply(F,l||[]),n()}function n(){for(var e,t=0;t<F.length;t++){for(var n=F[t],r=!0,i=1;i<n.length;i++){var o=n[i];0!==M[o]&&(r=!1)}r&&(F.splice(t--,1),e=I(I.s=n[0]))}return e}var r=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!E[e]||!O[e])return;for(var n in O[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(v[n]=t[n]);0==--b&&0===g&&w()}(e,t),r&&r(e,t)};var i,o=!0,a="2e9f5c4deed966c35052",l=1e4,c={},u=[],s=[];function d(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:i!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:C,apply:A,status:function(e){if(!e)return p;f.push(e)},addStatusHandler:function(e){f.push(e)},removeStatusHandler:function(e){var t=f.indexOf(e);t>=0&&f.splice(t,1)},data:c[e]};return i=void 0,t}var f=[],p="idle";function m(e){p=e;for(var t=0;t<f.length;t++)f[t].call(null,e)}var h,v,y,b=0,g=0,_={},O={},E={};function P(e){return+e+""===e?+e:e}function C(e){if("idle"!==p)throw new Error("check() is only allowed in idle status");return o=e,m("check"),(t=l,t=t||1e4,new Promise((function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,i=I.p+""+a+".hot-update.json";r.open("GET",i,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}}))).then((function(e){if(!e)return m("idle"),null;O={},_={},E=e.c,y=e.h,m("prepare");var t=new Promise((function(e,t){h={resolve:e,reject:t}}));for(var n in v={},M)S(n);return"prepare"===p&&0===g&&0===b&&w(),t}));var t}function S(e){E[e]?(O[e]=!0,b++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=I.p+""+e+"."+a+".hot-update.js",document.head.appendChild(t)}(e)):_[e]=!0}function w(){m("ready");var e=h;if(h=null,e)if(o)Promise.resolve().then((function(){return A(o)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var n in v)Object.prototype.hasOwnProperty.call(v,n)&&t.push(P(n));e.resolve(t)}}function A(t){if("ready"!==p)throw new Error("apply() is only allowed in ready status");var n,r,i,o,l;function s(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var i=r.pop(),a=i.id,l=i.chain;if((o=j[a])&&!o.hot._selfAccepted){if(o.hot._selfDeclined)return{type:"self-declined",chain:l,moduleId:a};if(o.hot._main)return{type:"unaccepted",chain:l,moduleId:a};for(var c=0;c<o.parents.length;c++){var u=o.parents[c],s=j[u];if(s){if(s.hot._declinedDependencies[a])return{type:"declined",chain:l.concat([u]),moduleId:a,parentId:u};-1===t.indexOf(u)&&(s.hot._acceptedDependencies[a]?(n[u]||(n[u]=[]),d(n[u],[a])):(delete n[u],t.push(u),r.push({chain:l.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var f={},h=[],b={},g=function(){console.warn("[HMR] unexpected require("+O.moduleId+") to disposed module")};for(var _ in v)if(Object.prototype.hasOwnProperty.call(v,_)){var O;l=P(_);var C=!1,S=!1,w=!1,A="";switch((O=v[_]?s(l):{type:"disposed",moduleId:_}).chain&&(A="\nUpdate propagation: "+O.chain.join(" -> ")),O.type){case"self-declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(C=new Error("Aborted because of self decline: "+O.moduleId+A));break;case"declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(C=new Error("Aborted because of declined dependency: "+O.moduleId+" in "+O.parentId+A));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(O),t.ignoreUnaccepted||(C=new Error("Aborted because "+l+" is not accepted"+A));break;case"accepted":t.onAccepted&&t.onAccepted(O),S=!0;break;case"disposed":t.onDisposed&&t.onDisposed(O),w=!0;break;default:throw new Error("Unexception type "+O.type)}if(C)return m("abort"),Promise.reject(C);if(S)for(l in b[l]=v[l],d(h,O.outdatedModules),O.outdatedDependencies)Object.prototype.hasOwnProperty.call(O.outdatedDependencies,l)&&(f[l]||(f[l]=[]),d(f[l],O.outdatedDependencies[l]));w&&(d(h,[O.moduleId]),b[l]=g)}var F,k=[];for(r=0;r<h.length;r++)l=h[r],j[l]&&j[l].hot._selfAccepted&&b[l]!==g&&k.push({module:l,errorHandler:j[l].hot._selfAccepted});m("dispose"),Object.keys(E).forEach((function(e){!1===E[e]&&function(e){delete M[e]}(e)}));for(var T,x,D=h.slice();D.length>0;)if(l=D.pop(),o=j[l]){var N={},R=o.hot._disposeHandlers;for(i=0;i<R.length;i++)(n=R[i])(N);for(c[l]=N,o.hot.active=!1,delete j[l],delete f[l],i=0;i<o.children.length;i++){var V=j[o.children[i]];V&&((F=V.parents.indexOf(l))>=0&&V.parents.splice(F,1))}}for(l in f)if(Object.prototype.hasOwnProperty.call(f,l)&&(o=j[l]))for(x=f[l],i=0;i<x.length;i++)T=x[i],(F=o.children.indexOf(T))>=0&&o.children.splice(F,1);for(l in m("apply"),a=y,b)Object.prototype.hasOwnProperty.call(b,l)&&(e[l]=b[l]);var B=null;for(l in f)if(Object.prototype.hasOwnProperty.call(f,l)&&(o=j[l])){x=f[l];var z=[];for(r=0;r<x.length;r++)if(T=x[r],n=o.hot._acceptedDependencies[T]){if(-1!==z.indexOf(n))continue;z.push(n)}for(r=0;r<z.length;r++){n=z[r];try{n(x)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:l,dependencyId:x[r],error:e}),t.ignoreErrored||B||(B=e)}}}for(r=0;r<k.length;r++){var L=k[r];l=L.module,u=[l];try{I(l)}catch(e){if("function"==typeof L.errorHandler)try{L.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:n,originalError:e}),t.ignoreErrored||B||(B=n),B||(B=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:l,error:e}),t.ignoreErrored||B||(B=e)}}return B?(m("fail"),Promise.reject(B)):(m("idle"),new Promise((function(e){e(h)})))}var j={},M={0:0},F=[];function I(t){if(j[t])return j[t].exports;var n=j[t]={i:t,l:!1,exports:{},hot:d(t),parents:(s=u,u=[],s),children:[]};return e[t].call(n.exports,n,n.exports,function(e){var t=j[e];if(!t)return I;var n=function(n){return t.hot.active?(j[n]?-1===j[n].parents.indexOf(e)&&j[n].parents.push(e):(u=[e],i=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),u=[]),I(n)},r=function(e){return{configurable:!0,enumerable:!0,get:function(){return I[e]},set:function(t){I[e]=t}}};for(var o in I)Object.prototype.hasOwnProperty.call(I,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(n,o,r(o));return n.e=function(e){return"ready"===p&&m("prepare"),g++,I.e(e).then(t,(function(e){throw t(),e}));function t(){g--,"prepare"===p&&(_[e]||S(e),0===g&&0===b&&w())}},n.t=function(e,t){return 1&t&&(e=n(e)),I.t(e,-2&t)},n}(t)),n.l=!0,n.exports}I.m=e,I.c=j,I.d=function(e,t,n){I.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},I.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},I.t=function(e,t){if(1&t&&(e=I(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(I.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)I.d(n,r,function(t){return e[t]}.bind(null,r));return n},I.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return I.d(t,"a",t),t},I.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},I.p="/beta/apps/custom-policies/",I.h=function(){return a};var k=window.webpackJsonp=window.webpackJsonp||[],T=k.push.bind(k);k.push=t,k=k.slice();for(var x=0;x<k.length;x++)t(k[x]);var D=T;F.push([385,1]),n()}({111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(755);t.Checkbox=r.Checkbox;var i=n(756);t.FormSelect=i.FormSelect;var o=n(757);t.Switch=o.Switch;var a=n(758);t.FormTextInput=a.FormTextInput},112:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(130),o=r(n(87)),a=n(759),l=n(87);t.PolicyFormDetails=o.object().shape({description:o.string().notRequired().trim(),isEnabled:o.boolean().notRequired(),name:o.string().required("Write a name for this Custom policies").trim()}),t.PolicyFormActions=o.object().shape({actions:o.array(o.lazy((function(e){switch(e.type){case i.ActionType.EMAIL:return a.ActionEmailSchema;case i.ActionType.WEBHOOK:return a.ActionWebhookSchema;case void 0:return a.ActionSchema}throw new Error("Unknown action type. Implement the new type in the schema selector")}))).test("one-email","Only one Email action type is allowed",(function(e){var t=e&&e.reduce((function(e,t,n){return t.type===i.ActionType.EMAIL?e.concat([n]):e}),[]);if(!t||t.length<=1)return!0;var n=new l.ValidationError("","","actions","");return n.inner=t.map((function(e){return new l.ValidationError("Only one Email action is allowed","email","actions."+e+".type")})),n}))}),t.PolicyFormConditions=o.object().shape({conditions:o.string().required("Write a condition").trim()}),t.PolicyFormSchema=o.object().concat(t.PolicyFormDetails).concat(t.PolicyFormActions).concat(t.PolicyFormConditions)},127:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=10,i=function(){function e(e,t,n,i){this.index=e,this.size=t||r,this.filter=n,this.sort=i}return e.of=function(t,n,r,i){return new e(t,n,r,i)},e.defaultPage=function(){return new e(1,r)},e}();t.Page=i;var o=function(e,t,n){this.column=e,this.operator=t,this.value=n},a=function(){function e(){this.elements=this._elements=[]}return e.prototype.and=function(e,t,n){this._elements.push(new o(e,t,n))},e}();t.Filter=a;var l=function(){function e(e,t){this.column=e,this.direction=t}return e.by=function(t,n){return new e(t,n)},e}();t.Sort=l,function(e){e.ASCENDING="ASC",e.DESCENDING="DESC"}(t.Direction||(t.Direction={})),function(e){e.EQUAL="EQUAL",e.LIKE="LIKE",e.ILIKE="ILIKE",e.NOT_EQUAL="NOT_EQUAL",e.BOOLEAN_IS="BOOLEAN_IS"}(t.Operator||(t.Operator={}))},128:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalBackgroundColor100="#fff",t.GlobalBackgroundColor150="#f5f5f5",t.GlobalBackgroundColor200="#fafafa",t.GlobalBackgroundColor300="#ededed",t.GlobalBackgroundColorDark100="#151515",t.GlobalBackgroundColorDark200="#3c3f42",t.GlobalBackgroundColorDark300="#212427",t.GlobalBackgroundColorDark400="#4f5255",t.GlobalBackgroundColorLight100="#fff",t.GlobalBackgroundColorLight200="#fafafa",t.GlobalBackgroundColorLight300="#ededed",t.GlobalDangerColor100="#c9190b",t.GlobalDangerColor200="#a30000",t.GlobalDangerColor300="#470000",t.GlobalSuccessColor100="#92d400",t.GlobalSuccessColor200="#486b00"},129:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(182)),a=n(122),l=n(127),c=n(248),u=n(647),s=n(321),d=o.default.apis.urls,f=function(e,t,n,r){return{method:e,endpoint:t+(n?"?"+new URLSearchParams(n).toString():""),body:r}},p=function(e,t,n,r,i){return a.useQuery(f(e,t,r,i),n)},m=function(e,t,n,i,o,a){var c,u=p(e,t,i,function(e,t){if(t||(t=l.Page.defaultPage()),e||(e={}),e.offset=(t.index-1)*t.size,e.limit=t.size,t.filter)for(var n=0,r=t.filter.elements;n<r.length;n++){var i=r[n];e["filter["+i.column+"]"]=i.value,e["filter:op["+i.column+"]"]=i.operator}return t.sort&&(e.sortColumn=t.sort.column,e.sortDirection=t.sort.direction),e}(o,n),a),s=null===(c=u.headers)||void 0===c?void 0:c.get("TotalCount");return r({count:s?+s:s},u)};t.useGetFactsQuery=function(e){return p("GET",d.facts,e)},t.useGetPoliciesQuery=function(e,t){return u.useTransformPaginatedQueryResponse(m("GET",d.policies,e,t),c.toPolicies)},t.useSavePolicyMutation=function(){return a.useMutation((function(e){return e.id?f("PUT",d.policy(e.id),{},c.toServerPolicy(e)):f("POST",d.policies,{alsoStore:!0},c.toServerPolicy(e))}))},t.useVerifyPolicyMutation=function(){return a.useMutation((function(e){return f("POST",d.validateCondition,{},c.toServerPolicy(e))}))},t.useBulkDeletePolicyMutation=function(){return s.useBulkMutation((function(e){return f("DELETE",d.policy(e.id))}))},t.useGetPolicyQuery=function(e,t){return p("GET",d.policy(e),t)}},130:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(646);t.ActionType=r.ActionType},131:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NAME="name",e.DESCRIPTION="description",e.IS_ACTIVE="is_enabled"}(t.PolicyFilterColumn||(t.PolicyFilterColumn={}))},132:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=r(n(87));t.AlwaysValid=o.object(),function(e){e.SAVE="CREATE",e.VALIDATE_CONDITION="VALIDATE_CONDITION",e.NONE="NONE"}(t.WizardActionType||(t.WizardActionType={})),t.WizardContext=i.createContext({isLoading:!1,isFormValid:!1,triggerAction:function(){throw Error("Action executed without WizardContext")},verifyResponse:{isValid:!1},createResponse:{created:!1},setVerifyResponse:function(){throw Error("setVerifyResponse executed without WizardContext")}})},142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onChangePFAdapter=function(e){return function(t,n){return e.onChange(n)}},t.onChangePFAdapterCheckbox=function(e){return function(t,n){return(0,e.onChange)(t,n.target.name)}}},182:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return"/api/custom-policies/v1.0/"+e},i={appId:"custom-policies",apis:{version:"v1.0",urls:{base:"/api/custom-policies/v1.0",facts:r("facts"),policies:r("policies"),validateCondition:r("policies/validate"),policy:function(e){return r("policies/"+e)}}}};t.default=i},247:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertNever=function(e){return e}},248:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(246)),l=n(130),c=n(247);t.toServerPolicy=function(e){var t,n=e.isEnabled,o=i(e,["isEnabled"]);return r(r({},o),{is_enabled:n,actions:null===(t=e.actions)||void 0===t?void 0:t.map((function(e){if(!e||!e.type)return"";var t=""+e.type;switch(e.type){case l.ActionType.WEBHOOK:t+=" "+e.endpoint;break;case l.ActionType.EMAIL:break;default:c.assertNever(e.type)}return t})).join(";"),mtime:e.mtime?e.mtime.toJSON():void 0})},t.toPolicy=function(e){var t=e.is_enabled,n=i(e,["is_enabled"]);return r(r({},n),{isEnabled:t,actions:[],mtime:a.default(e.mtime)})},t.toPolicies=function(e){return e.data.map(t.toPolicy)},t.makeCopyOfPolicy=function(e){return r(r({},e),{name:"Copy of "+e.name,triggerId:void 0,mtime:void 0,id:void 0,customerid:void 0})}},249:function(e,t,n){"use strict";var r,i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a,l=o(n(1)),c=n(27),u=n(124),s=n(131);!function(e){e[e.NONE=0]="NONE",e[e.PAGE=1]="PAGE"}(a=t.SelectionCommand||(t.SelectionCommand={}));var d=((r={})[s.PolicyFilterColumn.NAME]="Name",r[s.PolicyFilterColumn.DESCRIPTION]="Description",r[s.PolicyFilterColumn.IS_ACTIVE]="Is Active?",r),f={enabled:"Active",disabled:"Inactive"},p=function(e,t){var n=e[t];return"string"==typeof n?function(e,t){var n=e.trim();if(""!==n)return{category:d[t],chips:[{name:n,isRead:!0}]}}(n,t):function(e,t){if(e.enabled||e.disabled)return{category:d[t],chips:Object.keys(e).filter((function(t){return e[t]})).map((function(e){return{name:f[e],isRead:!0,key:e}}))}}(n,t)};t.PolicyToolbar=function(e){var t=e.clearFilters,n=e.filterElements,r=e.setFilterElements,o=e.pageCount,m=e.count,h=e.page,v=e.perPage,y=e.showPerPageOptions,b=e.onPaginationChanged,g=e.onPaginationSizeChanged,_=e.onCreatePolicy,O=e.onDeletePolicy,E=e.hideActions,P=e.onSelectionChanged,C=e.selectedCount,S=e.hideBulkSelect,w=l.useCallback((function(e,r){for(var o=[],a=0,l=r;a<l.length;a++){var c=l[a];switch(c.category){case d[s.PolicyFilterColumn.NAME]:o.push({filter:s.PolicyFilterColumn.NAME,data:""});break;case d[s.PolicyFilterColumn.DESCRIPTION]:o.push({filter:s.PolicyFilterColumn.DESCRIPTION,data:""});break;case d[s.PolicyFilterColumn.IS_ACTIVE]:o.push({filter:s.PolicyFilterColumn.IS_ACTIVE,data:i(i({},n[s.PolicyFilterColumn.IS_ACTIVE]),c.chips.reduce((function(e,t){return e[t.key]=!1,e}),{}))});break;default:throw new Error("Unknown filter found: "+c.category)}}t(o)}),[t,n]),A=l.useMemo((function(){if(!S){var e=function(){return P&&P(a.NONE)},t=function(){return P&&P(a.PAGE)};return{count:C||0,items:[{title:"Select none (0)",onClick:e},{title:"Select page ("+o+")",onClick:t}],checked:C===o,onSelect:function(n){return n?t():e()}}}}),[C,o,P,S]),j=l.useMemo((function(){return{items:[{label:"Name",type:"text",filterValues:{id:"filter-name",value:n[s.PolicyFilterColumn.NAME],placeholder:"Filter by name",onChange:function(e,t){return r[s.PolicyFilterColumn.NAME](t)}}},{label:"Description",type:"text",filterValues:{id:"filter-description",value:n[s.PolicyFilterColumn.DESCRIPTION],placeholder:"Filter by description",onChange:function(e,t){return r[s.PolicyFilterColumn.DESCRIPTION](t)}}},{label:"Is Active?",type:"radio",filterValues:{id:"filter-active",value:Object.keys(n[s.PolicyFilterColumn.IS_ACTIVE]).reduce((function(e,t){return n[s.PolicyFilterColumn.IS_ACTIVE][t]&&(e=t),e}),"all"),items:[{label:"All",value:"all"}].concat(Object.keys(n[s.PolicyFilterColumn.IS_ACTIVE]).map((function(e){return{label:f[e],value:e}}))),placeholder:"Filter by Active status",onChange:function(e,t){var n={enabled:!1,disabled:!1};["enabled","disabled"].includes(t)&&(n[t]=!0),r[s.PolicyFilterColumn.IS_ACTIVE](n)}}}]}}),[n,r]),M=l.useMemo((function(){return{itemCount:m||0,page:h,perPage:v,perPageOptions:y?void 0:[],onSetPage:b,onFirstClick:b,onPreviousClick:b,onNextClick:b,onLastClick:b,onPageInput:b,onPerPageSelect:g,isCompact:!0,variant:c.PaginationVariant.right}}),[y,m,h,v,b,g]),F=l.useMemo((function(){for(var e=[],t=0,r=Object.values(s.PolicyFilterColumn);t<r.length;t++){var i=r[t],o=p(n,i);o&&e.push(o)}return{filters:e,onDelete:w}}),[n,w]),I=l.useMemo((function(){if(!E)return{actions:[{key:"create-policy",label:"Create policy",onClick:_,props:{onClick:_,isDisabled:!_}},{key:"delete-policy",label:1===C?"Delete policy":"Delete policies",onClick:O,props:{isDisabled:!(C&&O)}}],kebabToggleProps:{isDisabled:!(C&&O)}}}),[_,O,C,E]);return l.createElement(l.Fragment,null,l.createElement(u.PrimaryToolbar,{bulkSelect:A,filterConfig:j,pagination:M,actionsConfig:I,activeFiltersConfig:F}))}},256:function(e,t,n){"use strict";(function(e){var n,r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getInsights=function(){return n||(n=new Promise((function(t){return r(void 0,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return e.hasOwnProperty("insights")?[3,2]:[4,new Promise((function(e){return setTimeout(e,250)}))];case 1:return n.sent(),[3,0];case 2:return t(insights),[2]}}))}))}))),n}}).call(this,n(58))},260:function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,i++)r[i]=o[a];return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,a=i(n(392)),l=i(n(779)),c=n(161);t.init=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(o)throw new Error("store already initialized");return(o=new a.default({},r([l.default()],e))).register({notifications:c.notifications}),o},t.getStore=function(){return o.getStore()},t.register=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.register.apply(o,e)}},303:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1));t.RbacContext=i.createContext({canReadAll:!1,canWriteAll:!1})},314:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=n(357),l=n(27),c=n(124),u=n(113),s=n(127),d=n(634),f=n(86),p=n(247),m=["name","actions","is_enabled"],h=function(e){return o.createElement(o.Fragment,null,o.createElement(l.EmptyStateIcon,{icon:e.icon,color:e.iconColor}),o.createElement(l.Title,{headingLevel:"h2",size:"lg"},e.title),o.createElement(l.EmptyStateBody,null,e.content),e.action&&e.actionLabel&&o.createElement(l.Button,{variant:l.ButtonVariant.primary,onClick:e.action},e.actionLabel," "))},v=function(e,t,n,r){return t.indexOf(n[e])+r};t.PolicyTable=function(e){var t=e.onSort,n=e.error,i=e.policies,y=e.onCollapse,b=e.onSelect,g=e.columnsToShow||m,_=g.includes("radioSelect");if(_&&!b)throw Error("RadioSelect requires an onSelect");var O=o.useMemo((function(){var e=t?[a.sortable]:[];return{radioSelect:{title:"",transforms:[]},name:{title:"Name",transforms:e,cellFormatters:[a.expandable],column:"name"},actions:{title:"Actions",transforms:[]},is_enabled:{title:"Is active?",transforms:e,column:"is_enabled"}}}),[t]),E=o.useMemo((function(){return[y,b||g.includes("radioSelect")].filter((function(e){return e})).length}),[y,b,g]),P=o.useMemo((function(){return g.map((function(e){return O[e]}))}),[O,g]),C=o.useCallback((function(e,n,r){if(t){var i=function(e,t,n){return t[e-n].column}(n,P,E);i&&t(n,i,r===a.SortByDirection.asc?s.Direction.ASCENDING:s.Direction.DESCENDING)}}),[t,P,E]),S=o.useCallback((function(e,t,n,r){var o,a=null===(o=i)||void 0===o?void 0:o.findIndex((function(e){return e.id===r.id}));if(y&&i&&void 0!==a&&-1!==a){var l=i[a];y(l,a,n)}}),[i,y]),w=o.useCallback((function(e,t,n,r){var o,a=null===(o=i)||void 0===o?void 0:o.findIndex((function(e){return e.id===r.id}));if(b&&i&&void 0!==a&&-1!==a){var l=i[a];b(l,a,t)}}),[i,b]),A=o.useMemo((function(){if(e.sortBy)return{index:v(e.sortBy.column,P,O,E),direction:e.sortBy.direction===s.Direction.ASCENDING?"asc":"desc"}}),[e.sortBy,P,O,E]),j=o.useMemo((function(){return e.error||e.loading?[]:e.actions||[]}),[e.error,e.loading,e.actions]),M=o.useCallback((function(e){return void 0===e.parent?j:[]}),[j]),F=o.useMemo((function(){return n?function(e){return[{heightAuto:!0,showSelect:!1,cells:[{props:{colSpan:8},title:o.createElement(l.Bullseye,null,o.createElement(l.EmptyState,{variant:l.EmptyStateVariant.small},o.createElement(h,r({},e))))}]}]}(n):function(e,t,n){return e?e.reduce((function(r,i,a){return r.push({id:i.id,key:i.id,isOpen:i.isOpen,selected:i.isSelected,cells:t.map((function(t){switch(t){case"actions":return i.actions;case"is_enabled":return i.isEnabled?o.createElement(o.Fragment,null,o.createElement(u.CheckCircleIcon,{color:"green"})):o.createElement(o.Fragment,null,o.createElement(u.OffIcon,null));case"name":return i.name;case"radioSelect":return o.createElement(o.Fragment,null,o.createElement(l.Radio,{id:i.id+"-table-radio-id","aria-label":"Radio select for policy "+i.name,name:"policy-table-radio-select",isChecked:i.isSelected,onChange:n?function(){var t=e.findIndex((function(e){return e.isSelected}));n(e[t],t,!1),n(i,a,!0)}:void 0}))}p.assertNever(t)}))}),r.push({parent:2*a,fullWidth:!0,showSelect:!1,cells:[o.createElement(o.Fragment,null,o.createElement(d.ExpandedContent,{key:i.id+"-content",description:i.description?i.description:f.Messages.tableNoDescription,conditions:i.conditions?i.conditions:f.Messages.tableNoConditions,actions:i.actions,created:new Date(2020,1,19),updated:i.mtime}))]}),r}),[]):[]}(i,g,b)}),[n,i,g,b]);return e.loading?o.createElement(c.SkeletonTable,{rowSize:e.loadingRowCount||10,columns:P}):o.createElement(a.Table,{"aria-label":f.Messages.tableTitle,cells:P,rows:F,actionResolver:M,onSort:t?C:void 0,onCollapse:y?S:void 0,onSelect:e.error||!b||_?void 0:w,sortBy:A,canSelectAll:!1},o.createElement(a.TableHeader,null),o.createElement(a.TableBody,null))}},321:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(322)),r(n(650)),r(n(323)),r(n(324))},322:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(778);t.useDebouncedState=function(e,t){var n=i.useState(e),r=n[0],a=n[1],l=i.useState(e),c=l[0],u=l[1],s=i.useCallback((function(){u(r)}),[r,u]),d=o.useDebounce(s,t,[s])[0];return[r,a,c,d]}},323:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(322),a=n(131),l=function(e,t,n){return i.useMemo((function(){var r;return(r={})[a.PolicyFilterColumn.NAME]=e,r[a.PolicyFilterColumn.DESCRIPTION]=t,r[a.PolicyFilterColumn.IS_ACTIVE]=n,r}),[e,t,n])};t.usePolicyFilter=function(e){void 0===e&&(e=250);var t=o.useDebouncedState("",e),n=t[0],r=t[1],c=t[2],u=o.useDebouncedState("",e),s=u[0],d=u[1],f=u[2],p=o.useDebouncedState({enabled:!1,disabled:!1},e),m=p[0],h=p[1],v=p[2],y=i.useCallback((function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];switch(i.filter){case a.PolicyFilterColumn.NAME:r(i.data);break;case a.PolicyFilterColumn.DESCRIPTION:d(i.data);break;case a.PolicyFilterColumn.IS_ACTIVE:h(i.data)}}}),[r,d,h]);return{filters:l(n,s,m),setFilters:l(r,d,h),debouncedFilters:l(c,f,v),clearFilterHandler:y}}},324:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(127),a=n(131);t.usePolicyPage=function(e,t,n){var r=i.useState(1),l=r[0],c=r[1],u=i.useState(t||o.Page.defaultPage().size),s=u[0],d=u[1];i.useEffect((function(){c(1)}),[c,e]);var f=i.useMemo((function(){var t=new o.Filter;return""!==e[a.PolicyFilterColumn.NAME].trim()&&t.and(a.PolicyFilterColumn.NAME,o.Operator.ILIKE,"%"+e[a.PolicyFilterColumn.NAME].trim()+"%"),""!==e[a.PolicyFilterColumn.DESCRIPTION].trim()&&t.and(a.PolicyFilterColumn.DESCRIPTION,o.Operator.ILIKE,"%"+e[a.PolicyFilterColumn.DESCRIPTION].trim()+"%"),e[a.PolicyFilterColumn.IS_ACTIVE].disabled!==e[a.PolicyFilterColumn.IS_ACTIVE].enabled&&t.and(a.PolicyFilterColumn.IS_ACTIVE,o.Operator.BOOLEAN_IS,e[a.PolicyFilterColumn.IS_ACTIVE].enabled?"true":"false"),o.Page.of(l,s,t,n)}),[l,s,n,e]),p=i.useCallback((function(e,t){c(t)}),[c]),m=i.useCallback((function(e,t){c(1),d(t)}),[c,d]);return{page:f,itemsPerPage:s,currentPage:l,changePage:p,changeItemsPerPage:m}}},352:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(127);t.useSort=function(){var e=i.useState(),t=e[0],n=e[1];return{sortBy:t,onSort:i.useCallback((function(e,t,r){n(o.Sort.by(t,r))}),[n])}}},353:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,i++)r[i]=o[a];return r},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(1)),l=n(249),c=n(247);t.usePolicyRows=function(e){var t=a.useState([]),n=t[0],o=t[1];a.useEffect((function(){var t;e&&o(null===(t=e)||void 0===t?void 0:t.map((function(e){return r(r({},e),{isOpen:!1,isSelected:!1})})))}),[e]);var u=a.useCallback((function(e,t,n){o((function(o){var a=i(o);return a[t]=r(r({},e),{isOpen:n}),a}))}),[o]),s=a.useCallback((function(e,t,n){o((function(o){var a=i(o);return a[t]=r(r({},e),{isSelected:n}),a}))}),[o]),d=a.useCallback((function(e){e===l.SelectionCommand.NONE?o((function(e){return e.map((function(e){return r(r({},e),{isSelected:!1})}))})):e===l.SelectionCommand.PAGE?o((function(e){return e.map((function(e){return r(r({},e),{isSelected:!0})}))})):c.assertNever(e)}),[o]),f=a.useMemo((function(){return n.filter((function(e){return e.isSelected})).length}),[n]);return{rows:n,onCollapse:u,onSelect:s,onSelectionChanged:d,selectionCount:f}}},354:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=n(130),l=n(27),c=o(n(1)),u=n(113),s=n(111),d=n(765),f=n(256);t.ActionsForm=function(e){var t;return c.createElement(c.Fragment,null,null===(t=e.actions)||void 0===t?void 0:t.map((function(t,n){return c.createElement(c.Fragment,{key:n},c.createElement(l.Card,null,c.createElement(l.CardHead,null,c.createElement(l.CardActions,null,c.createElement(l.Button,{variant:"plain","aria-label":"Action",onClick:e.arrayHelpers.handleRemove(n)},c.createElement(u.TimesIcon,null))),c.createElement(l.CardHeader,null,"Action #",n+1)),c.createElement(l.CardBody,{className:"pf-c-form"},c.createElement(s.FormSelect,{isDisabled:e.isReadOnly,id:"actions."+n+".type",name:"actions."+n+".type",label:"Type"},c.createElement(l.FormSelectOption,{value:"",label:"Select an Action type"}),Object.values(a.ActionType).filter((function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,f.getInsights()];case 1:return[2,t.sent().chrome.isBeta()||e!==a.ActionType.WEBHOOK]}}))}))})).map((function(e){return c.createElement(l.FormSelectOption,{key:e,label:l.capitalize(e),value:e})}))),c.createElement(d.ActionForm,{isReadOnly:e.isReadOnly,action:t,prefix:"actions."+n}))))})),c.createElement(l.ActionGroup,null,!e.isReadOnly&&c.createElement(l.Button,{variant:"primary",onClick:e.arrayHelpers.handlePush({})},"+ Add action")))}},355:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(161),o=n(260);!function(e){e.SUCCESS="success",e.DANGER="danger",e.WARNING="warning",e.INFO="info",e.DEFAULT="default"}(r=t.NotificationType||(t.NotificationType={})),t.addNotification=function(e,t,n){o.getStore().dispatch(i.addNotification({variant:e,title:t,description:n}))},t.addSuccessNotification=function(e,n){t.addNotification(r.SUCCESS,e,n)},t.addDangerNotification=function(e,n){t.addNotification(r.DANGER,e,n)}},362:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1)),a=n(122),l=n(292),c=n(161),u=i(n(182)),s=n(462),d=n(303),f=n(488),p=n(773),m=n(774);n(775),n(776);var h=n(256);t.default=l.withRouter((function(e){var t=o.useState(void 0),n=t[0],r=t[1];return o.useEffect((function(){return h.getInsights().then((function(e){e.chrome.init(),e.chrome.identifyApp(u.default.appId)})),function(){h.getInsights().then((function(t){t.chrome.on("APP_NAVIGATION",(function(t){return e.history.push("/"+t.navId)}))}))}}),[e.history]),o.useEffect((function(){h.getInsights().then((function(e){e.chrome.auth.getUser().then((function(){s.fetchRBAC().then(r)}))}))}),[]),n?o.createElement(a.ClientContextProvider,{client:m.client},o.createElement(d.RbacContext.Provider,{value:n},o.createElement(c.NotificationsPortal,null),o.createElement(f.Routes,null))):o.createElement(p.AppSkeleton,null)}))},382:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="/",n=e.split("/");return n.shift(),"beta"===n[0]&&(n.shift(),t="/beta/"),""+t+n[0]+"/"+(n[1]||"")}},385:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),o=n(18),a=n.n(o),l=n(263),c=n(151),u=n(260),s=n(362),d=n.n(s),f=n(382),p=n.n(f);a.a.render(i.a.createElement(c.Provider,{store:Object(u.init)().getStore()},i.a.createElement(l.a,{basename:p()(window.location.pathname)},i.a.createElement(d.a,null))),document.getElementById("root"))},462:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(463),o=r(n(293)),a=r(n(182)),l=function(){function e(e){this.accessPagination=e}return e.prototype.canRead=function(e){return this.findPermission(e,"read")},e.prototype.canWrite=function(e){return this.findPermission(e,"write")},e.prototype.canReadAll=function(){return this.canRead("*")},e.prototype.canWriteAll=function(){return this.canWrite("*")},e.prototype.findPermission=function(e,t){var n;if(!(null===(n=this.accessPagination)||void 0===n?void 0:n.data)||0===this.accessPagination.data.length)return!1;for(var r=0,i=this.accessPagination.data;r<i.length;r++){var o=i[r].permission.split(":");if(o[1]===e&&(o[2]===t||"*"===o[2]))return!0}return!1},e}();t.RawRbac=l,t.fetchRBAC=function(){var e=o.default.create();return new i.AccessApi(void 0,"/api/rbac/v1",e).getPrincipalAccess(a.default.appId).then((function(e){return new l(e.data)})).then((function(e){return{canReadAll:e.canReadAll(),canWriteAll:e.canWriteAll()}}))}},488:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=o(n(1)),c=n(292),u=[{path:"/list",component:a(n(489)).default,rootClass:"list"}],s=function(e){var t=e.rootClass,n=i(e,["rootClass"]),o=document.getElementById("root");if(!o)throw new Error("Root element not found");return o.removeAttribute("class"),o.classList.add("page__"+t,"pf-c-page__main"),o.setAttribute("role","main"),l.createElement(c.Route,r({},n))};t.Routes=function(){return l.createElement(c.Switch,null,u.map((function(e){return l.createElement(s,{key:e.path,rootClass:e.rootClass,component:e.component,path:e.path})})),l.createElement(c.Redirect,{to:"/list"}))}},489:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(1),a=n(124),l=n(314),c=n(129),u=n(249),s=n(651),d=n(303),f=n(771),p=n(772),m=n(323),h=n(324),v=n(352),y=n(353),b=n(248),g=n(131);t.default=function(e){var t,n=i.useState({isOpen:!1}),r=n[0],_=n[1],O=i.useState(void 0),E=O[0],P=O[1],C=m.usePolicyFilter(),S=v.useSort(),w=h.usePolicyPage(C.debouncedFilters,void 0,S.sortBy),A=c.useGetPoliciesQuery(w.page,!1),j=o.useContext(d.RbacContext),M=j.canReadAll,F=j.canWriteAll,I=y.usePolicyRows(A.payload),k=A.query,T=w.changePage,x=w.currentPage,D=i.useCallback((function(e){var t,n;e&&(k(),(null===(t=E)||void 0===t?void 0:t.length)===(null===(n=A.payload)||void 0===n?void 0:n.length)&&T(void 0,1===x?1:x-1)),P(void 0)}),[k,P,T,x,E,A.payload]),N=i.useCallback((function(e){var t;return null===(t=A.payload)||void 0===t?void 0:t.find((function(t){return t.id===e}))}),[A.payload]),R=i.useMemo((function(){return F?[{title:"Edit",onClick:function(e,t,n){var r=N(n.id);r&&_({isOpen:!0,template:r,showCreateStep:!1})}},{title:"Duplicate",onClick:function(e,t,n){var r=N(n.id);r&&_({isOpen:!0,template:b.makeCopyOfPolicy(r),showCreateStep:!1})}},{title:"Delete",onClick:function(e,t,n){var r=N(n.id);r&&P([r])}}]:[]}),[F,P,N]);i.useEffect((function(){M&&k()}),[M,k]);var V=i.useCallback((function(){_({isOpen:!0,showCreateStep:!0,template:void 0})}),[_]),B=i.useCallback((function(e){e&&k(),_({isOpen:!1})}),[_,k]),z=i.useMemo((function(){return f.policyTableError(M,{clearAllFiltersAndTryAgain:function(){C.setFilters[g.PolicyFilterColumn.NAME](""),C.setFilters[g.PolicyFilterColumn.DESCRIPTION](""),C.setFilters[g.PolicyFilterColumn.IS_ACTIVE]({disabled:!1,enabled:!1}),T(void 0,1)},refreshPage:function(){window.location.reload()},tryAgain:function(){k()}},A.error,A.status)}),[M,A.error,A.status,C.setFilters,T,k]),L=i.useCallback((function(){return P(I.rows.filter((function(e){return e.isSelected})))}),[I,P]);return i.createElement(i.Fragment,null,i.createElement(a.PageHeader,null,i.createElement(a.PageHeaderTitle,{title:"Custom policies"})),i.createElement(a.Main,null,i.createElement(a.Section,null,i.createElement(u.PolicyToolbar,{onCreatePolicy:F?V:void 0,onDeletePolicy:F?L:void 0,onPaginationChanged:w.changePage,onPaginationSizeChanged:w.changeItemsPerPage,onSelectionChanged:I.onSelectionChanged,selectedCount:I.selectionCount,page:w.currentPage,pageCount:null===(t=A.payload)||void 0===t?void 0:t.length,perPage:w.itemsPerPage,showPerPageOptions:!0,filterElements:C.filters,setFilterElements:C.setFilters,clearFilters:C.clearFilterHandler,count:A.count}),i.createElement(l.PolicyTable,{policies:I.rows,onCollapse:I.onCollapse,onSelect:I.onSelect,actions:R,loading:A.loading,error:z,onSort:S.onSort,sortBy:S.sortBy}))),r.isOpen&&i.createElement(s.CreatePolicyWizard,{isOpen:r.isOpen,close:B,initialValue:r.template,showCreateStep:r.showCreateStep}),i.createElement(p.DeletePolicy,{onClose:D,policies:E}))}},634:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=n(66),l=n(27),c=n(635),u=n(636),s=n(637),d=i(n(128)),f=n(638),p=n(86),m=a.style({margin:12}),h=a.style({maxWidth:800,marginBottom:12}),v=a.style({marginBottom:12}),y=a.style(r(r({backgroundColor:d.GlobalBackgroundColorLight300},f.padding(18,14)),{margin:5}));t.ExpandedContent=function(e){return o.createElement(l.Stack,{className:m},e.description&&o.createElement(l.StackItem,{className:h},o.createElement(c.Description,{description:e.description})),o.createElement(l.StackItem,{className:v},o.createElement(u.Dates,{updated:e.updated,created:e.created})),o.createElement(l.StackItem,null,o.createElement(l.Grid,null,o.createElement(l.GridItem,{className:y,span:6},o.createElement(s.Conditions,{conditions:e.conditions})),o.createElement(l.GridItem,{className:y,span:6},p.Messages.tableNoActions))))}},635:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(27);t.Description=function(e){return i.createElement(i.Fragment,null,i.createElement(o.Title,{size:o.TitleSize.md},"Description"),i.createElement(o.Text,null," ",e.description," "))}},636:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(27),a=n(777);t.Dates=function(e){return i.createElement(i.Fragment,null,i.createElement(o.Text,null,"Last updated ",a.format(e.updated,"dd MMM yyyy")," | Created ",a.format(e.created,"dd MMM yyyy")))}},637:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(27),a=n(66).style({marginBottom:5});t.Conditions=function(e){return i.createElement(i.Fragment,null,i.createElement(o.Title,{className:a,size:o.TitleSize.md},"Conditions"),i.createElement(o.Text,null,e.conditions))}},646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EMAIL="email",e.WEBHOOK="webhook"}(t.ActionType||(t.ActionType={}))},647:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=function(e,t,n){return 200===t&&e?n(e):void 0};t.useTransformPaginatedQueryResponse=function(e,t){var n=e.payload,i=e.query,l=e.status,c=o.useCallback((function(){return i().then((function(e){return r(r({},e),{payload:a(e.payload,e.status,t)})}))}),[i,t]),u=o.useMemo((function(){return a(n,l,t)}),[t,n,l]);return r(r({},e),{payload:u,query:c})}},650:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(122),l=n(1);t.useBulkMutation=function(e){var t=l.useContext(a.ClientContext).query,n=l.useRef(!0),c=l.useRef(),u=l.useState({loading:!1,responses:[]}),s=u[0],d=u[1],f=l.useCallback((function(){c.current&&c.current.abort()}),[c]);l.useEffect((function(){return n.current=!0,function(){n.current=!1,f()}}),[f]);var p=l.useCallback((function(a){return i(void 0,void 0,void 0,(function(){var i,l,u,s;return o(this,(function(o){switch(o.label){case 0:return n.current?(i="AbortController"in window?new AbortController:void 0,l=a.map((function(t){return e(t)})),u=i?i.signal:void 0,l.forEach((function(e){return e.signal=e.signal||u})),c.current&&c.current.abort(),c.current=i,d((function(e){return r(r({},e),{loading:!0})})),[4,Promise.all(l.map((function(e){return t(e)})).map((function(e){return e.catch((function(e){return e}))})))]):[2,Array(a.length).map((function(){return{error:!1}}))];case 1:return s=o.sent(),n.current&&d({loading:!1,responses:s.map((function(e,t){if(!e.errorObject||"AbortError"!==e.errorObject.name)return l[t].signal===u&&c.current===i&&(c.current=void 0,d((function(e){return r(r({},e),{loading:!1})}))),e}))}),[2,s]}}))}))}),[t,e]),m=l.useCallback((function(){d({loading:!1,responses:[]})}),[d]);return s.responses.forEach((function(e){var t;if((null===(t=e)||void 0===t?void 0:t.errorObject)&&e.errorObject instanceof a.QueryError)throw e.errorObject})),{abort:f,loading:s.loading,mutate:p,reset:m,responses:s.responses}}},651:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(652),a=n(129),l=r(n(770)),c=n(355);t.CreatePolicyWizard=function(e){var t=a.useSavePolicyMutation(),n=a.useVerifyPolicyMutation(),r=t.loading||n.loading;return i.createElement(i.Fragment,null,e.isOpen&&i.createElement(o.PolicyWizard,{initialValue:e.initialValue||{},onClose:function(){e.close(!1)},onSave:function(n){return t.mutate(n).then((function(t){var r;switch(t.status){case l.CREATED:case l.OK:return void 0===n.id?c.addSuccessNotification("Created",'Policy "'+n.name+'" created'):c.addSuccessNotification("Saved",'Policy "'+n.name+'" has been updated'),e.close&&e.close(!0),{created:!0};default:return{created:!1,error:(null===(r=t.payload)||void 0===r?void 0:r.msg)||"Unknown Error when trying to "+(void 0===n.id?"create":"update")+" the policy: (Code "+t.status+")"}}}))},onVerify:function(e){return n.mutate(e).then((function(t){var n;return t.status===l.OK?{isValid:!0,policy:e}:{isValid:!1,error:(null===(n=t.payload)||void 0===n?void 0:n.msg)||"Unknown Error when trying to validate: (Code "+t.status+")",policy:e}}))},showCreateStep:e.showCreateStep,isLoading:r}))}},652:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=n(27),l=n(65),c=n(132),u=n(752),s=n(754),d=n(763),f=n(764),p=n(768),m=n(112),h=n(769),v=function(e,t,n,r,i,o){return!i&&(e===n||(0!==e||!o)&&(t?e<=r:e<=n))},y=function(e,t){return!t&&e},b=function(e){var t=l.useFormikContext(),n=t.validateForm,i=t.handleSubmit;o.useEffect((function(){n()}),[e.currentStep,n]),o.useEffect((function(){e.triggeredAction!==c.WizardActionType.NONE&&i()}),[e.triggeredAction,i]);var u={isLoading:e.isLoading,isFormValid:t.isValid,triggerAction:e.triggerAction,verifyResponse:e.verifyResponse,createResponse:e.createResponse,setVerifyResponse:e.setVerifyResponse},s=function(e,t,n){return e.isValid?e.isValid(t,n):t.isFormValid}(e.steps[e.currentStep],u,t.values);u.isValid=s;var d=e.steps.map((function(t){return r(r({},t),{enableNext:y(s,e.isLoading),canJumpTo:v(t.id,s,e.currentStep,e.maxStep,e.isLoading,e.showCreateStep)})}));return o.createElement(a.Form,null,o.createElement(c.WizardContext.Provider,{value:u},o.createElement(a.Wizard,{isOpen:!0,onSave:function(){e.triggerAction(c.WizardActionType.SAVE)},onClose:e.onClose,steps:d,startAtStep:e.currentStep+1,onNext:e.onMove,onBack:e.onMove,onGoToStep:e.onMove,title:"Add Custom Policy",description:"Custom policies are processed on reception of system profile messages. If condition(s) are met, defined action(s) are triggered.",footer:o.createElement(h.PolicyWizardFooter,{loadingText:"Loading",isLoading:e.isLoading})})))};t.PolicyWizard=function(e){var t=o.useState(0),n=t[0],i=t[1],a=o.useState(0),h=a[0],v=a[1],y=o.useState(c.WizardActionType.NONE),g=y[0],_=y[1],O=o.useState({isValid:!1}),E=O[0],P=O[1],C=o.useState({created:!1}),S=C[0],w=C[1];o.useEffect((function(){var t;(null===(t=e.initialValue)||void 0===t?void 0:t.conditions)&&P({isValid:!0,policy:e.initialValue})}),[e.initialValue]);var A=function(e){var t=[];return e&&t.push(u.createCustomPolicyStep({hideBackButton:!0})),t.push(s.createDetailsStep({hideBackButton:!0}),d.createConditionsStep(),f.createActionsStep(),p.createReviewStep({nextButtonText:"Finish"})),t.map((function(e,t){return r(r({},e),{id:t})}))}(e.showCreateStep);return o.createElement(o.Fragment,null,o.createElement(l.Formik,{initialValues:e.initialValue,initialStatus:{},validateOnMount:!1,validationSchema:A[n].validationSchema,onSubmit:function(t,n){n.setSubmitting(!1),_(c.WizardActionType.NONE);var r=m.PolicyFormSchema.cast(t);switch(n.setValues(r),g){case c.WizardActionType.SAVE:e.onSave(r).then(w);break;case c.WizardActionType.VALIDATE_CONDITION:case c.WizardActionType.NONE:break;default:throw new Error("Unexpected action")}},validate:function(t){var n=m.PolicyFormSchema.cast(t);switch(g){case c.WizardActionType.SAVE:case c.WizardActionType.NONE:break;case c.WizardActionType.VALIDATE_CONDITION:_(c.WizardActionType.NONE),e.onVerify(n).then(P)}}},o.createElement(b,{currentStep:n,maxStep:h,isLoading:e.isLoading,triggeredAction:g,triggerAction:_,steps:A,verifyResponse:E,createResponse:S,setVerifyResponse:P,onClose:e.onClose,onMove:function(e,t){var n=e.id;i(n),n>h&&v(n)},showCreateStep:e.showCreateStep})))}},752:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=n(27),l=n(132),c=n(86),u=n(753),s=n(65),d=i(n(87)),f=n(1),p=n(248),m=function(){var e=o.useState(!1),t=e[0],n=e[1],r=o.useState(),i=r[0],d=r[1],m=s.useFormikContext(),h=m.validate,v=m.validateField,y=m.setValues,b=m.setFieldValue,g=f.useContext(l.WizardContext).setVerifyResponse,_=o.useCallback((function(){n(!1),d(void 0)}),[n,d]),O=o.useCallback((function(){n(!0)}),[n]);o.useEffect((function(){i&&(y(i),g({policy:i,isValid:!0})),b("isValid",!t||!!i),h&&v("isValid")}),[t,i,h,v,b,y,g]);var E=o.useCallback((function(e){d(p.makeCopyOfPolicy(e))}),[d]);return o.createElement(o.Fragment,null,o.createElement(a.Form,null,o.createElement(a.Title,{headingLevel:"h4",size:"xl"},c.Messages.wizardCreatePolicy),o.createElement("span",null,"Define a new custom policy:"),o.createElement(a.Radio,{isChecked:!t,name:"new-custom-policy",value:"from-scratch",id:"create-new-custom-policy-from-scratch",onChange:_,label:"From scratch"}),o.createElement(a.Radio,{isChecked:t,name:"new-custom-policy",value:"as-copy",id:"create-new-custom-policy-as-copy",onChange:O,label:"As a copy of existing Custom Policy"}),t&&o.createElement(o.Fragment,null,o.createElement(u.CopyFromPolicy,{onSelect:E}))))};t.createCustomPolicyStep=function(e){return r({name:c.Messages.wizardCreatePolicy,component:o.createElement(m,null),validationSchema:d.object().shape({isValid:d.boolean().oneOf([!0])})},e)}},753:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(249),a=n(321),l=n(314),c=n(129),u=n(352),s=n(353);t.CopyFromPolicy=function(e){var t,n=a.usePolicyFilter(),r=a.usePolicyPage(n.debouncedFilters,5),d=u.useSort(),f=c.useGetPoliciesQuery(r.page,!0),p=s.usePolicyRows(f.payload),m=e.onSelect,h=f.payload,v=p.onSelect,y=i.useCallback((function(e,t,n){v(e,t,n),h&&n&&m(h[t])}),[m,v,h]);return i.createElement(i.Fragment,null,i.createElement(o.PolicyToolbar,{onPaginationChanged:r.changePage,page:r.currentPage,pageCount:null===(t=f.payload)||void 0===t?void 0:t.length,perPage:r.itemsPerPage,showPerPageOptions:!1,hideActions:!0,hideBulkSelect:!0,filterElements:n.filters,setFilterElements:n.setFilters,clearFilters:n.clearFilterHandler,count:f.count}),i.createElement(l.PolicyTable,{columnsToShow:["radioSelect","name","actions"],policies:p.rows,onSelect:y,loading:f.loading,loadingRowCount:5,onSort:d.onSort,sortBy:d.sortBy}))}},754:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=n(27),l=n(111),c=n(112),u=n(86),s=function(){return o.createElement(a.Form,null,o.createElement(a.Title,{headingLevel:"h4",size:"xl"},u.Messages.wizardDetails),o.createElement(l.FormTextInput,{isRequired:!0,label:"Name",type:"text",name:"name",id:"name"}),o.createElement(l.FormTextInput,{label:"Description",type:"text",id:"description",name:"description"}))};t.createDetailsStep=function(e){return r({name:u.Messages.wizardDetails,component:o.createElement(s,null),validationSchema:c.PolicyFormDetails},e)}},755:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=n(65),l=n(27),c=n(142);t.Checkbox=function(e){var t=a.useField(r(r({},e),{type:"checkbox"})),n=t[0],i=t[1],u=!i.error||!i.touched;return o.createElement(l.FormGroup,{fieldId:e.id,helperTextInvalid:i.error,isRequired:e.isRequired,isValid:u,label:e.label},o.createElement(l.Checkbox,r({isChecked:n.checked},e,n,{isValid:u,onChange:c.onChangePFAdapter(n)})))}},756:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=n(65),l=n(27),c=n(142);t.FormSelect=function(e){var t=a.useField(r({},e)),n=t[0],i=t[1],u=!i.error||!i.touched;return o.createElement(l.FormGroup,{fieldId:e.id,helperTextInvalid:i.error,isRequired:e.isRequired,isValid:u,label:e.label},o.createElement(l.FormSelect,r({},e,n,{onChange:c.onChangePFAdapter(n),isValid:u}),e.children))}},757:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(1)),l=n(65),c=n(27),u=n(142);t.Switch=function(e){var t=l.useField(r(r({},e),{type:"checkbox"})),n=t[0],o=t[1],s=e.labelOn,d=i(e,["labelOn"]),f=!o.error||!o.touched;return a.createElement(c.FormGroup,{fieldId:e.id,helperTextInvalid:o.error,isRequired:e.isRequired,isValid:f,label:e.label},a.createElement("div",null,a.createElement(c.Switch,r({isChecked:n.checked},d,n,{label:s,onChange:u.onChangePFAdapter(n)}))))}},758:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=n(65),l=n(27),c=n(142);t.FormTextInput=function(e){var t=a.useField(r({},e)),n=t[0],i=t[1],u=!i.error||!i.touched;return o.createElement(l.FormGroup,{fieldId:e.id,helperTextInvalid:i.error,isRequired:e.isRequired,isValid:u,label:e.label},o.createElement(l.TextInput,r({},e,n,{value:n.value||"",isValid:u,onChange:c.onChangePFAdapter(n)})))}},759:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(760);t.ActionSchema=r.ActionSchema;var i=n(761);t.ActionEmailSchema=i.ActionEmailSchema;var o=n(762);t.ActionWebhookSchema=o.ActionWebhookSchema},760:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(87));t.ActionSchema=i.object().shape({type:i.mixed().required("Specify the action type")})},761:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(87));t.ActionEmailSchema=i.object().shape({type:i.mixed()})},762:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(87));t.ActionWebhookSchema=i.object().shape({type:i.mixed(),endpoint:i.string().url("The url for the endpoint is not valid").required("Specify the endpoint url").trim()})},763:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=n(27),l=n(113),c=n(111),u=n(132),s=n(112),d=n(65),f=n(66),p=n(128),m=n(86),h=f.style({marginTop:"auto",marginBottom:"auto"}),v=function(e){return e.changed?null:e.isValid?o.createElement(o.Fragment,null,o.createElement(l.CheckCircleIcon,{className:h,color:p.GlobalSuccessColor200}),o.createElement("div",{className:h},"Condition is valid")):e.error?o.createElement(o.Fragment,null,o.createElement(l.ExclamationCircleIcon,{className:h,color:p.GlobalDangerColor100}),o.createElement("div",{className:h},"Invalid condition"),o.createElement("div",{className:h}," ",e.error," ")):null},y=function(){var e,t=o.useContext(u.WizardContext),n=d.useFormikContext().values;return o.createElement(a.Form,null,o.createElement(a.Title,{headingLevel:"h4",size:"xl"},m.Messages.wizardConditions),o.createElement(c.FormTextInput,{isRequired:!0,label:"Condition text",type:"text",id:"conditions",name:"conditions",placeholder:'arch = "x86_64"'}),o.createElement(a.ActionGroup,null,n.conditions&&""!==n.conditions&&o.createElement(o.Fragment,null,o.createElement(a.Button,{onClick:function(){t.triggerAction(u.WizardActionType.VALIDATE_CONDITION)},variant:a.ButtonVariant.secondary},"Test condition"),o.createElement(v,r({},t.verifyResponse,{changed:(null===(e=t.verifyResponse.policy)||void 0===e?void 0:e.conditions)!==n.conditions})))))};t.createConditionsStep=function(e){return r({name:m.Messages.wizardConditions,component:o.createElement(y,null),validationSchema:s.PolicyFormConditions,isValid:function(e,t){var n;return t.conditions===(null===(n=e.verifyResponse.policy)||void 0===n?void 0:n.conditions)&&e.verifyResponse.isValid}},e)}},764:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=n(27),l=n(112),c=n(65),u=n(354),s=n(86),d=function(){var e,t=c.useFormikContext(),n=t.validateForm,r=null===(e=t.values.actions)||void 0===e?void 0:e.length;return o.useEffect((function(){n()}),[n,r]),o.createElement(a.Form,null,o.createElement(a.Title,{headingLevel:"h4",size:"xl"},s.Messages.wizardActions),o.createElement(c.FieldArray,{name:"actions"},(function(e){return o.createElement(u.ActionsForm,{id:"actions",name:"actions",actions:e.form.values.actions,arrayHelpers:e})})))};t.createActionsStep=function(e){return r({name:s.Messages.wizardActions,component:o.createElement(d,null),validationSchema:l.PolicyFormActions},e)}},765:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=n(130),l=n(766),c=n(767);t.ActionForm=function(e){var t,n;switch((null===(t=e.action)||void 0===t?void 0:t.type)||void 0){case a.ActionType.EMAIL:return o.createElement(l.ActionEmailForm,r({},e));case a.ActionType.WEBHOOK:return o.createElement(c.ActionWebhookForm,r({},e));case void 0:return null;default:throw new Error("Unexpected action type:["+(null===(n=e.action)||void 0===n?void 0:n.type)+"]")}}},766:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionEmailForm=function(e){return null}},767:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(111),o=r(n(1));t.ActionWebhookForm=function(e){var t=e.prefix+".endpoint";return o.createElement(o.Fragment,null,o.createElement(i.FormTextInput,{isReadOnly:e.isReadOnly,type:"text",name:t,id:t,label:"Endpoint",isRequired:!0}))}},768:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),a=n(65),l=n(132),c=n(111),u=n(27),s=n(354),d=n(112),f=n(1),p=n(128),m=n(113),h=n(66),v=n(86),y=h.style({marginRight:5}),b=function(){var e=f.useContext(l.WizardContext);return o.createElement(o.Fragment,null,o.createElement(u.Form,null,o.createElement(u.Title,{headingLevel:"h4",size:"xl"},v.Messages.wizardReview),o.createElement(c.Switch,{isDisabled:e.isLoading,type:"checkbox",id:"isEnabled",name:"isEnabled",label:"Activate Policy?"}),o.createElement(c.FormTextInput,{isReadOnly:!0,label:"Name",type:"text",name:"name",id:"name"}),o.createElement(c.FormTextInput,{isReadOnly:!0,label:"Description",type:"text",id:"description",name:"description"}),o.createElement(c.FormTextInput,{isReadOnly:!0,label:"Condition text",type:"text",id:"conditions",name:"conditions"}),o.createElement(a.FieldArray,{name:"actions"},(function(e){return o.createElement(s.ActionsForm,{id:"actions",name:"actions",isReadOnly:!0,actions:e.form.values.actions,arrayHelpers:e})})),e.createResponse.error&&o.createElement(u.Split,null,o.createElement(u.SplitItem,null,o.createElement(m.ExclamationCircleIcon,{className:y,color:p.GlobalDangerColor100})),o.createElement(u.SplitItem,null," ",e.createResponse.error," "))))};t.createReviewStep=function(e){return r({name:v.Messages.wizardReview,component:o.createElement(b,null),validationSchema:d.PolicyFormSchema},e)}},769:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(27),a=n(210),l=n(66).style({marginTop:"auto",marginBottom:14});t.PolicyWizardFooter=function(e){return i.createElement(o.WizardFooter,null,i.createElement(o.WizardContextConsumer,null,(function(t){var n=t;return i.createElement(i.Fragment,null,i.createElement(o.Button,{variant:o.ButtonVariant.primary,type:"submit",onClick:n.onNext,isDisabled:e.isLoading||!n.activeStep.enableNext},n.activeStep.nextButtonText||"Next"),!n.activeStep.hideBackButton&&i.createElement(o.Button,{variant:o.ButtonVariant.secondary,onClick:n.onBack,isDisabled:0===n.activeStep.id||e.isLoading},"Back"),!n.activeStep.hideCancelButton&&i.createElement(o.Button,{variant:o.ButtonVariant.link,onClick:n.onClose,isDisabled:e.isLoading},"Cancel"),e.isLoading&&i.createElement("div",{className:l},e.loadingText," ",i.createElement(a.Spinner,{size:"md"})))})))}},771:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(113),i=n(128),o={icon:r.ExclamationCircleIcon,iconColor:i.GlobalDangerColor200,title:"No permission to view this page",content:"You do not have permission to view this page"};t.policyTableError=function(e,t,n,a){if(!e)return o;if(n)switch(a){case 404:return{icon:r.ExclamationCircleIcon,iconColor:i.GlobalDangerColor200,title:"Not found",content:"The request did not provide any results, try to remove some filters and try again",action:t.clearAllFiltersAndTryAgain,actionLabel:"Clear all filters"};case 401:return{icon:r.ExclamationCircleIcon,iconColor:i.GlobalDangerColor200,title:"Refresh your browser",content:"Your session expired while using the application",action:t.refreshPage,actionLabel:"Reload page"};case 403:return o;case 500:return{icon:r.ExclamationCircleIcon,iconColor:i.GlobalDangerColor200,title:"Internal server error",content:"The server was unable to process the request, please try again.",action:t.tryAgain,actionLabel:"Try again"};default:return{icon:r.ExclamationCircleIcon,iconColor:i.GlobalDangerColor200,title:"Unable to connect",content:"There was an error retrieving data. Check your connection and try again.",action:t.tryAgain,actionLabel:"Try again"}}}},772:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(27),a=n(129),l=n(210),c=n(355);t.DeletePolicy=function(e){var t=e.policies,n=e.onClose,r=a.useBulkDeletePolicyMutation(),u=r.mutate,s=r.loading,d=i.useCallback((function(){n(!1)}),[n]),f=i.useCallback((function(){if(!t)throw Error("Policy has not been set");u(t).then((function(e){var r=e.filter((function(e){var t;return null===(t=e)||void 0===t?void 0:t.error})).map((function(e){var t;return null===(t=e)||void 0===t?void 0:t.errorObject}));r.length>0&&(1===r.length?c.addDangerNotification("Error deleting policy","There was an error when trying to delete a policy."):c.addDangerNotification("Error deleting policies","There was an error when trying to delete "+r.length+" policy.")),r.length!==t.length&&n(!0)}))}),[u,t,n]),p=i.useMemo((function(){return[i.createElement(o.Button,{key:"confirm",variant:o.ButtonVariant.danger,onClick:f,isDisabled:s},s?i.createElement(l.Spinner,{size:"md"}):"Delete"),i.createElement(o.Button,{key:"cancel",variant:o.ButtonVariant.link,onClick:d,isDisabled:s},"Cancel")]}),[s,d,f]);return e.policies&&0!==e.policies.length?i.createElement(o.Modal,{title:"Delete "+(1===e.policies.length?"policy":"policies"),isOpen:!0,onClose:d,actions:p,isFooterLeftAligned:!0,isSmall:!0},1===e.policies.length?i.createElement(i.Fragment,null,"Do you want to delete the policy: ",e.policies[0].name," ?"):i.createElement(i.Fragment,null,"Do you want to delete the selected(",e.policies.length,") policies?")):null}},773:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1)),o=n(124),a=n(27);t.AppSkeleton=function(){return i.createElement(i.Fragment,null,i.createElement(o.PageHeader,null,i.createElement("div",{className:"pf-c-content"},i.createElement(o.PageHeaderTitle,{title:i.createElement(o.Skeleton,{size:"sm"})}))),i.createElement(o.Main,null,i.createElement(o.Section,null,i.createElement(a.Bullseye,null,i.createElement(o.Spinner,{centered:!0})))))}},774:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(122),i=n(256);t.client=r.createClient({requestInterceptors:[function(e){return function(e){return i.getInsights().then((function(e){return e.chrome.auth.getUser()})).then((function(){return e}))}}]})},86:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.tableNeverRun="Never",e.tableNoActions="No actions configured.",e.tableNoConditions="No conditions configured.",e.tableNoDescription="--",e.tableTitle="Custom Policies",e.wizardActions="Actions",e.wizardConditions="Conditions",e.wizardCreatePolicy="Create Custom Policy",e.wizardDetails="Details",e.wizardReview="Review",e}();t.Messages=r}});
//# sourceMappingURL=App.js.map