!function(e){function t(t){for(var r,n,o=t[0],a=t[1],s=t[2],l=0,c=[];l<o.length;l++)n=o[l],Object.prototype.hasOwnProperty.call(I,n)&&I[n]&&c.push(I[n][0]),I[n]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(k&&k(t);c.length;)c.shift()();return M.push.apply(M,s||[]),i()}function i(){for(var e,t=0;t<M.length;t++){for(var i=M[t],r=!0,n=1;n<i.length;n++){var o=i[n];0!==I[o]&&(r=!1)}r&&(M.splice(t--,1),e=N(N.s=i[0]))}return e}var r=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!P[e]||!b[e])return;for(var i in b[e]=!1,t)Object.prototype.hasOwnProperty.call(t,i)&&(y[i]=t[i]);0==--_&&0===E&&C()}(e,t),r&&r(e,t)};var n,o=!0,a="3e180409369f47cd8e37",s=1e4,l={},c=[],u=[];function d(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,i){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=i||function(){};else t._acceptedDependencies[e]=i||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var i=0;i<e.length;i++)t._declinedDependencies[e[i]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var i=t._disposeHandlers.indexOf(e);i>=0&&t._disposeHandlers.splice(i,1)},check:T,apply:x,status:function(e){if(!e)return m;p.push(e)},addStatusHandler:function(e){p.push(e)},removeStatusHandler:function(e){var t=p.indexOf(e);t>=0&&p.splice(t,1)},data:l[e]};return n=void 0,t}var p=[],m="idle";function f(e){m=e;for(var t=0;t<p.length;t++)p[t].call(null,e)}var h,y,g,_=0,E=0,v={},b={},P={};function O(e){return+e+""===e?+e:e}function T(e){if("idle"!==m)throw new Error("check() is only allowed in idle status");return o=e,f("check"),(t=s,t=t||1e4,new Promise((function(e,i){if("undefined"==typeof XMLHttpRequest)return i(new Error("No browser support"));try{var r=new XMLHttpRequest,n=N.p+""+a+".hot-update.json";r.open("GET",n,!0),r.timeout=t,r.send(null)}catch(e){return i(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)i(new Error("Manifest request to "+n+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)i(new Error("Manifest request to "+n+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void i(e)}e(t)}}}))).then((function(e){if(!e)return f("idle"),null;b={},v={},P=e.c,g=e.h,f("prepare");var t=new Promise((function(e,t){h={resolve:e,reject:t}}));for(var i in y={},I)S(i);return"prepare"===m&&0===E&&0===_&&C(),t}));var t}function S(e){P[e]?(b[e]=!0,_++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=N.p+""+e+"."+a+".hot-update.js",document.head.appendChild(t)}(e)):v[e]=!0}function C(){f("ready");var e=h;if(h=null,e)if(o)Promise.resolve().then((function(){return x(o)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var i in y)Object.prototype.hasOwnProperty.call(y,i)&&t.push(O(i));e.resolve(t)}}function x(t){if("ready"!==m)throw new Error("apply() is only allowed in ready status");var i,r,n,o,s;function u(e){for(var t=[e],i={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var n=r.pop(),a=n.id,s=n.chain;if((o=A[a])&&!o.hot._selfAccepted){if(o.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:a};if(o.hot._main)return{type:"unaccepted",chain:s,moduleId:a};for(var l=0;l<o.parents.length;l++){var c=o.parents[l],u=A[c];if(u){if(u.hot._declinedDependencies[a])return{type:"declined",chain:s.concat([c]),moduleId:a,parentId:c};-1===t.indexOf(c)&&(u.hot._acceptedDependencies[a]?(i[c]||(i[c]=[]),d(i[c],[a])):(delete i[c],t.push(c),r.push({chain:s.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:i}}function d(e,t){for(var i=0;i<t.length;i++){var r=t[i];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var p={},h=[],_={},E=function(){console.warn("[HMR] unexpected require("+b.moduleId+") to disposed module")};for(var v in y)if(Object.prototype.hasOwnProperty.call(y,v)){var b;s=O(v);var T=!1,S=!1,C=!1,x="";switch((b=y[v]?u(s):{type:"disposed",moduleId:v}).chain&&(x="\nUpdate propagation: "+b.chain.join(" -> ")),b.type){case"self-declined":t.onDeclined&&t.onDeclined(b),t.ignoreDeclined||(T=new Error("Aborted because of self decline: "+b.moduleId+x));break;case"declined":t.onDeclined&&t.onDeclined(b),t.ignoreDeclined||(T=new Error("Aborted because of declined dependency: "+b.moduleId+" in "+b.parentId+x));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(b),t.ignoreUnaccepted||(T=new Error("Aborted because "+s+" is not accepted"+x));break;case"accepted":t.onAccepted&&t.onAccepted(b),S=!0;break;case"disposed":t.onDisposed&&t.onDisposed(b),C=!0;break;default:throw new Error("Unexception type "+b.type)}if(T)return f("abort"),Promise.reject(T);if(S)for(s in _[s]=y[s],d(h,b.outdatedModules),b.outdatedDependencies)Object.prototype.hasOwnProperty.call(b.outdatedDependencies,s)&&(p[s]||(p[s]=[]),d(p[s],b.outdatedDependencies[s]));C&&(d(h,[b.moduleId]),_[s]=E)}var M,w=[];for(r=0;r<h.length;r++)s=h[r],A[s]&&A[s].hot._selfAccepted&&_[s]!==E&&w.push({module:s,errorHandler:A[s].hot._selfAccepted});f("dispose"),Object.keys(P).forEach((function(e){!1===P[e]&&function(e){delete I[e]}(e)}));for(var j,R,k=h.slice();k.length>0;)if(s=k.pop(),o=A[s]){var D={},L=o.hot._disposeHandlers;for(n=0;n<L.length;n++)(i=L[n])(D);for(l[s]=D,o.hot.active=!1,delete A[s],delete p[s],n=0;n<o.children.length;n++){var F=A[o.children[n]];F&&((M=F.parents.indexOf(s))>=0&&F.parents.splice(M,1))}}for(s in p)if(Object.prototype.hasOwnProperty.call(p,s)&&(o=A[s]))for(R=p[s],n=0;n<R.length;n++)j=R[n],(M=o.children.indexOf(j))>=0&&o.children.splice(M,1);for(s in f("apply"),a=g,_)Object.prototype.hasOwnProperty.call(_,s)&&(e[s]=_[s]);var B=null;for(s in p)if(Object.prototype.hasOwnProperty.call(p,s)&&(o=A[s])){R=p[s];var z=[];for(r=0;r<R.length;r++)if(j=R[r],i=o.hot._acceptedDependencies[j]){if(-1!==z.indexOf(i))continue;z.push(i)}for(r=0;r<z.length;r++){i=z[r];try{i(R)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:s,dependencyId:R[r],error:e}),t.ignoreErrored||B||(B=e)}}}for(r=0;r<w.length;r++){var U=w[r];s=U.module,c=[s];try{N(s)}catch(e){if("function"==typeof U.errorHandler)try{U.errorHandler(e)}catch(i){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:s,error:i,originalError:e}),t.ignoreErrored||B||(B=i),B||(B=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:s,error:e}),t.ignoreErrored||B||(B=e)}}return B?(f("fail"),Promise.reject(B)):(f("idle"),new Promise((function(e){e(h)})))}var A={},I={0:0},M=[];function N(t){if(A[t])return A[t].exports;var i=A[t]={i:t,l:!1,exports:{},hot:d(t),parents:(u=c,c=[],u),children:[]};return e[t].call(i.exports,i,i.exports,function(e){var t=A[e];if(!t)return N;var i=function(i){return t.hot.active?(A[i]?-1===A[i].parents.indexOf(e)&&A[i].parents.push(e):(c=[e],n=i),-1===t.children.indexOf(i)&&t.children.push(i)):(console.warn("[HMR] unexpected require("+i+") from disposed module "+e),c=[]),N(i)},r=function(e){return{configurable:!0,enumerable:!0,get:function(){return N[e]},set:function(t){N[e]=t}}};for(var o in N)Object.prototype.hasOwnProperty.call(N,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(i,o,r(o));return i.e=function(e){return"ready"===m&&f("prepare"),E++,N.e(e).then(t,(function(e){throw t(),e}));function t(){E--,"prepare"===m&&(v[e]||S(e),0===E&&0===_&&C())}},i.t=function(e,t){return 1&t&&(e=i(e)),N.t(e,-2&t)},i}(t)),i.l=!0,i.exports}N.m=e,N.c=A,N.d=function(e,t,i){N.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},N.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},N.t=function(e,t){if(1&t&&(e=N(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(N.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)N.d(i,r,function(t){return e[t]}.bind(null,r));return i},N.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return N.d(t,"a",t),t},N.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},N.p="/beta/apps/policies/",N.h=function(){return a};var w=window.webpackJsonp=window.webpackJsonp||[],j=w.push.bind(w);w.push=t,w=w.slice();for(var R=0;R<w.length;R++)t(w[R]);var k=j;M.push([530,1,3,2,4]),i()}({121:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(98),s=i(38),l=i(488),c=i(51),u=s.style({paddingTop:l.calc(`${a.global_spacer_3xl.value} - var(--pf-c-page__main-section--PaddingTop)`)});t.EmptyStateSection=e=>n.createElement(o.EmptyState,Object.assign({variant:o.EmptyStateVariant.full,className:`${u} ${e.className?e.className:""} `},c.getOuiaProps("Policy/EmptyState",e)),e.icon&&n.createElement(o.EmptyStateIcon,{icon:e.icon,color:e.iconColor}),n.createElement(o.Title,{headingLevel:"h5",size:"lg"},e.title),n.createElement(o.EmptyStateBody,null,e.content),e.actionNode,e.actionLabel&&n.createElement(o.Button,{variant:"primary",onClick:e.action,isDisabled:!e.action},e.actionLabel))},123:function(e,t,i){"use strict";var r=this&&this.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(17),a=n(i(337)),s=n(i(206)),l=i(347),c=i(73);t.toServerAction=e=>e.map(e=>{if(!e||!e.type)return"";const t=`${e.type}`;switch(e.type){case c.ActionType.NOTIFICATION:case c.ActionType.EMAIL:break;default:o.assertNever(e.type)}return t}).join(";"),t.fromServerActions=e=>{if(!e||""===e)return[];const t=[];for(const i of e.split(";")){const[e]=i.split(" ",2);if("webhook"!==e)switch(e){case c.ActionType.NOTIFICATION:t.push({type:c.ActionType.NOTIFICATION});break;case c.ActionType.EMAIL:t.push({type:c.ActionType.EMAIL});break;default:throw Error(`Unknown action.type=${e} found`)}}return t},t.toServerPolicy=e=>{const{mtime:i,ctime:n}=e,o=r(e,["mtime","ctime"]);return Object.assign(Object.assign({},o),{name:e.name||"",conditions:e.conditions||"",isEnabled:void 0!==e.isEnabled&&e.isEnabled,actions:e.actions?t.toServerAction(e.actions):""})},t.toPolicy=e=>Object.assign(Object.assign({},e),{id:e.id?e.id:"",description:e.description?e.description:"",isEnabled:!!e.isEnabled&&e.isEnabled,actions:t.fromServerActions(e.actions),mtime:e.mtime?a.default(e.mtime):new Date(Date.now()),ctime:e.ctime?a.default(e.ctime):new Date(Date.now()),lastTriggered:e.lastTriggered?s.default(e.lastTriggered/1e3):void 0}),t.toPolicies=e=>e.data?e.data.map(t.toPolicy):[],t.makeCopyOfPolicy=e=>{return Object.assign(Object.assign({},e),{name:`Copy of ${e.name.slice(0,l.maxPolicyNameLength-"Copy of ".length)}`,mtime:void 0,lastTriggered:void 0,ctime:void 0,id:void 0})}},142:function(e,t,i){"use strict";var r=this&&this.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(i(0)),s=i(89),l=i(741),c=o(i(742)),u=i(970);t.linkTo={listPage:()=>"/list",policyDetail:e=>`/policy/${e}`};const d=[{path:t.linkTo.listPage(),component:c.default,rootClass:"list"},{path:t.linkTo.policyDetail(":policyId"),component:u.PolicyDetail,rootClass:"policy"}],p=e=>{const{rootClass:t}=e,i=r(e,["rootClass"]),n=document.getElementById("root");if(!n)throw new Error("Root element not found");return n.removeAttribute("class"),n.classList.add(`page__${t}`,"pf-c-page__main"),n.setAttribute("role","main"),a.createElement(l.ErrorPage,null,a.createElement(s.Route,Object.assign({},i)))};t.Routes=()=>a.createElement(s.Switch,null,d.map(e=>a.createElement(p,{key:e.path,rootClass:e.rootClass,component:e.component,path:e.path})),a.createElement(s.Redirect,{to:t.linkTo.listPage()}))},156:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=r(i(143));t.AlwaysValid=o.object(),function(e){e.SAVE="CREATE",e.VALIDATE_CONDITION="VALIDATE_CONDITION",e.VALIDATE_NAME="VALIDATE_NAME",e.NONE="NONE"}(t.WizardActionType||(t.WizardActionType={})),t.WizardContext=n.createContext({isLoading:!1,isFormValid:!1,triggerAction:()=>{throw Error("Action executed without WizardContext")},verifyResponse:{isValid:!1},createResponse:{created:!1},setVerifyResponse:()=>{throw Error("setVerifyResponse executed without WizardContext")},setMaxStep:()=>{throw Error("setMaxStep executed without a WizardContext")}})},160:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(17);t.withBaseUrl=e=>`/api/policies/v1.0${e}`;const n={appId:"policies",defaultElementsPerPage:20,apis:{version:"v1.0",urls:{base:"/api/policies/v1.0",userSettings:{email:t.withBaseUrl("/user-config/email-preference")}}},pages:{emailPreferences:()=>r.localUrl("/user-preferences/email",r.getInsights().chrome.isBeta()),notifications:()=>r.localUrl("/settings/notifications",r.getInsights().chrome.isBeta()),factsDocumentation:"https://access.redhat.com/documentation/en-us/red_hat_insights/2020-04/html/monitoring_and_reacting_to_configuration_changes_using_policies/appendix-policies#facts-and-functions"}};t.default=n},175:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=i(73),o=r(i(143)),a=i(143),s=i(347),l=i(861),c=i(17),u=i(865),d=(e,t,i)=>{const r=`Only one ${t} action is allowed`;return[`one-${i}`,r,t=>{const n=t&&t.reduce((t,i,r)=>{var n;return(null===(n=i)||void 0===n?void 0:n.type)===e?t.concat([r]):t},[]);if(!n||n.length<=1)return!0;const o=new a.ValidationError("","","actions","");return o.inner=n.map(e=>new a.ValidationError(r,i,`actions.${e}.type`)),o}]};t.PolicyFormDetails=o.object().shape({description:o.string().notRequired().trim(),isEnabled:o.boolean().notRequired(),name:o.string().required("Write a name for this Policy").max(s.maxPolicyNameLength).trim()}),t.PolicyFormActions=o.object().shape({actions:o.array(o.lazy(e=>{var t;if((null===(t=e)||void 0===t?void 0:t.type)&&u.isAction(e)){const t=e.type;switch(t){case n.ActionType.EMAIL:return l.ActionEmailSchema;case n.ActionType.NOTIFICATION:return l.ActionNotificationSchema;default:c.assertNever(t)}}return l.ActionSchema})).test(...d(n.ActionType.EMAIL,"Email","email")).test(...d(n.ActionType.NOTIFICATION,"Hook","notification"))}),t.PolicyFormConditions=o.object().shape({conditions:o.string().required("Enter a condition for the policy.").trim()}),t.PolicyFormSchema=o.object().concat(t.PolicyFormDetails).concat(t.PolicyFormActions).concat(t.PolicyFormConditions)},207:function(e,t,i){"use strict";function r(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),r(i(752)),r(i(753)),r(i(754))},228:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0));t.AppContext=n.createContext({rbac:{canReadAll:!1,canWriteAll:!1},userSettings:{settings:void 0,isSubscribedForNotifications:!1,refresh:()=>{console.error("Using default refresh function")}}})},31:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(73),n={pages:{noPermissions:{title:"Policies",emptyState:{title:"You do not have access to Policies",content:"Contact your organization administrator(s) for more information."}},error:{title:"Policies",emptyState:{title:"Unhandled error",content:"There was a problem trying to process your request.",showDetails:"Show details",actions:{goToIndex:"Go to Policy list"}}},listPage:{title:"Policies",emailOptIn:"One or more of your policies have an email alert. To receive these emails, opt in to email alerts.",emptyState:{title:"No Policies",text:["No policies have been created.","Use self defined-policies to monitor your RHEL configurations with instant or daily alerts."]}},policyDetail:{errorChangingEnabledStatus:{notFound:{title:"Policy not found",text:"The policy does not exists on the server. It may have been deleted by another user."},else:{title:"Enabled status change failed for policy",text:"There was an error setting the enabled status for this policy. Please try again."}},emptyState:{title:"Policy not found",text:"This policy with ID {0} cannot be found. It may have been deleted by another user.",backText:"Back to previous page"},triggerEmptyState:{title:"No triggers found",text:"This policy does not have any recent triggers"},errorState:{title:"Error when loading policy",text:"Error loading this policy.\nError {0}",actionText:"Try again"},triggerErrorState:{title:"Error when loading trigger history for policy",text:"Error loading trigger history for this policy.\nError {0}",actionText:"Try again"}}},components:{actions:{title:"Trigger actions",noActions:"No actions configured."},actionType:{[r.ActionType.EMAIL]:"Email",[r.ActionType.NOTIFICATION]:"Notification"},emailOptIn:{title:"Enable email alerts",switch:"Get emails when a policy runs",link:"Open email preferences"},lastTriggeredCell:{never:"Never",ago:"ago"},actionNotificationForm:{paragraph1:{head:"This action sends a request notification to process the message as configured in ",link:"notification settings.",tail:""},paragraph2:{head:"To configure it for policies, open the notification in the ",link:"notification settings",tail:' and select your preference for sending under "Policies / All".'}}},tables:{policy:{title:"Policies",columns:{name:"Name",triggerActions:"Trigger actions",lastTriggered:"Last triggered"},emptyState:{neverRun:"Never",noConditions:"No conditions configured.",noDescription:"--",notFound:{title:"No matching policies found",content:"No policies matching the selected filter and search terms."}},toolTips:{email:"Send email",hook:"Send to webhook"}},trigger:{title:"Trigger",columns:{date:"Date",system:"System"},emptyState:{notFound:{title:"No matching triggers found",content:"No triggers matching the search terms."}}}},wizards:{policy:{titleNew:"Create a policy",titleEdit:"Edit a policy",description:"Policies are processed on reception of system profile messages. If condition(s) are met, defined action(s) are triggered.",actions:{title:"Trigger actions",emailOptIn:"To receive emails for custom policies, opt in to email alerts from your user preferences."},conditions:{title:"Conditions",valid:"Valid condition",invalid:"Invalid condition",validating:"Validating…",hint:'e.g. facts.arch = "x86_64"',summaryDesc:"Define conditions for your policy using any system facts."},hints:{hintTitle:"What conditions can I define?",hintParagraph1:"You can write a condition for any combination of system facts that apply to your Insights inventory systems.",hintLinkTitle:"Review available system facts",hintSyntaxExamplesSection:"Syntax examples",hintQuestion1:"Is wireshark RPM installed?",hintQuestion1Ans:"facts.installed_packages contains ['wireshark']",hintQuestion2:"Is the release older than RHEL 8.1?",hintQuestion2Ans:"facts.os_release < 8.1",hintQuestion3:"Which of my public cloud instances are missing a tag Owner value set?",hintQuestion3Ans:"facts.cloud_provider in ['alibaba',aws','azure','google'] and not tags.Owner",hintQuestion4:"Is time synchronization configured for RHEL7 and RHEL8?",hintQuestion4Ans:"(facts.os_release >=7 and facts.os_release <8 and not facts.enabled_services contains 'ntpd') or (facts.os_release >=8 and not facts.enabled_services contains 'chronyd')"},createPolicy:{title:"Create Policy"},details:{title:"Policy Details"},review:{title:"Review and enable",enableThisPolicy:"Enable this policy?",policyIsEnabled:"Policy is enabled",policyIsDisabled:"Policy is disabled",policy:{details:"Policy details",name:"Policy name",description:"Description"}}}}};t.Messages=n},336:function(e,t,i){(t=e.exports=i(10)(!1)).i(i(739),""),t.i(i(740),""),t.push([e.i,":root{--ins-color--orange: #ec7a08}button:focus{outline:none}.pf-c-wizard__main-body{max-height:100%}\n",""])},338:function(e,t,i){"use strict";var r=this&&this.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=n(i(0)),a=i(56),s=i(73),l=i(17),c=i(207);t.ActionEmailIcon=a.EnvelopeIcon,t.ActionWebhookIcon=c.WebhookIcon,t.ActionIcon=e=>{const{actionType:i}=e,n=r(e,["actionType"]);switch(i){case s.ActionType.NOTIFICATION:return o.createElement(t.ActionWebhookIcon,Object.assign({},n));case s.ActionType.EMAIL:return o.createElement(t.ActionEmailIcon,Object.assign({},n));case void 0:break;default:l.assertNever(i)}return null}},339:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(92),s=i(17),l=i(340),c=i(207),u=i(38),d=i(51);var p;!function(e){e[e.NONE=0]="NONE",e[e.PAGE=1]="PAGE",e[e.ALL=2]="ALL"}(p=t.SelectionCommand||(t.SelectionCommand={}));const m=u.style({marginLeft:4}),f={[l.PolicyFilterColumn.NAME]:{label:"Name",placeholder:"Filter by name"},[l.PolicyFilterColumn.IS_ACTIVE]:{label:"Enabled",placeholder:"Filter by Enable status",options:{default:"all",exclude:["all"],exclusive:!0,items:[{value:"all",label:n.createElement(n.Fragment,null,"All")},{value:"Enabled",label:n.createElement(n.Fragment,null,n.createElement(c.EnabledPolicyIcon,null)," ",n.createElement("span",{className:m},"Enabled"))},{value:"Disabled",label:n.createElement(n.Fragment,null,n.createElement(c.DisabledPolicyIcon,null)," ",n.createElement("span",{className:m},"Disabled"))}]}}};t.PolicyToolbar=e=>{const{pageCount:t,count:i,page:r,perPage:c,showPerPageOptions:u,onPaginationChanged:m,onPaginationSizeChanged:h,onCreatePolicy:y,onDeletePolicy:g,hideActions:_,onSelectionChanged:E,selectedCount:v,hideBulkSelect:b,onEnablePolicy:P,onDisablePolicy:O,onExport:T}=e,S=s.usePrimaryToolbarFilterConfig(l.PolicyFilterColumn,e.filters,e.setFilters,e.clearFilters,f),C=n.useMemo(()=>{if(b)return;const e=()=>E&&E(p.NONE),r=()=>E&&E(p.ALL);return{count:v||0,items:[{title:"Select none (0)",onClick:e},{title:`Select page (${t||0})`,onClick:()=>E&&E(p.PAGE)},{title:`Select all (${i||0})`,onClick:r}],checked:v===i,onSelect:t=>t?r():e()}},[v,t,E,b,i]),x=n.useMemo(()=>({itemCount:i||0,page:r,perPage:c,perPageOptions:u?void 0:[],onSetPage:m,onFirstClick:m,onPreviousClick:m,onNextClick:m,onLastClick:m,onPageInput:m,onPerPageSelect:h,isCompact:!0,variant:o.PaginationVariant.top}),[u,i,r,c,m,h]),A=n.useMemo(()=>({itemCount:i||0,page:r,perPage:c,perPageOptions:u?void 0:[],onSetPage:m,onFirstClick:m,onPreviousClick:m,onNextClick:m,onLastClick:m,onPageInput:m,onPerPageSelect:h,isCompact:!1,variant:o.PaginationVariant.bottom}),[u,i,r,c,m,h]),I=n.useMemo(()=>{if(_)return;return{actions:[{key:"create-policy",label:"Create policy",onClick:y,props:{isDisabled:!y}},{key:"delete-policy",label:"Delete",onClick:g,props:{isDisabled:!(v&&g)}},{key:"enable-policy",label:"Enable",onClick:P,props:{isDisabled:!(v&&P)}},{key:"disable-policy",label:"Disable",onClick:O,props:{isDisabled:!(v&&O)}}],kebabToggleProps:{isDisabled:!1}}},[y,g,v,_,O,P]),M=n.useMemo(()=>{if(T)return{extraItems:[],onSelect:T}},[T]);return n.createElement("div",Object.assign({},d.getOuiaProps("Policy/DualToolbar",e)),n.createElement(a.PrimaryToolbar,{bulkSelect:C,filterConfig:S.filterConfig,pagination:x,actionsConfig:I,activeFiltersConfig:S.activeFiltersConfig,exportConfig:M}),e.children,e.showBottomPagination&&n.createElement(a.PrimaryToolbar,{pagination:A}))}},340:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NAME="name",e.IS_ACTIVE="is_enabled"}(t.PolicyFilterColumn||(t.PolicyFilterColumn={}))},347:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maxPolicyNameLength=150},362:function(e,t,i){"use strict";function r(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),r(i(948)),r(i(949)),r(i(950)),r(i(952))},363:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(17),n=i(362),o=i(123),a=i(63),s=i(97);t.actionCreator=e=>s.actionGetPolicies(r.pageToQuery(e)),t.useGetPoliciesQuery=(e,i)=>r.useTransformQueryResponse(n.useNewPaginatedQuery(t.actionCreator(e),i),o.toPolicies);const l=e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.length};t.hasPoliciesQueryActionCreator=()=>s.actionGetPolicies(r.pageToQuery(r.Page.of(1,1))),t.useHasPoliciesQuery=()=>r.useTransformQueryResponse(a.useQuery(t.hasPoliciesQueryActionCreator(),!1),l)},364:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NAME="name"}(t.TriggerFilterColumn||(t.TriggerFilterColumn={}))},413:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EMAIL="email",e.NOTIFICATION="notification"}(t.ActionType||(t.ActionType={}))},415:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(365),a=i(23),s=i(92),l=i(17),c=i(416),u=i(31),d=i(756),p=i(757),m=i(121),f=i(38),h=i(133),y=i(142),g=i(51),_=f.style({backgroundColor:"white"}),E=["name","actions","is_enabled"],v=(e,t,i,r)=>t.indexOf(i[e])+r;t.PolicyTable=e=>{const{onSort:t,error:i,policies:r,onCollapse:f,onSelect:b}=e,P=e.columnsToShow||E,O=P.includes("radioSelect");if(O&&!b)throw Error("RadioSelect requires an onSelect");const T=n.useMemo(()=>{const e=t?[o.sortable]:[];return{radioSelect:{title:"",transforms:[]},name:{title:u.Messages.tables.policy.columns.name,transforms:e,cellFormatters:[o.expandable],column:"name"},actions:{title:u.Messages.tables.policy.columns.triggerActions,transforms:[]},is_enabled:{title:u.Messages.tables.policy.columns.lastTriggered,transforms:[],column:"is_enabled"}}},[t]),S=n.useMemo(()=>[f,P.includes("radioSelect")?void 0:b].filter(e=>e).length,[f,b,P]),C=n.useMemo(()=>P.map(e=>T[e]),[T,P]),x=n.useCallback((e,i,r)=>{if(t){const e=((e,t,i)=>t[e-i].column)(i,C,S);e&&t(i,e,r===o.SortByDirection.asc?l.Direction.ASCENDING:l.Direction.DESCENDING)}},[t,C,S]),A=n.useCallback((e,t,i,n)=>{var o;const a=r,s=null===(o=a)||void 0===o?void 0:o.findIndex(e=>e.id===n.id);if(f&&a&&void 0!==s&&-1!==s){const e=a[s];f(e,s,i)}},[r,f]),I=n.useCallback((e,t,i,n)=>{var o;const a=r,s=null===(o=a)||void 0===o?void 0:o.findIndex(e=>e.id===n.id);if(b&&a&&void 0!==s&&-1!==s){const e=a[s];b(e,s,t)}},[r,b]),M=n.useMemo(()=>{if(e.sortBy)return{index:v(e.sortBy.column,C,T,S),direction:e.sortBy.direction===l.Direction.ASCENDING?"asc":"desc"}},[e.sortBy,C,T,S]),N=n.useMemo(()=>e.error||e.loading?void 0:e.actionResolver||void 0,[e.error,e.loading,e.actionResolver]),w=n.useCallback(e=>{if(void 0===e.parent&&N&&e&&r){const t=r.find(t=>t.id===e.id);if(t)return N(t)}return[]},[N,r]),j=n.useMemo(()=>i?[]:((e,t,i,r)=>e?e.reduce((o,s,m)=>(o.push({id:s.id,key:s.id,isOpen:s.isOpen,selected:s.isSelected,cells:t.map(t=>{switch(t){case"actions":return n.createElement(n.Fragment,null,n.createElement(d.ActionsCell,{ouiaId:s.id,actions:s.actions}));case"is_enabled":return n.createElement(n.Fragment,null,n.createElement(p.LastTriggeredCell,{ouiaId:s.id,isEnabled:s.isEnabled,lastTriggered:s.lastTriggered}));case"name":return n.createElement(n.Fragment,null,i?n.createElement(h.Link,{to:y.linkTo.policyDetail(s.id)},s.name):s.name);case"radioSelect":return n.createElement(n.Fragment,null,n.createElement(a.Radio,{id:`${s.id}-table-radio-id`,"aria-label":`Radio select for policy ${s.name}`,name:"policy-table-radio-select",isChecked:s.isSelected,onChange:r?()=>{const t=e.findIndex(e=>e.isSelected);-1!==t&&r(e[t],t,!1),r(s,m,!0)}:void 0}))}l.assertNever(t)})}),o.push({parent:2*m,fullWidth:!0,showSelect:!1,cells:[{title:n.createElement(n.Fragment,null,n.createElement(c.ExpandedContent,{ouiaId:s.id,key:s.id+"-content",description:s.description?s.description:u.Messages.tables.policy.emptyState.noDescription,conditions:s.conditions?s.conditions:u.Messages.tables.policy.emptyState.noConditions,actions:s.actions,created:s.ctime,updated:s.mtime}))}]}),o),[]):[])(r,P,e.linkToDetailPolicy,b),[i,r,P,b,e.linkToDetailPolicy]);return e.loading?n.createElement(s.SkeletonTable,{rowSize:e.loadingRowCount||10,columns:C,paddingColumnSize:S,sortBy:M}):i?n.createElement(m.EmptyStateSection,Object.assign({},i,{className:_})):n.createElement("div",Object.assign({},g.getOuiaProps("Policy/Table",e)),n.createElement(o.Table,{"aria-label":u.Messages.tables.policy.title,cells:C,rows:j,actionResolver:w,onSort:t?x:void 0,onCollapse:f?A:void 0,onSelect:e.error||!b||O?void 0:I,sortBy:M,canSelectAll:!1},n.createElement(o.TableHeader,null),n.createElement(o.TableBody,null)))}},416:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(38),a=i(23),s=i(98),l=i(743),c=i(744),u=i(417),d=i(17),p=i(418),m=i(420),f=i(51),h=o.style({margin:12}),y=o.style({maxWidth:800,marginBottom:12}),g=o.style({marginBottom:12}),_=o.style(Object.assign(Object.assign({backgroundColor:s.global_BackgroundColor_light_300.var},p.padding(18,14)),{margin:5}));t.ExpandedContent=e=>n.createElement(a.Stack,Object.assign({},f.getOuiaProps("Policy/Table/Expanded",e),{className:h}),e.description&&n.createElement(a.StackItem,{className:y},n.createElement(l.Description,{ouiaId:d.ouiaIdConcat(e.ouiaId,"description"),description:e.description})),n.createElement(a.StackItem,{className:g},n.createElement(c.Dates,{ouiaId:d.ouiaIdConcat(e.ouiaId,"dates"),updated:e.updated,created:e.created})),n.createElement(a.StackItem,null,n.createElement(a.Grid,null,n.createElement(a.GridItem,{className:_,span:6},n.createElement(u.Conditions,{ouiaId:d.ouiaIdConcat(e.ouiaId,"conditions"),conditions:e.conditions})),n.createElement(a.GridItem,{className:_,span:6},n.createElement(m.Actions,{ouiaId:d.ouiaIdConcat(e.ouiaId,"actions"),actions:e.actions})))))},417:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(38),s=i(31),l=i(51),c=a.style({marginBottom:5});t.Conditions=e=>n.createElement("div",Object.assign({},l.getOuiaProps("Policy/Table/Expanded/Conditions",e)),n.createElement(o.Title,{headingLevel:"h2",className:c,size:"md"},"Conditions"),n.createElement(o.Text,null,e.conditions||s.Messages.tables.policy.emptyState.noConditions))},420:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(38),s=i(73),l=i(31),c=i(17),u=i(338),d=i(51),p=a.style({marginBottom:5}),m=a.style({marginBottom:5,marginLeft:10,display:"inline"}),f=a.style({marginBottom:10,marginTop:10,marginLeft:10}),h=a.style({marginLeft:25,marginBottom:8,marginTop:8}),y=e=>n.createElement(o.StackItem,{className:f},n.createElement(e.icon,null),n.createElement(o.Title,{headingLevel:"h2",className:m,size:"md"},e.title),e.children&&n.createElement("div",{className:h},e.children));t.Actions=e=>n.createElement(n.Fragment,null,n.createElement(o.Stack,Object.assign({},d.getOuiaProps("Policy/Table/Expanded/Actions",e)),n.createElement(o.StackItem,null,n.createElement(o.Title,{headingLevel:"h2",className:p,size:"md"},l.Messages.components.actions.title)),0===e.actions.length?n.createElement(o.Text,null," ",l.Messages.components.actions.noActions," "):(e=>{const t=[];for(const i in e){const r=e[i];switch(r.type){case s.ActionType.EMAIL:t.push(n.createElement(n.Fragment,{key:i},n.createElement(y,{title:"Send Email",icon:u.ActionEmailIcon})));break;case s.ActionType.NOTIFICATION:t.push(n.createElement(n.Fragment,{key:i},n.createElement(y,{title:"Send to notification",icon:u.ActionWebhookIcon})));break;default:c.assertNever(r)}}return c.join(t,o.Divider)})(e.actions)))},421:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(758),a=i(953),s=i(954),l=r(i(955)),c=i(17),u=i(956),d=i(957);t.formatConditionError=e=>e=(e=e.replace("line 1 ","")).replace(/position (\d+)$/,(e,t)=>`position ${+t+1}`),t.CreatePolicyWizard=e=>{const i=s.useSavePolicyMutation(),r=a.useVerifyPolicyMutation(),p=u.useValidatePolicyNameParametrizedQuery(),m=d.useFacts(),f=n.useCallback(e=>{return(0,p.query)(e).then(e=>{var t;return e.status===l.OK?{created:!1}:{created:!1,error:(null===(t=e.payload)||void 0===t?void 0:t.msg)||`Invalid name (Code: ${e.status})`}})},[p.query]),h=i.loading||r.loading||p.loading;return n.createElement(n.Fragment,null,e.isOpen&&n.createElement(o.PolicyWizard,{initialValue:e.initialValue||{},onClose:()=>{e.close(void 0)},onSave:t=>i.mutate(t).then(i=>{var r;switch(i.status){case l.CREATED:case l.OK:return void 0===t.id?c.addSuccessNotification("Created",`Policy "${t.name}" created`):c.addSuccessNotification("Saved",`Policy "${t.name}" has been updated`),e.close&&e.close(i.payload),{created:!0};case l.NOT_FOUND:if(void 0!==t.id)return{created:!1,error:"This policy cannot be found. It may have been deleted by another user. Your changes cannot be saved."};default:return{created:!1,error:(null===(r=i.payload)||void 0===r?void 0:r.msg)||`Unknown Error when trying to ${void 0===t.id?"create":"update"} the policy: (Code ${i.status})`}}}),onVerify:e=>r.mutate(e).then(i=>{var r,n;if(i.status===l.OK)return{isValid:!0,policy:e};return{isValid:!1,error:((null===(r=i.payload)||void 0===r?void 0:r.msg)?t.formatConditionError(null===(n=i.payload)||void 0===n?void 0:n.msg):void 0)||`Unknown Error when trying to validate: (Code ${i.status})`,policy:e}}),onValidateName:f,showCreateStep:!!e.policiesExist&&e.showCreateStep,isLoading:h,facts:m,isEditing:e.isEditing}))}},449:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0));t.CreatePolicyStepContext=n.createContext(void 0)},478:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=i(96),o=i(226),a=i(217),s=i(225),l=i(180),c=i(86),u=i(181),d=i(125),p=i(37),m=i(130),f=r(i(95));class h extends l.Parser{constructor(e){super(e),this._interp=new u.ParserATNSimulator(h._ATN,this)}get vocabulary(){return h.VOCABULARY}get grammarFileName(){return"Expression.g4"}get ruleNames(){return h.ruleNames}get serializedATN(){return h._serializedATN}expression(){let e=new y(this._ctx,this.state);this.enterRule(e,0,h.RULE_expression);try{this.enterOuterAlt(e,1),this.state=26,this.object(0),this.state=27,this.match(h.EOF)}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}object(e){void 0===e&&(e=0);let t=this._ctx,i=this.state,r=new g(this._ctx,i),o=r;this.enterRecursionRule(r,2,h.RULE_object,e);try{let e;switch(this.enterOuterAlt(r,1),this.state=38,this._errHandler.sync(this),this._input.LA(1)){case h.NOT:case h.NEG:this.state=30,this.negative_expr(),this.state=31,this.object(4);break;case h.SIMPLETEXT:case h.STRING:this.state=33,this.expr();break;case h.T__0:this.state=34,this.match(h.T__0),this.state=35,this.object(0),this.state=36,this.match(h.T__1);break;default:throw new s.NoViableAltException(this)}for(this._ctx._stop=this._input.tryLT(-1),this.state=46,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,1,this._ctx);2!==e&&e!==n.ATN.INVALID_ALT_NUMBER;){if(1===e){if(null!=this._parseListeners&&this.triggerExitRuleEvent(),o=r,r=new g(t,i),this.pushNewRecursionContext(r,2,h.RULE_object),this.state=40,!this.precpred(this._ctx,1))throw new a.FailedPredicateException(this,"this.precpred(this._ctx, 1)");this.state=41,this.logical_operator(),this.state=42,this.object(2)}this.state=48,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,1,this._ctx)}}catch(e){if(!(e instanceof d.RecognitionException))throw e;r.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.unrollRecursionContexts(t)}return r}expr(){let e=new _(this._ctx,this.state);this.enterRule(e,4,h.RULE_expr);try{switch(this.state=70,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,2,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=49,this.key();break;case 2:this.enterOuterAlt(e,2),this.state=50,this.key(),this.state=51,this.boolean_operator(),this.state=52,this.value();break;case 3:this.enterOuterAlt(e,3),this.state=54,this.key(),this.state=55,this.numeric_compare_operator(),this.state=56,this.numerical_value();break;case 4:this.enterOuterAlt(e,4),this.state=58,this.key(),this.state=59,this.string_compare_operator(),this.state=60,this.array();break;case 5:this.enterOuterAlt(e,5),this.state=62,this.key(),this.state=63,this.string_compare_operator(),this.state=64,this.value();break;case 6:this.enterOuterAlt(e,6),this.state=66,this.key(),this.state=67,this.array_operator(),this.state=68,this.array()}}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}logical_operator(){let e,t=new E(this._ctx,this.state);this.enterRule(t,6,h.RULE_logical_operator);try{this.enterOuterAlt(t,1),this.state=72,(e=this._input.LA(1))!==h.OR&&e!==h.AND?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}boolean_operator(){let e,t=new v(this._ctx,this.state);this.enterRule(t,8,h.RULE_boolean_operator);try{this.enterOuterAlt(t,1),this.state=74,(e=this._input.LA(1))!==h.EQUAL&&e!==h.NOTEQUAL?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}numeric_compare_operator(){let e,t=new b(this._ctx,this.state);this.enterRule(t,10,h.RULE_numeric_compare_operator);try{this.enterOuterAlt(t,1),this.state=76,0!=(-32&(e=this._input.LA(1)))||0==(1<<e&(1<<h.GT|1<<h.GTE|1<<h.LT|1<<h.LTE))?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}string_compare_operator(){let e,t=new P(this._ctx,this.state);this.enterRule(t,12,h.RULE_string_compare_operator);try{this.enterOuterAlt(t,1),this.state=78,(e=this._input.LA(1))!==h.CONTAINS&&e!==h.MATCHES?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}array_operator(){let e,t=new O(this._ctx,this.state);this.enterRule(t,14,h.RULE_array_operator);try{this.enterOuterAlt(t,1),this.state=80,(e=this._input.LA(1))!==h.CONTAINS&&e!==h.IN?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}array(){let e,t=new T(this._ctx,this.state);this.enterRule(t,16,h.RULE_array);try{switch(this.state=95,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,4,this._ctx)){case 1:for(this.enterOuterAlt(t,1),this.state=82,this.match(h.T__2),this.state=83,this.value(),this.state=88,this._errHandler.sync(this),e=this._input.LA(1);e===h.T__3;)this.state=84,this.match(h.T__3),this.state=85,this.value(),this.state=90,this._errHandler.sync(this),e=this._input.LA(1);this.state=91,this.match(h.T__4);break;case 2:this.enterOuterAlt(t,2),this.state=93,this.match(h.T__2),this.state=94,this.match(h.T__4)}}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}numerical_value(){let e=new S(this._ctx,this.state);this.enterRule(e,18,h.RULE_numerical_value);try{this.enterOuterAlt(e,1),this.state=97,this.match(h.NUMBER)}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}value(){let e,t=new C(this._ctx,this.state);this.enterRule(t,20,h.RULE_value);try{this.enterOuterAlt(t,1),this.state=99,(e=this._input.LA(1))!==h.NUMBER&&e!==h.STRING?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}negative_expr(){let e,t=new x(this._ctx,this.state);this.enterRule(t,22,h.RULE_negative_expr);try{this.enterOuterAlt(t,1),this.state=101,(e=this._input.LA(1))!==h.NOT&&e!==h.NEG?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}key(){let e,t=new A(this._ctx,this.state);this.enterRule(t,24,h.RULE_key);try{this.enterOuterAlt(t,1),this.state=103,(e=this._input.LA(1))!==h.SIMPLETEXT&&e!==h.STRING?this._errHandler.recoverInline(this):(this._input.LA(1)===p.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof d.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}sempred(e,t,i){switch(t){case 1:return this.object_sempred(e,i)}return!0}object_sempred(e,t){switch(t){case 0:return this.precpred(this._ctx,1)}return!0}static get _ATN(){return h.__ATN||(h.__ATN=(new o.ATNDeserializer).deserialize(f.toCharArray(h._serializedATN))),h.__ATN}}t.ExpressionParser=h,h.T__0=1,h.T__1=2,h.T__2=3,h.T__3=4,h.T__4=5,h.OR=6,h.AND=7,h.NOT=8,h.EQUAL=9,h.NOTEQUAL=10,h.CONTAINS=11,h.MATCHES=12,h.NEG=13,h.GT=14,h.GTE=15,h.LT=16,h.LTE=17,h.IN=18,h.NUMBER=19,h.FLOAT=20,h.INTEGER=21,h.SIMPLETEXT=22,h.STRING=23,h.WS=24,h.RULE_expression=0,h.RULE_object=1,h.RULE_expr=2,h.RULE_logical_operator=3,h.RULE_boolean_operator=4,h.RULE_numeric_compare_operator=5,h.RULE_string_compare_operator=6,h.RULE_array_operator=7,h.RULE_array=8,h.RULE_numerical_value=9,h.RULE_value=10,h.RULE_negative_expr=11,h.RULE_key=12,h.ruleNames=["expression","object","expr","logical_operator","boolean_operator","numeric_compare_operator","string_compare_operator","array_operator","array","numerical_value","value","negative_expr","key"],h._LITERAL_NAMES=[void 0,"'('","')'","'['","','","']'",void 0,void 0,void 0,"'='","'!='",void 0,void 0,void 0,"'>'","'>='","'<'","'<='"],h._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,"OR","AND","NOT","EQUAL","NOTEQUAL","CONTAINS","MATCHES","NEG","GT","GTE","LT","LTE","IN","NUMBER","FLOAT","INTEGER","SIMPLETEXT","STRING","WS"],h.VOCABULARY=new m.VocabularyImpl(h._LITERAL_NAMES,h._SYMBOLIC_NAMES,[]),h._serializedATN="줝쪺֍꾺体؇쉁l\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t)\n/\n\f2\vI\n\b\b\t\t\n\n\n\n\nY\n\n\f\n\n\\\v\n\n\n\n\n\nb\n\n\v\v\f\f\r\r\b\n\f\n\b\t\v\f\r\r\r\n\nh(H\bJ\nL\fNPRacegi \b !\r!\"\")#)$%%&&'')((#($)0*+\f+,\b,--/.*/20.011203I4556\n67\f7I899:\f:;\v;I<==>\b>?\n?I@AAB\bBC\fCIDEEF\tFG\nGIH3H4H8H<H@HDIJK\tK\tLM\tM\vNO\tO\rPQ\tQRS\tSTUUZ\fVWWY\fXVY\\ZXZ[[]\\Z]^^b_``baTa_bcddef\tfgh\t\bhij\t\tj(0HZa";class y extends c.ParserRuleContext{object(){return this.getRuleContext(0,g)}EOF(){return this.getToken(h.EOF,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_expression}enterRule(e){e.enterExpression&&e.enterExpression(this)}exitRule(e){e.exitExpression&&e.exitExpression(this)}accept(e){return e.visitExpression?e.visitExpression(this):e.visitChildren(this)}}t.ExpressionContext=y;class g extends c.ParserRuleContext{negative_expr(){return this.tryGetRuleContext(0,x)}object(e){return void 0===e?this.getRuleContexts(g):this.getRuleContext(e,g)}expr(){return this.tryGetRuleContext(0,_)}logical_operator(){return this.tryGetRuleContext(0,E)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_object}enterRule(e){e.enterObject&&e.enterObject(this)}exitRule(e){e.exitObject&&e.exitObject(this)}accept(e){return e.visitObject?e.visitObject(this):e.visitChildren(this)}}t.ObjectContext=g;class _ extends c.ParserRuleContext{key(){return this.getRuleContext(0,A)}boolean_operator(){return this.tryGetRuleContext(0,v)}value(){return this.tryGetRuleContext(0,C)}numeric_compare_operator(){return this.tryGetRuleContext(0,b)}numerical_value(){return this.tryGetRuleContext(0,S)}string_compare_operator(){return this.tryGetRuleContext(0,P)}array(){return this.tryGetRuleContext(0,T)}array_operator(){return this.tryGetRuleContext(0,O)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_expr}enterRule(e){e.enterExpr&&e.enterExpr(this)}exitRule(e){e.exitExpr&&e.exitExpr(this)}accept(e){return e.visitExpr?e.visitExpr(this):e.visitChildren(this)}}t.ExprContext=_;class E extends c.ParserRuleContext{AND(){return this.tryGetToken(h.AND,0)}OR(){return this.tryGetToken(h.OR,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_logical_operator}enterRule(e){e.enterLogical_operator&&e.enterLogical_operator(this)}exitRule(e){e.exitLogical_operator&&e.exitLogical_operator(this)}accept(e){return e.visitLogical_operator?e.visitLogical_operator(this):e.visitChildren(this)}}t.Logical_operatorContext=E;class v extends c.ParserRuleContext{EQUAL(){return this.tryGetToken(h.EQUAL,0)}NOTEQUAL(){return this.tryGetToken(h.NOTEQUAL,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_boolean_operator}enterRule(e){e.enterBoolean_operator&&e.enterBoolean_operator(this)}exitRule(e){e.exitBoolean_operator&&e.exitBoolean_operator(this)}accept(e){return e.visitBoolean_operator?e.visitBoolean_operator(this):e.visitChildren(this)}}t.Boolean_operatorContext=v;class b extends c.ParserRuleContext{GT(){return this.tryGetToken(h.GT,0)}GTE(){return this.tryGetToken(h.GTE,0)}LT(){return this.tryGetToken(h.LT,0)}LTE(){return this.tryGetToken(h.LTE,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_numeric_compare_operator}enterRule(e){e.enterNumeric_compare_operator&&e.enterNumeric_compare_operator(this)}exitRule(e){e.exitNumeric_compare_operator&&e.exitNumeric_compare_operator(this)}accept(e){return e.visitNumeric_compare_operator?e.visitNumeric_compare_operator(this):e.visitChildren(this)}}t.Numeric_compare_operatorContext=b;class P extends c.ParserRuleContext{CONTAINS(){return this.tryGetToken(h.CONTAINS,0)}MATCHES(){return this.tryGetToken(h.MATCHES,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_string_compare_operator}enterRule(e){e.enterString_compare_operator&&e.enterString_compare_operator(this)}exitRule(e){e.exitString_compare_operator&&e.exitString_compare_operator(this)}accept(e){return e.visitString_compare_operator?e.visitString_compare_operator(this):e.visitChildren(this)}}t.String_compare_operatorContext=P;class O extends c.ParserRuleContext{IN(){return this.tryGetToken(h.IN,0)}CONTAINS(){return this.tryGetToken(h.CONTAINS,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_array_operator}enterRule(e){e.enterArray_operator&&e.enterArray_operator(this)}exitRule(e){e.exitArray_operator&&e.exitArray_operator(this)}accept(e){return e.visitArray_operator?e.visitArray_operator(this):e.visitChildren(this)}}t.Array_operatorContext=O;class T extends c.ParserRuleContext{value(e){return void 0===e?this.getRuleContexts(C):this.getRuleContext(e,C)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_array}enterRule(e){e.enterArray&&e.enterArray(this)}exitRule(e){e.exitArray&&e.exitArray(this)}accept(e){return e.visitArray?e.visitArray(this):e.visitChildren(this)}}t.ArrayContext=T;class S extends c.ParserRuleContext{NUMBER(){return this.getToken(h.NUMBER,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_numerical_value}enterRule(e){e.enterNumerical_value&&e.enterNumerical_value(this)}exitRule(e){e.exitNumerical_value&&e.exitNumerical_value(this)}accept(e){return e.visitNumerical_value?e.visitNumerical_value(this):e.visitChildren(this)}}t.Numerical_valueContext=S;class C extends c.ParserRuleContext{NUMBER(){return this.tryGetToken(h.NUMBER,0)}STRING(){return this.tryGetToken(h.STRING,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_value}enterRule(e){e.enterValue&&e.enterValue(this)}exitRule(e){e.exitValue&&e.exitValue(this)}accept(e){return e.visitValue?e.visitValue(this):e.visitChildren(this)}}t.ValueContext=C;class x extends c.ParserRuleContext{NEG(){return this.tryGetToken(h.NEG,0)}NOT(){return this.tryGetToken(h.NOT,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_negative_expr}enterRule(e){e.enterNegative_expr&&e.enterNegative_expr(this)}exitRule(e){e.exitNegative_expr&&e.exitNegative_expr(this)}accept(e){return e.visitNegative_expr?e.visitNegative_expr(this):e.visitChildren(this)}}t.Negative_exprContext=x;class A extends c.ParserRuleContext{SIMPLETEXT(){return this.tryGetToken(h.SIMPLETEXT,0)}STRING(){return this.tryGetToken(h.STRING,0)}constructor(e,t){super(e,t)}get ruleIndex(){return h.RULE_key}enterRule(e){e.enterKey&&e.enterKey(this)}exitRule(e){e.exitKey&&e.exitKey(this)}accept(e){return e.visitKey?e.visitKey(this):e.visitChildren(this)}}t.KeyContext=A},479:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=n(i(0)),a=i(23),s=i(23),l=i(17),c=i(961);t.DeletePolicy=e=>{const{getPolicies:t,onClose:i,onDeleted:n,policy:u}=e,{mutate:d,loading:p}=c.useMassDeletePoliciesMutation(),m=p||e.loading,f=o.useCallback(()=>{i(!1)},[i]),h=o.useCallback(e=>{d(e).then(t=>{var r;let o=t.error?e.length:0;0===o&&(o=e.filter(e=>t.payload&&!t.payload.includes(e)).length,null===(r=t.payload)||void 0===r||r.forEach(e=>n&&n(e))),o>0&&(1===o?l.addDangerNotification("Error deleting policy","There was an error when trying to delete a policy."):l.addDangerNotification("Error deleting policies",`There was an error when trying to delete ${o} policies.`)),o!==e.length&&i(!0)})},[d,i,n]),y=o.useCallback(()=>r(void 0,void 0,void 0,(function*(){if(u)h([u.id]);else{if(!t)throw new Error("Expected policy or getPolicies to bet set");try{const e=yield t();h(e)}catch(e){l.addDangerNotification("Error while deleting","An error occurred while trying to delete the selection, please try again."),console.error("Error while fetching selection",e)}}})),[t,h,u]),g=o.useMemo(()=>[o.createElement(a.Button,{key:"confirm",variant:a.ButtonVariant.danger,onClick:y,isDisabled:m},m?o.createElement(s.Spinner,{size:"md"}):"Delete"),o.createElement(a.Button,{key:"cancel",variant:a.ButtonVariant.link,onClick:f,isDisabled:m},"Cancel")],[m,f,y]);let _;return _=e.policy?o.createElement(o.Fragment,null,"Do you want to delete the policy ",o.createElement("b",null,e.policy.name),"?"):1===e.count?o.createElement(o.Fragment,null,"Do you want to delete the selected policy?"):o.createElement(o.Fragment,null,"Do you want to delete the ",o.createElement("b",null,e.count)," selected policies?"),o.createElement(a.Modal,{title:`Delete ${1===e.count?"policy":"policies"}`,isOpen:!0,onClose:f,actions:g,variant:"small"},_)}},480:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0));t.usePolicyToDelete=()=>{const[e,t]=n.useState(),[i,r]=n.useState(0),o=n.useCallback(()=>{t(void 0),r(0)},[r,t]);return{open:n.useCallback(e=>{"number"==typeof e?(t(void 0),r(e)):(t(e),r(1))},[]),close:o,count:i,policy:e,isOpen:i>0}}},481:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(63),n=i(97);t.actionCreator=e=>n.actionPostPoliciesIdsEnabled({body:e.policyIds,enabled:e.shouldBeEnabled}),t.useMassChangePolicyEnabledMutation=()=>r.useMutation(t.actionCreator)},484:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(483),a=i(17);t.useTextFormat=(e,t,i="br")=>n.useMemo(()=>{const r=o.format(e,...t);return i?a.join(r.split("\n"),i):r},[i,...t])},485:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(92),a=i(31),s=i(56),l=i(121);t.NoPermissionsPage=()=>n.createElement(n.Fragment,null,n.createElement(o.PageHeader,null,n.createElement(o.PageHeaderTitle,{title:a.Messages.pages.noPermissions.title})),n.createElement(o.Main,null,n.createElement(l.EmptyStateSection,{icon:s.LockIcon,title:a.Messages.pages.noPermissions.emptyState.title,content:a.Messages.pages.noPermissions.emptyState.content})))},486:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(121),a=i(31);t.TriggerTableEmptyState=()=>n.createElement(o.EmptyStateSection,{title:a.Messages.tables.trigger.emptyState.notFound.title,content:a.Messages.tables.trigger.emptyState.notFound.content})},487:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(97),n=i(63),o=i(987),a=i(17);t.actionCreator=e=>r.actionGetPoliciesByIdHistoryTrigger(Object.assign({id:e.policyId},a.pageToQuery(e.page))),t.dataToTriggers=e=>{var t;return{count:(null===(t=e.meta)||void 0===t?void 0:t.count)||0,data:o.toTriggers(e.data)}},t.useGetPolicyTriggersParametrizedQuery=()=>a.useTransformQueryResponse(n.useParameterizedQuery(t.actionCreator),t.dataToTriggers);const s=e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.length};t.hasTriggersQueryActionCreator=e=>r.actionGetPoliciesByIdHistoryTrigger(Object.assign({id:e},a.pageToQuery(a.Page.of(1,1)))),t.useHasPolicyTriggersParametrizedQuery=()=>a.useTransformQueryResponse(n.useParameterizedQuery(t.hasTriggersQueryActionCreator),s)},51:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(17);t.getOuiaProps=r.getOuiaPropsFactory("Policies")},530:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=r(i(32)),a=i(133),s=i(366),l=i(17),c=r(i(737)),u=i(63),d=l.createFetchingClient(l.getInsights);l.initStore(),o.default.render(n.default.createElement(s.Provider,{store:l.getStore()},n.default.createElement(a.BrowserRouter,{basename:l.getBaseName(window.location.pathname)},n.default.createElement(u.ClientContextProvider,{client:d},n.default.createElement(c.default,null)))),document.getElementById("root"))},73:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(413);t.ActionType=r.ActionType},737:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(89),a=i(404);i(738);const s=i(142),l=i(17),c=i(228),u=i(485),d=i(992);t.default=o.withRouter(()=>{const{rbac:e,userSettings:t}=d.useApp();return e?n.createElement(c.AppContext.Provider,{value:{rbac:e,userSettings:t}},e.canReadAll?n.createElement(n.Fragment,null,n.createElement(a.NotificationsPortal,null),n.createElement(s.Routes,null)):n.createElement(u.NoPermissionsPage,null)):n.createElement(l.AppSkeleton,null)})},738:function(e,t,i){var r=i(336);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},o=i(12)(r,n);r.locals&&(e.exports=r.locals),e.hot.accept(336,(function(){var t=i(336);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var i,r=0;for(i in e){if(!t||e[i]!==t[i])return!1;r++}for(i in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");o(t)})),e.hot.dispose((function(){o()}))},741:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(31),a=i(133),s=i(142),l=i(17);t.ErrorPageInternal=e=>{const t=n.useCallback(()=>{e.history.push(s.linkTo.listPage())},[e.history]);return n.createElement(l.ErrorBoundaryPage,{action:t,actionLabel:o.Messages.pages.error.emptyState.actions.goToIndex,pageHeader:o.Messages.pages.error.title,title:o.Messages.pages.error.emptyState.title,description:o.Messages.pages.error.emptyState.content},e.children)},t.ErrorPage=a.withRouter(t.ErrorPageInternal)},742:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(0)),a=i(0),s=i(23),l=i(92),c=i(414),u=i(415),d=i(339),p=i(421),m=i(228),f=i(959),h=i(960),y=i(479),g=i(362),_=i(17),E=i(31),v=i(38),b=i(962),P=i(112),O=i(363),T=i(480),S=i(481),C=i(963),x=i(964),A=i(965),I=i(966),M=n(i(160)),N=v.style({paddingBottom:0});t.default=e=>{const[t,i]=o.useState({isOpen:!1}),r=S.useMassChangePolicyEnabledMutation(),n=g.usePolicyFilter(),v=_.useSort(),w=g.usePolicyPage(n.debouncedFilters,M.default.defaultElementsPerPage,v.sortBy),j=C.useGetListPagePolicies(w.page),{query:R}=O.useGetPoliciesQuery(_.Page.of(0,_.Page.NO_SIZE,w.page.filter,w.page.sort),!1),k=T.usePolicyToDelete(),D=a.useContext(m.AppContext);let L=j.loading||r.loading;const F=g.usePolicyRows(((e,t)=>{if(200===t||404===t)return e})(j.payload,j.status),L,j.count,w.page),{clearSelection:B,loadingSelected:z}=F;L=L||z;const{canWriteAll:U,canReadAll:G}=D.rbac,{query:V,count:H}=j,{mutate:Q,loading:W}=r,{open:q}=k,$=P.usePrevious(W);o.useEffect(()=>{B()},[n.debouncedFilters,B]),o.useEffect(()=>{!0!==$||W||V()},[W,V,$]);const K=A.useListPageDelete({policyPage:w,policyRows:F,policyToDelete:k,reload:V,count:H}),X=x.useTableActionResolverCallback({canWriteAll:U,openPolicyToDelete:q,mutateChangePolicyEnabled:Q,setPolicyWizardState:i}),Y=I.useToolbarActions({setPolicyWizardState:i,policyRows:F,openPolicyToDelete:q,mutateChangePolicyEnabled:Q,exportAllPoliciesQuery:R});o.useEffect(()=>{G&&V()},[G,V]);const J=o.useCallback(e=>{const t=D.userSettings.refresh;e&&(V(),t()),i({isOpen:!1})},[D.userSettings.refresh,i,V]),Z=o.useMemo(()=>f.policyTableError({refreshPage:()=>{window.location.reload()},tryAgain:()=>{V()}},j.error,j.status),[j.error,j.status,V]);return o.createElement(o.Fragment,null,o.createElement(c.Helmet,null,o.createElement("title",null,"Policies | Red Hat Insights")),o.createElement(l.PageHeader,null,o.createElement(l.PageHeaderTitle,{title:E.Messages.pages.listPage.title})),!D.userSettings.isSubscribedForNotifications&&F.rows.find(e=>e.actions.find(e=>e.type===h.ActionType.EMAIL))&&o.createElement(s.PageSection,{className:N},o.createElement(_.InsightsEmailOptIn,{ouiaId:"list-email-required",content:E.Messages.pages.listPage.emailOptIn,insights:_.getInsights()})),o.createElement(l.Main,null,!1===j.hasPolicies?o.createElement(b.ListPageEmptyState,{createPolicy:U?Y.createCustomPolicy:void 0}):o.createElement(l.Section,null,o.createElement(d.PolicyToolbar,{ouiaId:"main-toolbar",onCreatePolicy:U?Y.createCustomPolicy:void 0,onDeletePolicy:U?Y.onDeletePolicies:void 0,onEnablePolicy:U?Y.onEnablePolicies:void 0,onDisablePolicy:U?Y.onDisablePolicies:void 0,onPaginationChanged:w.changePage,onPaginationSizeChanged:w.changeItemsPerPage,onSelectionChanged:F.onSelectionChanged,selectedCount:F.selectionCount,page:w.page.index,pageCount:F.rows.length,perPage:w.page.size,showPerPageOptions:!0,filters:n.filters,setFilters:n.setFilters,clearFilters:n.clearFilter,count:j.count,onExport:Y.onExport,showBottomPagination:!0},o.createElement(u.PolicyTable,{ouiaId:"main-table",policies:F.rows,onCollapse:F.onCollapse,onSelect:F.onSelect,actionResolver:X,loading:L,error:Z,onSort:v.onSort,sortBy:v.sortBy,linkToDetailPolicy:!0})))),t.isOpen&&o.createElement(p.CreatePolicyWizard,{isOpen:t.isOpen,close:J,initialValue:t.template,showCreateStep:t.showCreateStep,policiesExist:!0===j.hasPolicies,isEditing:t.isEditing}),k.isOpen&&o.createElement(y.DeletePolicy,{onClose:K.onCloseDeletePolicy,onDeleted:K.onDeleted,loading:F.loadingSelected,count:k.count,getPolicies:F.getSelected,policy:k.policy}))}},743:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(51);t.Description=e=>n.createElement("div",Object.assign({},a.getOuiaProps("Policy/Table/Expanded/Description",e)),n.createElement(o.Title,{headingLevel:"h2",size:"md"},"Description"),n.createElement(o.Text,null," ",e.description," "))},744:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(229),s=i(51);t.Dates=e=>n.createElement(n.Fragment,null,n.createElement(o.Text,Object.assign({},s.getOuiaProps("Policy/Table/Expanded/Dates",e)),"Last updated ",a.format(e.updated,"dd MMM yyyy")," | Created ",a.format(e.created,"dd MMM yyyy")))},752:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(56);t.DisabledPolicyIcon=()=>n.createElement(o.OffIcon,null)},753:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(56);t.EnabledPolicyIcon=()=>n.createElement(o.CheckCircleIcon,{color:"green"})},754:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(0)),a=i(38),s=n(i(755)),l=a.style({verticalAlign:"-0.125em",width:"1em",height:"1em"});t.WebhookIcon=()=>o.createElement("img",{className:l,src:s.default})},755:function(e,t,i){e.exports=i.p+"fonts/WebhookIcon.svg"},756:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(73),a=i(17),s=i(23),l=i(38),c=i(338),u=i(31),d=i(51),p=l.style({borderRadius:3}),m=l.style({marginRight:5}),f=l.style({minWidth:145}),h=s.TooltipPosition.bottom,y=()=>n.createElement(s.Tooltip,{content:u.Messages.tables.policy.toolTips.email,position:h},n.createElement(c.ActionEmailIcon,null)),g=()=>n.createElement(s.Tooltip,{content:u.Messages.tables.policy.toolTips.hook,position:h},n.createElement(c.ActionWebhookIcon,null));t.ActionsCell=e=>{const t=e.actions.slice(0,4),i=e.actions.slice(4),r=t.map((e,t)=>{let i;switch(e.type){case o.ActionType.EMAIL:i=n.createElement(y,null);break;case o.ActionType.NOTIFICATION:i=n.createElement(g,null);break;default:a.assertNever(e)}return n.createElement(s.SplitItem,{key:t,className:m},i)});return i.length>0&&r.push(n.createElement(s.SplitItem,{key:"remaining",className:m},n.createElement(s.Badge,{className:p,isRead:!0},`${i.length} more`))),n.createElement(s.Split,Object.assign({},d.getOuiaProps("Policy/Table/Actions",e),{className:f}),r)}},757:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(38),a=i(229),s=i(31),l=i(207),c=i(51),u=o.style({marginLeft:10});t.LastTriggeredCell=e=>{let t;if(e.lastTriggered){const i=a.add(e.lastTriggered,{months:1}),r=new Date(Date.now());t=a.isAfter(r,i)?a.format(e.lastTriggered,"MMM dd y"):`${a.formatDistanceToNow(e.lastTriggered)} ${s.Messages.components.lastTriggeredCell.ago}`}else t=s.Messages.components.lastTriggeredCell.never;return n.createElement("div",Object.assign({},c.getOuiaProps("Policy/Table/LastTriggered",e)),e.isEnabled?n.createElement(l.EnabledPolicyIcon,null):n.createElement(l.DisabledPolicyIcon,null),n.createElement("span",{className:u},t))}},758:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(149),s=i(156),l=i(858),c=i(860),u=i(866),d=i(939),p=i(945),m=i(175),f=i(946),h=i(112),y=i(31),g=i(947),_=i(17),E=(e,t,i,r,n)=>!n&&(e===i||(t?e<=r:e<=i)),v=(e,t)=>!t&&e,b=e=>{const t=a.useFormikContext(),i=t.validateForm,r=t.handleSubmit;n.useEffect(()=>{i()},[e.currentStep,i]),n.useEffect(()=>{e.triggeredAction!==s.WizardActionType.NONE&&r()},[e.triggeredAction,r]);const l={isLoading:e.isLoading,isFormValid:t.isValid,triggerAction:e.triggerAction,verifyResponse:e.verifyResponse,createResponse:e.createResponse,setVerifyResponse:e.setVerifyResponse,facts:e.facts,setMaxStep:e.setMaxStep},c=e.steps[e.currentStep],u=((e,t,i)=>e.isValid?e.isValid(t,i):t.isFormValid)(c,l,t.values);l.isValid=u;const d=e.steps.map(t=>Object.assign(Object.assign({},t),{enableNext:v(u,e.isLoading),canJumpTo:E(t.id,u,e.currentStep,e.maxStep,e.isLoading)}));return n.createElement(o.Form,null,n.createElement(s.WizardContext.Provider,{value:l},n.createElement(o.Wizard,{isOpen:!0,onSave:()=>{e.triggerAction(s.WizardActionType.SAVE)},onClose:e.onClose,steps:d,startAtStep:e.currentStep+1,onNext:e.onMove,onBack:e.onMove,onGoToStep:e.onMove,title:e.isEditing?y.Messages.wizards.policy.titleEdit:y.Messages.wizards.policy.titleNew,description:y.Messages.wizards.policy.description,footer:n.createElement(f.PolicyWizardFooter,{onNext:c.onNext,loadingText:"Loading",isLoading:e.isLoading,error:e.createResponse.error})})))};t.PolicyWizard=e=>{const[t,i]=n.useState(0),[r,o]=n.useState(0),[f,y]=n.useState({type:s.WizardActionType.NONE}),[E,v]=n.useState({isValid:!1}),P=h.useMountedState(),[O,T]=n.useState({created:!1}),S=n.useCallback(e=>{let t,i;const r=new Promise((e,r)=>{t=e,i=r});return y(r=>(r.rejecter&&r.rejecter(),{type:e,resolver:t,rejecter:i})),r},[y]),C=n.useCallback(e=>{y(t=>(e&&t.resolver?t.resolver():t.rejecter&&t.rejecter(),{type:s.WizardActionType.NONE}))},[y]);n.useEffect(()=>{var t;(null===(t=e.initialValue)||void 0===t?void 0:t.conditions)&&v({isValid:!0,policy:e.initialValue})},[e.initialValue]);const x=(e=>{const t=[];return e&&t.push(l.createPolicyStep()),t.push(c.createDetailsStep(),u.createConditionsStep(),d.createActionsStep(),p.createReviewStep({nextButtonText:"Finish"})),t.map((e,t)=>Object.assign(Object.assign({},e),{id:t}))})(e.showCreateStep);return n.createElement(n.Fragment,null,n.createElement(g.CreatePolicyStepContextProvider,{showCreateStep:e.showCreateStep},n.createElement(a.Formik,{initialValues:e.initialValue,initialStatus:{},validateOnMount:!1,validationSchema:x[t].validationSchema,onSubmit:(t,i)=>{i.setSubmitting(!1),y(e=>Object.assign(Object.assign({},e),{type:s.WizardActionType.NONE}));const r=m.PolicyFormSchema.cast(t);switch(i.setValues(r),f.type){case s.WizardActionType.SAVE:e.onSave(r).then(e=>{P()&&(T(e),C(e.created))});break;case s.WizardActionType.VALIDATE_CONDITION:case s.WizardActionType.NONE:case s.WizardActionType.VALIDATE_NAME:break;default:_.assertNever(f.type)}},validate:t=>{const i=m.PolicyFormSchema.cast(t);switch(f.type){case s.WizardActionType.SAVE:case s.WizardActionType.NONE:break;case s.WizardActionType.VALIDATE_CONDITION:e.onVerify(i).then(e=>{v(e),C(e.isValid)});break;case s.WizardActionType.VALIDATE_NAME:e.onValidateName(i).then(e=>{T(e),C(!e.error)});break;default:_.assertNever(f.type)}}},n.createElement(b,{currentStep:t,maxStep:r,isLoading:e.isLoading,triggeredAction:f.type,triggerAction:S,steps:x,verifyResponse:E,createResponse:O,setVerifyResponse:v,onClose:e.onClose,onMove:(e,t)=>{const n=e.id;i(n),n>r&&o(n)},showCreateStep:e.showCreateStep,facts:e.facts,setMaxStep:o,isEditing:e.isEditing}))))}},858:function(e,t,i){"use strict";var r=this&&this.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=n(i(0)),a=i(23),s=i(17),l=i(156),c=i(31),u=i(859),d=i(149),p=n(i(143)),m=i(0),f=i(123),h=i(112),y=i(449);t.useCreatePolicyStep=()=>{const e=o.useContext(y.CreatePolicyStepContext);if(void 0===e)throw Error("Invalid usage of CreatePolicyStep without valid context");const{copyPolicy:t,setCopyPolicy:i,copiedPolicy:n,setCopiedPolicy:a}=e,s=r(e,["copyPolicy","setCopyPolicy","copiedPolicy","setCopiedPolicy"]),{clearSelection:c}=s.policyRows,{validate:u,validateField:p,setValues:g,setFieldValue:_}=d.useFormikContext(),{setVerifyResponse:E,setMaxStep:v}=m.useContext(l.WizardContext),b=o.useCallback(()=>{i(!1),a({})},[i,a]),P=o.useCallback(()=>{i(!0),a(void 0)},[i,a]);h.useUpdateEffect(()=>{n&&(g(n),t&&E({policy:n,isValid:!0})),v(0),_("isValid",!!n),u&&p("isValid")},[t,n,u,p,_,g,E]),o.useEffect(()=>{t||c()},[t,c]);const O=o.useCallback(e=>{a(f.makeCopyOfPolicy(e))},[a]);return{copyPolicy:t,createFromScratch:b,copyExisting:P,copyFromPolicyHandler:O,copyFromPolicyProps:s}},t.CreatePolicyStep=()=>{const{copyPolicy:e,createFromScratch:i,copyExisting:r,copyFromPolicyHandler:n,copyFromPolicyProps:l}=t.useCreatePolicyStep();return o.createElement(o.Fragment,null,o.createElement(s.Form,{ouiaId:"create-policy-step",className:"pf-c-form"},o.createElement("div",{className:"pf-c-form__group"},o.createElement(a.Title,{headingLevel:"h4",size:"xl",className:"pf-u-mb-sm"},c.Messages.wizards.policy.createPolicy.title),o.createElement(a.Text,{className:s.joinClasses("pf-u-mb-sm","pf-c-title pf-m-sm"),component:a.TextVariants.h6},"Define a new policy:"),o.createElement(a.Radio,{isChecked:!e,name:"new-policy",value:"from-scratch",id:"create-new-custom-policy-from-scratch",onChange:i,label:"From scratch",className:s.joinClasses("pf-u-mb-sm","pf-c-radio")}),o.createElement(a.Radio,{isChecked:e,name:"new-policy",value:"as-copy",id:"create-new-custom-policy-as-copy",onChange:r,label:"As a copy of existing Policy",className:s.joinClasses("pf-u-mb-sm","pf-c-radio")}),e&&o.createElement(o.Fragment,null,o.createElement(u.CopyFromPolicy,Object.assign({onSelect:n},l))))))},t.createPolicyStep=e=>Object.assign({name:c.Messages.wizards.policy.createPolicy.title,component:o.createElement(t.CreatePolicyStep,null),validationSchema:p.object().shape({isValid:p.boolean().oneOf([!0])})},e)},859:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(339),a=i(415),s=i(112);t.CopyFromPolicy=e=>{var t;const{policyFilter:i,policyPage:r,policySort:l,policyQuery:c,policyRows:u}=e;s.useEffectOnce(()=>{c.payload||c.query()});const d=e.onSelect,p=c.payload,m=u.onSelect,f=n.useCallback((e,t,i)=>{m(e,t,i),p&&i&&d(p[t])},[d,m,p]);return n.createElement(n.Fragment,null,n.createElement(o.PolicyToolbar,{ouiaId:"copy-from-policy-toolbar",onPaginationChanged:r.changePage,page:r.page.index,pageCount:null===(t=c.payload)||void 0===t?void 0:t.length,perPage:r.page.size,showPerPageOptions:!1,hideActions:!0,hideBulkSelect:!0,filters:i.filters,setFilters:i.setFilters,clearFilters:i.clearFilter,count:c.count},n.createElement(a.PolicyTable,{ouiaId:"copy-from-policy-table",columnsToShow:["radioSelect","name","actions"],policies:u.rows,onSelect:f,loading:c.loading,loadingRowCount:5,onSort:l.onSort,sortBy:l.sortBy,linkToDetailPolicy:!1})))}},860:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(17),s=i(156),l=i(175),c=i(31),u=i(347);t.DetailsStep=()=>n.createElement(a.Form,{ouiaId:"detail-step"},n.createElement(o.Title,{headingLevel:"h4",size:"xl"},c.Messages.wizards.policy.details.title),n.createElement(a.FormTextInput,{ouiaId:"name",maxLength:u.maxPolicyNameLength,isRequired:!0,label:"Name",type:"text",name:"name",id:"name"}),n.createElement(a.FormTextArea,{ouiaId:"description",label:"Description",type:"text",id:"description",name:"description",resizeOrientation:"vertical"})),t.createDetailsStep=e=>Object.assign({name:c.Messages.wizards.policy.details.title,component:n.createElement(t.DetailsStep,null),validationSchema:l.PolicyFormDetails,onNext:(e,t)=>{e.triggerAction(s.WizardActionType.VALIDATE_NAME).then(t).catch(e=>{console.error("Error when validating:",e)})}},e)},861:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(862);t.ActionSchema=r.ActionSchema;var n=i(863);t.ActionEmailSchema=n.ActionEmailSchema;var o=i(864);t.ActionNotificationSchema=o.ActionNotificationSchema},862:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(143)),o=i(73);t.ActionSchema=n.object().shape({type:n.mixed().required("Specify the action type").oneOf(Object.values(o.ActionType))})},863:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(143)),o=i(73);t.ActionEmailSchema=n.object().shape({type:n.mixed().oneOf([o.ActionType.EMAIL]).required()})},864:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(143)),o=i(73);t.ActionNotificationSchema=n.object().shape({type:n.mixed().oneOf([o.ActionType.NOTIFICATION]).required()})},865:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(413);t.isActionEmail=e=>e.type===r.ActionType.EMAIL,t.isActionNotification=e=>e.type===r.ActionType.NOTIFICATION,t.isAction=e=>t.isActionEmail(e)||t.isActionNotification(e)},866:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(0)),a=i(23),s=i(56),l=i(98),c=i(17),u=i(156),d=i(175),p=i(149),m=i(38),f=i(31),h=n(i(867)),y=i(868),g=m.style({marginTop:"auto",marginBottom:"auto",marginLeft:8}),_=m.style({width:"100%"}),E=m.style({marginTop:12}),v=m.style({color:l.global_danger_color_100.var}),b=m.style({color:l.global_success_color_200.var}),P=m.style({fontWeight:"bold"}),O=m.style({marginBottom:5}),T=e=>e.loading?o.createElement(a.Split,null,o.createElement(a.SplitItem,null,o.createElement("span",{className:g},o.createElement(a.Spinner,{size:"md"})),o.createElement("span",{className:g}," ",f.Messages.wizards.policy.conditions.validating," "))):e.changed?null:e.isValid?o.createElement(a.Split,null,o.createElement(a.SplitItem,null,o.createElement(s.CheckCircleIcon,{className:g,color:l.global_success_color_200.value})),o.createElement(a.SplitItem,null,o.createElement("div",{className:c.joinClasses(g,b,P)},f.Messages.wizards.policy.conditions.valid))):e.error?o.createElement(a.Stack,null,o.createElement(a.StackItem,null,o.createElement(a.Split,null,o.createElement(a.SplitItem,null,o.createElement(s.ExclamationCircleIcon,{className:g,color:l.global_danger_color_100.value})),o.createElement(a.SplitItem,null,o.createElement("div",{className:c.joinClasses(g,v,P)},f.Messages.wizards.policy.conditions.invalid)))),o.createElement(a.StackItem,null,o.createElement("div",{className:c.joinClasses(g,v)}," ",e.error," "))):null,S=()=>{var e;const t=o.useContext(u.WizardContext),{values:i}=p.useFormikContext(),r=!i.conditions||""===i.conditions||t.isLoading;return o.createElement(c.Form,{ouiaId:"condition-step"},o.createElement(a.Title,{className:O,headingLevel:"h4",size:"xl"},f.Messages.wizards.policy.conditions.title),f.Messages.wizards.policy.conditions.summaryDesc,o.createElement(y.ConditionFieldWithForkmik,{ouiaId:"conditions",label:"Condition text",id:"conditions",name:"conditions",facts:t.facts||[],hint:f.Messages.wizards.policy.conditions.hint}),o.createElement(a.Stack,{className:_},o.createElement(a.StackItem,null,o.createElement(a.Button,{onClick:()=>{t.triggerAction(u.WizardActionType.VALIDATE_CONDITION)},isDisabled:r,variant:a.ButtonVariant.secondary},"Validate condition")),o.createElement(a.StackItem,{className:E},o.createElement(T,Object.assign({loading:t.isLoading},t.verifyResponse,{changed:(null===(e=t.verifyResponse.policy)||void 0===e?void 0:e.conditions)!==i.conditions})))),o.createElement(h.default,null))};t.createConditionsStep=e=>Object.assign({name:f.Messages.wizards.policy.conditions.title,component:o.createElement(S,null),validationSchema:d.PolicyFormConditions,isValid:(e,t)=>{var i;return t.conditions===(null===(i=e.verifyResponse.policy)||void 0===i?void 0:i.conditions)&&e.verifyResponse.isValid}},e)},867:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(0)),a=i(23),s=i(31),l=i(38),c=n(i(160)),u=i(51),d=l.style({fontFamily:"monospace",fontSize:"14px",fontStyle:"default"}),p=l.style({marginBottom:5}),m=l.style({marginLeft:20});class f extends o.Component{render(){return o.createElement(a.TextContent,{className:m},o.createElement(a.Text,{component:a.TextVariants.p},s.Messages.wizards.policy.hints.hintParagraph1),o.createElement(a.Text,{component:a.TextVariants.a,className:p,href:c.default.pages.factsDocumentation,target:"_blank",rel:"noopener noreferrer"},s.Messages.wizards.policy.hints.hintLinkTitle),o.createElement(a.Text,{component:a.TextVariants.h5,className:"lg"},s.Messages.wizards.policy.hints.hintSyntaxExamplesSection),o.createElement(a.Text,null,s.Messages.wizards.policy.hints.hintQuestion1),o.createElement(a.Text,{component:a.TextVariants.p,className:d},o.createElement("i",null,s.Messages.wizards.policy.hints.hintQuestion1Ans)),o.createElement(a.Text,null,s.Messages.wizards.policy.hints.hintQuestion2),o.createElement(a.Text,{component:a.TextVariants.p,className:d},o.createElement("i",null,s.Messages.wizards.policy.hints.hintQuestion2Ans)),o.createElement(a.Text,null,s.Messages.wizards.policy.hints.hintQuestion3),o.createElement(a.Text,{component:a.TextVariants.p,className:d},o.createElement("i",null,s.Messages.wizards.policy.hints.hintQuestion3Ans)),o.createElement(a.Text,null,s.Messages.wizards.policy.hints.hintQuestion4),o.createElement(a.Text,{component:a.TextVariants.p,className:d},o.createElement("i",null,s.Messages.wizards.policy.hints.hintQuestion4Ans)))}}t.default=e=>o.createElement(o.Fragment,null,o.createElement(a.StackItem,Object.assign({},u.getOuiaProps("Policy/Wizard/Usage",e)),o.createElement(a.ExpandableSection,{toggleText:s.Messages.wizards.policy.hints.hintTitle},o.createElement(f,null))))},868:function(e,t,i){"use strict";var r=this&&this.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=n(i(0)),a=i(869),s=i(149),l=i(23);t.ConditionFieldWithForkmik=e=>{const{hint:t}=e,i=r(e,["hint"]),[n,c,{setValue:u}]=s.useField(Object.assign({},i)),d=!c.error||!c.touched,p=o.useCallback(e=>{u(e)},[u]);return o.createElement(l.FormGroup,{fieldId:e.id,helperTextInvalid:c.error,isRequired:e.isRequired,validated:d?"default":"error",label:e.label},o.createElement(a.ConditionField,Object.assign({},i,n,{value:n.value?n.value.toString():"",onSelect:p})),t&&o.createElement(l.Text,{component:l.TextVariants.small},t))}},869:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(38),s=i(112),l=i(870),c=i(51),u=a.style({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"});t.factToOptions=(e,t,i)=>((e=e.trim()).length>0&&t.length>0&&(e+=" "),i.length>0&&t.length>0&&(i=" "+i),(t||[" "]).map(t=>n.createElement(o.SelectOption,{className:u,key:e+t+i,value:e+t+i},e,n.createElement("b",null,t),i))),t.buildOptionList=(e,i)=>{try{const r=l.computeOptions(e,i);if(r)return t.factToOptions(r.prefix,r.options,r.postfix)}catch(t){console.log(`Exception when computing options for condition [${e}]`,t)}return[]},t.ConditionField=e=>{const{facts:i,onSelect:r,value:a}=e,[l,u]=n.useState(!1),[d,p]=n.useState(),m=n.useCallback(e=>t.buildOptionList(e,i),[i]),f=n.useCallback(e=>{const t=m(a);if(e){let e=t.length>0;1===t.length&&t[0].props.value===a&&(e=!1),u(e)}p(t)},[a,m,p]);s.useUpdateEffect(()=>{f(!0)},[f]),s.useEffectOnce(()=>{f(!1)});const h=n.useCallback(e=>{const t=e.target.value;return r(t),[]},[r]),y=n.useCallback((e,t)=>{r(t.toString()),p(e=>(e&&1===e.length&&e[0].props.value===t&&u(!1),e))},[r]),g=n.useCallback(()=>{r("")},[r]);return n.createElement(o.Select,Object.assign({},c.getOuiaProps("ConditionField",e),{label:e.label,toggleId:e.id,name:e.name,onToggle:()=>u(()=>!l),isOpen:l,selections:a,variant:o.SelectVariant.typeahead,onSelect:y,onFilter:h,onClear:g,typeAheadAriaLabel:"Condition writer",style:{maxWidth:"100%"}}),d)}},870:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(450),n=i(933),o=i(478),a=i(934),s=e=>e.map(e=>e.value).join(" ");t.computeOptions=(e,t)=>{const i=(e=>{const t=r.CharStreams.fromString(e),i=new n.ExpressionLexer(t);i.removeErrorListeners();const a=new r.CommonTokenStream(i),s=new o.ExpressionParser(a);return s.removeErrorListeners(),s})(e).expression(),l=(new a.ConditionVisitor).visit(i).filter(e=>e.type!==a.ElementType.ERROR);let c=l.pop();const u=[];if(void 0===c)return{prefix:"",options:t.slice(0,10).map(e=>e.name||""),postfix:""};for(;c.type===a.ElementType.CLOSE_ROUND_BRACKET;){const e=l.pop();if(void 0===e)break;u.unshift(c),c=e}const d=s(l),p=s(u),m=c;return m.type===a.ElementType.FACT?{prefix:d,options:t.filter(e=>e.name&&e.name.toUpperCase().includes(m.value.toUpperCase())).slice(0,10).map(e=>e.name||""),postfix:p}:(u.unshift(m),{prefix:d,options:[],postfix:s(u)})}},933:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=i(226),o=i(128),a=i(220),s=i(130),l=r(i(95));class c extends o.Lexer{constructor(e){super(e),this._interp=new a.LexerATNSimulator(c._ATN,this)}get vocabulary(){return c.VOCABULARY}get grammarFileName(){return"Expression.g4"}get ruleNames(){return c.ruleNames}get serializedATN(){return c._serializedATN}get channelNames(){return c.channelNames}get modeNames(){return c.modeNames}static get _ATN(){return c.__ATN||(c.__ATN=(new n.ATNDeserializer).deserialize(l.toCharArray(c._serializedATN))),c.__ATN}}t.ExpressionLexer=c,c.T__0=1,c.T__1=2,c.T__2=3,c.T__3=4,c.T__4=5,c.OR=6,c.AND=7,c.NOT=8,c.EQUAL=9,c.NOTEQUAL=10,c.CONTAINS=11,c.MATCHES=12,c.NEG=13,c.GT=14,c.GTE=15,c.LT=16,c.LTE=17,c.IN=18,c.NUMBER=19,c.FLOAT=20,c.INTEGER=21,c.SIMPLETEXT=22,c.STRING=23,c.WS=24,c.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],c.modeNames=["DEFAULT_MODE"],c.ruleNames=["T__0","T__1","T__2","T__3","T__4","OR","AND","NOT","EQUAL","NOTEQUAL","CONTAINS","MATCHES","NEG","GT","GTE","LT","LTE","IN","NUMBER","FLOAT","INTEGER","SIMPLETEXT","STRING","WS","ESC","UNICODE","HEX","ESC_DOT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","NEG_OP"],c._LITERAL_NAMES=[void 0,"'('","')'","'['","','","']'",void 0,void 0,void 0,"'='","'!='",void 0,void 0,void 0,"'>'","'>='","'<'","'<='"],c._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,"OR","AND","NOT","EQUAL","NOTEQUAL","CONTAINS","MATCHES","NEG","GT","GTE","LT","LTE","IN","NUMBER","FLOAT","INTEGER","SIMPLETEXT","STRING","WS"],c.VOCABULARY=new s.VocabularyImpl(c._LITERAL_NAMES,c._SYMBOLIC_NAMES,[]),c._serializedATN='줝쪺֍꾺体؇쉁ģ\b\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t !\t!"\t"#\t#$\t$%\t%&\t&\'\t\'(\t()\t)*\t*+\t+,\t,-\t-.\t./\t/0\t01\t12\t23\t34\t45\t56\t67\t78\t8\b\b\b\b\t\t\t\t\n\n\v\v\v\f\f\f\f\f\f\f\f\f\r\r\r\r\r\r\r\r¯\n¶\n\r·½\n\fÀ\vÅ\n\fÈ\vÎ\n\fÑ\vÔ\n×\n\rØá\n  !!""##$$%%&&\'\'(())**++,,--..//0011223344556677889\t\v\r\b\t\n\v\f\r!#%\')+-/13579;=?ACEGIKMOQSUWY[]_acegikmo$2;002;C\\aac|/02;C\\aac|))^^$$^^\v\f""\n))11^^ddhhppttvv2;CHchCCccDDddEEeeFFffGGggHHhhIIiiJJjjKKkkLLllMMmmNNnnOOooPPppQQqqRRrrSSssTTttUUuuVVvvWWwwXXxxYYyyZZzz[[{{\\\\||ď\t\v\r!#%\')+-/1qsu\tw\vy\r{~ !£#¥%¨\'«)°+µ-¹/Ó1Ö3Ü5â7è9ê;í=ï?ñAóCõE÷GùIûKýMÿOāQăSąUćWĉYċ[č]ď_đaēcĕeėgęiěkĝmğoġqr*rst+tuv]v\bwx.x\nyz_z\f{|W,|}]/}~;U+A!U+W,a1?#?? W,U+a1;K&U+_0S*;a1? I%C"_0o8@ ¡@¡¢?¢ £¤>¤"¥¦>¦§?§$¨©K&©ªU+ª&«®+¬­0­¯+®¬®¯¯(°±+±²0²³+³*´¶\tµ´¶··µ·¸¸,¹¾\tº½\t»½9¼º¼»½À¾¼¾¿¿.À¾ÁÆ)ÂÅ3ÃÅ\nÄÂÄÃÅÈÆÄÆÇÇÉÈÆÉÔ)ÊÏ$ËÎ3ÌÎ\nÍËÍÌÎÑÏÍÏÐÐÒÑÏÒÔ$ÓÁÓÊÔ0Õ×\tÖÕ×ØØÖØÙÙÚÚÛ\bÛ2Üà^Ýá\t\bÞá5ßáo8àÝàÞàßá4âãwãä7äå7åæ7æç7ç6èé\t\té8êë^ëì0ì:íî\t\nî<ïð\t\vð>ñò\t\fò@óô\t\rôBõö\töD÷ø\tøFùú\túHûü\tüJýþ\tþLÿĀ\tĀNāĂ\tĂPăĄ\tĄRąĆ\tĆTćĈ\tĈVĉĊ\tĊXċČ\tČZčĎ\tĎ\\ďĐ\tĐ^đĒ\tĒ`ēĔ\tĔbĕĖ\tĖdėĘ\tĘfęĚ\t ĚhěĜ\t!ĜjĝĞ\t"ĞlğĠ\t#ĠnġĢ#Ģp®·¼¾ÄÆÍÏÓØà\b'},934:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(935),n=i(478),o=i(450);var a;!function(e){e.FACT="FACT",e.VALUE="VALUE",e.LOGICAL_OPERATOR="LOGICAL_OPERATOR",e.BOOLEAN_OPERATOR="BOOLEAN_OPERATOR",e.NUMERIC_COMPARE_OPERATOR="NUMERIC_COMPARE_OPERATOR",e.OPEN_ROUND_BRACKET="OPEN_ROUND_BRACKET",e.CLOSE_ROUND_BRACKET="CLOSE_ROUND_BRACKET",e.UNKNOWN="UNKNOWN",e.ERROR="ERROR"}(a=t.ElementType||(t.ElementType={}));const s=e=>({type:a.FACT,value:e}),l=e=>({type:a.VALUE,value:e}),c=e=>({type:a.LOGICAL_OPERATOR,value:e}),u=e=>({type:a.BOOLEAN_OPERATOR,value:e}),d=e=>({type:a.OPEN_ROUND_BRACKET,value:e}),p=e=>({type:a.CLOSE_ROUND_BRACKET,value:e}),m=e=>({type:a.NUMERIC_COMPARE_OPERATOR,value:e}),f=e=>({type:a.ERROR,value:e}),h=e=>({type:a.UNKNOWN,value:e}),y=e=>0===e.length?void 0:e[0],g=e=>0===e.length?void 0:e[e.length-1];class _ extends r.AbstractParseTreeVisitor{defaultResult(){return[]}aggregateResult(e,t){const i=g(e.filter(e=>e.type!==a.ERROR)),r=y(t.filter(e=>e.type!==a.ERROR));return i&&r&&i.type===a.LOGICAL_OPERATOR&&r.type===a.LOGICAL_OPERATOR&&(r.type=a.ERROR),[...e,...t]}visitTerminal(e){return e.symbol.type===o.Token.EOF?[]:"("===e.text?[d("(")]:")"===e.text?[p(")")]:[h(e.text)]}visitErrorNode(e){return"<missing ')'>"===e.text?[p(")")]:[f(e.text)]}visitLogical_operator(e){return[c(e.text)]}visitBoolean_operator(e){return[u(e.text)]}visitNumeric_compare_operator(e){return[m(e.text)]}visitKey(e){var t;const i=e.SIMPLETEXT();if(i)return[s(i.text)];const r=null===(t=e.STRING())||void 0===t?void 0:t.text;return r&&r.length>=2?[s(r.substr(1,r.length-2))]:[s("")]}visitValue(e){const t=e.NUMBER()||e.STRING();if(!t){if(e.parent instanceof n.ExprContext||(e.parent,n.ArrayContext),e.text)return e.childCount>1&&e.start.inputStream&&e.stop?[l(`"${e.start.inputStream.toString().slice(e.start.startIndex,e.stop.stopIndex+1)}"`)]:[l(`"${e.text}"`)];if(e.start.inputStream&&e.stop&&e.stop.text){let t=e.start.inputStream.toString().slice(e.stop.stopIndex+1,e.start.startIndex).trimLeft();return t.startsWith('"')&&!t.endsWith('"')?t+='"':t.startsWith("'")&&!t.endsWith("'")&&(t+="'"),[l(t)]}return this.visitChildren(e)}return[l(t.text)]}visitNumerical_value(e){return[l(e.text)]}}t.ConditionVisitor=_},939:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(175),s=i(149),l=i(940),c=i(31),u=i(944);t.ActionsStep=()=>{var e;const{validateForm:t,values:i}=s.useFormikContext(),r=null===(e=i.actions)||void 0===e?void 0:e.length;return n.useEffect(()=>{t()},[t,r]),n.createElement(n.Fragment,null,n.createElement(o.Title,{headingLevel:"h4",size:"xl"},c.Messages.wizards.policy.actions.title),n.createElement(s.FieldArray,{name:"actions"},e=>{return n.createElement(n.Fragment,null,n.createElement(u.AddTriggersDropdown,{isTypeEnabled:t=>{var i;return 0===((null===(i=e.form.values.actions)||void 0===i?void 0:i.filter(e=>e.type===t))||[]).length},onTypeSelected:t=>{e.push({type:t})}}),n.createElement(l.ActionsForm,{id:"actions",name:"actions",actions:e.form.values.actions,arrayHelpers:e}))}))},t.createActionsStep=e=>Object.assign({name:c.Messages.wizards.policy.actions.title,component:n.createElement(t.ActionsStep,null),validationSchema:a.PolicyFormActions},e)},940:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=i(73),o=i(23),a=i(98),s=r(i(0)),l=i(56),c=i(941),u=i(17),d=i(38),p=i(338),m=d.style({gridGap:a.global_spacer_md.var}),f=d.style({backgroundColor:"white",border:"1px var(--pf-global--BorderColor--200) solid",boxShadow:"none"}),h=d.style({marginLeft:10,display:"inline"});t.ActionsForm=e=>{var t;return s.createElement(o.Form,{className:m},null===(t=e.actions)||void 0===t?void 0:t.map((t,i)=>{var r,a;return s.createElement(s.Fragment,{key:i},s.createElement(o.Card,{className:f},s.createElement(o.CardHeader,{"data-codemods":"true"},s.createElement(o.CardActions,null,s.createElement(o.Button,{variant:"plain","aria-label":"Action",onClick:e.arrayHelpers.handleRemove(i)},s.createElement(l.TimesIcon,null))),s.createElement(o.CardTitle,null,s.createElement(s.Fragment,null,s.createElement(p.ActionIcon,{actionType:null===(r=t)||void 0===r?void 0:r.type}),s.createElement(o.Title,{headingLevel:"h2",className:h,size:"md"},(null===(a=t)||void 0===a?void 0:a.type)?(e=>{switch(e){case n.ActionType.EMAIL:return"Send email";case n.ActionType.NOTIFICATION:return"Send to notification";default:u.assertNever(e)}})(t.type):"")))),s.createElement(o.CardBody,{className:"pf-c-form"},s.createElement(c.ActionForm,{ouiaId:`actions-form.${i.toString()}`,isReadOnly:e.isReadOnly,action:t,prefix:`actions.${i}`}))))}))}},941:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(73),a=i(942),s=i(943);t.ActionForm=e=>{var t,i;switch((null===(t=e.action)||void 0===t?void 0:t.type)||void 0){case o.ActionType.EMAIL:return n.createElement(a.ActionEmailForm,Object.assign({},e));case o.ActionType.NOTIFICATION:return n.createElement(s.ActionNotificationForm,Object.assign({},e));case void 0:return null;default:throw new Error("Unexpected action type:["+(null===(i=e.action)||void 0===i?void 0:i.type)+"]")}}},942:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(31),s=i(17),l=i(0),c=i(228),u=i(51);t.ActionEmailForm=e=>{const t=l.useContext(c.AppContext);return n.createElement("div",Object.assign({},u.getOuiaProps("Policy/Action/Email",e)),n.createElement(o.Text,null,"An email will be sent to all users on this account with access to Policies according to their email preferences."),!t.userSettings.isSubscribedForNotifications&&n.createElement(s.InsightsEmailOptIn,{ouiaId:"action-email.wizard-email-required",content:a.Messages.wizards.policy.actions.emailOptIn,insights:s.getInsights()}))}},943:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(0)),a=i(23),s=n(i(160)),l=i(31),c=i(51),u=e=>o.createElement(a.Text,null,e.head,o.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.link),e.tail);t.ActionNotificationForm=e=>{const t=o.useMemo(()=>s.default.pages.notifications(),[]);return o.createElement("div",Object.assign({},c.getOuiaProps("Policy/Action/Hook",e)),o.createElement(u,Object.assign({},l.Messages.components.actionNotificationForm.paragraph1,{url:t})),o.createElement(u,Object.assign({},l.Messages.components.actionNotificationForm.paragraph2,{url:t})))}},944:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(73),a=i(23),s=i(31),l=i(269),c=i(56),u=i(38),d=i(17),p=i(51),m=u.style({marginBottom:16});t.AddTriggersDropdown=e=>{const[t,i]=n.useState(!1),r=d.getInsights().chrome.isProd,u=Object.values(o.ActionType).filter(e=>!r||e!==o.ActionType.NOTIFICATION).map(t=>n.createElement(a.DropdownItem,{key:t,onClick:()=>(t=>{e.onTypeSelected(t),i(!1)})(t),isDisabled:!e.isTypeEnabled(t)},s.Messages.components.actionType[t]));return n.createElement(a.Dropdown,Object.assign({isOpen:t,dropdownItems:u,isPlain:!0,className:m,toggle:n.createElement(l.Toggle,{isPlain:!0,onToggle:e=>i(e),id:"add-action-toggle"},n.createElement(a.Button,{component:"a",variant:a.ButtonVariant.link,isInline:!0}," Add trigger actions ",n.createElement(c.AngleDownIcon,null)," "))},p.getOuiaProps("Policy/Wizard/AddTrigger",e)))}},945:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(149),a=i(98),s=i(156),l=i(17),c=i(23),u=i(175),d=i(0),p=i(38),m=i(31),f=i(417),h=i(420),y=i(418),g=p.style(Object.assign(Object.assign({backgroundColor:a.global_BackgroundColor_light_300.var},y.padding(18,14)),{margin:5})),_=()=>{const e=d.useContext(s.WizardContext),{values:t}=o.useFormikContext();return n.createElement(n.Fragment,null,n.createElement(l.Form,{ouiaId:"review-step"},n.createElement(c.Title,{headingLevel:"h2",size:"xl"},m.Messages.wizards.policy.review.title),n.createElement(l.Switch,{ouiaId:"is-enabled",isDisabled:e.isLoading,id:"isEnabled",name:"isEnabled",labelOn:m.Messages.wizards.policy.review.policyIsEnabled,labelOff:m.Messages.wizards.policy.review.policyIsDisabled,label:m.Messages.wizards.policy.review.enableThisPolicy}),n.createElement(c.Title,{headingLevel:"h2",size:"md"},m.Messages.wizards.policy.review.policy.details),n.createElement(l.FormText,{ouiaId:"name",label:m.Messages.wizards.policy.review.policy.name,name:"name",id:"name"}),n.createElement(l.FormText,{ouiaId:"description",label:m.Messages.wizards.policy.review.policy.description,name:"description",id:"description"}),n.createElement("div",{className:g},n.createElement(f.Conditions,{ouiaId:"review-step.conditions",conditions:t.conditions})),n.createElement("div",{className:g},n.createElement(h.Actions,{ouiaId:"review-step.actions",actions:t.actions||[]}))))};t.createReviewStep=e=>Object.assign({name:m.Messages.wizards.policy.review.title,component:n.createElement(_,null),validationSchema:u.PolicyFormSchema},e)},946:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(23),s=i(98),l=i(38),c=i(56),u=i(0),d=i(156),p=l.style({marginTop:"auto",marginBottom:14}),m=l.style({marginRight:5});t.PolicyWizardFooter=e=>{const t=u.useContext(d.WizardContext);return n.createElement(o.WizardFooter,null,n.createElement(o.WizardContextConsumer,null,i=>{const r=e.onNext&&(()=>{e.onNext&&e.onNext(t,i.onNext)});return n.createElement(n.Fragment,null,n.createElement(o.Button,{variant:o.ButtonVariant.primary,type:"submit",onClick:r||i.onNext,isDisabled:e.isLoading||!i.activeStep.enableNext},i.activeStep.nextButtonText||"Next"),!i.activeStep.hideBackButton&&n.createElement(o.Button,{variant:o.ButtonVariant.secondary,onClick:i.onBack,isDisabled:0===i.activeStep.id||e.isLoading},"Back"),!i.activeStep.hideCancelButton&&n.createElement(o.Button,{variant:o.ButtonVariant.link,onClick:i.onClose,isDisabled:e.isLoading},"Cancel"),e.isLoading&&n.createElement("div",{className:p},e.loadingText,"  ",n.createElement(a.Spinner,{size:"md"})),!e.isLoading&&e.error&&n.createElement(o.Split,{className:p},n.createElement(o.SplitItem,null,n.createElement(c.ExclamationCircleIcon,{className:m,color:s.global_danger_color_100.value})),n.createElement(o.SplitItem,null,e.error)))}))}},947:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(362),a=i(17),s=i(363),l=i(112),c=i(449);t.defaultPerPage=5,t.CreatePolicyStepContextProvider=e=>{const[i,r]=n.useState(!1),[u,d]=n.useState({}),p=o.usePolicyFilter(void 0,!1),m=a.useSort(),f=o.usePolicyPage(p.debouncedFilters,t.defaultPerPage,m.sortBy),h=s.useGetPoliciesQuery(f.page,!1),y=o.usePolicyRows(h.payload,h.loading,h.count,f.page),{query:g}=h;return l.useUpdateEffect(()=>{e.showCreateStep&&g()},[g,f.page,p.debouncedFilters,e.showCreateStep]),e.showCreateStep?n.createElement(c.CreatePolicyStepContext.Provider,{value:{copyPolicy:i,setCopyPolicy:r,copiedPolicy:u,setCopiedPolicy:d,policyFilter:p,policyPage:f,policySort:m,policyQuery:h,policyRows:y}},e.children):n.createElement(n.Fragment,null,e.children)}},948:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(340),n=i(17),o=e=>n.useUrlStateString("name",e),a=e=>n.useUrlStateExclusiveOptions("enabled",["Enabled","Disabled",""],""),s=e=>{switch(e){case r.PolicyFilterColumn.NAME:return o;case r.PolicyFilterColumn.IS_ACTIVE:return a;default:n.assertNever(e)}};t.usePolicyFilter=(e=250,t=!0)=>n.useFilters(r.PolicyFilterColumn,e,t?s:void 0)},949:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(17),a=i(340);t.usePolicyPage=(e,t,i)=>{const[r,s]=n.useState(1),[l,c]=n.useState(t);return n.useEffect(()=>{s(1)},[s,e]),{page:n.useMemo(()=>{const t=new o.Filter;return""!==e[a.PolicyFilterColumn.NAME].trim()&&t.and(a.PolicyFilterColumn.NAME,o.Operator.ILIKE,`%${e[a.PolicyFilterColumn.NAME].trim()}%`),""!==e[a.PolicyFilterColumn.IS_ACTIVE]&&t.and(a.PolicyFilterColumn.IS_ACTIVE,o.Operator.BOOLEAN_IS,"Enabled"===e[a.PolicyFilterColumn.IS_ACTIVE]?"true":"false"),o.Page.of(r,l,t,i)},[r,l,i,e]),changePage:n.useCallback((e,t)=>{s(t)},[s]),changeItemsPerPage:n.useCallback((e,t)=>{s(1),c(t)},[s,c])}}},950:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(339),a=i(17),s=i(112),l=i(951),c=new a.ImmutableContainerSet(void 0,a.ImmutableContainerSetMode.INCLUDE),u=new a.ImmutableContainerSet(void 0,a.ImmutableContainerSetMode.EXCLUDE);t.usePolicyRows=(e,t,i,r)=>{const[d,p]=n.useState([]),[m,f]=n.useState(c),h=s.usePrevious(e),{query:y,loading:g}=l.useGetPoliciesIdsQuery(),_=n.useCallback(()=>{f(c),p(e=>e.map(e=>Object.assign(Object.assign({},e),{isOpen:!1,isSelected:!1})))},[f]);n.useEffect(()=>{var i;t||!e?p([]):e!==h&&p(null===(i=e)||void 0===i?void 0:i.map(e=>Object.assign(Object.assign({},e),{isOpen:!1,isSelected:m.contains(e.id)})))},[e,t,p,h,m]);const E=n.useCallback((e,t,i)=>{p(r=>{const n=[...r];return n[t]=Object.assign(Object.assign({},e),{isOpen:i}),n})},[p]),v=n.useCallback(e=>{f(t=>t.remove(e))},[f]),b=n.useCallback((e,t,i)=>{f(t=>i?t.add(e.id):t.remove(e.id)),p(r=>{const n=[...r];return n[t]=Object.assign(Object.assign({},e),{isSelected:i}),n})},[f]),P=n.useCallback(e=>{e===o.SelectionCommand.NONE?(f(c),p(e=>e.map(e=>Object.assign(Object.assign({},e),{isSelected:!1})))):e===o.SelectionCommand.PAGE?(f(e=>e.addIterable(d.map(e=>e.id))),p(e=>e.map(e=>Object.assign(Object.assign({},e),{isSelected:!0})))):e===o.SelectionCommand.ALL?(f(u),p(e=>e.map(e=>Object.assign(Object.assign({},e),{isSelected:!0})))):a.assertNever(e)},[d]),O=n.useMemo(()=>m.size(i),[m,i]),T=n.useCallback(()=>m.mode===a.ImmutableContainerSetMode.INCLUDE?Promise.resolve(m.values()):y(r).then(e=>{if(e.error)throw e.errorObject;const t=new Set(e.payload);return m.values().forEach(e=>{t.delete(e)}),Array.from(t.values())}),[y,r,m]);return{rows:d,onCollapse:E,onSelect:b,onSelectionChanged:P,selectionCount:O,clearSelection:_,getSelected:T,loadingSelected:g,selected:m,removeSelection:v}}},951:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(63),n=i(97),o=i(17);t.actionCreator=e=>n.actionGetPoliciesIds(o.pageToQuery(e)),t.useGetPoliciesIdsQuery=()=>r.useParameterizedQuery(t.actionCreator)},952:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(63),n=e=>{var t;const i=null===(t=e.headers)||void 0===t?void 0:t.get("TotalCount");return Object.assign({count:i?+i:i},e)};t.useNewPaginatedQuery=(e,t)=>((e,t)=>t(e))(r.useQuery(e,t),n)},953:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(63),n=i(123),o=i(97);t.actionCreator=e=>o.actionPostPoliciesValidate({body:n.toServerPolicy(e)}),t.useVerifyPolicyMutation=()=>r.useMutation(t.actionCreator)},954:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(123),n=i(63),o=i(97),a=i(17);t.savePolicyActionCreator=e=>e.id?o.actionPutPoliciesByPolicyId({policyId:e.id,body:r.toServerPolicy(e)}):o.actionPostPolicies({alsoStore:!0,body:r.toServerPolicy(e)}),t.useSavePolicyMutation=()=>a.useTransformQueryResponse(n.useMutation(t.savePolicyActionCreator),r.toPolicy)},956:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(63),n=i(97);t.actionCreator=e=>n.actionPostPoliciesValidateName({body:e.name,id:e.id}),t.useValidatePolicyNameParametrizedQuery=()=>r.useParameterizedQuery(t.actionCreator)},957:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(0),n=i(958);t.useFacts=()=>{const[e,t]=r.useState(),{payload:i}=n.useGetFactsQuery(!0);return r.useEffect(()=>{i&&t(i)},[i,t]),e}},958:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(63),n=i(97);t.actionCreator=n.actionGetFacts,t.useGetFactsQuery=e=>r.useQuery(t.actionCreator(),e)},959:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(56),n=i(98),o=i(31);t.policyTableError=(e,t,i)=>{if(t)switch(i){case 404:return{icon:r.PlusCircleIcon,title:o.Messages.tables.policy.emptyState.notFound.title,content:o.Messages.tables.policy.emptyState.notFound.content};case 401:return{icon:r.ExclamationCircleIcon,title:"Refresh your browser",content:"Your session expired while using the application",action:e.refreshPage,actionLabel:"Reload page"};case 500:case 502:return{icon:r.ExclamationCircleIcon,iconColor:n.global_danger_color_200.value,title:"Internal server error",content:"The server was unable to process the request, please try again.",action:e.tryAgain,actionLabel:"Try again"};default:return{icon:r.ExclamationCircleIcon,iconColor:n.global_danger_color_200.value,title:"Unable to connect",content:"There was an error retrieving data. Check your connection and try again.",action:e.tryAgain,actionLabel:"Try again"}}}},960:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}(i(73))},961:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(63),n=i(97);t.actionCreator=e=>n.actionDeletePoliciesIds({body:e}),t.useMassDeletePoliciesMutation=()=>r.useMutation(t.actionCreator)},962:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(56),a=i(31),s=i(17),l=i(121),c=()=>n.createElement("br",null);t.ListPageEmptyState=e=>n.createElement(l.EmptyStateSection,{icon:o.CubesIcon,title:a.Messages.pages.listPage.emptyState.title,content:s.join(a.Messages.pages.listPage.emptyState.text,c),action:e.createPolicy,actionLabel:"Create policy"})},963:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(363),n=i(0);t.useGetListPagePolicies=e=>{const t=r.useGetPoliciesQuery(e,!1),i=r.useHasPoliciesQuery(),[o,a]=n.useState(),s=n.useMemo(()=>!e.hasFilter()&&1===e.index,[e]),l=n.useCallback(()=>{const e=t.query,r=i.query;return e().then(e=>{if(404===e.status){if(!s)return a(void 0),r().then(t=>(404===t.status?a(!1):200===t.status?a(!0):a(void 0),e));a(!1)}else 200===e.status?a(!0):a(void 0);return e})},[t.query,i.query,s]),c=n.useCallback(()=>{const e=t.abort,r=i.abort;e(),r()},[t.abort,i.abort]),u=n.useCallback(()=>{const e=t.reset,r=i.reset;e(),r()},[t.reset,i.reset]);return Object.assign(Object.assign({},t),{query:l,abort:c,reset:u,status:t.status,loading:i.loading||t.loading,errorObject:i.errorObject||t.errorObject,error:i.error||t.error,hasPolicies:o})}},964:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(123);t.useTableActionResolverCallback=e=>{const{canWriteAll:t,openPolicyToDelete:i,mutateChangePolicyEnabled:r,setPolicyWizardState:a}=e;return n.useCallback(e=>t?[{title:e.isEnabled?"Disable":"Enable",onClick:()=>{r({policyIds:[e.id],shouldBeEnabled:!e.isEnabled})}},{title:"Edit",onClick:()=>{a({isOpen:!0,template:e,showCreateStep:!1,isEditing:!0})}},{title:"Duplicate",onClick:()=>{a({isOpen:!0,template:o.makeCopyOfPolicy(e),showCreateStep:!1,isEditing:!1})}},{title:"Delete",onClick:()=>{i(e)}}]:[],[t,i,r,a])}},965:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(17);t.useListPageDelete=e=>{const{rows:t,onSelect:i,removeSelection:r,clearSelection:a,selectionCount:s}=e.policyRows,{changePage:l}=e.policyPage,{index:c,size:u}=e.policyPage.page,{close:d,policy:p}=e.policyToDelete,{reload:m,count:f}=e;return{onDeleted:n.useCallback(e=>{const n=t.findIndex(t=>t.id===e);-1===n?r(e):i(t[n],n,!1)},[t,i,r]),onCloseDeletePolicy:n.useCallback(e=>{if(e){m();const e=p?1:s,t=o.Page.lastPageForElements(f-e,u);t.index<c&&l(void 0,t.index),a()}d()},[m,f,d,a,l,c,s,u,p])}}},966:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(0)),a=n(i(482)),s=i(229),l=i(17),c=i(967);t.useToolbarActions=e=>{const{setPolicyWizardState:t,exportAllPoliciesQuery:i,mutateChangePolicyEnabled:r,openPolicyToDelete:n}=e,{selected:u,selectionCount:d,getSelected:p,rows:m}=e.policyRows;return{createCustomPolicy:o.useCallback(()=>{t({isOpen:!0,showCreateStep:!0,template:void 0,isEditing:!1})},[t]),onDeletePolicies:o.useCallback(()=>{if(1===d){const e=m.find(e=>u.contains(e.id));if(e)return void n(e)}n(d)},[d,n,u,m]),onDisablePolicies:o.useCallback(()=>p().then(e=>r({shouldBeEnabled:!1,policyIds:e})),[r,p]),onEnablePolicies:o.useCallback(()=>p().then(e=>r({shouldBeEnabled:!0,policyIds:e})),[r,p]),onExport:o.useCallback((e,t)=>{const r=c.policyExporterFactory(l.exporterTypeFromString(t));return i().then(e=>{e.payload?a.default(r.export(e.payload),`policies-${s.format(new Date(Date.now()),"y-dd-MM")}.${r.type}`):l.addDangerNotification("Unable to download policies","We were unable to download the policies for exporting")})},[i])}}},967:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(17),n=i(968),o=i(969);t.policyExporterFactory=e=>{switch(e){case r.ExporterType.CSV:return new n.PolicyExporterCsv;case r.ExporterType.JSON:return new o.PolicyExporterJson}r.assertNever(e)}},968:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(123),n=i(17);class o extends n.ExporterCsv{serialize(e){return Object.assign(Object.assign({},e),{actions:r.toServerAction(e.actions)})}headers(){return[["id","id"],["name","name"],["description","description"],["isEnabled","isEnabled"],["conditions","conditions"],["actions","actions"],["lastTriggered","lastTriggered"],["mtime","mtime"],["ctime","ctime"]]}}t.PolicyExporterCsv=o},969:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(17);class n extends r.ExporterJson{}t.PolicyExporterJson=n},97:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(17);t.actionGet=()=>{return r.actionBuilder("GET","/api/policies/v1.0/").queryParams({}).build()},t.actionGetFacts=()=>{return r.actionBuilder("GET","/api/policies/v1.0/facts").queryParams({}).build()},t.actionGetPolicies=e=>{const t={};return t["filter:op[description]"]=e.filterOpDescription,t["filter:op[name]"]=e.filterOpName,t["filter[description]"]=e.filterDescription,t["filter[is_enabled]"]=e.filterIsEnabled,t["filter[name]"]=e.filterName,t.limit=e.limit,t.offset=e.offset,t.sortColumn=e.sortColumn,t.sortDirection=e.sortDirection,r.actionBuilder("GET","/api/policies/v1.0/policies").queryParams(t).build()},t.actionPostPolicies=e=>{const t={};return t.alsoStore=e.alsoStore,r.actionBuilder("POST","/api/policies/v1.0/policies").queryParams(t).data(e.body).build()},t.actionGetPoliciesIds=e=>{const t={};return t["filter:op[description]"]=e.filterOpDescription,t["filter:op[name]"]=e.filterOpName,t["filter[description]"]=e.filterDescription,t["filter[is_enabled]"]=e.filterIsEnabled,t["filter[name]"]=e.filterName,r.actionBuilder("GET","/api/policies/v1.0/policies/ids").queryParams(t).build()},t.actionDeletePoliciesIds=e=>{return r.actionBuilder("DELETE","/api/policies/v1.0/policies/ids").queryParams({}).data(e.body).build()},t.actionPostPoliciesIdsEnabled=e=>{const t={};return t.enabled=e.enabled,r.actionBuilder("POST","/api/policies/v1.0/policies/ids/enabled").queryParams(t).data(e.body).build()},t.actionPostPoliciesValidate=e=>{return r.actionBuilder("POST","/api/policies/v1.0/policies/validate").queryParams({}).data(e.body).build()},t.actionPostPoliciesValidateName=e=>{const t={};return t.id=e.id,r.actionBuilder("POST","/api/policies/v1.0/policies/validate-name").queryParams(t).data(e.body).build()},t.actionGetPoliciesById=e=>{const t="/api/policies/v1.0/policies/{id}".replace("{id}",e.id.toString());return r.actionBuilder("GET",t).queryParams({}).build()},t.actionDeletePoliciesById=e=>{const t="/api/policies/v1.0/policies/{id}".replace("{id}",e.id.toString());return r.actionBuilder("DELETE",t).queryParams({}).build()},t.actionPostPoliciesByIdEnabled=e=>{const t="/api/policies/v1.0/policies/{id}/enabled".replace("{id}",e.id.toString()),i={};return i.enabled=e.enabled,r.actionBuilder("POST",t).queryParams(i).build()},t.actionGetPoliciesByIdHistoryTrigger=e=>{const t="/api/policies/v1.0/policies/{id}/history/trigger".replace("{id}",e.id.toString()),i={};return i["filter:op[id]"]=e.filterOpId,i["filter:op[name]"]=e.filterOpName,i["filter[id]"]=e.filterId,i["filter[name]"]=e.filterName,i.limit=e.limit,i.offset=e.offset,i.sortColumn=e.sortColumn,i.sortDirection=e.sortDirection,r.actionBuilder("GET",t).queryParams(i).build()},t.actionPutPoliciesByPolicyId=e=>{const t="/api/policies/v1.0/policies/{policyId}".replace("{policyId}",e.policyId.toString()),i={};return i.dry=e.dry,r.actionBuilder("PUT",t).queryParams(i).data(e.body).build()}},970:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(92),a=i(23),s=i(414),l=i(133),c=i(142),u=i(17),d=i(971),p=i(416),m=i(38),f=i(421),h=i(0),y=i(228),g=i(972),_=i(973),E=i(974),v=i(975),b=i(485),P=i(976),O=i(481),T=i(480),S=i(479),C=i(977),x=i(978),A=i(979),I=i(31),M=m.style({paddingBottom:8,paddingTop:16});t.PolicyDetail=()=>{var e;const{policyId:t,policy:i,setPolicy:r}=x.usePolicy(),m=h.useContext(y.AppContext),{canWriteAll:N,canReadAll:w}=m.rbac,j=l.useHistory(),R=T.usePolicyToDelete(),k=d.useGetPolicyParametrizedQuery(),D=O.useMassChangePolicyEnabledMutation(),L=C.useWizardState(i),F=n.useRef(null),B=n.useCallback(e=>{200===e.status&&e.payload&&r(e.payload)},[r]);n.useEffect(()=>{var e;const r=k.query;t!==(null===(e=i)||void 0===e?void 0:e.id)&&r(t).then(B)},[t,k.query,i,r,B]);const z=n.useCallback(e=>{const t=L.close;e&&r(e),t()},[r,L.close]),U=n.useCallback(()=>{const e=R.open;i&&e(i)},[i,R.open]),G=n.useCallback(e=>{const t=R.close;e?j.push(c.linkTo.listPage()):t()},[j,R.close]),V=n.useCallback(e=>{i&&r(Object.assign(Object.assign({},i),{isEnabled:e}))},[i,r]),H=n.useCallback(e=>{(0,D.mutate)({policyIds:[t],shouldBeEnabled:e}).then(i=>{var r;200===i.status?(null===(r=i.payload)||void 0===r?void 0:r.includes(t))?V(e):u.addDangerNotification(I.Messages.pages.policyDetail.errorChangingEnabledStatus.notFound.title,I.Messages.pages.policyDetail.errorChangingEnabledStatus.notFound.text):u.addDangerNotification(I.Messages.pages.policyDetail.errorChangingEnabledStatus.else.title,I.Messages.pages.policyDetail.errorChangingEnabledStatus.else.text)})},[t,D.mutate,V]);if(!w)return n.createElement(b.NoPermissionsPage,null);if(void 0===i){if(404===k.status)return n.createElement(_.PolicyDetailEmptyState,{policyId:t||""});if(!k.loading&&k.error){const i=(null===(e=k.payload)||void 0===e?void 0:e.msg)||`code: ${k.status}`;return n.createElement(E.PolicyDetailErrorState,{action:()=>{var e;null===(e=F.current)||void 0===e||e.refresh(),k.query(t).then(B)},error:i})}return n.createElement(g.PolicyDetailSkeleton,null)}return n.createElement(n.Fragment,null,n.createElement(s.Helmet,null,n.createElement("title",null,i.name," - Policies | Red Hat Insights")),n.createElement(o.PageHeader,null,n.createElement(a.Stack,null,n.createElement(a.StackItem,null,n.createElement(a.Breadcrumb,null,n.createElement(u.BreadcrumbLinkItem,{ouiaId:"to-list-page",to:c.linkTo.listPage()},"Policies"),n.createElement(a.BreadcrumbItem,{to:"#",isActive:!0},i.name))),n.createElement(a.StackItem,null,n.createElement(a.Split,null,n.createElement(a.SplitItem,{isFilled:!0},n.createElement(o.PageHeaderTitle,{title:i.name})),n.createElement(a.SplitItem,null,n.createElement(P.PolicyDetailActions,{isEnabled:i.isEnabled,disabled:!N,edit:L.edit,duplicate:L.duplicate,delete:U,changeEnabled:H,loadingEnabledChange:D.loading})))))),n.createElement(o.Main,null,n.createElement(u.Section,{ouiaId:"policy-detail",style:{paddingBottom:"4px"}},n.createElement(v.PolicyDetailIsEnabled,{isEnabled:i.isEnabled,loading:D.loading}),n.createElement(p.ExpandedContent,{actions:i.actions,description:i.description,created:i.ctime,updated:i.mtime,conditions:i.conditions})),n.createElement("div",{className:M},n.createElement(a.Title,{headingLevel:"h2",size:"lg"},"Recent trigger history")),n.createElement(A.TriggerDetailSection,{policyId:t,ref:F})),L.data.isOpen&&n.createElement(f.CreatePolicyWizard,{isOpen:!0,close:z,showCreateStep:!1,policiesExist:!1,initialValue:L.data.initialValue,isEditing:L.data.isEditing}),R.isOpen&&n.createElement(S.DeletePolicy,{onClose:G,loading:!1,count:R.count,policy:R.policy}))}},971:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(63),n=i(97),o=i(17),a=i(123);t.actionCreator=e=>n.actionGetPoliciesById({id:e}),t.useGetPolicyQuery=(e,i=!0)=>o.useTransformQueryResponse(r.useQuery(t.actionCreator(e),i),a.toPolicy),t.useGetPolicyParametrizedQuery=()=>o.useTransformQueryResponse(r.useParameterizedQuery(t.actionCreator),a.toPolicy)},972:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(92),a=i(23),s=i(56),l=i(17),c=i(142),u=i(38).style({width:200});t.PolicyDetailSkeleton=()=>n.createElement(n.Fragment,null,n.createElement(o.PageHeader,{"data-testid":"policy-loading"},n.createElement(a.Stack,null,n.createElement(a.StackItem,null,n.createElement(a.Breadcrumb,null,n.createElement(l.BreadcrumbLinkItem,{ouiaId:"to-list-page",to:c.linkTo.listPage()},"Policies"),n.createElement(a.BreadcrumbItem,null,n.createElement(o.Skeleton,{className:u,size:"sm"})))),n.createElement(a.StackItem,null,n.createElement(a.Split,null,n.createElement(a.SplitItem,{isFilled:!0},n.createElement(o.PageHeaderTitle,{title:n.createElement(o.Skeleton,{size:"sm"})})),n.createElement(a.SplitItem,null,n.createElement(a.Button,{isDisabled:!0,variant:a.ButtonVariant.plain},n.createElement(s.EllipsisVIcon,null))))))),n.createElement(o.Main,null,n.createElement(l.Section,{ouiaId:"loading-spinner"},n.createElement(a.Bullseye,null,n.createElement(o.Spinner,{centered:!0})))))},973:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(133),a=i(56),s=i(31),l=i(121),c=i(483),u=i(142);t.PolicyDetailEmptyState=e=>{const t=o.useHistory(),i=n.useCallback(()=>{t.push(u.linkTo.listPage())},[t]);return n.createElement(l.EmptyStateSection,{icon:a.UnknownIcon,title:s.Messages.pages.policyDetail.emptyState.title,content:c.format(s.Messages.pages.policyDetail.emptyState.text,e.policyId),actionLabel:s.Messages.pages.policyDetail.emptyState.backText,action:i})}},974:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(56),a=i(98),s=i(31),l=i(121),c=i(484);t.PolicyDetailErrorState=e=>{const t=c.useTextFormat(s.Messages.pages.policyDetail.errorState.text,[e.error]);return n.createElement(l.EmptyStateSection,{icon:o.ExclamationCircleIcon,iconColor:a.global_danger_color_100.value,title:s.Messages.pages.policyDetail.errorState.title,content:t,action:e.action,actionLabel:s.Messages.pages.policyDetail.errorState.actionText})}},975:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(98),s=i(38),l=i(92),c=i(207),u=s.style({marginLeft:a.global_spacer_md.var}),d=s.style({minHeight:48});t.PolicyDetailIsEnabled=e=>{if(e.loading)return n.createElement(o.Stack,{"data-testid":"loading",className:d},n.createElement(o.StackItem,null,n.createElement(l.Skeleton,{size:"sm"})));const{icon:t,text:i}=e.isEnabled?{icon:n.createElement(c.EnabledPolicyIcon,null),text:"Enabled"}:{icon:n.createElement(c.DisabledPolicyIcon,null),text:"Disabled"};return n.createElement(o.Stack,null,n.createElement(o.StackItem,null,t,n.createElement("span",{className:u},i)))}},976:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23);t.PolicyDetailActions=e=>{const[t,i]=n.useState(!1),r=n.useCallback(()=>{i(!1)},[]),a=n.useMemo(()=>{const t=e.changeEnabled,i=[];return e.isEnabled?i.push(n.createElement(o.DropdownItem,{isDisabled:e.loadingEnabledChange,onClick:()=>t(!1),key:"disable"},"Disable")):i.push(n.createElement(o.DropdownItem,{isDisabled:e.loadingEnabledChange,onClick:()=>t(!0),key:"enable"},"Enable")),i.push(n.createElement(o.DropdownItem,{key:"edit",onClick:e.edit},"Edit"),n.createElement(o.DropdownItem,{key:"duplicate",onClick:e.duplicate},"Duplicate"),n.createElement(o.DropdownItem,{key:"delete",onClick:e.delete},"Delete")),i},[e.isEnabled,e.changeEnabled,e.edit,e.duplicate,e.delete,e.loadingEnabledChange]);return n.createElement(o.Dropdown,{position:o.DropdownPosition.right,onSelect:r,toggle:n.createElement(o.KebabToggle,{"data-testid":"policy-detail-actions-button",isDisabled:e.disabled,onToggle:i,id:"policy-detail-actions-menu"}),isOpen:t,isPlain:!0,dropdownItems:a})}},977:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(123),a=i(17),s=i(0);var l;!function(e){e[e.EDIT=0]="EDIT",e[e.DUPLICATE=1]="DUPLICATE",e[e.CLOSE=2]="CLOSE"}(l||(l={}));const c={isEditing:!1,initialValue:void 0,isOpen:!1};t.useWizardState=e=>{const[t,i]=n.useReducer((t,i)=>{if(!e)return c;switch(i){case l.CLOSE:return c;case l.DUPLICATE:return{isEditing:!1,initialValue:o.makeCopyOfPolicy(e),isOpen:!0};case l.EDIT:return{isEditing:!0,initialValue:e,isOpen:!0};default:return a.assertNever(i)}},c);return{data:t,close:s.useCallback(()=>i(l.CLOSE),[i]),duplicate:s.useCallback(()=>i(l.DUPLICATE),[i]),edit:s.useCallback(()=>i(l.EDIT),[i])}}},978:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=i(89),o=r(i(0)),a=i(142),s=i(32),l=i(0),c=i(112);t.usePolicy=()=>{var e;const{policyId:t}=n.useParams(),i=c.usePrevious(t),r=n.useHistory(),[u,d]=o.useState(),p=(null===(e=u)||void 0===e?void 0:e.id)||t,m=o.useCallback((e,t)=>{s.unstable_batchedUpdates(()=>{d(t),r.push(a.linkTo.policyDetail(e))})},[r,d]),f=o.useCallback(e=>{t!==e.id?m(e.id,e):d(e)},[m,t]);return l.useEffect(()=>{i!==t&&(u&&u.id===t||d(void 0))},[t,i,m,r,u,p]),{policyId:p,policy:u,setPolicy:f}}},979:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(0)),a=n(i(482)),s=i(980),l=i(981),c=i(982),u=i(486),d=i(17),p=i(983),m=i(229),f=i(986),h=i(988),y=i(989),g=i(990),_=i(0),E=i(991),v=n(i(160)),b=d.Sort.by("ctime",d.Direction.DESCENDING),P=e=>{var t;return e.errorContent?o.createElement(o.Fragment,null," ",e.errorContent," "):e.payload&&e.payload.count>0||e.loading?o.createElement(c.TriggerTable,{rows:null===(t=e.payload)||void 0===t?void 0:t.data,onSort:e.sort.onSort,sortBy:e.sort.sortBy,loading:e.loading}):o.createElement(u.TriggerTableEmptyState,null)};t.TriggerDetailSection=_.forwardRef((e,t)=>{var i,r,n,c,u;const{policyId:O}=e,T=y.useTriggerFilter(),S=g.useGetPolicyDetailTriggerHistory(),[C,x]=o.useState(v.default.defaultElementsPerPage),A=d.useSort(b),{page:I,onPaginationChanged:M}=h.useTriggerPage(C,A.sortBy,T.debouncedFilters),N=_.useCallback(()=>{const e=S.query;O&&e({policyId:O,page:I})},[O,S.query,I]);o.useEffect(()=>{N()},[N]),o.useImperativeHandle(t,()=>({refresh:N}),[N]);const w=f.useGetAllTriggers(O,I.filter),j=o.useCallback(e=>{const t=p.triggerExporterFactory(d.exporterTypeFromString(e));w().then(e=>{e.length>0&&a.default(t.export(e),`policy-${O}-triggers-${m.format(new Date(Date.now()),"y-dd-MM")}.${t.type}`)})},[w,O]),R=o.useCallback((e,t)=>{x(t)},[x]);let k;if(!S.loading&&S.error&&404!==S.status){const e=null!=(r=null===(i=S.payload)||void 0===i?void 0:i.msg)?r:`code: ${S.status}`;k=o.createElement(E.TriggerErrorState,{action:N,error:e})}return o.createElement(d.Section,{ouiaId:"trigger-detail-section"},!1===S.hasTriggers?o.createElement(s.PolicyDetailTriggerEmptyState,null):o.createElement(o.Fragment,null,o.createElement(l.TriggerTableToolbar,{count:null===(n=S.payload)||void 0===n?void 0:n.count,page:I,onPaginationChanged:M,onPaginationSizeChanged:R,pageCount:null===(u=null===(c=S.payload)||void 0===c?void 0:c.data)||void 0===u?void 0:u.length,filters:T.filters,setFilters:T.setFilters,clearFilters:T.clearFilter,onExport:j},o.createElement(P,{loading:S.loading,payload:S.payload,sort:A,errorContent:k}))))})},980:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(31),a=i(121);t.PolicyDetailTriggerEmptyState=()=>n.createElement(a.EmptyStateSection,{title:o.Messages.pages.policyDetail.triggerEmptyState.title,content:o.Messages.pages.policyDetail.triggerEmptyState.text})},981:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(23),a=i(92),s=i(17),l=i(364),c=i(51),u={[l.TriggerFilterColumn.NAME]:{label:"System",placeholder:"Filter by System"}};t.TriggerTableToolbar=e=>{const t=s.usePrimaryToolbarFilterConfig(l.TriggerFilterColumn,e.filters,e.setFilters,e.clearFilters,u),i=n.useMemo(()=>({itemCount:e.count||0,page:e.page.index,perPage:e.page.size,perPageOptions:void 0,onSetPage:e.onPaginationChanged,onFirstClick:e.onPaginationChanged,onPreviousClick:e.onPaginationChanged,onNextClick:e.onPaginationChanged,onLastClick:e.onPaginationChanged,onPageInput:e.onPaginationChanged,onPerPageSelect:e.onPaginationSizeChanged,isCompact:!0,variant:o.PaginationVariant.top}),[e.onPaginationChanged,e.page,e.count,e.onPaginationSizeChanged]),r=n.useMemo(()=>({itemCount:e.count||0,page:e.page.index,perPage:e.page.size,perPageOptions:void 0,onSetPage:e.onPaginationChanged,onFirstClick:e.onPaginationChanged,onPreviousClick:e.onPaginationChanged,onNextClick:e.onPaginationChanged,onLastClick:e.onPaginationChanged,onPageInput:e.onPaginationChanged,onPerPageSelect:e.onPaginationSizeChanged,isCompact:!1,variant:o.PaginationVariant.bottom}),[e.onPaginationChanged,e.page,e.count,e.onPaginationSizeChanged]),d=n.useMemo(()=>{const t=e.onExport;return{extraItems:[],onSelect:(e,i)=>{t(s.exporterTypeFromString(i))},"data-testid":"trigger-toolbar-export-container"}},[e.onExport]);return n.createElement("div",Object.assign({},c.getOuiaProps("Trigger/TableDualToolbar",e)),n.createElement(a.PrimaryToolbar,{pagination:i,exportConfig:d,filterConfig:t.filterConfig,activeFiltersConfig:t.activeFiltersConfig}),e.children,n.createElement(a.PrimaryToolbar,{pagination:r}))}},982:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(0)),a=i(365),s=i(92),l=i(17),c=i(31),u=n(i(187)),d=i(486),p=i(51),m=[{title:c.Messages.tables.trigger.columns.date,transforms:[a.sortable],cellTransforms:[a.nowrap]},{title:c.Messages.tables.trigger.columns.system,transforms:[a.sortable],cellTransforms:[a.wrappable,a.breakWord]}],f=e=>l.localUrl(`/insights/inventory/${e}/`,l.getInsights().chrome.isBeta());t.TriggerTable=e=>{const t=o.useMemo(()=>{const t=e.rows;return t?t.map((e,t)=>({id:`${e.id}-${t}`,key:`${e.id}-${t}`,cells:[{title:o.createElement(a.TableText,null,u.default(l.toUtc(e.created),"dd MMM yyyy HH:mm:ss")," UTC")},{title:e.id?o.createElement(a.TableText,null,o.createElement("a",{href:f(e.id)},e.hostName)):o.createElement(a.TableText,null,e.hostName)}]})):[]},[e.rows]),i=o.useCallback((t,i,r)=>{const n=e.onSort;if(n){n(i,0===i?"ctime":"name",r===a.SortByDirection.asc?l.Direction.ASCENDING:l.Direction.DESCENDING)}},[e.onSort]),r=o.useMemo(()=>{if(e.sortBy)return{index:"ctime"===e.sortBy.column?0:1,direction:e.sortBy.direction===l.Direction.ASCENDING?"asc":"desc"}},[e.sortBy]);return e.loading?o.createElement(s.SkeletonTable,{testID:"trigger-table-loading",rowSize:10,columns:m,sortBy:r}):0===t.length?o.createElement(d.TriggerTableEmptyState,null):o.createElement("div",Object.assign({},p.getOuiaProps("Trigger/Table",e)),o.createElement(a.Table,{"aria-label":c.Messages.tables.trigger.title,rows:t,cells:m,onSort:i,sortBy:r},o.createElement(a.TableHeader,null),o.createElement(a.TableBody,null)))}},983:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(17),n=i(984),o=i(985);t.triggerExporterFactory=e=>{switch(e){case r.ExporterType.CSV:return new n.TriggerExporterCsv;case r.ExporterType.JSON:return new o.TriggerExporterJson}r.assertNever(e)}},984:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(17);class n extends r.ExporterCsv{serialize(e){return Object.assign({},e)}headers(){return[["created","ctime"],["hostName","system"],["id","id"]]}}t.TriggerExporterCsv=n},985:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(17);class n extends r.ExporterJson{}t.TriggerExporterJson=n},986:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(487),o=i(0),a=i(63),s=i(17);t.useGetAllTriggers=(e,t)=>{const i=a.useClient();return o.useCallback(()=>new Promise(o=>r(void 0,void 0,void 0,(function*(){const r=[];let a=s.Page.of(1,200,t);for(;;){const t=yield i.query(n.actionCreator({policyId:e,page:a}));if(200!==t.status)break;const o=n.dataToTriggers(t.payload);if(o.data&&(r.push(...o.data),(a=a.nextPage()).index>s.Page.lastPageForElements(o.count,a.size).index))break}o(r)}))),[i,e,t])}},987:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(206));t.toTrigger=e=>({id:e.id||"",hostName:e.hostName||"",created:e.ctime?n.default(e.ctime/1e3):new Date(Date.now())}),t.toTriggers=e=>e?e.map(t.toTrigger):[]},988:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(0),a=i(17),s=i(364);t.useTriggerPage=(e,t,i)=>{const r=n.useMemo(()=>{const e=new a.Filter,t=i[s.TriggerFilterColumn.NAME];return t&&""!==t.trim()&&e.and("name",a.Operator.LIKE,t.trim()),e},[i]),[l,c]=n.useState(()=>a.Page.of(1,e,r,t));return o.useEffect(()=>{c(e=>e.sort!==t?a.Page.of(e.index,e.size,e.filter,t):e)},[t]),o.useEffect(()=>{c(e=>e.filter!==r?a.Page.of(1,e.size,r,e.sort):e)},[r]),o.useEffect(()=>{c(t=>t.size!==e?a.Page.of(1,e,t.filter,t.sort):t)},[e]),{page:l,onPaginationChanged:n.useCallback((e,t)=>{c(e=>e.withPage(t))},[c])}}},989:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(17),n=i(17),o=i(364),a=e=>r.useUrlStateString("system",e),s=e=>{switch(e){case o.TriggerFilterColumn.NAME:return a;default:n.assertNever(e)}};t.useTriggerFilter=(e=250)=>r.useFilters(o.TriggerFilterColumn,e,s)},990:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(0),n=i(487);t.useGetPolicyDetailTriggerHistory=()=>{const e=n.useGetPolicyTriggersParametrizedQuery(),t=n.useHasPolicyTriggersParametrizedQuery(),[i,o]=r.useState(),a=r.useCallback((...i)=>{const[{policyId:r,page:n}]=i,a=e.query,s=t.query,l=!n.hasFilter()&&1===n.index;return a({policyId:r,page:n}).then(e=>{if(404===e.status){if(!l)return o(void 0),s(r).then(t=>(404===t.status?o(!1):200===t.status?o(!0):o(void 0),e));o(!1)}else 200===e.status?o(!0):o(void 0);return e})},[e.query,t.query]),s=r.useCallback(()=>{const i=e.abort,r=t.abort;i(),r()},[e.abort,t.abort]),l=r.useCallback(()=>{const i=e.reset,r=t.reset;i(),r()},[e.reset,t.reset]);return Object.assign(Object.assign({},e),{query:a,abort:s,reset:l,status:e.status,loading:t.loading||e.loading,errorObject:t.errorObject||e.errorObject,error:t.error||e.error,hasTriggers:i})}},991:function(e,t,i){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(0)),o=i(56),a=i(98),s=i(31),l=i(121),c=i(484);t.TriggerErrorState=e=>{const t=c.useTextFormat(s.Messages.pages.policyDetail.triggerErrorState.text,[e.error]);return n.createElement(l.EmptyStateSection,{icon:o.ExclamationCircleIcon,iconColor:a.global_danger_color_100.value,title:s.Messages.pages.policyDetail.triggerErrorState.title,content:t,action:e.action,actionLabel:s.Messages.pages.policyDetail.triggerErrorState.actionText})}},992:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(0),o=i(133),a=i(17),s=r(i(160)),l=i(993);t.useApp=()=>{const e=o.useHistory(),[t,i]=n.useState(void 0),r=l.useUserSettings(9e5);return n.useEffect(()=>(a.waitForInsights().then(e=>{e.chrome.init(),e.chrome.identifyApp(s.default.appId),e.chrome.hasOwnProperty("hideGlobalFilter")&&e.chrome.hideGlobalFilter&&e.chrome.hideGlobalFilter()}),()=>{a.getInsights().chrome.on("APP_NAVIGATION",t=>e.push(`/${t.navId}`))}),[e]),n.useEffect(()=>{a.waitForInsights().then(e=>{e.chrome.auth.getUser().then(()=>{a.fetchRBAC(s.default.appId).then(i)})})},[]),{rbac:t,userSettings:r}}},993:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(994),n=i(0),o=i(17);t.useUserSettings=e=>{const t=r.useUserSettingsEmailQuery(),i=t.query;return o.useSyncInterval(e,n.useCallback(()=>{i()},[i])),n.useMemo(()=>{let e=!1;const r=t.payload;return r&&(e=!!r.dailyEmail||!!r.immediateEmail),{settings:t.payload,refresh:i,isSubscribedForNotifications:e}},[t.payload,i])}},994:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(160)),o=i(63),a=i(17),s=n.default.apis.urls;t.adapter=e=>{const t={dailyEmail:!1,immediateEmail:!1};return e.forEach(e=>e.fields.forEach(e=>{"dailyEmail"===e.name?t.dailyEmail=e.initialValue:"immediateEmail"===e.name&&(t.immediateEmail=e.initialValue)})),t},t.useUserSettingsEmailQuery=e=>a.useTransformQueryResponse(o.useQuery(a.actionBuilder("GET",s.userSettings.email).build(),e),t.adapter)}});
//# sourceMappingURL=App.js.map