!function(e){function t(t){for(var r,i,o=t[0],a=t[1],l=t[2],c=0,s=[];c<o.length;c++)i=o[c],Object.prototype.hasOwnProperty.call(j,i)&&j[i]&&s.push(j[i][0]),j[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(D&&D(t);s.length;)s.shift()();return I.push.apply(I,l||[]),n()}function n(){for(var e,t=0;t<I.length;t++){for(var n=I[t],r=!0,i=1;i<n.length;i++){var o=n[i];0!==j[o]&&(r=!1)}r&&(I.splice(t--,1),e=k(k.s=n[0]))}return e}var r=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!O[e]||!E[e])return;for(var n in E[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(h[n]=t[n]);0==--g&&0===b&&w()}(e,t),r&&r(e,t)};var i,o=!0,a="0cee03ab89d150e77de3",l=1e4,c={},s=[],u=[];function d(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:i!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:S,apply:A,status:function(e){if(!e)return p;f.push(e)},addStatusHandler:function(e){f.push(e)},removeStatusHandler:function(e){var t=f.indexOf(e);t>=0&&f.splice(t,1)},data:c[e]};return i=void 0,t}var f=[],p="idle";function m(e){p=e;for(var t=0;t<f.length;t++)f[t].call(null,e)}var v,h,y,g=0,b=0,_={},E={},O={};function P(e){return+e+""===e?+e:e}function S(e){if("idle"!==p)throw new Error("check() is only allowed in idle status");return o=e,m("check"),(t=l,t=t||1e4,new Promise((function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,i=k.p+""+a+".hot-update.json";r.open("GET",i,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}}))).then((function(e){if(!e)return m("idle"),null;E={},_={},O=e.c,y=e.h,m("prepare");var t=new Promise((function(e,t){v={resolve:e,reject:t}}));for(var n in h={},j)C(n);return"prepare"===p&&0===b&&0===g&&w(),t}));var t}function C(e){O[e]?(E[e]=!0,g++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=k.p+""+e+"."+a+".hot-update.js",document.head.appendChild(t)}(e)):_[e]=!0}function w(){m("ready");var e=v;if(v=null,e)if(o)Promise.resolve().then((function(){return A(o)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&t.push(P(n));e.resolve(t)}}function A(t){if("ready"!==p)throw new Error("apply() is only allowed in ready status");var n,r,i,o,l;function u(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var i=r.pop(),a=i.id,l=i.chain;if((o=M[a])&&!o.hot._selfAccepted){if(o.hot._selfDeclined)return{type:"self-declined",chain:l,moduleId:a};if(o.hot._main)return{type:"unaccepted",chain:l,moduleId:a};for(var c=0;c<o.parents.length;c++){var s=o.parents[c],u=M[s];if(u){if(u.hot._declinedDependencies[a])return{type:"declined",chain:l.concat([s]),moduleId:a,parentId:s};-1===t.indexOf(s)&&(u.hot._acceptedDependencies[a]?(n[s]||(n[s]=[]),d(n[s],[a])):(delete n[s],t.push(s),r.push({chain:l.concat([s]),id:s})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var f={},v=[],g={},b=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var _ in h)if(Object.prototype.hasOwnProperty.call(h,_)){var E;l=P(_);var S=!1,C=!1,w=!1,A="";switch((E=h[_]?u(l):{type:"disposed",moduleId:_}).chain&&(A="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(S=new Error("Aborted because of self decline: "+E.moduleId+A));break;case"declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(S=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+A));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(E),t.ignoreUnaccepted||(S=new Error("Aborted because "+l+" is not accepted"+A));break;case"accepted":t.onAccepted&&t.onAccepted(E),C=!0;break;case"disposed":t.onDisposed&&t.onDisposed(E),w=!0;break;default:throw new Error("Unexception type "+E.type)}if(S)return m("abort"),Promise.reject(S);if(C)for(l in g[l]=h[l],d(v,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,l)&&(f[l]||(f[l]=[]),d(f[l],E.outdatedDependencies[l]));w&&(d(v,[E.moduleId]),g[l]=b)}var I,T=[];for(r=0;r<v.length;r++)l=v[r],M[l]&&M[l].hot._selfAccepted&&g[l]!==b&&T.push({module:l,errorHandler:M[l].hot._selfAccepted});m("dispose"),Object.keys(O).forEach((function(e){!1===O[e]&&function(e){delete j[e]}(e)}));for(var F,x,D=v.slice();D.length>0;)if(l=D.pop(),o=M[l]){var N={},R=o.hot._disposeHandlers;for(i=0;i<R.length;i++)(n=R[i])(N);for(c[l]=N,o.hot.active=!1,delete M[l],delete f[l],i=0;i<o.children.length;i++){var B=M[o.children[i]];B&&((I=B.parents.indexOf(l))>=0&&B.parents.splice(I,1))}}for(l in f)if(Object.prototype.hasOwnProperty.call(f,l)&&(o=M[l]))for(x=f[l],i=0;i<x.length;i++)F=x[i],(I=o.children.indexOf(F))>=0&&o.children.splice(I,1);for(l in m("apply"),a=y,g)Object.prototype.hasOwnProperty.call(g,l)&&(e[l]=g[l]);var V=null;for(l in f)if(Object.prototype.hasOwnProperty.call(f,l)&&(o=M[l])){x=f[l];var L=[];for(r=0;r<x.length;r++)if(F=x[r],n=o.hot._acceptedDependencies[F]){if(-1!==L.indexOf(n))continue;L.push(n)}for(r=0;r<L.length;r++){n=L[r];try{n(x)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:l,dependencyId:x[r],error:e}),t.ignoreErrored||V||(V=e)}}}for(r=0;r<T.length;r++){var z=T[r];l=z.module,s=[l];try{k(l)}catch(e){if("function"==typeof z.errorHandler)try{z.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:n,originalError:e}),t.ignoreErrored||V||(V=n),V||(V=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:l,error:e}),t.ignoreErrored||V||(V=e)}}return V?(m("fail"),Promise.reject(V)):(m("idle"),new Promise((function(e){e(v)})))}var M={},j={0:0},I=[];function k(t){if(M[t])return M[t].exports;var n=M[t]={i:t,l:!1,exports:{},hot:d(t),parents:(u=s,s=[],u),children:[]};return e[t].call(n.exports,n,n.exports,function(e){var t=M[e];if(!t)return k;var n=function(n){return t.hot.active?(M[n]?-1===M[n].parents.indexOf(e)&&M[n].parents.push(e):(s=[e],i=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),s=[]),k(n)},r=function(e){return{configurable:!0,enumerable:!0,get:function(){return k[e]},set:function(t){k[e]=t}}};for(var o in k)Object.prototype.hasOwnProperty.call(k,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(n,o,r(o));return n.e=function(e){return"ready"===p&&m("prepare"),b++,k.e(e).then(t,(function(e){throw t(),e}));function t(){b--,"prepare"===p&&(_[e]||C(e),0===b&&0===g&&w())}},n.t=function(e,t){return 1&t&&(e=n(e)),k.t(e,-2&t)},n}(t)),n.l=!0,n.exports}k.m=e,k.c=M,k.d=function(e,t,n){k.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},k.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},k.t=function(e,t){if(1&t&&(e=k(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(k.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)k.d(n,r,function(t){return e[t]}.bind(null,r));return n},k.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return k.d(t,"a",t),t},k.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},k.p="/beta/apps/policies/",k.h=function(){return a};var T=window.webpackJsonp=window.webpackJsonp||[],F=T.push.bind(T);T.push=t,T=T.slice();for(var x=0;x<T.length;x++)t(T[x]);var D=F;I.push([542,1]),n()}({1003:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=n(29),l=n(175),c=n(75),s=n(1004),u=n(78),d=i(n(119)),f=n(2),p=n(172),m=n(185),v=function(){var e=o.useState(!1),t=e[0],n=e[1],r=o.useState(),i=r[0],d=r[1],v=u.useFormikContext(),h=v.validate,y=v.validateField,g=v.setValues,b=v.setFieldValue,_=f.useContext(l.WizardContext).setVerifyResponse,E=o.useCallback((function(){n(!1),d(void 0)}),[n,d]),O=o.useCallback((function(){n(!0)}),[n]);o.useEffect((function(){i&&(g(i),_({policy:i,isValid:!0})),b("isValid",!t||!!i),h&&y("isValid")}),[t,i,h,y,b,g,_]);var P=o.useCallback((function(e){d(p.makeCopyOfPolicy(e))}),[d]);return o.createElement(o.Fragment,null,o.createElement(m.Form,null,o.createElement(a.Title,{headingLevel:"h4",size:"xl"},c.Messages.wizards.policy.createPolicy.title),o.createElement("span",null,"Define a new policy:"),o.createElement(a.Radio,{isChecked:!t,name:"new-policy",value:"from-scratch",id:"create-new-custom-policy-from-scratch",onChange:E,label:"From scratch"}),o.createElement(a.Radio,{isChecked:t,name:"new-policy",value:"as-copy",id:"create-new-custom-policy-as-copy",onChange:O,label:"As a copy of existing Policy"}),t&&o.createElement(o.Fragment,null,o.createElement(s.CopyFromPolicy,{onSelect:P}))))};t.createCustomPolicyStep=function(e){return r({name:c.Messages.wizards.policy.createPolicy.title,component:o.createElement(v,null),validationSchema:d.object().shape({isValid:d.boolean().oneOf([!0])})},e)}},1004:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(325),a=n(173),l=n(462),c=n(117),s=n(504),u=n(505);t.CopyFromPolicy=function(e){var t,n=a.usePolicyFilter(),r=a.usePolicyPage(n.debouncedFilters,5),d=s.useSort(),f=c.useGetPoliciesQuery(r.page,!0),p=u.usePolicyRows(f.payload,f.loading),m=e.onSelect,v=f.payload,h=p.onSelect,y=i.useCallback((function(e,t,n){h(e,t,n),v&&n&&m(v[t])}),[m,h,v]);return i.createElement(i.Fragment,null,i.createElement(o.PolicyToolbar,{onPaginationChanged:r.changePage,page:r.currentPage,pageCount:null===(t=f.payload)||void 0===t?void 0:t.length,perPage:r.itemsPerPage,showPerPageOptions:!1,hideActions:!0,hideBulkSelect:!0,filterElements:n.filters,setFilterElements:n.setFilters,clearFilters:n.clearFilterHandler,count:f.count}),i.createElement(l.PolicyTable,{columnsToShow:["radioSelect","name","actions"],policies:p.rows,onSelect:y,loading:f.loading,loadingRowCount:5,onSort:d.onSort,sortBy:d.sortBy}))}},1005:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=n(29),l=n(332),c=n(153),s=n(75),u=n(185),d=function(){return o.createElement(u.Form,null,o.createElement(a.Title,{headingLevel:"h4",size:"xl"},s.Messages.wizards.policy.details.title),o.createElement(l.FormTextInput,{isRequired:!0,label:"Name",type:"text",name:"name",id:"name"}),o.createElement(l.FormTextArea,{label:"Description",type:"text",id:"description",name:"description",resizeOrientation:"vertical"}))};t.createDetailsStep=function(e){return r({name:s.Messages.wizards.policy.details.title,component:o.createElement(d,null),validationSchema:c.PolicyFormDetails},e)}},1006:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=n(78),l=n(29),c=n(152);t.Checkbox=function(e){var t=a.useField(r(r({},e),{type:"checkbox"})),n=t[0],i=t[1],s=!i.error||!i.touched;return o.createElement(l.FormGroup,{fieldId:e.id,helperTextInvalid:i.error,isRequired:e.isRequired,isValid:s,label:e.label},o.createElement(l.Checkbox,r({isChecked:n.checked},e,n,{isValid:s,onChange:c.onChangePFAdapter(n)})))}},1007:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=n(78),l=n(29),c=n(152);t.FormSelect=function(e){var t=a.useField(r({},e)),n=t[0],i=t[1],s=!i.error||!i.touched;return o.createElement(l.FormGroup,{fieldId:e.id,helperTextInvalid:i.error,isRequired:e.isRequired,isValid:s,label:e.label},o.createElement(l.FormSelect,r({},e,n,{onChange:c.onChangePFAdapter(n),isValid:s}),e.children))}},1008:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(2)),l=n(78),c=n(29),s=n(152);t.Switch=function(e){var t=l.useField(r(r({},e),{type:"checkbox"})),n=t[0],o=t[1],u=e.labelOn,d=i(e,["labelOn"]),f=!o.error||!o.touched;return a.createElement(c.FormGroup,{fieldId:e.id,helperTextInvalid:o.error,isRequired:e.isRequired,isValid:f,label:e.label},a.createElement("div",null,a.createElement(c.Switch,r({isChecked:n.checked},d,n,{label:u,onChange:s.onChangePFAdapter(n)}))))}},1009:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(2)),l=n(78),c=n(29),s=n(152);t.FormTextInput=function(e){var t=e.hint,n=i(e,["hint"]),o=l.useField(r({},n)),u=o[0],d=o[1],f=!d.error||!d.touched;return a.createElement(c.FormGroup,{fieldId:e.id,helperTextInvalid:d.error,isRequired:e.isRequired,isValid:f,label:e.label},a.createElement(c.TextInput,r({},n,u,{value:u.value||"",isValid:f,onChange:s.onChangePFAdapter(u)})),t&&a.createElement(c.Text,{component:c.TextVariants.small},t))}},1010:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=n(78),l=n(29),c=n(152);t.FormTextArea=function(e){var t=a.useField(r({},e)),n=t[0],i=t[1],s=!i.error||!i.touched;return o.createElement(l.FormGroup,{fieldId:e.id,helperTextInvalid:i.error,isRequired:e.isRequired,isValid:s,label:e.label},o.createElement(l.TextArea,r({},e,n,{value:n.value||"",isValid:s,onChange:c.onChangePFAdapter(n)})))}},1011:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=n(78),l=n(29);t.FormText=function(e){var t=a.useField(r({},e)),n=t[0],i=t[1],c=!i.error||!i.touched;return o.createElement(l.FormGroup,{fieldId:e.id,helperTextInvalid:i.error,isRequired:e.isRequired,isValid:c,label:e.label},o.createElement(l.Text,r({component:l.TextVariants.p},e,n),n.value||""))}},1012:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1013);t.ActionSchema=r.ActionSchema;var i=n(1014);t.ActionEmailSchema=i.ActionEmailSchema;var o=n(1015);t.ActionWebhookSchema=o.ActionWebhookSchema},1013:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(119));t.ActionSchema=i.object().shape({type:i.mixed().required("Specify the action type")})},1014:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(119));t.ActionEmailSchema=i.object().shape({type:i.mixed()})},1015:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(119));t.ActionWebhookSchema=i.object().shape({type:i.mixed()})},1016:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=n(29),l=n(106),c=n(332),s=n(175),u=n(153),d=n(78),f=n(60),p=n(149),m=n(75),v=n(468),h=n(185),y=f.style({marginTop:"auto",marginBottom:"auto",marginLeft:8}),g=f.style({width:"100%"}),b=f.style({marginTop:12}),_=f.style({color:p.GlobalDangerColor100}),E=f.style({color:p.GlobalSuccessColor200}),O=f.style({fontWeight:"bold"}),P=function(e){return e.loading?o.createElement(a.Split,null,o.createElement(a.SplitItem,null,o.createElement("span",{className:y},o.createElement(a.Spinner,{size:"md"})),o.createElement("span",{className:y}," ",m.Messages.wizards.policy.conditions.validating," "))):e.changed?null:e.isValid?o.createElement(a.Split,null,o.createElement(a.SplitItem,null,o.createElement(l.CheckCircleIcon,{className:y,color:p.GlobalSuccessColor200})),o.createElement(a.SplitItem,null,o.createElement("div",{className:v.joinClasses(y,E,O)},m.Messages.wizards.policy.conditions.valid))):e.error?o.createElement(a.Stack,null,o.createElement(a.StackItem,null,o.createElement(a.Split,null,o.createElement(a.SplitItem,null,o.createElement(l.ExclamationCircleIcon,{className:y,color:p.GlobalDangerColor100})),o.createElement(a.SplitItem,null,o.createElement("div",{className:v.joinClasses(y,_,O)},m.Messages.wizards.policy.conditions.invalid)))),o.createElement(a.StackItem,null,o.createElement("div",{className:v.joinClasses(y,_)}," ",e.error," "))):null},S=function(){var e,t=o.useContext(s.WizardContext),n=d.useFormikContext().values,i=!n.conditions||""===n.conditions||t.isLoading;return o.createElement(h.Form,null,o.createElement(a.Title,{headingLevel:"h4",size:"xl"},m.Messages.wizards.policy.conditions.title),o.createElement(c.FormTextInput,{isRequired:!0,label:"Condition text",type:"text",id:"conditions",name:"conditions",hint:m.Messages.wizards.policy.conditions.hint}),o.createElement(a.Stack,{className:g},o.createElement(a.StackItem,null,o.createElement(a.Button,{onClick:function(){t.triggerAction(s.WizardActionType.VALIDATE_CONDITION)},isDisabled:i,variant:a.ButtonVariant.secondary},"Validate condition")),o.createElement(a.StackItem,{className:b},o.createElement(P,r({loading:t.isLoading},t.verifyResponse,{changed:(null===(e=t.verifyResponse.policy)||void 0===e?void 0:e.conditions)!==n.conditions})))))};t.createConditionsStep=function(e){return r({name:m.Messages.wizards.policy.conditions.title,component:o.createElement(S,null),validationSchema:u.PolicyFormConditions,isValid:function(e,t){var n;return t.conditions===(null===(n=e.verifyResponse.policy)||void 0===n?void 0:n.conditions)&&e.verifyResponse.isValid}},e)}},1017:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(2)),c=n(29),s=n(153),u=n(78),d=n(1018),f=n(75),p=n(85),m=n(165),v=n(245),h=n(106),y=function(e){var t=l.useState(!1),n=t[0],r=t[1],a=Object.values(p.ActionType).filter((function(e){return i(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,m.getInsights()];case 1:return[2,t.sent().chrome.isBeta()||e!==p.ActionType.WEBHOOK]}}))}))})).map((function(t){return l.createElement(c.DropdownItem,{key:t,onClick:function(){return function(t){e.addType(t),r(!1)}(t)},isDisabled:!e.isTypeEnabled(t)},f.Messages.components.actionType[t])}));return l.createElement(c.Dropdown,{isOpen:n,dropdownItems:a,isPlain:!0,toggle:l.createElement(v.Toggle,{isPlain:!0,onToggle:function(e){return r(e)},id:"add-action-toggle"},l.createElement(c.Button,{component:"a",variant:c.ButtonVariant.link,isInline:!0}," Add trigger actions ",l.createElement(h.AngleDownIcon,null)," "))})},g=function(){var e,t=u.useFormikContext(),n=t.validateForm,r=null===(e=t.values.actions)||void 0===e?void 0:e.length;return l.useEffect((function(){n()}),[n,r]),l.createElement(l.Fragment,null,l.createElement(c.Title,{headingLevel:"h4",size:"xl"},f.Messages.wizards.policy.actions.title),l.createElement(u.FieldArray,{name:"actions"},(function(e){return l.createElement(l.Fragment,null,l.createElement(y,{isTypeEnabled:function(t){var n;return 0===((null===(n=e.form.values.actions)||void 0===n?void 0:n.filter((function(e){return e.type===t})))||[]).length},addType:function(t){e.push({type:t})}}),l.createElement(d.ActionsForm,{id:"actions",name:"actions",actions:e.form.values.actions,arrayHelpers:e}))})))};t.createActionsStep=function(e){return r({name:f.Messages.wizards.policy.actions.title,component:l.createElement(g,null),validationSchema:s.PolicyFormActions},e)}},1018:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85),o=n(29),a=r(n(2)),l=n(106),c=n(1019),s=n(116),u=n(60),d=n(323),f=u.style({marginTop:10}),p=u.style({marginLeft:10});t.ActionsForm=function(e){var t;return a.createElement(o.Form,null,null===(t=e.actions)||void 0===t?void 0:t.map((function(t,n){var r,u;return a.createElement(a.Fragment,{key:n},a.createElement(o.Card,{className:f},a.createElement(o.CardHead,null,a.createElement(o.CardActions,null,a.createElement(o.Button,{variant:"plain","aria-label":"Action",onClick:e.arrayHelpers.handleRemove(n)},a.createElement(l.TimesIcon,null))),a.createElement(o.CardHeader,null,a.createElement(a.Fragment,null,a.createElement(d.ActionIcon,{actionType:null===(r=t)||void 0===r?void 0:r.type}),a.createElement(o.Title,{className:p,size:"sm"},(null===(u=t)||void 0===u?void 0:u.type)?function(e){switch(e){case i.ActionType.EMAIL:return"Send email";case i.ActionType.WEBHOOK:return"Send to hook";default:s.assertNever(e)}}(t.type):"")))),a.createElement(o.CardBody,{className:"pf-c-form"},a.createElement(c.ActionForm,{isReadOnly:e.isReadOnly,action:t,prefix:"actions."+n}))))})))}},1019:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=n(85),l=n(1020),c=n(1022);t.ActionForm=function(e){var t,n;switch((null===(t=e.action)||void 0===t?void 0:t.type)||void 0){case a.ActionType.EMAIL:return o.createElement(l.ActionEmailForm,r({},e));case a.ActionType.WEBHOOK:return o.createElement(c.ActionWebhookForm,r({},e));case void 0:return null;default:throw new Error("Unexpected action type:["+(null===(n=e.action)||void 0===n?void 0:n.type)+"]")}}},1020:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(29),a=n(75),l=n(506),c=n(2),s=n(333);t.ActionEmailForm=function(e){var t=c.useContext(s.AppContext);return i.createElement(i.Fragment,null,i.createElement(o.Text,null,"An email will be sent to all users on this account with access to Policies according to their email preferences."),t.userSettings&&!t.userSettings.dailyEmail&&i.createElement(l.EmailOptIn,{content:a.Messages.wizards.policy.actions.emailOptIn}))}},1021:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(336);t.usePromiseState=function(e){var t=i.useState(),n=t[0],r=t[1],a=o.usePromise();return i.useEffect((function(){a(e).then(r)}),[e,a]),n}},1022:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionWebhookForm=function(e){return null}},1023:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=n(78),l=n(175),c=n(332),s=n(29),u=n(153),d=n(2),f=n(149),p=n(60),m=n(75),v=n(185),h=n(464),y=n(467),g=n(465),b=p.style(r(r({backgroundColor:f.GlobalBackgroundColorLight300},g.padding(18,14)),{margin:5})),_=function(){var e=d.useContext(l.WizardContext),t=a.useFormikContext().values;return o.createElement(o.Fragment,null,o.createElement(v.Form,null,o.createElement(s.Title,{size:"xl"},m.Messages.wizards.policy.review.title),o.createElement(c.Switch,{isDisabled:e.isLoading,type:"checkbox",id:"isEnabled",name:"isEnabled",labelOn:m.Messages.wizards.policy.review.policyIsActive,labelOff:m.Messages.wizards.policy.review.policyIsNotActive,label:m.Messages.wizards.policy.review.activateThisPolicy}),o.createElement(s.Title,{size:"md"},m.Messages.wizards.policy.review.policy.details),o.createElement(c.FormText,{label:m.Messages.wizards.policy.review.policy.name,name:"name",id:"name"}),o.createElement(c.FormText,{label:m.Messages.wizards.policy.review.policy.description,name:"description",id:"description"}),o.createElement("div",{className:b},o.createElement(h.Conditions,{conditions:t.conditions})),o.createElement("div",{className:b},o.createElement(y.Actions,{actions:t.actions||[]}))))};t.createReviewStep=function(e){return r({name:m.Messages.wizards.policy.review.title,component:o.createElement(_,null),validationSchema:u.PolicyFormSchema},e)}},1024:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(29),a=n(320),l=n(60),c=n(106),s=n(149),u=l.style({marginTop:"auto",marginBottom:14}),d=l.style({marginRight:5});t.PolicyWizardFooter=function(e){return i.createElement(o.WizardFooter,null,i.createElement(o.WizardContextConsumer,null,(function(t){return i.createElement(i.Fragment,null,i.createElement(o.Button,{variant:o.ButtonVariant.primary,type:"submit",onClick:t.onNext,isDisabled:e.isLoading||!t.activeStep.enableNext},t.activeStep.nextButtonText||"Next"),!t.activeStep.hideBackButton&&i.createElement(o.Button,{variant:o.ButtonVariant.secondary,onClick:t.onBack,isDisabled:0===t.activeStep.id||e.isLoading},"Back"),!t.activeStep.hideCancelButton&&i.createElement(o.Button,{variant:o.ButtonVariant.link,onClick:t.onClose,isDisabled:e.isLoading},"Cancel"),e.isLoading&&i.createElement("div",{className:u},e.loadingText,"  ",i.createElement(a.Spinner,{size:"md"})),!e.isLoading&&e.error&&i.createElement(o.Split,{className:u},i.createElement(o.SplitItem,null,i.createElement(c.ExclamationCircleIcon,{className:d,color:s.GlobalDangerColor100})),i.createElement(o.SplitItem,null,e.error)))})))}},1025:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(172),o=n(134),a=n(173),l=n(117),c=r(n(114)).default.apis.urls;t.savePolicyActionCreator=function(e){return e.id?l.createAction("PUT",c.policy(e.id),{},i.toServerPolicy(e)):l.createAction("POST",c.policies,{alsoStore:!0},i.toServerPolicy(e))},t.useSavePolicyMutation=function(){return o.useMutation(t.savePolicyActionCreator)},t.useBulkSavePolicyMutation=function(){return a.useBulkMutation(t.savePolicyActionCreator)}},1027:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(106),i=n(149),o={icon:r.ExclamationCircleIcon,iconColor:i.GlobalDangerColor200,title:"No permission to view this page",content:"You do not have permission to view this page"};t.policyTableError=function(e,t,n,a){if(!e)return o;if(n)switch(a){case 404:return{icon:r.ExclamationCircleIcon,iconColor:i.GlobalDangerColor200,title:"Not found",content:"The request did not provide any results, try to remove some filters and try again",action:t.clearAllFiltersAndTryAgain,actionLabel:"Clear all filters"};case 401:return{icon:r.ExclamationCircleIcon,iconColor:i.GlobalDangerColor200,title:"Refresh your browser",content:"Your session expired while using the application",action:t.refreshPage,actionLabel:"Reload page"};case 403:return o;case 500:return{icon:r.ExclamationCircleIcon,iconColor:i.GlobalDangerColor200,title:"Internal server error",content:"The server was unable to process the request, please try again.",action:t.tryAgain,actionLabel:"Try again"};default:return{icon:r.ExclamationCircleIcon,iconColor:i.GlobalDangerColor200,title:"Unable to connect",content:"There was an error retrieving data. Check your connection and try again.",action:t.tryAgain,actionLabel:"Try again"}}}},1028:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(85));var r=n(1029);t.Severity=r.Severity},1029:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.HIGH="high",e.MEDIUM="medium",e.LOW="low"}(t.Severity||(t.Severity={}))},1030:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(29),a=n(117),l=n(320),c=n(507);t.DeletePolicy=function(e){var t=e.policies,n=e.onClose,r=a.useBulkDeletePolicyMutation(),s=r.mutate,u=r.loading,d=i.useCallback((function(){n(!1)}),[n]),f=i.useCallback((function(){if(!t)throw Error("Policy has not been set");s(t).then((function(e){var r=e.filter((function(e){var t;return null===(t=e)||void 0===t?void 0:t.error})).map((function(e){var t;return null===(t=e)||void 0===t?void 0:t.errorObject}));r.length>0&&(1===r.length?c.addDangerNotification("Error deleting policy","There was an error when trying to delete a policy."):c.addDangerNotification("Error deleting policies","There was an error when trying to delete "+r.length+" policy.")),r.length!==t.length&&n(!0)}))}),[s,t,n]),p=i.useMemo((function(){return[i.createElement(o.Button,{key:"confirm",variant:o.ButtonVariant.danger,onClick:f,isDisabled:u},u?i.createElement(l.Spinner,{size:"md"}):"Delete"),i.createElement(o.Button,{key:"cancel",variant:o.ButtonVariant.link,onClick:d,isDisabled:u},"Cancel")]}),[u,d,f]);return e.policies&&0!==e.policies.length?i.createElement(o.Modal,{title:"Delete "+(1===e.policies.length?"policy":"policies"),isOpen:!0,onClose:d,actions:p,isFooterLeftAligned:!0,isSmall:!0},1===e.policies.length?i.createElement(i.Fragment,null,"Do you want to delete the policy: ",e.policies[0].name," ?"):i.createElement(i.Fragment,null,"Do you want to delete the selected(",e.policies.length,") policies?")):null}},1031:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(117),o=r(n(114)),a=n(173),l=o.default.apis.urls.policyEnabled;t.actionCreator=function(e){return i.createAction("POST",l(e.policyId),{enabled:e.shouldBeEnabled})},t.useBulkChangePolicyEnabledMutation=function(){return a.useBulkMutation(t.actionCreator)}},1032:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(167),a=n(29);t.AppSkeleton=function(){return i.createElement(i.Fragment,null,i.createElement(o.PageHeader,null,i.createElement("div",{className:"pf-c-content"},i.createElement(o.PageHeaderTitle,{title:i.createElement(o.Skeleton,{size:"sm"})}))),i.createElement(o.Main,null,i.createElement(o.Section,null,i.createElement(a.Bullseye,null,i.createElement(o.Spinner,{centered:!0})))))}},1035:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(117),o=r(n(114)),a=n(473),l=o.default.apis.urls,c=function(e){var t={dailyEmail:!1,immediateEmail:!1};return e.forEach((function(e){return e.fields.forEach((function(e){"dailyEmail"===e.name?t.dailyEmail=e.initialValue:"immediateEmail"===e.name&&(t.immediateEmail=e.initialValue)}))})),t};t.useUserSettingsEmailQuery=function(e){return a.useTransformQueryResponse(i.useNewQuery("GET",l.userSettings.email,e),c)}},114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(165),i=function(e){return"/api/policies/v1.0/"+e},o={appId:"policies",apis:{version:"v1.0",urls:{base:"/api/policies/v1.0",facts:i("facts"),policies:i("policies"),validateCondition:i("policies/validate"),policy:function(e){return i("policies/"+e)},policyEnabled:function(e){return i("policies/"+e+"/enabled")},userSettings:{email:i("user-config/email-preference")}}},pages:{emailPreferences:function(){return e="/user-preferences/email",r.getInsights().then((function(t){return t.chrome.isBeta()?"/beta"+e:e}));var e}}};t.default=o},116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertNever=function(e){return e}},117:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(114)),a=n(134),l=n(170),c=n(172),s=n(473),u=n(173),d=o.default.apis.urls;t.createAction=function(e,t,n,r){var i=""===new URL(t,"http://dummybase").searchParams.toString()?"?":"&",o=n?new URLSearchParams(n).toString():"";return{method:e,endpoint:t+(""===o?"":i+o),body:r}},t.useNewQuery=function(e,n,r,i,o){return a.useQuery(t.createAction(e,n,i,o),r)};var f=function(e,n,i,o,a,c){var s,u=t.useNewQuery(e,n,o,function(e,t){if(t||(t=l.Page.defaultPage()),e||(e={}),e.offset=(t.index-1)*t.size,e.limit=t.size,t.filter)for(var n=0,r=t.filter.elements;n<r.length;n++){var i=r[n];e["filter["+i.column+"]"]=i.value,e["filter:op["+i.column+"]"]=i.operator}return t.sort&&(e.sortColumn=t.sort.column,e.sortDirection=t.sort.direction),e}(a,i),c),d=null===(s=u.headers)||void 0===s?void 0:s.get("TotalCount");return r({count:d?+d:d},u)};t.useGetFactsQuery=function(e){return t.useNewQuery("GET",d.facts,e)},t.useGetPoliciesQuery=function(e,t){return s.useTransformQueryResponse(f("GET",d.policies,e,t),c.toPolicies)},t.useVerifyPolicyMutation=function(){return a.useMutation((function(e){return t.createAction("POST",d.validateCondition,{},c.toServerPolicy(e))}))},t.useBulkDeletePolicyMutation=function(){return u.useBulkMutation((function(e){return t.createAction("DELETE",d.policy(e.id))}))},t.useGetPolicyQuery=function(e,n){return t.useNewQuery("GET",d.policy(e),n)}},149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalBackgroundColor100="#fff",t.GlobalBackgroundColor150="#f5f5f5",t.GlobalBackgroundColor200="#fafafa",t.GlobalBackgroundColor300="#ededed",t.GlobalBackgroundColorDark100="#151515",t.GlobalBackgroundColorDark200="#3c3f42",t.GlobalBackgroundColorDark300="#212427",t.GlobalBackgroundColorDark400="#4f5255",t.GlobalBackgroundColorLight100="#fff",t.GlobalBackgroundColorLight200="#fafafa",t.GlobalBackgroundColorLight300="#ededed",t.GlobalDangerColor100="#c9190b",t.GlobalDangerColor200="#a30000",t.GlobalDangerColor300="#470000",t.GlobalSuccessColor100="#92d400",t.GlobalSuccessColor200="#486b00"},152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onChangePFAdapter=function(e){return function(t,n){return e.onChange(n)}},t.onChangePFAdapterCheckbox=function(e){return function(t,n){return(0,e.onChange)(t,n.target.name)}}},153:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85),o=r(n(119)),a=n(1012),l=n(119);t.PolicyFormDetails=o.object().shape({description:o.string().notRequired().trim(),isEnabled:o.boolean().notRequired(),name:o.string().required("Write a name for this Policy").trim()}),t.PolicyFormActions=o.object().shape({actions:o.array(o.lazy((function(e){switch(e.type){case i.ActionType.EMAIL:return a.ActionEmailSchema;case i.ActionType.WEBHOOK:return a.ActionWebhookSchema;case void 0:return a.ActionSchema}throw new Error("Unknown action type. Implement the new type in the schema selector")}))).test("one-email","Only one Email action type is allowed",(function(e){var t=e&&e.reduce((function(e,t,n){return t.type===i.ActionType.EMAIL?e.concat([n]):e}),[]);if(!t||t.length<=1)return!0;var n=new l.ValidationError("","","actions","");return n.inner=t.map((function(e){return new l.ValidationError("Only one Email action is allowed","email","actions."+e+".type")})),n}))}),t.PolicyFormConditions=o.object().shape({conditions:o.string().required("Write a condition").trim()}),t.PolicyFormSchema=o.object().concat(t.PolicyFormDetails).concat(t.PolicyFormActions).concat(t.PolicyFormConditions)},165:function(e,t,n){"use strict";(function(e){var n,r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getInsights=function(){return n||(n=new Promise((function(t){return r(void 0,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return e.hasOwnProperty("insights")?[3,2]:[4,new Promise((function(e){return setTimeout(e,250)}))];case 1:return n.sent(),[3,0];case 2:return t(insights),[2]}}))}))}))),n}}).call(this,n(83))},170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=50,i=function(){function e(e,t,n,i){this.index=e,this.size=t||r,this.filter=n,this.sort=i}return e.of=function(t,n,r,i){return new e(t,n,r,i)},e.defaultPage=function(){return new e(1,r)},e}();t.Page=i;var o=function(e,t,n){this.column=e,this.operator=t,this.value=n},a=function(){function e(){this.elements=this._elements=[]}return e.prototype.and=function(e,t,n){this._elements.push(new o(e,t,n))},e}();t.Filter=a;var l=function(){function e(e,t){this.column=e,this.direction=t}return e.by=function(t,n){return new e(t,n)},e}();t.Sort=l,function(e){e.ASCENDING="ASC",e.DESCENDING="DESC"}(t.Direction||(t.Direction={})),function(e){e.EQUAL="EQUAL",e.LIKE="LIKE",e.ILIKE="ILIKE",e.NOT_EQUAL="NOT_EQUAL",e.BOOLEAN_IS="BOOLEAN_IS"}(t.Operator||(t.Operator={}))},172:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(322)),l=n(85),c=n(116);t.toServerAction=function(e){return e.map((function(e){if(!e||!e.type)return"";var t=""+e.type;switch(e.type){case l.ActionType.WEBHOOK:case l.ActionType.EMAIL:break;default:c.assertNever(e.type)}return t})).join(";")},t.fromServerActions=function(e){if(!e||""===e)return[];for(var t=[],n=0,r=e.split(";");n<r.length;n++){var i=r[n].split(" ",2)[0];switch(i){case l.ActionType.WEBHOOK:t.push({type:l.ActionType.WEBHOOK});break;case l.ActionType.EMAIL:t.push({type:l.ActionType.EMAIL});break;default:throw Error("Unknown action.type="+i+" found")}}return t},t.toServerPolicy=function(e){e.mtime,e.ctime,e.lastEvaluation;var n=i(e,["mtime","ctime","lastEvaluation"]);return r(r({},n),{isEnabled:void 0!==e.isEnabled&&e.isEnabled,actions:e.actions?t.toServerAction(e.actions):""})},t.toPolicy=function(e){return r(r({},e),{id:e.id?e.id:"",description:e.description?e.description:"",isEnabled:!!e.isEnabled&&e.isEnabled,actions:t.fromServerActions(e.actions),mtime:e.mtime?a.default(e.mtime):new Date,ctime:e.ctime?a.default(e.ctime):new Date,lastEvaluation:e.lastEvaluation&&""!==e.lastEvaluation?a.default(e.lastEvaluation):void 0})},t.toPolicies=function(e){return e.data?e.data.map(t.toPolicy):[]},t.makeCopyOfPolicy=function(e){return r(r({},e),{name:"Copy of "+e.name,mtime:void 0,lastEvaluation:void 0,ctime:void 0,id:void 0})}},173:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(474)),r(n(901)),r(n(475)),r(n(476))},174:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NAME="name",e.DESCRIPTION="description",e.IS_ACTIVE="is_enabled"}(t.PolicyFilterColumn||(t.PolicyFilterColumn={}))},175:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=r(n(119));t.AlwaysValid=o.object(),function(e){e.SAVE="CREATE",e.VALIDATE_CONDITION="VALIDATE_CONDITION",e.NONE="NONE"}(t.WizardActionType||(t.WizardActionType={})),t.WizardContext=i.createContext({isLoading:!1,isFormValid:!1,triggerAction:function(){throw Error("Action executed without WizardContext")},verifyResponse:{isValid:!1},createResponse:{created:!1},setVerifyResponse:function(){throw Error("setVerifyResponse executed without WizardContext")}})},185:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=n(29),l=function(e){return e.preventDefault()};t.Form=function(e){return o.createElement(a.Form,r({onSubmit:l},e),e.children)}},323:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(2)),l=n(106),c=n(85),s=n(116),u=n(878);t.ActionEmailIcon=l.EnvelopeIcon,t.ActionWebhookIcon=u.WebhookIcon,t.ActionIcon=function(e){var n=e.actionType,o=i(e,["actionType"]);switch(n){case c.ActionType.WEBHOOK:return a.createElement(t.ActionWebhookIcon,r({},o));case c.ActionType.EMAIL:return a.createElement(t.ActionEmailIcon,r({},o));case void 0:break;default:s.assertNever(n)}return null}},325:function(e,t,n){"use strict";var r,i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a,l=o(n(2)),c=n(29),s=n(167),u=n(174);!function(e){e[e.NONE=0]="NONE",e[e.PAGE=1]="PAGE"}(a=t.SelectionCommand||(t.SelectionCommand={}));var d=((r={})[u.PolicyFilterColumn.NAME]="Name",r[u.PolicyFilterColumn.DESCRIPTION]="Description",r[u.PolicyFilterColumn.IS_ACTIVE]="Is Active?",r),f={enabled:"Active",disabled:"Inactive"},p=function(e,t){var n=e[t];return"string"==typeof n?function(e,t){var n=e.trim();if(""!==n)return{category:d[t],chips:[{name:n,isRead:!0}]}}(n,t):function(e,t){if(e.enabled||e.disabled)return{category:d[t],chips:Object.keys(e).filter((function(t){return e[t]})).map((function(e){return{name:f[e],isRead:!0,key:e}}))}}(n,t)};t.PolicyToolbar=function(e){var t=e.clearFilters,n=e.filterElements,r=e.setFilterElements,o=e.pageCount,m=e.count,v=e.page,h=e.perPage,y=e.showPerPageOptions,g=e.onPaginationChanged,b=e.onPaginationSizeChanged,_=e.onCreatePolicy,E=e.onDeletePolicy,O=e.hideActions,P=e.onSelectionChanged,S=e.selectedCount,C=e.hideBulkSelect,w=e.onEnablePolicy,A=e.onDisablePolicy,M=l.useCallback((function(e,r){for(var o=[],a=0,l=r;a<l.length;a++){var c=l[a];switch(c.category){case d[u.PolicyFilterColumn.NAME]:o.push({filter:u.PolicyFilterColumn.NAME,data:""});break;case d[u.PolicyFilterColumn.DESCRIPTION]:o.push({filter:u.PolicyFilterColumn.DESCRIPTION,data:""});break;case d[u.PolicyFilterColumn.IS_ACTIVE]:o.push({filter:u.PolicyFilterColumn.IS_ACTIVE,data:i(i({},n[u.PolicyFilterColumn.IS_ACTIVE]),c.chips.reduce((function(e,t){return e[t.key]=!1,e}),{}))});break;default:throw new Error("Unknown filter found: "+c.category)}}t(o)}),[t,n]),j=l.useMemo((function(){if(!C){var e=function(){return P&&P(a.NONE)},t=function(){return P&&P(a.PAGE)};return{count:S||0,items:[{title:"Select none (0)",onClick:e},{title:"Select page ("+(o||0)+")",onClick:t}],checked:S===o,onSelect:function(n){return n?t():e()}}}}),[S,o,P,C]),I=l.useMemo((function(){return{items:[{label:"Name",type:"text",filterValues:{id:"filter-name",value:n[u.PolicyFilterColumn.NAME],placeholder:"Filter by name",onChange:function(e,t){return r[u.PolicyFilterColumn.NAME](t)}}},{label:"Description",type:"text",filterValues:{id:"filter-description",value:n[u.PolicyFilterColumn.DESCRIPTION],placeholder:"Filter by description",onChange:function(e,t){return r[u.PolicyFilterColumn.DESCRIPTION](t)}}},{label:"Is Active?",type:"radio",filterValues:{id:"filter-active",value:Object.keys(n[u.PolicyFilterColumn.IS_ACTIVE]).reduce((function(e,t){return n[u.PolicyFilterColumn.IS_ACTIVE][t]&&(e=t),e}),"all"),items:[{label:"All",value:"all"}].concat(Object.keys(n[u.PolicyFilterColumn.IS_ACTIVE]).map((function(e){return{label:f[e],value:e}}))),placeholder:"Filter by Active status",onChange:function(e,t){var n={enabled:!1,disabled:!1};["enabled","disabled"].includes(t)&&(n[t]=!0),r[u.PolicyFilterColumn.IS_ACTIVE](n)}}}]}}),[n,r]),k=l.useMemo((function(){return{itemCount:m||0,page:v,perPage:h,perPageOptions:y?void 0:[],onSetPage:g,onFirstClick:g,onPreviousClick:g,onNextClick:g,onLastClick:g,onPageInput:g,onPerPageSelect:b,isCompact:!0,variant:c.PaginationVariant.right}}),[y,m,v,h,g,b]),T=l.useMemo((function(){for(var e=[],t=0,r=Object.values(u.PolicyFilterColumn);t<r.length;t++){var i=r[t],o=p(n,i);o&&e.push(o)}return{filters:e,onDelete:M}}),[n,M]),F=l.useMemo((function(){if(!O)return{actions:[{key:"create-policy",label:"Create policy",onClick:_,props:{isDisabled:!_}},{key:"delete-policy",label:1===S?"Delete policy":"Delete policies",onClick:E,props:{isDisabled:!(S&&E)}},{key:"enable-policy",label:1===S?"Enable policy":"Enable policies",onClick:w,props:{isDisabled:!(S&&w)}},{key:"disable-policy",label:1===S?"Disable policy":"Disable policies",onClick:A,props:{isDisabled:!(S&&A)}}],kebabToggleProps:{isDisabled:!(S&&E)}}}),[_,E,S,O,A,w]);return l.createElement(l.Fragment,null,l.createElement(s.PrimaryToolbar,{bulkSelect:j,filterConfig:I,pagination:k,actionsConfig:F,activeFiltersConfig:T}))}},332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1006);t.Checkbox=r.Checkbox;var i=n(1007);t.FormSelect=i.FormSelect;var o=n(1008);t.Switch=o.Switch;var a=n(1009);t.FormTextInput=a.FormTextInput;var l=n(1010);t.FormTextArea=l.FormTextArea;var c=n(1011);t.FormText=c.FormText},333:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2));t.AppContext=i.createContext({rbac:{canReadAll:!1,canWriteAll:!1},userSettings:void 0})},338:function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,i++)r[i]=o[a];return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,a=i(n(549)),l=i(n(1036)),c=n(223);t.init=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(o)throw new Error("store already initialized");return(o=new a.default({},r([l.default()],e))).register({notifications:c.notifications}),o},t.getStore=function(){return o.getStore()},t.register=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.register.apply(o,e)}},462:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=n(510),l=n(29),c=n(167),s=n(170),u=n(867),d=n(75),f=n(116),p=n(880),m=n(881),v=["name","actions","is_enabled"],h=function(e){return o.createElement(o.Fragment,null,o.createElement(l.EmptyStateIcon,{icon:e.icon,color:e.iconColor}),o.createElement(l.Title,{headingLevel:"h2",size:"lg"},e.title),o.createElement(l.EmptyStateBody,null,e.content),e.action&&e.actionLabel&&o.createElement(l.Button,{variant:l.ButtonVariant.primary,onClick:e.action},e.actionLabel," "))},y=function(e,t,n,r){return t.indexOf(n[e])+r};t.PolicyTable=function(e){var t=e.onSort,n=e.error,i=e.policies,g=e.onCollapse,b=e.onSelect,_=e.columnsToShow||v,E=_.includes("radioSelect");if(E&&!b)throw Error("RadioSelect requires an onSelect");var O=o.useMemo((function(){var e=t?[a.sortable]:[];return{radioSelect:{title:"",transforms:[]},name:{title:d.Messages.tables.policy.columns.name,transforms:e,cellFormatters:[a.expandable],column:"name"},actions:{title:d.Messages.tables.policy.columns.triggerActions,transforms:[]},is_enabled:{title:d.Messages.tables.policy.columns.lastEvaluated,transforms:e,column:"is_enabled"}}}),[t]),P=o.useMemo((function(){return[g,b||_.includes("radioSelect")].filter((function(e){return e})).length}),[g,b,_]),S=o.useMemo((function(){return _.map((function(e){return O[e]}))}),[O,_]),C=o.useCallback((function(e,n,r){if(t){var i=function(e,t,n){return t[e-n].column}(n,S,P);i&&t(n,i,r===a.SortByDirection.asc?s.Direction.ASCENDING:s.Direction.DESCENDING)}}),[t,S,P]),w=o.useCallback((function(e,t,n,r){var o,a=null===(o=i)||void 0===o?void 0:o.findIndex((function(e){return e.id===r.id}));if(g&&i&&void 0!==a&&-1!==a){var l=i[a];g(l,a,n)}}),[i,g]),A=o.useCallback((function(e,t,n,r){var o,a=null===(o=i)||void 0===o?void 0:o.findIndex((function(e){return e.id===r.id}));if(b&&i&&void 0!==a&&-1!==a){var l=i[a];b(l,a,t)}}),[i,b]),M=o.useMemo((function(){if(e.sortBy)return{index:y(e.sortBy.column,S,O,P),direction:e.sortBy.direction===s.Direction.ASCENDING?"asc":"desc"}}),[e.sortBy,S,O,P]),j=o.useMemo((function(){return e.error||e.loading?void 0:e.actionResolver||void 0}),[e.error,e.loading,e.actionResolver]),I=o.useCallback((function(e){if(void 0===e.parent&&j&&e&&i){var t=i.find((function(t){return t.id===e.id}));if(t)return j(t)}return[]}),[j,i]),k=o.useMemo((function(){return n?function(e){return[{heightAuto:!0,showSelect:!1,cells:[{props:{colSpan:8},title:o.createElement(l.Bullseye,null,o.createElement(l.EmptyState,{variant:l.EmptyStateVariant.small},o.createElement(h,r({},e))))}]}]}(n):function(e,t,n){return e?e.reduce((function(r,i,a){return r.push({id:i.id,key:i.id,isOpen:i.isOpen,selected:i.isSelected,cells:t.map((function(t){switch(t){case"actions":return o.createElement(o.Fragment,null,o.createElement(p.ActionsCell,{actions:i.actions}));case"is_enabled":return o.createElement(o.Fragment,null,o.createElement(m.LastTriggeredCell,{isEnabled:i.isEnabled,lastEvaluation:i.lastEvaluation}));case"name":return i.name;case"radioSelect":return o.createElement(o.Fragment,null,o.createElement(l.Radio,{id:i.id+"-table-radio-id","aria-label":"Radio select for policy "+i.name,name:"policy-table-radio-select",isChecked:i.isSelected,onChange:n?function(){var t=e.findIndex((function(e){return e.isSelected}));n(e[t],t,!1),n(i,a,!0)}:void 0}))}f.assertNever(t)}))}),r.push({parent:2*a,fullWidth:!0,showSelect:!1,cells:[o.createElement(o.Fragment,null,o.createElement(u.ExpandedContent,{key:i.id+"-content",description:i.description?i.description:d.Messages.tables.policy.emptyState.noDescription,conditions:i.conditions?i.conditions:d.Messages.tables.policy.emptyState.noConditions,actions:i.actions,created:i.ctime,updated:i.mtime}))]}),r}),[]):[]}(i,_,b)}),[n,i,_,b]);return e.loading?o.createElement(c.SkeletonTable,{rowSize:e.loadingRowCount||10,columns:S,paddingColumnSize:P,sortBy:M}):o.createElement(a.Table,{"aria-label":d.Messages.tables.policy.title,cells:S,rows:k,actionResolver:I,onSort:t?C:void 0,onCollapse:g?w:void 0,onSelect:e.error||!b||E?void 0:A,sortBy:M,canSelectAll:!1},o.createElement(a.TableHeader,null),o.createElement(a.TableBody,null))}},464:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(29),a=n(60),l=n(75),c=a.style({marginBottom:5});t.Conditions=function(e){return i.createElement(i.Fragment,null,i.createElement(o.Title,{className:c,size:o.TitleSize.md},"Conditions"),i.createElement(o.Text,null,e.conditions||l.Messages.tables.policy.emptyState.noConditions))}},467:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(29),a=n(60),l=n(85),c=n(75),s=n(116),u=n(468),d=n(323),f=a.style({marginBottom:5}),p=a.style({marginBottom:5,marginLeft:10}),m=a.style({marginBottom:10,marginTop:10,marginLeft:10}),v=a.style({marginLeft:25,marginBottom:8,marginTop:8}),h=function(e){return i.createElement(o.StackItem,{className:m},i.createElement(e.icon,null),i.createElement(o.Title,{className:p,size:o.TitleSize.md},e.title),e.children&&i.createElement("div",{className:v},e.children))};t.Actions=function(e){return i.createElement(i.Fragment,null,i.createElement(o.Stack,null,i.createElement(o.StackItem,null,i.createElement(o.Title,{className:f,size:o.TitleSize.md},c.Messages.components.actions.title)),0===e.actions.length?i.createElement(o.Text,null," ",c.Messages.components.actions.noActions," "):function(e){var t=[];for(var n in e){var r=e[n];switch(r.type){case l.ActionType.EMAIL:t.push(i.createElement(i.Fragment,{key:n},i.createElement(h,{title:"Send Email",icon:d.ActionEmailIcon})));break;case l.ActionType.WEBHOOK:t.push(i.createElement(i.Fragment,{key:n},i.createElement(h,{title:"Send to Hook",icon:d.ActionWebhookIcon})));break;default:s.assertNever(r)}}return u.join(t,o.Divider)}(e.actions)))}},468:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2));t.join=function(e,t){return e.reduce((function(n,r,o){return n.push(r),o!==e.length-1&&n.push(i.createElement(t,{key:o+"_joined_element"})),n}),[])},t.joinClasses=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.join(" ")}},473:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=function(e,t,n){return 200===t&&e?n(e):void 0};t.useTransformQueryResponse=function(e,t){var n=e.payload,i=e.query,l=e.status,c=o.useCallback((function(){return i().then((function(e){return r(r({},e),{payload:a(e.payload,e.status,t)})}))}),[i,t]),s=o.useMemo((function(){return a(n,l,t)}),[t,n,l]);return r(r({},e),{payload:s,query:c})}},474:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(336);t.useDebouncedState=function(e,t){var n=i.useState(e),r=n[0],a=n[1],l=i.useState(e),c=l[0],s=l[1],u=i.useCallback((function(){s(r)}),[r,s]),d=o.useDebounce(u,t,[u])[0];return[r,a,c,d]}},475:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(474),a=n(174),l=function(e,t,n){return i.useMemo((function(){var r;return(r={})[a.PolicyFilterColumn.NAME]=e,r[a.PolicyFilterColumn.DESCRIPTION]=t,r[a.PolicyFilterColumn.IS_ACTIVE]=n,r}),[e,t,n])};t.usePolicyFilter=function(e){void 0===e&&(e=250);var t=o.useDebouncedState("",e),n=t[0],r=t[1],c=t[2],s=o.useDebouncedState("",e),u=s[0],d=s[1],f=s[2],p=o.useDebouncedState({enabled:!1,disabled:!1},e),m=p[0],v=p[1],h=p[2],y=i.useCallback((function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];switch(i.filter){case a.PolicyFilterColumn.NAME:r(i.data);break;case a.PolicyFilterColumn.DESCRIPTION:d(i.data);break;case a.PolicyFilterColumn.IS_ACTIVE:v(i.data)}}}),[r,d,v]);return{filters:l(n,u,m),setFilters:l(r,d,v),debouncedFilters:l(c,f,h),clearFilterHandler:y}}},476:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(170),a=n(174);t.usePolicyPage=function(e,t,n){var r=i.useState(1),l=r[0],c=r[1],s=i.useState(t||o.Page.defaultPage().size),u=s[0],d=s[1];i.useEffect((function(){c(1)}),[c,e]);var f=i.useMemo((function(){var t=new o.Filter;return""!==e[a.PolicyFilterColumn.NAME].trim()&&t.and(a.PolicyFilterColumn.NAME,o.Operator.ILIKE,"%"+e[a.PolicyFilterColumn.NAME].trim()+"%"),""!==e[a.PolicyFilterColumn.DESCRIPTION].trim()&&t.and(a.PolicyFilterColumn.DESCRIPTION,o.Operator.ILIKE,"%"+e[a.PolicyFilterColumn.DESCRIPTION].trim()+"%"),e[a.PolicyFilterColumn.IS_ACTIVE].disabled!==e[a.PolicyFilterColumn.IS_ACTIVE].enabled&&t.and(a.PolicyFilterColumn.IS_ACTIVE,o.Operator.BOOLEAN_IS,e[a.PolicyFilterColumn.IS_ACTIVE].enabled?"true":"false"),o.Page.of(l,u,t,n)}),[l,u,n,e]),p=i.useCallback((function(e,t){c(t)}),[c]),m=i.useCallback((function(e,t){c(1),d(t)}),[c,d]);return{page:f,itemsPerPage:u,currentPage:l,changePage:p,changeItemsPerPage:m}}},504:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(170);t.useSort=function(){var e=i.useState(),t=e[0],n=e[1];return{sortBy:t,onSort:i.useCallback((function(e,t,r){n(o.Sort.by(t,r))}),[n])}}},505:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,i++)r[i]=o[a];return r},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(2)),l=n(325),c=n(116);t.usePolicyRows=function(e,t){var n=a.useState([]),o=n[0],s=n[1];a.useEffect((function(){var n;t||!e?s([]):e&&s(null===(n=e)||void 0===n?void 0:n.map((function(e){return r(r({},e),{isOpen:!1,isSelected:!1})})))}),[e,t]);var u=a.useCallback((function(e,t,n){s((function(o){var a=i(o);return a[t]=r(r({},e),{isOpen:n}),a}))}),[s]),d=a.useCallback((function(e,t,n){s((function(o){var a=i(o);return a[t]=r(r({},e),{isSelected:n}),a}))}),[s]),f=a.useCallback((function(e){e===l.SelectionCommand.NONE?s((function(e){return e.map((function(e){return r(r({},e),{isSelected:!1})}))})):e===l.SelectionCommand.PAGE?s((function(e){return e.map((function(e){return r(r({},e),{isSelected:!0})}))})):c.assertNever(e)}),[s]),p=a.useMemo((function(){return o.filter((function(e){return e.isSelected})).length}),[o]);return{rows:o,onCollapse:u,onSelect:d,onSelectionChanged:f,selectionCount:p}}},506:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=n(29),l=n(75),c=i(n(114)),s=n(1021);t.EmailOptIn=function(e){var t=s.usePromiseState(c.default.pages.emailPreferences());return o.createElement(a.Alert,{title:l.Messages.components.emailOptIn.title,variant:a.AlertVariant.warning,isInline:!0},o.createElement(a.TextContent,null,o.createElement(a.Text,null,e.content),o.createElement(a.Text,null,o.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},l.Messages.components.emailOptIn.link))))}},507:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(223),o=n(338);!function(e){e.SUCCESS="success",e.DANGER="danger",e.WARNING="warning",e.INFO="info",e.DEFAULT="default"}(r=t.NotificationType||(t.NotificationType={})),t.addNotification=function(e,t,n){o.getStore().dispatch(i.addNotification({variant:e,title:t,description:n}))},t.addSuccessNotification=function(e,n){t.addNotification(r.SUCCESS,e,n)},t.addDangerNotification=function(e,n){t.addNotification(r.DANGER,e,n)}},517:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(2)),l=n(437),c=n(223),s=o(n(114)),u=n(773),d=n(799),f=n(1032);n(1033),n(1034);var p=n(165),m=n(333),v=n(1035);t.default=l.withRouter((function(e){var t=a.useState(void 0),n=t[0],i=t[1],o=v.useUserSettingsEmailQuery();return a.useEffect((function(){return p.getInsights().then((function(e){e.chrome.init(),e.chrome.identifyApp(s.default.appId)})),function(){p.getInsights().then((function(t){t.chrome.on("APP_NAVIGATION",(function(t){return e.history.push("/"+t.navId)}))}))}}),[e.history]),a.useEffect((function(){p.getInsights().then((function(e){e.chrome.auth.getUser().then((function(){u.fetchRBAC().then(i)}))}))}),[]),n?a.createElement(m.AppContext.Provider,{value:{rbac:n,userSettings:o.payload?r(r({},o.payload),{refresh:o.query}):void 0}},a.createElement(c.NotificationsPortal,null),a.createElement(d.Routes,null)):a.createElement(f.AppSkeleton,null)}))},538:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="/",n=e.split("/");return n.shift(),"beta"===n[0]&&(n.shift(),t="/beta/"),""+t+n[0]+"/"+(n[1]||"")}},539:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(134),i=n(165);t.client=r.createClient({requestInterceptors:[function(e){return function(e){return i.getInsights().then((function(e){return e.chrome.auth.getUser()})).then((function(){return e}))}}]})},542:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(22),a=n.n(o),l=n(354),c=n(202),s=n(338),u=n(517),d=n.n(u),f=n(538),p=n.n(f),m=n(539),v=n(134);a.a.render(i.a.createElement(c.Provider,{store:Object(s.init)().getStore()},i.a.createElement(l.a,{basename:p()(window.location.pathname)},i.a.createElement(v.ClientContextProvider,{client:m.client},i.a.createElement(d.a,null)))),document.getElementById("root"))},75:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var i=n(85),o={pages:{listPage:{emailOptIn:"One or more of your policies have an email alert, but you have not opted into receiving alert emails from Policies. You will not receive any emails from your policies."}},components:{actions:{title:"Trigger actions",noActions:"No actions configured."},actionType:((r={})[i.ActionType.EMAIL]="Email",r[i.ActionType.WEBHOOK]="Hook",r),emailOptIn:{title:"Email alerts not opted in",switch:"Get emails when a policy runs",link:"Open email preferences"},lastTriggeredCell:{never:"Never",ago:"ago"}},tables:{policy:{title:"Policies",columns:{name:"Name",triggerActions:"Trigger actions",lastEvaluated:"Last evaluated"},emptyState:{neverRun:"Never",noConditions:"No conditions configured.",noDescription:"--"}}},wizards:{policy:{actions:{title:"Trigger actions",emailOptIn:"Your policy has an email alert, but you have not opted into receiving alerts emails from Policies. You will not receive any email from your policies."},conditions:{title:"Conditions",valid:"Valid condition",invalid:"Invalid condition",validating:"Validating…",hint:'e.g. facts.arch = "x86_64"'},createPolicy:{title:"Create Policy"},details:{title:"Details"},review:{title:"Review and activate",activateThisPolicy:"Activate this policy?",policyIsActive:"Policy is active",policyIsNotActive:"Policy is not active",policy:{details:"Policy details",name:"Policy name",description:"Description"}}}}};t.Messages=o},773:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(774),o=r(n(438)),a=r(n(114)),l=function(){function e(e){this.accessPagination=e}return e.prototype.canRead=function(e){return this.findPermission(e,"read")},e.prototype.canWrite=function(e){return this.findPermission(e,"write")},e.prototype.canReadAll=function(){return this.canRead("*")},e.prototype.canWriteAll=function(){return this.canWrite("*")},e.prototype.findPermission=function(e,t){var n;if(!(null===(n=this.accessPagination)||void 0===n?void 0:n.data)||0===this.accessPagination.data.length)return!1;for(var r=0,i=this.accessPagination.data;r<i.length;r++){var o=i[r].permission.split(":");if(o[1]===e&&(o[2]===t||"*"===o[2]))return!0}return!1},e}();t.RawRbac=l,t.fetchRBAC=function(){var e=o.default.create();return new i.AccessApi(void 0,"/api/rbac/v1",e).getPrincipalAccess(a.default.appId).then((function(e){return new l(e.data)})).then((function(e){return{canReadAll:e.canReadAll(),canWriteAll:e.canWriteAll()}}))}},799:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=o(n(2)),c=n(437),s=[{path:"/list",component:a(n(800)).default,rootClass:"list"}],u=function(e){var t=e.rootClass,n=i(e,["rootClass"]),o=document.getElementById("root");if(!o)throw new Error("Root element not found");return o.removeAttribute("class"),o.classList.add("page__"+t,"pf-c-page__main"),o.setAttribute("role","main"),l.createElement(c.Route,r({},n))};t.Routes=function(){return l.createElement(c.Switch,null,s.map((function(e){return l.createElement(u,{key:e.path,rootClass:e.rootClass,component:e.component,path:e.path})})),l.createElement(c.Redirect,{to:"/list"}))}},800:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(2),a=n(29),l=n(167),c=n(462),s=n(117),u=n(325),d=n(902),f=n(333),p=n(1027),m=n(1028),v=n(1030),h=n(475),y=n(476),g=n(504),b=n(505),_=n(172),E=n(174),O=n(506),P=n(75),S=n(1031);t.default=function(e){var t,n=i.useState({isOpen:!1}),r=n[0],C=n[1],w=i.useState(),A=w[0],M=w[1],j=S.useBulkChangePolicyEnabledMutation(),I=h.usePolicyFilter(),k=g.useSort(),T=y.usePolicyPage(I.debouncedFilters,void 0,k.sortBy),F=s.useGetPoliciesQuery(T.page,!1),x=o.useContext(f.AppContext),D=F.loading||j.loading,N=b.usePolicyRows(F.payload,D),R=x.rbac,B=R.canWriteAll,V=R.canReadAll,L=F.query,z=j.mutate,W=j.loading,G=T.changePage,H=T.currentPage;i.useEffect((function(){!1===W&&L()}),[W,L]);var q=i.useCallback((function(e){var t,n;e&&(L(),(null===(t=A)||void 0===t?void 0:t.length)===(null===(n=F.payload)||void 0===n?void 0:n.length)&&G(void 0,1===H?1:H-1)),M(void 0)}),[L,M,G,H,A,F.payload]),U=function(e){return{policyId:e.id,shouldBeEnabled:!e.isEnabled}},Q=i.useCallback((function(e){return B?[{title:(e.isEnabled?"Disable":"Enable")+" policy",onClick:function(){z([e].map(U))}},{title:"Edit",onClick:function(){C({isOpen:!0,template:e,showCreateStep:!1})}},{title:"Duplicate",onClick:function(){C({isOpen:!0,template:_.makeCopyOfPolicy(e),showCreateStep:!1})}},{title:"Delete",onClick:function(){M([e])}}]:[]}),[B,M,z]);i.useEffect((function(){V&&L()}),[V,L]);var K=i.useCallback((function(){C({isOpen:!0,showCreateStep:!0,template:void 0})}),[C]),Y=i.useCallback((function(e){e&&L(),C({isOpen:!1})}),[C,L]),J=i.useMemo((function(){return p.policyTableError(V,{clearAllFiltersAndTryAgain:function(){I.setFilters[E.PolicyFilterColumn.NAME](""),I.setFilters[E.PolicyFilterColumn.DESCRIPTION](""),I.setFilters[E.PolicyFilterColumn.IS_ACTIVE]({disabled:!1,enabled:!1}),G(void 0,1)},refreshPage:function(){window.location.reload()},tryAgain:function(){L()}},F.error,F.status)}),[V,F.error,F.status,I.setFilters,G,L]),X=i.useCallback((function(){return N.rows.filter((function(e){return e.isSelected}))}),[N]),Z=i.useCallback((function(){return M(X())}),[X,M]),$=i.useCallback((function(){return z(X().map((function(e){return{policyId:e.id,shouldBeEnabled:!1}})))}),[X,z]),ee=i.useCallback((function(){return z(X().map((function(e){return{policyId:e.id,shouldBeEnabled:!0}})))}),[X,z]);return i.createElement(i.Fragment,null,i.createElement(l.PageHeader,null,i.createElement(l.PageHeaderTitle,{title:"Policies"})),x.userSettings&&!x.userSettings.dailyEmail&&F.payload&&F.payload.find((function(e){return e.actions.find((function(e){return e.type===m.ActionType.EMAIL}))}))&&i.createElement(a.PageSection,null,i.createElement(O.EmailOptIn,{content:P.Messages.pages.listPage.emailOptIn})),i.createElement(l.Main,null,i.createElement(l.Section,null,i.createElement(u.PolicyToolbar,{onCreatePolicy:B?K:void 0,onDeletePolicy:B?Z:void 0,onEnablePolicy:B?ee:void 0,onDisablePolicy:B?$:void 0,onPaginationChanged:T.changePage,onPaginationSizeChanged:T.changeItemsPerPage,onSelectionChanged:N.onSelectionChanged,selectedCount:N.selectionCount,page:T.currentPage,pageCount:null===(t=F.payload)||void 0===t?void 0:t.length,perPage:T.itemsPerPage,showPerPageOptions:!0,filterElements:I.filters,setFilterElements:I.setFilters,clearFilters:I.clearFilterHandler,count:F.count}),i.createElement(c.PolicyTable,{policies:N.rows,onCollapse:N.onCollapse,onSelect:N.onSelect,actionResolver:Q,loading:D,error:J,onSort:k.onSort,sortBy:k.sortBy}))),r.isOpen&&i.createElement(d.CreatePolicyWizard,{isOpen:r.isOpen,close:Y,initialValue:r.template,showCreateStep:r.showCreateStep,policiesExist:F.count>0}),i.createElement(v.DeletePolicy,{onClose:q,policies:A}))}},85:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(870);t.ActionType=r.ActionType},867:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=n(60),l=n(29),c=n(868),s=n(869),u=n(464),d=i(n(149)),f=n(465),p=n(467),m=a.style({margin:12}),v=a.style({maxWidth:800,marginBottom:12}),h=a.style({marginBottom:12}),y=a.style(r(r({backgroundColor:d.GlobalBackgroundColorLight300},f.padding(18,14)),{margin:5}));t.ExpandedContent=function(e){return o.createElement(l.Stack,{className:m},e.description&&o.createElement(l.StackItem,{className:v},o.createElement(c.Description,{description:e.description})),o.createElement(l.StackItem,{className:h},o.createElement(s.Dates,{updated:e.updated,created:e.created})),o.createElement(l.StackItem,null,o.createElement(l.Grid,null,o.createElement(l.GridItem,{className:y,span:6},o.createElement(u.Conditions,{conditions:e.conditions})),o.createElement(l.GridItem,{className:y,span:6},o.createElement(p.Actions,{actions:e.actions})))))}},868:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(29);t.Description=function(e){return i.createElement(i.Fragment,null,i.createElement(o.Title,{size:o.TitleSize.md},"Description"),i.createElement(o.Text,null," ",e.description," "))}},869:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(29),a=n(508);t.Dates=function(e){return i.createElement(i.Fragment,null,i.createElement(o.Text,null,"Last updated ",a.format(e.updated,"dd MMM yyyy")," | Created ",a.format(e.created,"dd MMM yyyy")))}},870:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EMAIL="email",e.WEBHOOK="webhook"}(t.ActionType||(t.ActionType={}))},878:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),a=n(60),l=i(n(879)),c=a.style({verticalAlign:"-0.125em",width:"1em",height:"1em"});t.WebhookIcon=function(){return o.createElement("img",{className:c,src:l.default})}},879:function(e,t,n){e.exports=n.p+"fonts/WebhookIcon.svg"},880:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(85),a=n(116),l=n(29),c=n(60),s=n(323),u=c.style({borderRadius:3}),d=c.style({marginRight:5}),f=c.style({minWidth:145});t.ActionsCell=function(e){var t=e.actions.slice(0,4),n=e.actions.slice(4),r=t.map((function(e,t){var n;switch(e.type){case o.ActionType.EMAIL:n=i.createElement(s.ActionEmailIcon,null);break;case o.ActionType.WEBHOOK:n=i.createElement(s.ActionWebhookIcon,null);break;default:a.assertNever(e)}return i.createElement(l.SplitItem,{key:t,className:d},n)}));return n.length>0&&r.push(i.createElement(l.SplitItem,{key:"remaining",className:d},i.createElement(l.Badge,{className:u,isRead:!0},n.length+" more"))),i.createElement(l.Split,{className:f},r)}},881:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(106),a=n(60),l=n(508),c=n(75),s=a.style({marginLeft:10});t.LastTriggeredCell=function(e){var t;if(e.lastEvaluation){var n=l.add(e.lastEvaluation,{months:1}),r=new Date(Date.now());t=l.isAfter(r,n)?l.format(e.lastEvaluation,"MMM dd y"):l.formatDistanceToNow(e.lastEvaluation)+" "+c.Messages.components.lastTriggeredCell.ago}else t=c.Messages.components.lastTriggeredCell.never;return i.createElement(i.Fragment,null,e.isEnabled?i.createElement(o.CheckCircleIcon,{color:"green"}):i.createElement(o.OffIcon,null),i.createElement("span",{className:s},t))}},901:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(134),l=n(2);t.useBulkMutation=function(e){var t=l.useContext(a.ClientContext).query,n=l.useRef(!0),c=l.useRef(),s=l.useState({loading:!1,responses:[]}),u=s[0],d=s[1],f=l.useCallback((function(){c.current&&c.current.abort()}),[c]);l.useEffect((function(){return n.current=!0,function(){n.current=!1,f()}}),[f]);var p=l.useCallback((function(a){return i(void 0,void 0,void 0,(function(){var i,l,s,u;return o(this,(function(o){switch(o.label){case 0:return n.current?(i="AbortController"in window?new AbortController:void 0,l=a.map((function(t){return e(t)})),s=i?i.signal:void 0,l.forEach((function(e){return e.signal=e.signal||s})),c.current&&c.current.abort(),c.current=i,d((function(e){return r(r({},e),{loading:!0})})),[4,Promise.all(l.map((function(e){return t(e)})).map((function(e){return e.catch((function(e){return e}))})))]):[2,Array(a.length).map((function(){return{error:!1}}))];case 1:return u=o.sent(),n.current&&d({loading:!1,responses:u.map((function(e,t){if(!e.errorObject||"AbortError"!==e.errorObject.name)return l[t].signal===s&&c.current===i&&(c.current=void 0,d((function(e){return r(r({},e),{loading:!1})}))),e}))}),[2,u]}}))}))}),[t,e]),m=l.useCallback((function(){d({loading:!1,responses:[]})}),[d]);return u.responses.forEach((function(e){var t;if((null===(t=e)||void 0===t?void 0:t.errorObject)&&e.errorObject instanceof a.QueryError)throw e.errorObject})),{abort:f,loading:u.loading,mutate:p,reset:m,responses:u.responses}}},902:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=n(903),a=n(117),l=n(1025),c=r(n(1026)),s=n(507);t.CreatePolicyWizard=function(e){var t=l.useSavePolicyMutation(),n=a.useVerifyPolicyMutation(),r=t.loading||n.loading;return i.createElement(i.Fragment,null,e.isOpen&&i.createElement(o.PolicyWizard,{initialValue:e.initialValue||{},onClose:function(){e.close(!1)},onSave:function(n){return t.mutate(n).then((function(t){var r;switch(t.status){case c.CREATED:case c.OK:return void 0===n.id?s.addSuccessNotification("Created",'Policy "'+n.name+'" created'):s.addSuccessNotification("Saved",'Policy "'+n.name+'" has been updated'),e.close&&e.close(!0),{created:!0};default:return{created:!1,error:(null===(r=t.payload)||void 0===r?void 0:r.msg)||"Unknown Error when trying to "+(void 0===n.id?"create":"update")+" the policy: (Code "+t.status+")"}}}))},onVerify:function(e){return n.mutate(e).then((function(t){var n;return t.status===c.OK?{isValid:!0,policy:e}:{isValid:!1,error:(null===(n=t.payload)||void 0===n?void 0:n.msg)||"Unknown Error when trying to validate: (Code "+t.status+")",policy:e}}))},showCreateStep:!!e.policiesExist&&e.showCreateStep,isLoading:r,policiesExist:e.policiesExist}))}},903:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),a=n(29),l=n(78),c=n(175),s=n(1003),u=n(1005),d=n(1016),f=n(1017),p=n(1023),m=n(153),v=n(1024),h=n(336),y=function(e,t,n,r,i,o){return!i&&(e===n||(0!==e||!o)&&(t?e<=r:e<=n))},g=function(e,t){return!t&&e},b=function(e){var t=l.useFormikContext(),n=t.validateForm,i=t.handleSubmit;o.useEffect((function(){n()}),[e.currentStep,n]),o.useEffect((function(){e.triggeredAction!==c.WizardActionType.NONE&&i()}),[e.triggeredAction,i]);var s={isLoading:e.isLoading,isFormValid:t.isValid,triggerAction:e.triggerAction,verifyResponse:e.verifyResponse,createResponse:e.createResponse,setVerifyResponse:e.setVerifyResponse},u=function(e,t,n){return e.isValid?e.isValid(t,n):t.isFormValid}(e.steps[e.currentStep],s,t.values);s.isValid=u;var d=e.steps.map((function(t){return r(r({},t),{enableNext:g(u,e.isLoading),canJumpTo:y(t.id,u,e.currentStep,e.maxStep,e.isLoading,e.showCreateStep)})}));return o.createElement(a.Form,null,o.createElement(c.WizardContext.Provider,{value:s},o.createElement(a.Wizard,{isOpen:!0,onSave:function(){e.triggerAction(c.WizardActionType.SAVE)},onClose:e.onClose,steps:d,startAtStep:e.currentStep+1,onNext:e.onMove,onBack:e.onMove,onGoToStep:e.onMove,title:"Add Policy",description:"Policies are processed on reception of system profile messages. If condition(s) are met, defined action(s) are triggered.",footer:o.createElement(v.PolicyWizardFooter,{loadingText:"Loading",isLoading:e.isLoading,error:e.createResponse.error})})))};t.PolicyWizard=function(e){var t=o.useState(0),n=t[0],i=t[1],a=o.useState(0),v=a[0],y=a[1],g=o.useState(c.WizardActionType.NONE),_=g[0],E=g[1],O=o.useState({isValid:!1}),P=O[0],S=O[1],C=h.useMountedState(),w=o.useState({created:!1}),A=w[0],M=w[1];o.useEffect((function(){var t;(null===(t=e.initialValue)||void 0===t?void 0:t.conditions)&&S({isValid:!0,policy:e.initialValue})}),[e.initialValue]);var j=function(e){var t=[];return e&&t.push(s.createCustomPolicyStep({hideBackButton:!0})),t.push(u.createDetailsStep({hideBackButton:!0}),d.createConditionsStep(),f.createActionsStep(),p.createReviewStep({nextButtonText:"Finish"})),t.map((function(e,t){return r(r({},e),{id:t})}))}(e.showCreateStep);return o.createElement(o.Fragment,null,o.createElement(l.Formik,{initialValues:e.initialValue,initialStatus:{},validateOnMount:!1,validationSchema:j[n].validationSchema,onSubmit:function(t,n){n.setSubmitting(!1),E(c.WizardActionType.NONE);var r=m.PolicyFormSchema.cast(t);switch(n.setValues(r),_){case c.WizardActionType.SAVE:e.onSave(r).then((function(e){return C()&&M(e)}));break;case c.WizardActionType.VALIDATE_CONDITION:case c.WizardActionType.NONE:break;default:throw new Error("Unexpected action")}},validate:function(t){var n=m.PolicyFormSchema.cast(t);switch(_){case c.WizardActionType.SAVE:case c.WizardActionType.NONE:break;case c.WizardActionType.VALIDATE_CONDITION:E(c.WizardActionType.NONE),e.onVerify(n).then(S)}}},o.createElement(b,{currentStep:n,maxStep:v,isLoading:e.isLoading,triggeredAction:_,triggerAction:E,steps:j,verifyResponse:P,createResponse:A,setVerifyResponse:S,onClose:e.onClose,onMove:function(e,t){var n=e.id;i(n),n>v&&y(n)},showCreateStep:e.showCreateStep,policiesExist:e.policiesExist})))}}});
//# sourceMappingURL=App.js.map