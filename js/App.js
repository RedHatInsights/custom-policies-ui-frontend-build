!function(e){function t(t){for(var n,r,o=t[0],a=t[1],l=t[2],s=0,c=[];s<o.length;s++)r=o[s],Object.prototype.hasOwnProperty.call(M,r)&&M[r]&&c.push(M[r][0]),M[r]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(D&&D(t);c.length;)c.shift()();return A.push.apply(A,l||[]),i()}function i(){for(var e,t=0;t<A.length;t++){for(var i=A[t],n=!0,r=1;r<i.length;r++){var o=i[r];0!==M[o]&&(n=!1)}n&&(A.splice(t--,1),e=I(I.s=i[0]))}return e}var n=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!P[e]||!E[e])return;for(var i in E[e]=!1,t)Object.prototype.hasOwnProperty.call(t,i)&&(h[i]=t[i]);0==--_&&0===v&&S()}(e,t),n&&n(e,t)};var r,o=!0,a="5a7220546635a13fca85",l=1e4,s={},c=[],u=[];function d(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:r!==e,active:!0,accept:function(e,i){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._acceptedDependencies[e[n]]=i||function(){};else t._acceptedDependencies[e]=i||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var i=0;i<e.length;i++)t._declinedDependencies[e[i]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var i=t._disposeHandlers.indexOf(e);i>=0&&t._disposeHandlers.splice(i,1)},check:C,apply:j,status:function(e){if(!e)return f;p.push(e)},addStatusHandler:function(e){p.push(e)},removeStatusHandler:function(e){var t=p.indexOf(e);t>=0&&p.splice(t,1)},data:s[e]};return r=void 0,t}var p=[],f="idle";function m(e){f=e;for(var t=0;t<p.length;t++)p[t].call(null,e)}var y,h,g,_=0,v=0,b={},E={},P={};function O(e){return+e+""===e?+e:e}function C(e){if("idle"!==f)throw new Error("check() is only allowed in idle status");return o=e,m("check"),(t=l,t=t||1e4,new Promise((function(e,i){if("undefined"==typeof XMLHttpRequest)return i(new Error("No browser support"));try{var n=new XMLHttpRequest,r=I.p+""+a+".hot-update.json";n.open("GET",r,!0),n.timeout=t,n.send(null)}catch(e){return i(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)i(new Error("Manifest request to "+r+" timed out."));else if(404===n.status)e();else if(200!==n.status&&304!==n.status)i(new Error("Manifest request to "+r+" failed."));else{try{var t=JSON.parse(n.responseText)}catch(e){return void i(e)}e(t)}}}))).then((function(e){if(!e)return m("idle"),null;E={},b={},P=e.c,g=e.h,m("prepare");var t=new Promise((function(e,t){y={resolve:e,reject:t}}));for(var i in h={},M)T(i);return"prepare"===f&&0===v&&0===_&&S(),t}));var t}function T(e){P[e]?(E[e]=!0,_++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=I.p+""+e+"."+a+".hot-update.js",document.head.appendChild(t)}(e)):b[e]=!0}function S(){m("ready");var e=y;if(y=null,e)if(o)Promise.resolve().then((function(){return j(o)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&t.push(O(i));e.resolve(t)}}function j(t){if("ready"!==f)throw new Error("apply() is only allowed in ready status");var i,n,r,o,l;function u(e){for(var t=[e],i={},n=t.map((function(e){return{chain:[e],id:e}}));n.length>0;){var r=n.pop(),a=r.id,l=r.chain;if((o=x[a])&&!o.hot._selfAccepted){if(o.hot._selfDeclined)return{type:"self-declined",chain:l,moduleId:a};if(o.hot._main)return{type:"unaccepted",chain:l,moduleId:a};for(var s=0;s<o.parents.length;s++){var c=o.parents[s],u=x[c];if(u){if(u.hot._declinedDependencies[a])return{type:"declined",chain:l.concat([c]),moduleId:a,parentId:c};-1===t.indexOf(c)&&(u.hot._acceptedDependencies[a]?(i[c]||(i[c]=[]),d(i[c],[a])):(delete i[c],t.push(c),n.push({chain:l.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:i}}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];-1===e.indexOf(n)&&e.push(n)}}t=t||{};var p={},y=[],_={},v=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var b in h)if(Object.prototype.hasOwnProperty.call(h,b)){var E;l=O(b);var C=!1,T=!1,S=!1,j="";switch((E=h[b]?u(l):{type:"disposed",moduleId:b}).chain&&(j="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(C=new Error("Aborted because of self decline: "+E.moduleId+j));break;case"declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(C=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+j));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(E),t.ignoreUnaccepted||(C=new Error("Aborted because "+l+" is not accepted"+j));break;case"accepted":t.onAccepted&&t.onAccepted(E),T=!0;break;case"disposed":t.onDisposed&&t.onDisposed(E),S=!0;break;default:throw new Error("Unexception type "+E.type)}if(C)return m("abort"),Promise.reject(C);if(T)for(l in _[l]=h[l],d(y,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,l)&&(p[l]||(p[l]=[]),d(p[l],E.outdatedDependencies[l]));S&&(d(y,[E.moduleId]),_[l]=v)}var A,w=[];for(n=0;n<y.length;n++)l=y[n],x[l]&&x[l].hot._selfAccepted&&_[l]!==v&&w.push({module:l,errorHandler:x[l].hot._selfAccepted});m("dispose"),Object.keys(P).forEach((function(e){!1===P[e]&&function(e){delete M[e]}(e)}));for(var N,R,D=y.slice();D.length>0;)if(l=D.pop(),o=x[l]){var k={},L=o.hot._disposeHandlers;for(r=0;r<L.length;r++)(i=L[r])(k);for(s[l]=k,o.hot.active=!1,delete x[l],delete p[l],r=0;r<o.children.length;r++){var F=x[o.children[r]];F&&((A=F.parents.indexOf(l))>=0&&F.parents.splice(A,1))}}for(l in p)if(Object.prototype.hasOwnProperty.call(p,l)&&(o=x[l]))for(R=p[l],r=0;r<R.length;r++)N=R[r],(A=o.children.indexOf(N))>=0&&o.children.splice(A,1);for(l in m("apply"),a=g,_)Object.prototype.hasOwnProperty.call(_,l)&&(e[l]=_[l]);var B=null;for(l in p)if(Object.prototype.hasOwnProperty.call(p,l)&&(o=x[l])){R=p[l];var V=[];for(n=0;n<R.length;n++)if(N=R[n],i=o.hot._acceptedDependencies[N]){if(-1!==V.indexOf(i))continue;V.push(i)}for(n=0;n<V.length;n++){i=V[n];try{i(R)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:l,dependencyId:R[n],error:e}),t.ignoreErrored||B||(B=e)}}}for(n=0;n<w.length;n++){var z=w[n];l=z.module,c=[l];try{I(l)}catch(e){if("function"==typeof z.errorHandler)try{z.errorHandler(e)}catch(i){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:i,originalError:e}),t.ignoreErrored||B||(B=i),B||(B=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:l,error:e}),t.ignoreErrored||B||(B=e)}}return B?(m("fail"),Promise.reject(B)):(m("idle"),new Promise((function(e){e(y)})))}var x={},M={0:0},A=[];function I(t){if(x[t])return x[t].exports;var i=x[t]={i:t,l:!1,exports:{},hot:d(t),parents:(u=c,c=[],u),children:[]};return e[t].call(i.exports,i,i.exports,function(e){var t=x[e];if(!t)return I;var i=function(i){return t.hot.active?(x[i]?-1===x[i].parents.indexOf(e)&&x[i].parents.push(e):(c=[e],r=i),-1===t.children.indexOf(i)&&t.children.push(i)):(console.warn("[HMR] unexpected require("+i+") from disposed module "+e),c=[]),I(i)},n=function(e){return{configurable:!0,enumerable:!0,get:function(){return I[e]},set:function(t){I[e]=t}}};for(var o in I)Object.prototype.hasOwnProperty.call(I,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(i,o,n(o));return i.e=function(e){return"ready"===f&&m("prepare"),v++,I.e(e).then(t,(function(e){throw t(),e}));function t(){v--,"prepare"===f&&(b[e]||T(e),0===v&&0===_&&S())}},i.t=function(e,t){return 1&t&&(e=i(e)),I.t(e,-2&t)},i}(t)),i.l=!0,i.exports}I.m=e,I.c=x,I.d=function(e,t,i){I.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},I.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},I.t=function(e,t){if(1&t&&(e=I(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(I.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)I.d(i,n,function(t){return e[t]}.bind(null,n));return i},I.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return I.d(t,"a",t),t},I.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},I.p="/beta/apps/policies/",I.h=function(){return a};var w=window.webpackJsonp=window.webpackJsonp||[],N=w.push.bind(w);w.push=t,w=w.slice();for(var R=0;R<w.length;R++)t(w[R]);var D=N;A.push([543,1,3,2,4]),i()}({100:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Operations=t.Schemas=void 0;const a=o(i(234)),l=i(189),s=i(368);var c;!function(e){function t(){return a.enum(["BOOLEAN","INT","LIST","STRING"])}function i(){return a.object({ctime:a.number().int().optional().nullable(),hostName:a.string().optional().nullable(),id:a.string().optional().nullable()}).nonstrict()}function n(){return a.array(i())}function r(){return a.array(s())}function o(){return a.record(a.string())}function l(){return a.object({count:a.number().int().optional().nullable()}).nonstrict()}function s(){return a.object({actions:a.string().optional().nullable(),conditions:a.string(),ctime:a.string().optional().nullable(),description:a.string().optional().nullable(),id:c().optional().nullable(),isEnabled:a.boolean().optional().nullable(),lastTriggered:a.number().int().optional().nullable(),mtime:a.string().optional().nullable(),name:a.string()}).nonstrict()}function c(){return a.string()}e.Fact=a.object({id:a.number().int().optional().nullable(),name:a.string().optional().nullable(),type:t().optional().nullable()}).nonstrict(),e.FactType=t(),e.HistoryItem=i(),e.ListHistoryItem=n(),e.ListPolicy=r(),e.ListUUID=a.array(a.string()),e.MapStringString=o(),e.Meta=l(),e.Msg=a.object({msg:a.string().optional().nullable()}).nonstrict(),e.PagedResponseOfHistoryItem=a.object({data:n().optional().nullable(),links:o().optional().nullable(),meta:l().optional().nullable()}).nonstrict(),e.PagedResponseOfPolicy=a.object({data:r().optional().nullable(),links:o().optional().nullable(),meta:l().optional().nullable()}).nonstrict(),e.Policy=s(),e.UUID=c(),e.__Empty=a.string().max(0).optional()}(c=t.Schemas||(t.Schemas={})),function(e){let t,i,n,r,o,u,d,p,f,m,y,h,g,_;!function(e){e.actionCreator=()=>{return s.actionBuilder("GET","/api/policies/v1.0/").queryParams({}).config({rules:[new l.ValidateRule(c.__Empty,"__Empty",404)]}).build()}}(t=e.Get||(e.Get={})),function(e){const t=a.array(c.Fact);e.actionCreator=()=>{return s.actionBuilder("GET","/api/policies/v1.0/facts").queryParams({}).config({rules:[new l.ValidateRule(t,"Response200",200)]}).build()}}(i=e.GetFacts||(e.GetFacts={})),function(e){a.enum(["equal","like","ilike","not_equal"]),a.enum(["equal","like","ilike","not_equal"]),a.string(),a.enum(["true","false"]),a.string(),a.number().int(),a.number().int(),a.enum(["name","description","is_enabled","mtime"]),a.enum(["asc","desc"]);e.actionCreator=e=>{const t={};return void 0!==e.filterOpDescription&&(t["filter:op[description]"]=e.filterOpDescription),void 0!==e.filterOpName&&(t["filter:op[name]"]=e.filterOpName),void 0!==e.filterDescription&&(t["filter[description]"]=e.filterDescription),void 0!==e.filterIsEnabled&&(t["filter[is_enabled]"]=e.filterIsEnabled),void 0!==e.filterName&&(t["filter[name]"]=e.filterName),void 0!==e.limit&&(t.limit=e.limit),void 0!==e.offset&&(t.offset=e.offset),void 0!==e.sortColumn&&(t.sortColumn=e.sortColumn),void 0!==e.sortDirection&&(t.sortDirection=e.sortDirection),s.actionBuilder("GET","/api/policies/v1.0/policies").queryParams(t).config({rules:[new l.ValidateRule(c.PagedResponseOfPolicy,"PagedResponseOfPolicy",200),new l.ValidateRule(c.__Empty,"__Empty",400),new l.ValidateRule(c.__Empty,"__Empty",403),new l.ValidateRule(c.__Empty,"__Empty",404)]}).build()}}(n=e.GetPolicies||(e.GetPolicies={})),function(e){a.boolean();e.actionCreator=e=>{const t={};return void 0!==e.alsoStore&&(t.alsoStore=e.alsoStore),s.actionBuilder("POST","/api/policies/v1.0/policies").queryParams(t).data(e.body).config({rules:[new l.ValidateRule(c.__Empty,"__Empty",200),new l.ValidateRule(c.Policy,"Policy",201),new l.ValidateRule(c.Msg,"Msg",400),new l.ValidateRule(c.__Empty,"__Empty",403),new l.ValidateRule(c.Msg,"Msg",409),new l.ValidateRule(c.__Empty,"__Empty",500)]}).build()}}(r=e.PostPolicies||(e.PostPolicies={})),function(e){a.enum(["equal","like","ilike","not_equal"]),a.enum(["equal","like","ilike","not_equal"]),a.string(),a.enum(["true","false"]),a.string();const t=a.array(c.UUID);e.actionCreator=e=>{const i={};return void 0!==e.filterOpDescription&&(i["filter:op[description]"]=e.filterOpDescription),void 0!==e.filterOpName&&(i["filter:op[name]"]=e.filterOpName),void 0!==e.filterDescription&&(i["filter[description]"]=e.filterDescription),void 0!==e.filterIsEnabled&&(i["filter[is_enabled]"]=e.filterIsEnabled),void 0!==e.filterName&&(i["filter[name]"]=e.filterName),s.actionBuilder("GET","/api/policies/v1.0/policies/ids").queryParams(i).config({rules:[new l.ValidateRule(t,"Response200",200),new l.ValidateRule(c.__Empty,"__Empty",400),new l.ValidateRule(c.__Empty,"__Empty",403),new l.ValidateRule(c.__Empty,"__Empty",404)]}).build()}}(o=e.GetPoliciesIds||(e.GetPoliciesIds={})),function(e){const t=a.array(c.UUID);e.actionCreator=e=>{return s.actionBuilder("DELETE","/api/policies/v1.0/policies/ids").queryParams({}).data(e.body).config({rules:[new l.ValidateRule(t,"Response200",200),new l.ValidateRule(c.__Empty,"__Empty",403)]}).build()}}(u=e.DeletePoliciesIds||(e.DeletePoliciesIds={})),function(e){a.boolean();const t=a.array(c.UUID);e.actionCreator=e=>{const i={};return void 0!==e.enabled&&(i.enabled=e.enabled),s.actionBuilder("POST","/api/policies/v1.0/policies/ids/enabled").queryParams(i).data(e.body).config({rules:[new l.ValidateRule(t,"Response200",200),new l.ValidateRule(c.__Empty,"__Empty",403)]}).build()}}(d=e.PostPoliciesIdsEnabled||(e.PostPoliciesIdsEnabled={})),function(e){e.actionCreator=e=>{return s.actionBuilder("POST","/api/policies/v1.0/policies/validate").queryParams({}).data(e.body).config({rules:[new l.ValidateRule(c.Msg,"Msg",200),new l.ValidateRule(c.Msg,"Msg",400),new l.ValidateRule(c.__Empty,"__Empty",500)]}).build()}}(p=e.PostPoliciesValidate||(e.PostPoliciesValidate={})),function(e){a.string();e.actionCreator=e=>{const t={};return void 0!==e.id&&(t.id=e.id),s.actionBuilder("POST","/api/policies/v1.0/policies/validate-name").queryParams(t).data(e.body).config({rules:[new l.ValidateRule(c.Msg,"Msg",200),new l.ValidateRule(c.Msg,"Msg",400),new l.ValidateRule(c.Msg,"Msg",403),new l.ValidateRule(c.__Empty,"__Empty",409),new l.ValidateRule(c.__Empty,"__Empty",500)]}).build()}}(f=e.PostPoliciesValidateName||(e.PostPoliciesValidateName={})),function(e){e.actionCreator=e=>{const t="/api/policies/v1.0/policies/{id}".replace("{id}",e.id.toString());return s.actionBuilder("GET",t).queryParams({}).config({rules:[new l.ValidateRule(c.Policy,"Policy",200),new l.ValidateRule(c.Msg,"Msg",403),new l.ValidateRule(c.__Empty,"__Empty",404)]}).build()}}(m=e.GetPoliciesById||(e.GetPoliciesById={})),function(e){e.actionCreator=e=>{const t="/api/policies/v1.0/policies/{id}".replace("{id}",e.id.toString());return s.actionBuilder("DELETE",t).queryParams({}).config({rules:[new l.ValidateRule(c.__Empty,"__Empty",200),new l.ValidateRule(c.__Empty,"__Empty",403),new l.ValidateRule(c.__Empty,"__Empty",404)]}).build()}}(y=e.DeletePoliciesById||(e.DeletePoliciesById={})),function(e){a.boolean();e.actionCreator=e=>{const t="/api/policies/v1.0/policies/{id}/enabled".replace("{id}",e.id.toString()),i={};return void 0!==e.enabled&&(i.enabled=e.enabled),s.actionBuilder("POST",t).queryParams(i).config({rules:[new l.ValidateRule(c.__Empty,"__Empty",200),new l.ValidateRule(c.__Empty,"__Empty",403),new l.ValidateRule(c.__Empty,"__Empty",404),new l.ValidateRule(c.__Empty,"__Empty",500)]}).build()}}(h=e.PostPoliciesByIdEnabled||(e.PostPoliciesByIdEnabled={})),function(e){a.enum(["equal","not_equal","like"]),a.enum(["equal","like","not_equal"]),a.string(),a.string(),a.number().int(),a.number().int(),a.enum(["hostName","ctime"]),a.enum(["asc","desc"]);e.actionCreator=e=>{const t="/api/policies/v1.0/policies/{id}/history/trigger".replace("{id}",e.id.toString()),i={};return void 0!==e.filterOpId&&(i["filter:op[id]"]=e.filterOpId),void 0!==e.filterOpName&&(i["filter:op[name]"]=e.filterOpName),void 0!==e.filterId&&(i["filter[id]"]=e.filterId),void 0!==e.filterName&&(i["filter[name]"]=e.filterName),void 0!==e.limit&&(i.limit=e.limit),void 0!==e.offset&&(i.offset=e.offset),void 0!==e.sortColumn&&(i.sortColumn=e.sortColumn),void 0!==e.sortDirection&&(i.sortDirection=e.sortDirection),s.actionBuilder("GET",t).queryParams(i).config({rules:[new l.ValidateRule(c.PagedResponseOfHistoryItem,"PagedResponseOfHistoryItem",200),new l.ValidateRule(c.__Empty,"__Empty",400),new l.ValidateRule(c.__Empty,"__Empty",403),new l.ValidateRule(c.__Empty,"__Empty",404),new l.ValidateRule(c.__Empty,"__Empty",500)]}).build()}}(g=e.GetPoliciesByIdHistoryTrigger||(e.GetPoliciesByIdHistoryTrigger={})),function(e){a.boolean();e.actionCreator=e=>{const t="/api/policies/v1.0/policies/{policyId}".replace("{policyId}",e.policyId.toString()),i={};return void 0!==e.dry&&(i.dry=e.dry),s.actionBuilder("PUT",t).queryParams(i).data(e.body).config({rules:[new l.ValidateRule(c.Policy,"Policy",200),new l.ValidateRule(c.__Empty,"__Empty",400),new l.ValidateRule(c.__Empty,"__Empty",403),new l.ValidateRule(c.__Empty,"__Empty",404),new l.ValidateRule(c.Msg,"Msg",409)]}).build()}}(_=e.PutPoliciesByPolicyId||(e.PutPoliciesByPolicyId={}))}(t.Operations||(t.Operations={}))},1e3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.policyExporterFactory=void 0;const n=i(18),r=i(1001),o=i(1002),a=i(68);t.policyExporterFactory=e=>{switch(e){case n.ExporterType.CSV:return new r.PolicyExporterCsv;case n.ExporterType.JSON:return new o.PolicyExporterJson}a.assertNever(e)}},1001:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyExporterCsv=void 0;const n=i(125),r=i(18);class o extends r.ExporterCsv{serialize(e){return Object.assign(Object.assign({},e),{actions:n.toServerAction(e.actions)})}headers(){return[["id","id"],["name","name"],["description","description"],["isEnabled","isEnabled"],["conditions","conditions"],["actions","actions"],["lastTriggered","lastTriggered"],["mtime","mtime"],["ctime","ctime"]]}}t.PolicyExporterCsv=o},1002:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyExporterJson=void 0;const n=i(18);class r extends n.ExporterJson{}t.PolicyExporterJson=r},1003:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetail=void 0;const a=o(i(0)),l=i(95),s=i(23),c=i(420),u=i(135),d=i(144),p=i(18),f=i(1004),m=i(422),y=i(39),h=i(427),g=i(0),_=i(233),v=i(1005),b=i(1006),E=i(1007),P=i(1008),O=i(498),C=i(1009),T=i(494),S=i(493),j=i(492),x=i(1010),M=i(1011),A=i(1012),I=i(31),w=y.style({paddingBottom:8,paddingTop:16});t.PolicyDetail=()=>{var e,t;const{policyId:i,policy:n,setPolicy:r}=M.usePolicy(),o=g.useContext(_.AppContext),{canWriteAll:y,canReadAll:N}=o.rbac,R=u.useHistory(),D=S.usePolicyToDelete(),k=f.useGetPolicyParametrizedQuery(),L=T.useMassChangePolicyEnabledMutation(),F=x.useWizardState(n),B=a.useRef(null),V=a.useCallback(e=>{var t;"Policy"===(null===(t=e.payload)||void 0===t?void 0:t.type)&&r(e.payload.value)},[r]);a.useEffect(()=>{const e=k.query;i!==(null==n?void 0:n.id)&&e(i).then(V)},[i,k.query,n,r,V]);const z=a.useCallback(e=>{const t=F.close;e&&r(e),t()},[r,F.close]),U=a.useCallback(()=>{const e=D.open;n&&e(n)},[n,D.open]),G=a.useCallback(e=>{const t=D.close;e?R.push(d.linkTo.listPage()):t()},[R,D.close]),H=a.useCallback(e=>{n&&r(Object.assign(Object.assign({},n),{isEnabled:e}))},[n,r]),Q=a.useCallback(e=>{(0,L.mutate)({policyIds:[i],shouldBeEnabled:e}).then(t=>{var n;200===(null===(n=t.payload)||void 0===n?void 0:n.status)?t.payload.value.includes(i)?H(e):p.addDangerNotification(I.Messages.pages.policyDetail.errorChangingEnabledStatus.notFound.title,I.Messages.pages.policyDetail.errorChangingEnabledStatus.notFound.text):p.addDangerNotification(I.Messages.pages.policyDetail.errorChangingEnabledStatus.else.title,I.Messages.pages.policyDetail.errorChangingEnabledStatus.else.text)})},[i,L.mutate,H]);if(!N)return a.createElement(O.NoPermissionsPage,null);if(void 0===n){if(404===k.status)return a.createElement(b.PolicyDetailEmptyState,{policyId:i||""});if(!k.loading&&"Policy"!==(null===(e=k.payload)||void 0===e?void 0:e.type)){let e=`code: ${k.status}`;return"Msg"===(null===(t=k.payload)||void 0===t?void 0:t.type)&&k.payload.value.msg&&(e=k.payload.value.msg),a.createElement(E.PolicyDetailErrorState,{action:()=>{var e;null===(e=B.current)||void 0===e||e.refresh(),k.query(i).then(V)},error:e})}return a.createElement(v.PolicyDetailSkeleton,null)}return a.createElement(a.Fragment,null,a.createElement(c.Helmet,null,a.createElement("title",null,n.name," - Policies | Red Hat Insights")),a.createElement(l.PageHeader,null,a.createElement(s.Stack,null,a.createElement(s.StackItem,null,a.createElement(s.Breadcrumb,null,a.createElement(p.BreadcrumbLinkItem,{ouiaId:"to-list-page",to:d.linkTo.listPage()},"Policies"),a.createElement(s.BreadcrumbItem,{to:"#",isActive:!0},n.name))),a.createElement(s.StackItem,null,a.createElement(s.Split,null,a.createElement(s.SplitItem,{isFilled:!0},a.createElement(l.PageHeaderTitle,{title:n.name})),a.createElement(s.SplitItem,null,a.createElement(C.PolicyDetailActions,{isEnabled:n.isEnabled,disabled:!y,edit:F.edit,duplicate:F.duplicate,delete:U,changeEnabled:Q,loadingEnabledChange:L.loading})))))),a.createElement(l.Main,null,a.createElement(p.Section,{ouiaId:"policy-detail",style:{paddingBottom:"4px"}},a.createElement(P.PolicyDetailIsEnabled,{isEnabled:n.isEnabled,loading:L.loading}),a.createElement(m.ExpandedContent,{actions:n.actions,description:n.description,created:n.ctime,updated:n.mtime,conditions:n.conditions})),a.createElement("div",{className:w},a.createElement(s.Title,{headingLevel:"h2",size:"lg"},"Recent trigger history")),a.createElement(A.TriggerDetailSection,{policyId:i,ref:B})),F.data.isOpen&&a.createElement(h.CreatePolicyWizard,{isOpen:!0,close:z,showCreateStep:!1,policiesExist:!1,initialValue:F.data.initialValue,isEditing:F.data.isEditing}),D.isOpen&&a.createElement(j.DeletePolicy,{onClose:G,loading:!1,count:D.count,policy:D.policy}))}},1004:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGetPolicyParametrizedQuery=t.useGetPolicyQuery=t.actionCreator=void 0;const n=i(67),r=i(18),o=i(125),a=i(100),l=i(189);t.actionCreator=e=>a.Operations.GetPoliciesById.actionCreator({id:e});const s=l.validationResponseTransformer(e=>"Policy"===e.type?l.validatedResponse("Policy",e.status,o.toPolicy(e.value),e.errors):e);t.useGetPolicyQuery=(e,i=!0)=>r.useTransformQueryResponse(n.useQuery(t.actionCreator(e),i),s),t.useGetPolicyParametrizedQuery=()=>r.useTransformQueryResponse(n.useParameterizedQuery(t.actionCreator),s)},1005:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetailSkeleton=void 0;const a=o(i(0)),l=i(95),s=i(23),c=i(56),u=i(18),d=i(144),p=i(39).style({width:200});t.PolicyDetailSkeleton=()=>a.createElement(a.Fragment,null,a.createElement(l.PageHeader,{"data-testid":"policy-loading"},a.createElement(s.Stack,null,a.createElement(s.StackItem,null,a.createElement(s.Breadcrumb,null,a.createElement(u.BreadcrumbLinkItem,{ouiaId:"to-list-page",to:d.linkTo.listPage()},"Policies"),a.createElement(s.BreadcrumbItem,null,a.createElement(l.Skeleton,{className:p,size:"sm"})))),a.createElement(s.StackItem,null,a.createElement(s.Split,null,a.createElement(s.SplitItem,{isFilled:!0},a.createElement(l.PageHeaderTitle,{title:a.createElement(l.Skeleton,{size:"sm"})})),a.createElement(s.SplitItem,null,a.createElement(s.Button,{isDisabled:!0,variant:s.ButtonVariant.plain},a.createElement(c.EllipsisVIcon,null))))))),a.createElement(l.Main,null,a.createElement(u.Section,{ouiaId:"loading-spinner"},a.createElement(s.Bullseye,null,a.createElement(l.Spinner,{centered:!0})))))},1006:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetailEmptyState=void 0;const a=o(i(0)),l=i(135),s=i(56),c=i(31),u=i(123),d=i(496),p=i(144);t.PolicyDetailEmptyState=e=>{const t=l.useHistory(),i=a.useCallback(()=>{t.push(p.linkTo.listPage())},[t]);return a.createElement(u.EmptyStateSection,{icon:s.UnknownIcon,title:c.Messages.pages.policyDetail.emptyState.title,content:d.format(c.Messages.pages.policyDetail.emptyState.text,e.policyId),actionLabel:c.Messages.pages.policyDetail.emptyState.backText,action:i})}},1007:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetailErrorState=void 0;const a=o(i(0)),l=i(56),s=i(89),c=i(31),u=i(123),d=i(497);t.PolicyDetailErrorState=e=>{const t=d.useTextFormat(c.Messages.pages.policyDetail.errorState.text,[e.error]);return a.createElement(u.EmptyStateSection,{icon:l.ExclamationCircleIcon,iconColor:s.global_danger_color_100.value,title:c.Messages.pages.policyDetail.errorState.title,content:t,action:e.action,actionLabel:c.Messages.pages.policyDetail.errorState.actionText})}},1008:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetailIsEnabled=void 0;const a=o(i(0)),l=i(23),s=i(89),c=i(39),u=i(95),d=i(212),p=c.style({marginLeft:s.global_spacer_md.var}),f=c.style({minHeight:48});t.PolicyDetailIsEnabled=e=>{if(e.loading)return a.createElement(l.Stack,{"data-testid":"loading",className:f},a.createElement(l.StackItem,null,a.createElement(u.Skeleton,{size:"sm"})));const{icon:t,text:i}=e.isEnabled?{icon:a.createElement(d.EnabledPolicyIcon,null),text:"Enabled"}:{icon:a.createElement(d.DisabledPolicyIcon,null),text:"Disabled"};return a.createElement(l.Stack,null,a.createElement(l.StackItem,null,t,a.createElement("span",{className:p},i)))}},1009:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetailActions=void 0;const a=o(i(0)),l=i(23);t.PolicyDetailActions=e=>{const[t,i]=a.useState(!1),n=a.useCallback(()=>{i(!1)},[]),r=a.useMemo(()=>{const t=e.changeEnabled,i=[];return e.isEnabled?i.push(a.createElement(l.DropdownItem,{isDisabled:e.loadingEnabledChange,onClick:()=>t(!1),key:"disable"},"Disable")):i.push(a.createElement(l.DropdownItem,{isDisabled:e.loadingEnabledChange,onClick:()=>t(!0),key:"enable"},"Enable")),i.push(a.createElement(l.DropdownItem,{key:"edit",onClick:e.edit},"Edit"),a.createElement(l.DropdownItem,{key:"duplicate",onClick:e.duplicate},"Duplicate"),a.createElement(l.DropdownItem,{key:"delete",onClick:e.delete},"Delete")),i},[e.isEnabled,e.changeEnabled,e.edit,e.duplicate,e.delete,e.loadingEnabledChange]);return a.createElement(l.Dropdown,{position:l.DropdownPosition.right,onSelect:n,toggle:a.createElement(l.KebabToggle,{"data-testid":"policy-detail-actions-button",isDisabled:e.disabled,onToggle:i,id:"policy-detail-actions-menu"}),isOpen:t,isPlain:!0,dropdownItems:r})}},1010:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useWizardState=void 0;const a=o(i(0)),l=i(125),s=i(0),c=i(68);var u;!function(e){e[e.EDIT=0]="EDIT",e[e.DUPLICATE=1]="DUPLICATE",e[e.CLOSE=2]="CLOSE"}(u||(u={}));const d={isEditing:!1,initialValue:void 0,isOpen:!1};t.useWizardState=e=>{const[t,i]=a.useReducer((t,i)=>{if(!e)return d;switch(i){case u.CLOSE:return d;case u.DUPLICATE:return{isEditing:!1,initialValue:l.makeCopyOfPolicy(e),isOpen:!0};case u.EDIT:return{isEditing:!0,initialValue:e,isOpen:!0};default:return c.assertNever(i)}},d);return{data:t,close:s.useCallback(()=>i(u.CLOSE),[i]),duplicate:s.useCallback(()=>i(u.DUPLICATE),[i]),edit:s.useCallback(()=>i(u.EDIT),[i])}}},1011:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.usePolicy=void 0;const a=i(92),l=o(i(0)),s=i(144),c=i(32),u=i(0),d=i(114);t.usePolicy=()=>{const{policyId:e}=a.useParams(),t=d.usePrevious(e),i=a.useHistory(),[n,r]=l.useState(),o=(null==n?void 0:n.id)||e,p=l.useCallback((e,t)=>{c.unstable_batchedUpdates(()=>{r(t),i.push(s.linkTo.policyDetail(e))})},[i,r]),f=l.useCallback(t=>{e!==t.id?p(t.id,t):r(t)},[p,e]);return u.useEffect(()=>{t!==e&&(n&&n.id===e||r(void 0))},[e,t,p,i,n,o]),{policyId:o,policy:n,setPolicy:f}}},1012:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerDetailSection=void 0;const l=o(i(0)),s=a(i(495)),c=i(1013),u=i(1014),d=i(1015),p=i(499),f=i(18),m=i(1016),y=i(235),h=i(1019),g=i(1021),_=i(1022),v=i(1023),b=i(0),E=i(1024),P=a(i(162)),O=f.Sort.by("ctime",f.Direction.DESCENDING),C=e=>{var t;return e.errorContent?l.createElement(l.Fragment,null," ",e.errorContent," "):e.payload&&e.payload.count>0||e.loading?l.createElement(d.TriggerTable,{rows:null===(t=e.payload)||void 0===t?void 0:t.data,onSort:e.sort.onSort,sortBy:e.sort.sortBy,loading:e.loading}):l.createElement(p.TriggerTableEmptyState,null)};t.TriggerDetailSection=b.forwardRef((e,t)=>{var i;const{policyId:n}=e,r=_.useTriggerFilter(),o=v.useGetPolicyDetailTriggerHistory(),a=l.useMemo(()=>{const e=o.payload;if("PagedTriggers"===(null==e?void 0:e.type))return e.value},[o.payload]),[d,p]=l.useState(P.default.defaultElementsPerPage),T=f.useSort(O),{page:S,onPaginationChanged:j}=g.useTriggerPage(d,T.sortBy,r.debouncedFilters),x=b.useCallback(()=>{const e=o.query;n&&e({policyId:n,page:S})},[n,o.query,S]);l.useEffect(()=>{x()},[x]),l.useImperativeHandle(t,()=>({refresh:x}),[x]);const M=h.useGetAllTriggers(n,S.filter),A=l.useCallback(e=>{const t=m.triggerExporterFactory(f.exporterTypeFromString(e));M().then(e=>{e.length>0&&s.default(t.export(e),`policy-${n}-triggers-${y.format(new Date(Date.now()),"y-dd-MM")}.${t.type}`)})},[M,n]),I=l.useCallback((e,t)=>{p(t)},[p]);let w;return!o.loading&&o.error&&404!==o.status&&(w=l.createElement(E.TriggerErrorState,{action:x,error:`code: ${o.status}`})),l.createElement(f.Section,{ouiaId:"trigger-detail-section"},!1===o.hasTriggers?l.createElement(c.PolicyDetailTriggerEmptyState,null):l.createElement(l.Fragment,null,l.createElement(u.TriggerTableToolbar,{count:null==a?void 0:a.count,page:S,onPaginationChanged:j,onPaginationSizeChanged:I,pageCount:null===(i=null==a?void 0:a.data)||void 0===i?void 0:i.length,filters:r.filters,setFilters:r.setFilters,clearFilters:r.clearFilter,onExport:A},l.createElement(C,{loading:o.loading,payload:a,sort:T,errorContent:w}))))})},1013:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDetailTriggerEmptyState=void 0;const a=o(i(0)),l=i(31),s=i(123);t.PolicyDetailTriggerEmptyState=()=>a.createElement(s.EmptyStateSection,{title:l.Messages.pages.policyDetail.triggerEmptyState.title,content:l.Messages.pages.policyDetail.triggerEmptyState.text})},1014:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerTableToolbar=void 0;const a=o(i(0)),l=i(23),s=i(95),c=i(18),u=i(370),d=i(52),p={[u.TriggerFilterColumn.NAME]:{label:"System",placeholder:"Filter by System"}};t.TriggerTableToolbar=e=>{const t=c.usePrimaryToolbarFilterConfig(u.TriggerFilterColumn,e.filters,e.setFilters,e.clearFilters,p),i=a.useMemo(()=>({itemCount:e.count||0,page:e.page.index,perPage:e.page.size,perPageOptions:void 0,onSetPage:e.onPaginationChanged,onFirstClick:e.onPaginationChanged,onPreviousClick:e.onPaginationChanged,onNextClick:e.onPaginationChanged,onLastClick:e.onPaginationChanged,onPageInput:e.onPaginationChanged,onPerPageSelect:e.onPaginationSizeChanged,isCompact:!0,variant:l.PaginationVariant.top}),[e.onPaginationChanged,e.page,e.count,e.onPaginationSizeChanged]),n=a.useMemo(()=>({itemCount:e.count||0,page:e.page.index,perPage:e.page.size,perPageOptions:void 0,onSetPage:e.onPaginationChanged,onFirstClick:e.onPaginationChanged,onPreviousClick:e.onPaginationChanged,onNextClick:e.onPaginationChanged,onLastClick:e.onPaginationChanged,onPageInput:e.onPaginationChanged,onPerPageSelect:e.onPaginationSizeChanged,isCompact:!1,variant:l.PaginationVariant.bottom}),[e.onPaginationChanged,e.page,e.count,e.onPaginationSizeChanged]),r=a.useMemo(()=>{const t=e.onExport;return{extraItems:[],onSelect:(e,i)=>{t(c.exporterTypeFromString(i))},"data-testid":"trigger-toolbar-export-container"}},[e.onExport]);return a.createElement("div",Object.assign({},d.getOuiaProps("Trigger/TableDualToolbar",e)),a.createElement(s.PrimaryToolbar,{pagination:i,exportConfig:r,filterConfig:t.filterConfig,activeFiltersConfig:t.activeFiltersConfig}),e.children,a.createElement(s.PrimaryToolbar,{pagination:n}))}},1015:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerTable=void 0;const l=o(i(0)),s=i(371),c=i(95),u=i(18),d=i(31),p=a(i(192)),f=i(499),m=i(52),y=[{title:d.Messages.tables.trigger.columns.date,transforms:[s.sortable],cellTransforms:[s.nowrap]},{title:d.Messages.tables.trigger.columns.system,transforms:[s.sortable],cellTransforms:[s.wrappable,s.breakWord]}],h=e=>u.localUrl(`/insights/inventory/${e}/`,u.getInsights().chrome.isBeta());t.TriggerTable=e=>{const t=l.useMemo(()=>{const t=e.rows;return t?t.map((e,t)=>({id:`${e.id}-${t}`,key:`${e.id}-${t}`,cells:[{title:l.createElement(s.TableText,null,p.default(u.toUtc(e.created),"dd MMM yyyy HH:mm:ss")," UTC")},{title:e.id?l.createElement(s.TableText,null,l.createElement("a",{href:h(e.id)},e.hostName)):l.createElement(s.TableText,null,e.hostName)}]})):[]},[e.rows]),i=l.useCallback((t,i,n)=>{const r=e.onSort;if(r){r(i,0===i?"ctime":"name",n===s.SortByDirection.asc?u.Direction.ASCENDING:u.Direction.DESCENDING)}},[e.onSort]),n=l.useMemo(()=>{if(e.sortBy)return{index:"ctime"===e.sortBy.column?0:1,direction:e.sortBy.direction===u.Direction.ASCENDING?"asc":"desc"}},[e.sortBy]);return e.loading?l.createElement(c.SkeletonTable,{testID:"trigger-table-loading",rowSize:10,columns:y,sortBy:n}):0===t.length?l.createElement(f.TriggerTableEmptyState,null):l.createElement("div",Object.assign({},m.getOuiaProps("Trigger/Table",e)),l.createElement(s.Table,{"aria-label":d.Messages.tables.trigger.title,rows:t,cells:y,onSort:i,sortBy:n},l.createElement(s.TableHeader,null),l.createElement(s.TableBody,null)))}},1016:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerExporterFactory=void 0;const n=i(18),r=i(1017),o=i(1018),a=i(68);t.triggerExporterFactory=e=>{switch(e){case n.ExporterType.CSV:return new r.TriggerExporterCsv;case n.ExporterType.JSON:return new o.TriggerExporterJson}a.assertNever(e)}},1017:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerExporterCsv=void 0;const n=i(18);class r extends n.ExporterCsv{serialize(e){return Object.assign({},e)}headers(){return[["created","ctime"],["hostName","system"],["id","id"]]}}t.TriggerExporterCsv=r},1018:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerExporterJson=void 0;const n=i(18);class r extends n.ExporterJson{}t.TriggerExporterJson=r},1019:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function l(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useGetAllTriggers=void 0;const r=i(500),o=i(0),a=i(67),l=i(18);t.useGetAllTriggers=(e,t)=>{const i=a.useClient();return o.useCallback(()=>new Promise(o=>n(void 0,void 0,void 0,(function*(){const n=[];let a=l.Page.of(1,200,t);for(;;){const t=yield i.query(r.actionCreator({policyId:e,page:a}));if(t.payload){const e=r.dataToTriggers(t.payload);if("PagedTriggers"===e.type&&e.value.data){if(n.push(...e.value.data),(a=a.nextPage()).index>l.Page.lastPageForElements(e.value.count,a.size).index)break;continue}}break}o(n)}))),[i,e,t])}},1020:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.toTriggers=t.toTrigger=void 0;const r=n(i(211));t.toTrigger=e=>({id:e.id||"",hostName:e.hostName||"",created:e.ctime?r.default(e.ctime/1e3):new Date(Date.now())}),t.toTriggers=e=>e?e.map(t.toTrigger):[]},1021:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useTriggerPage=void 0;const a=o(i(0)),l=i(0),s=i(18),c=i(370);t.useTriggerPage=(e,t,i)=>{const n=a.useMemo(()=>{const e=new s.Filter,t=s.stringValue(i[c.TriggerFilterColumn.NAME]);return t&&""!==t.trim()&&e.and("name",s.Operator.LIKE,t.trim()),e},[i]),[r,o]=a.useState(()=>s.Page.of(1,e,n,t));return l.useEffect(()=>{o(e=>e.sort!==t?s.Page.of(e.index,e.size,e.filter,t):e)},[t]),l.useEffect(()=>{o(e=>e.filter!==n?s.Page.of(1,e.size,n,e.sort):e)},[n]),l.useEffect(()=>{o(t=>t.size!==e?s.Page.of(1,e,t.filter,t.sort):t)},[e]),{page:r,onPaginationChanged:a.useCallback((e,t)=>{o(e=>e.withPage(t))},[o])}}},1022:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTriggerFilter=void 0;const n=i(18),r=i(68),o=i(370),a=e=>n.useUrlStateString("system",e),l=e=>{switch(e){case o.TriggerFilterColumn.NAME:return a;default:r.assertNever(e)}};t.useTriggerFilter=(e=250)=>n.useFilters(o.TriggerFilterColumn,e,l)},1023:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGetPolicyDetailTriggerHistory=void 0;const n=i(0),r=i(500);t.useGetPolicyDetailTriggerHistory=()=>{const e=r.useGetPolicyTriggersParametrizedQuery(),t=r.useHasPolicyTriggersParametrizedQuery(),[i,o]=n.useState(),a=n.useCallback((...i)=>{const[{policyId:n,page:r}]=i,a=e.query,l=t.query,s=!r.hasFilter()&&1===r.index;return a({policyId:n,page:r}).then(e=>{if(404===e.status){if(!s)return o(void 0),l(n).then(t=>(404===t.status?o(!1):200===t.status?o(!0):o(void 0),e));o(!1)}else 200===e.status?o(!0):o(void 0);return e})},[e.query,t.query]),l=n.useCallback(()=>{const i=e.abort,n=t.abort;i(),n()},[e.abort,t.abort]),s=n.useCallback(()=>{const i=e.reset,n=t.reset;i(),n()},[e.reset,t.reset]);return Object.assign(Object.assign({},e),{query:a,abort:l,reset:s,status:e.status,loading:t.loading||e.loading,errorObject:t.errorObject||e.errorObject,error:t.error||e.error,hasTriggers:i})}},1024:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerErrorState=void 0;const a=o(i(0)),l=i(56),s=i(89),c=i(31),u=i(123),d=i(497);t.TriggerErrorState=e=>{const t=d.useTextFormat(c.Messages.pages.policyDetail.triggerErrorState.text,[e.error]);return a.createElement(u.EmptyStateSection,{icon:l.ExclamationCircleIcon,iconColor:s.global_danger_color_100.value,title:c.Messages.pages.policyDetail.triggerErrorState.title,content:t,action:e.action,actionLabel:c.Messages.pages.policyDetail.triggerErrorState.actionText})}},1025:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useApp=void 0;const r=i(0),o=i(135),a=i(18),l=n(i(162)),s=i(1026);t.useApp=()=>{const e=o.useHistory(),[t,i]=r.useState(void 0),n=s.useUserSettings(9e5);return r.useEffect(()=>(a.waitForInsights().then(e=>{e.chrome.init(),e.chrome.identifyApp(l.default.appId),e.chrome.hasOwnProperty("hideGlobalFilter")&&e.chrome.hideGlobalFilter&&e.chrome.hideGlobalFilter()}),()=>{a.getInsights().chrome.on("APP_NAVIGATION",t=>e.push(`/${t.navId}`))}),[e]),r.useEffect(()=>{a.waitForInsights().then(e=>{e.chrome.auth.getUser().then(()=>{a.fetchRBAC(l.default.appId).then(i)})})},[]),{rbac:t,userSettings:n}}},1026:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useUserSettings=void 0;const n=i(1027),r=i(0),o=i(18);t.useUserSettings=e=>{const t=n.useUserSettingsEmailQuery(),i=t.query;return o.useSyncInterval(e,r.useCallback(()=>{i()},[i])),r.useMemo(()=>{let e=!1;const n=t.payload;return n&&(e=!!n.dailyEmail||!!n.immediateEmail),{settings:t.payload,refresh:i,isSubscribedForNotifications:e}},[t.payload,i])}},1027:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useUserSettingsEmailQuery=t.adapter=void 0;const r=n(i(162)),o=i(67),a=i(18),l=i(368),s=r.default.apis.urls;t.adapter=e=>{const t={dailyEmail:!1,immediateEmail:!1};return e.forEach(e=>e.fields.forEach(e=>{"dailyEmail"===e.name?t.dailyEmail=e.initialValue:"immediateEmail"===e.name&&(t.immediateEmail=e.initialValue)})),t},t.useUserSettingsEmailQuery=e=>a.useTransformQueryResponse(o.useQuery(l.actionBuilder("GET",s.userSettings.email).build(),e),t.adapter)},123:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyStateSection=void 0;const a=o(i(0)),l=i(23),s=i(89),c=i(39),u=i(501),d=i(52),p=c.style({paddingTop:u.calc(`${s.global_spacer_3xl.value} - var(--pf-c-page__main-section--PaddingTop)`)});t.EmptyStateSection=e=>a.createElement(l.EmptyState,Object.assign({variant:l.EmptyStateVariant.full,className:`${p} ${e.className?e.className:""} `},d.getOuiaProps("Policy/EmptyState",e)),e.icon&&a.createElement(l.EmptyStateIcon,{icon:e.icon,color:e.iconColor}),a.createElement(l.Title,{headingLevel:"h5",size:"lg"},e.title),a.createElement(l.EmptyStateBody,null,e.content),e.actionNode,e.actionLabel&&a.createElement(l.Button,{variant:"primary",onClick:e.action,isDisabled:!e.action},e.actionLabel))},125:function(e,t,i){"use strict";var n=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.makeCopyOfPolicy=t.toPolicies=t.toPolicy=t.toServerPolicy=t.fromServerActions=t.toServerAction=void 0;const o=i(68),a=r(i(343)),l=r(i(211)),s=i(353),c=i(75);t.toServerAction=e=>e.map(e=>{if(!e||!e.type)return"";const t=`${e.type}`;switch(e.type){case c.ActionType.NOTIFICATION:case c.ActionType.EMAIL:break;default:o.assertNever(e.type)}return t}).join(";"),t.fromServerActions=e=>{if(!e||""===e)return[];const t=[];for(const i of e.split(";")){const[e]=i.split(" ",2);if("webhook"!==e)switch(e){case c.ActionType.NOTIFICATION:t.push({type:c.ActionType.NOTIFICATION});break;case c.ActionType.EMAIL:t.push({type:c.ActionType.EMAIL});break;default:throw Error(`Unknown action.type=${e} found`)}}return t},t.toServerPolicy=e=>{const{mtime:i,ctime:r}=e,o=n(e,["mtime","ctime"]);return Object.assign(Object.assign({},o),{name:e.name||"",conditions:e.conditions||"",isEnabled:void 0!==e.isEnabled&&e.isEnabled,actions:e.actions?t.toServerAction(e.actions):""})},t.toPolicy=e=>Object.assign(Object.assign({},e),{id:e.id?e.id:"",description:e.description?e.description:"",isEnabled:!!e.isEnabled&&e.isEnabled,actions:t.fromServerActions(e.actions),mtime:e.mtime?a.default(e.mtime):new Date(Date.now()),ctime:e.ctime?a.default(e.ctime):new Date(Date.now()),lastTriggered:e.lastTriggered?l.default(e.lastTriggered/1e3):void 0}),t.toPolicies=e=>e.data?e.data.map(t.toPolicy):[],t.makeCopyOfPolicy=e=>{return Object.assign(Object.assign({},e),{name:`Copy of ${e.name.slice(0,s.maxPolicyNameLength-"Copy of ".length)}`,mtime:void 0,lastTriggered:void 0,ctime:void 0,id:void 0})}},144:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=t.linkTo=void 0;const s=o(i(0)),c=i(92),u=i(753),d=l(i(754)),p=i(1003);t.linkTo={listPage:()=>"/list",policyDetail:e=>`/policy/${e}`};const f=[{path:t.linkTo.listPage(),component:d.default,rootClass:"list"},{path:t.linkTo.policyDetail(":policyId"),component:p.PolicyDetail,rootClass:"policy"}],m=e=>{const{rootClass:t}=e,i=a(e,["rootClass"]),n=document.getElementById("root");if(!n)throw new Error("Root element not found");return n.removeAttribute("class"),n.classList.add(`page__${t}`,"pf-c-page__main"),n.setAttribute("role","main"),s.createElement(u.ErrorPage,null,s.createElement(c.Route,Object.assign({},i)))};t.Routes=()=>s.createElement(c.Switch,null,f.map(e=>s.createElement(m,{key:e.path,rootClass:e.rootClass,component:e.component,path:e.path})),s.createElement(c.Redirect,{to:t.linkTo.listPage()}))},158:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WizardContext=t.WizardActionType=t.AlwaysValid=void 0;const a=o(i(0)),l=o(i(145));t.AlwaysValid=l.object(),function(e){e.SAVE="CREATE",e.VALIDATE_CONDITION="VALIDATE_CONDITION",e.VALIDATE_NAME="VALIDATE_NAME",e.NONE="NONE"}(t.WizardActionType||(t.WizardActionType={})),t.WizardContext=a.createContext({isLoading:!1,isFormValid:!1,triggerAction:()=>{throw Error("Action executed without WizardContext")},verifyResponse:{isValid:!1},createResponse:{created:!1},setVerifyResponse:()=>{throw Error("setVerifyResponse executed without WizardContext")},setMaxStep:()=>{throw Error("setMaxStep executed without a WizardContext")}})},162:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withBaseUrl=void 0;const n=i(18);t.withBaseUrl=e=>`/api/policies/v1.0${e}`;const r={appId:"policies",defaultElementsPerPage:20,apis:{version:"v1.0",urls:{base:"/api/policies/v1.0",userSettings:{email:t.withBaseUrl("/user-config/email-preference")}}},pages:{emailPreferences:()=>n.localUrl("/user-preferences/email",n.getInsights().chrome.isBeta()),notifications:()=>n.localUrl("/settings/notifications",n.getInsights().chrome.isBeta()),factsDocumentation:"https://access.redhat.com/documentation/en-us/red_hat_insights/2020-04/html/monitoring_and_reacting_to_configuration_changes_using_policies/appendix-policies#facts-and-functions"}};t.default=r},178:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyFormSchema=t.PolicyFormConditions=t.PolicyFormActions=t.PolicyFormDetails=void 0;const a=i(75),l=o(i(145)),s=i(145),c=i(353),u=i(873),d=i(877),p=i(68),f=(e,t,i)=>{const n=`Only one ${t} action is allowed`;return[`one-${i}`,n,t=>{const r=t&&t.reduce((t,i,n)=>(null==i?void 0:i.type)===e?t.concat([n]):t,[]);if(!r||r.length<=1)return!0;const o=new s.ValidationError("","","actions","");return o.inner=r.map(e=>new s.ValidationError(n,i,`actions.${e}.type`)),o}]};t.PolicyFormDetails=l.object().shape({description:l.string().notRequired().trim(),isEnabled:l.boolean().notRequired(),name:l.string().required("Write a name for this Policy").max(c.maxPolicyNameLength).trim()}),t.PolicyFormActions=l.object().shape({actions:l.array(l.lazy(e=>{if((null==e?void 0:e.type)&&d.isAction(e)){const t=e.type;switch(t){case a.ActionType.EMAIL:return u.ActionEmailSchema;case a.ActionType.NOTIFICATION:return u.ActionNotificationSchema;default:p.assertNever(t)}}return u.ActionSchema})).test(...f(a.ActionType.EMAIL,"Email","email")).test(...f(a.ActionType.NOTIFICATION,"Hook","notification"))}),t.PolicyFormConditions=l.object().shape({conditions:l.string().required("Enter a condition for the policy.").trim()}),t.PolicyFormSchema=l.object().concat(t.PolicyFormDetails).concat(t.PolicyFormActions).concat(t.PolicyFormConditions)},212:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(764),t),r(i(765),t),r(i(766),t)},233:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AppContext=void 0;const a=o(i(0));t.AppContext=a.createContext({rbac:{canReadAll:!1,canWriteAll:!1},userSettings:{settings:void 0,isSubscribedForNotifications:!1,refresh:()=>{console.error("Using default refresh function")}}})},31:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=void 0;const n=i(75),r={pages:{noPermissions:{title:"Policies",emptyState:{title:"You do not have access to Policies",content:"Contact your organization administrator(s) for more information."}},error:{title:"Policies",emptyState:{title:"Unhandled error",content:"There was a problem trying to process your request.",showDetails:"Show details",actions:{goToIndex:"Go to Policy list"}}},listPage:{title:"Policies",emailOptIn:"One or more of your policies have an email alert. To receive these emails, opt in to email alerts.",emptyState:{title:"No Policies",text:["No policies have been created.","Use self defined-policies to monitor your RHEL configurations with instant or daily alerts."]}},policyDetail:{errorChangingEnabledStatus:{notFound:{title:"Policy not found",text:"The policy does not exists on the server. It may have been deleted by another user."},else:{title:"Enabled status change failed for policy",text:"There was an error setting the enabled status for this policy. Please try again."}},emptyState:{title:"Policy not found",text:"This policy with ID {0} cannot be found. It may have been deleted by another user.",backText:"Back to previous page"},triggerEmptyState:{title:"No triggers found",text:"This policy does not have any recent triggers"},errorState:{title:"Error when loading policy",text:"Error loading this policy.\nError {0}",actionText:"Try again"},triggerErrorState:{title:"Error when loading trigger history for policy",text:"Error loading trigger history for this policy.\nError {0}",actionText:"Try again"}}},components:{actions:{title:"Trigger actions",noActions:"No actions configured."},actionType:{[n.ActionType.EMAIL]:"Email",[n.ActionType.NOTIFICATION]:"Notification"},emailOptIn:{title:"Enable email alerts",switch:"Get emails when a policy runs",link:"Open email preferences"},lastTriggeredCell:{never:"Never",ago:"ago"},actionNotificationForm:{paragraph1:{head:"This action sends a request notification to process the message as configured in ",link:"notification settings.",tail:""},paragraph2:{head:"To configure it for policies, open the notification in the ",link:"notification settings",tail:' and select your preference for sending under "Policies / All".'}}},tables:{policy:{title:"Policies",columns:{name:"Name",triggerActions:"Trigger actions",lastTriggered:"Last triggered"},emptyState:{neverRun:"Never",noConditions:"No conditions configured.",noDescription:"--",notFound:{title:"No matching policies found",content:"No policies matching the selected filter and search terms."}},toolTips:{email:"Send email",hook:"Send to webhook"}},trigger:{title:"Trigger",columns:{date:"Date",system:"System"},emptyState:{notFound:{title:"No matching triggers found",content:"No triggers matching the search terms."}}}},wizards:{policy:{titleNew:"Create a policy",titleEdit:"Edit a policy",description:"Policies are processed on reception of system profile messages. If condition(s) are met, defined action(s) are triggered.",actions:{title:"Trigger actions",emailOptIn:"To receive emails for custom policies, opt in to email alerts from your user preferences."},conditions:{title:"Conditions",valid:"Valid condition",invalid:"Invalid condition",validating:"Validating…",hint:'e.g. facts.arch = "x86_64"',summaryDesc:"Define conditions for your policy using any system facts."},hints:{hintTitle:"What conditions can I define?",hintParagraph1:"You can write a condition for any combination of system facts that apply to your Insights inventory systems.",hintLinkTitle:"Review available system facts",hintSyntaxExamplesSection:"Syntax examples",hintQuestion1:"Is wireshark RPM installed?",hintQuestion1Ans:"facts.installed_packages contains ['wireshark']",hintQuestion2:"Is the release older than RHEL 8.1?",hintQuestion2Ans:"facts.os_release < 8.1",hintQuestion3:"Which of my public cloud instances are missing a tag Owner value set?",hintQuestion3Ans:"facts.cloud_provider in ['alibaba',aws','azure','google'] and not tags.Owner",hintQuestion4:"Is time synchronization configured for RHEL7 and RHEL8?",hintQuestion4Ans:"(facts.os_release >=7 and facts.os_release <8 and not facts.enabled_services contains 'ntpd') or (facts.os_release >=8 and not facts.enabled_services contains 'chronyd')"},createPolicy:{title:"Create Policy"},details:{title:"Policy Details"},review:{title:"Review and enable",enableThisPolicy:"Enable this policy?",policyIsEnabled:"Policy is enabled",policyIsDisabled:"Policy is disabled",policy:{details:"Policy details",name:"Policy name",description:"Description"}}}}};t.Messages=r},342:function(e,t,i){(t=e.exports=i(10)(!1)).i(i(751),""),t.i(i(752),""),t.push([e.i,":root{--ins-color--orange: #ec7a08}button:focus{outline:none}.pf-c-wizard__main-body{max-height:100%}\n",""])},344:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionIcon=t.ActionWebhookIcon=t.ActionEmailIcon=void 0;const l=o(i(0)),s=i(56),c=i(75),u=i(68),d=i(212);t.ActionEmailIcon=s.EnvelopeIcon,t.ActionWebhookIcon=d.WebhookIcon,t.ActionIcon=e=>{const{actionType:i}=e,n=a(e,["actionType"]);switch(i){case c.ActionType.NOTIFICATION:return l.createElement(t.ActionWebhookIcon,Object.assign({},n));case c.ActionType.EMAIL:return l.createElement(t.ActionEmailIcon,Object.assign({},n));case void 0:break;default:u.assertNever(i)}return null}},345:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyToolbar=t.SelectionCommand=void 0;const a=o(i(0)),l=i(23),s=i(95),c=i(18),u=i(346),d=i(212),p=i(39),f=i(52);var m;!function(e){e[e.NONE=0]="NONE",e[e.PAGE=1]="PAGE",e[e.ALL=2]="ALL"}(m=t.SelectionCommand||(t.SelectionCommand={}));const y=p.style({marginLeft:4}),h={[u.PolicyFilterColumn.NAME]:{label:"Name",placeholder:"Filter by name"},[u.PolicyFilterColumn.IS_ACTIVE]:{label:"Enabled",placeholder:"Filter by Enable status",options:{default:"all",exclude:["all"],exclusive:!0,items:[{value:"all",label:a.createElement(a.Fragment,null,"All")},{value:"Enabled",label:a.createElement(a.Fragment,null,a.createElement(d.EnabledPolicyIcon,null)," ",a.createElement("span",{className:y},"Enabled"))},{value:"Disabled",label:a.createElement(a.Fragment,null,a.createElement(d.DisabledPolicyIcon,null)," ",a.createElement("span",{className:y},"Disabled"))}]}}};t.PolicyToolbar=e=>{const{pageCount:t,count:i,page:n,perPage:r,showPerPageOptions:o,onPaginationChanged:d,onPaginationSizeChanged:p,onCreatePolicy:y,onDeletePolicy:g,hideActions:_,onSelectionChanged:v,selectedCount:b,hideBulkSelect:E,onEnablePolicy:P,onDisablePolicy:O,onExport:C}=e,T=c.usePrimaryToolbarFilterConfig(u.PolicyFilterColumn,e.filters,e.setFilters,e.clearFilters,h),S=a.useMemo(()=>{if(E)return;const e=()=>v&&v(m.NONE),n=()=>v&&v(m.ALL);return{count:b||0,items:[{title:"Select none (0)",onClick:e},{title:`Select page (${t||0})`,onClick:()=>v&&v(m.PAGE)},{title:`Select all (${i||0})`,onClick:n}],checked:b===i,onSelect:t=>t?n():e()}},[b,t,v,E,i]),j=a.useMemo(()=>({itemCount:i||0,page:n,perPage:r,perPageOptions:o?void 0:[],onSetPage:d,onFirstClick:d,onPreviousClick:d,onNextClick:d,onLastClick:d,onPageInput:d,onPerPageSelect:p,isCompact:!0,variant:l.PaginationVariant.top}),[o,i,n,r,d,p]),x=a.useMemo(()=>({itemCount:i||0,page:n,perPage:r,perPageOptions:o?void 0:[],onSetPage:d,onFirstClick:d,onPreviousClick:d,onNextClick:d,onLastClick:d,onPageInput:d,onPerPageSelect:p,isCompact:!1,variant:l.PaginationVariant.bottom}),[o,i,n,r,d,p]),M=a.useMemo(()=>{if(_)return;return{actions:[{key:"create-policy",label:"Create policy",onClick:y,props:{isDisabled:!y}},{key:"delete-policy",label:"Delete",onClick:g,props:{isDisabled:!(b&&g)}},{key:"enable-policy",label:"Enable",onClick:P,props:{isDisabled:!(b&&P)}},{key:"disable-policy",label:"Disable",onClick:O,props:{isDisabled:!(b&&O)}}],kebabToggleProps:{isDisabled:!1}}},[y,g,b,_,O,P]),A=a.useMemo(()=>{if(C)return{extraItems:[],onSelect:C}},[C]);return a.createElement("div",Object.assign({},f.getOuiaProps("Policy/DualToolbar",e)),a.createElement(s.PrimaryToolbar,{bulkSelect:S,filterConfig:T.filterConfig,pagination:j,actionsConfig:M,activeFiltersConfig:T.activeFiltersConfig,exportConfig:A}),e.children,e.showBottomPagination&&a.createElement(s.PrimaryToolbar,{pagination:x}))}},346:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyFilterColumn=void 0,function(e){e.NAME="name",e.IS_ACTIVE="is_enabled"}(t.PolicyFilterColumn||(t.PolicyFilterColumn={}))},353:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maxPolicyNameLength=void 0,t.maxPolicyNameLength=150},369:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useHasPoliciesQuery=t.hasPoliciesQueryActionCreator=t.useGetPoliciesQuery=t.actionCreator=void 0;const n=i(18),r=i(125),o=i(67),a=i(100),l=i(189);t.actionCreator=e=>{var t;return a.Operations.GetPolicies.actionCreator(null!==(t=null==e?void 0:e.toQuery())&&void 0!==t?t:{})};const s=l.validationResponseTransformer(e=>{var t;return"PagedResponseOfPolicy"===e.type?l.validatedResponse(e.type,e.status,{data:r.toPolicies(e.value),count:(null===(t=e.value.meta)||void 0===t?void 0:t.count)||0},e.errors):e});t.useGetPoliciesQuery=(e,i)=>n.useTransformQueryResponse(o.useQuery(t.actionCreator(e),i),s);const c=l.validationResponseTransformer(e=>{var t;let i=!0;return"PagedResponseOfPolicy"===e.type&&(i=!!(null===(t=e.value.data)||void 0===t?void 0:t.length)),l.validatedResponse("HasPolicies",e.status,i,e.errors)});t.hasPoliciesQueryActionCreator=()=>a.Operations.GetPolicies.actionCreator(n.Page.of(1,1).toQuery()),t.useHasPoliciesQuery=()=>n.useTransformQueryResponse(o.useQuery(t.hasPoliciesQueryActionCreator(),!1),c)},370:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerFilterColumn=void 0,function(e){e.NAME="name"}(t.TriggerFilterColumn||(t.TriggerFilterColumn={}))},419:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0,function(e){e.EMAIL="email",e.NOTIFICATION="notification"}(t.ActionType||(t.ActionType={}))},421:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyTable=void 0;const a=o(i(0)),l=i(371),s=i(23),c=i(95),u=i(18),d=i(422),p=i(31),f=i(768),m=i(769),y=i(123),h=i(39),g=i(135),_=i(144),v=i(52),b=i(68),E=h.style({backgroundColor:"white"}),P=["name","actions","is_enabled"],O=(e,t,i,n)=>t.indexOf(i[e])+n;t.PolicyTable=e=>{const{onSort:t,error:i,policies:n,onCollapse:r,onSelect:o}=e,h=e.columnsToShow||P,C=h.includes("radioSelect");if(C&&!o)throw Error("RadioSelect requires an onSelect");const T=a.useMemo(()=>{const e=t?[l.sortable]:[];return{radioSelect:{title:"",transforms:[]},name:{title:p.Messages.tables.policy.columns.name,transforms:e,cellFormatters:[l.expandable],column:"name"},actions:{title:p.Messages.tables.policy.columns.triggerActions,transforms:[]},is_enabled:{title:p.Messages.tables.policy.columns.lastTriggered,transforms:[],column:"is_enabled"}}},[t]),S=a.useMemo(()=>[r,h.includes("radioSelect")?void 0:o].filter(e=>e).length,[r,o,h]),j=a.useMemo(()=>h.map(e=>T[e]),[T,h]),x=a.useCallback((e,i,n)=>{if(t){const e=((e,t,i)=>t[e-i].column)(i,j,S);e&&t(i,e,n===l.SortByDirection.asc?u.Direction.ASCENDING:u.Direction.DESCENDING)}},[t,j,S]),M=a.useCallback((e,t,i,o)=>{const a=n,l=null==a?void 0:a.findIndex(e=>e.id===o.id);if(r&&a&&void 0!==l&&-1!==l){const e=a[l];r(e,l,i)}},[n,r]),A=a.useCallback((e,t,i,r)=>{const a=n,l=null==a?void 0:a.findIndex(e=>e.id===r.id);if(o&&a&&void 0!==l&&-1!==l){const e=a[l];o(e,l,t)}},[n,o]),I=a.useMemo(()=>{if(e.sortBy)return{index:O(e.sortBy.column,j,T,S),direction:e.sortBy.direction===u.Direction.ASCENDING?"asc":"desc"}},[e.sortBy,j,T,S]),w=a.useMemo(()=>e.error||e.loading?void 0:e.actionResolver||void 0,[e.error,e.loading,e.actionResolver]),N=a.useCallback(e=>{if(void 0===e.parent&&w&&e&&n){const t=n.find(t=>t.id===e.id);if(t)return w(t)}return[]},[w,n]),R=a.useMemo(()=>i?[]:((e,t,i,n)=>e?e.reduce((r,o,l)=>(r.push({id:o.id,key:o.id,isOpen:o.isOpen,selected:o.isSelected,cells:t.map(t=>{switch(t){case"actions":return a.createElement(a.Fragment,null,a.createElement(f.ActionsCell,{ouiaId:o.id,actions:o.actions}));case"is_enabled":return a.createElement(a.Fragment,null,a.createElement(m.LastTriggeredCell,{ouiaId:o.id,isEnabled:o.isEnabled,lastTriggered:o.lastTriggered}));case"name":return a.createElement(a.Fragment,null,i?a.createElement(g.Link,{to:_.linkTo.policyDetail(o.id)},o.name):o.name);case"radioSelect":return a.createElement(a.Fragment,null,a.createElement(s.Radio,{id:`${o.id}-table-radio-id`,"aria-label":`Radio select for policy ${o.name}`,name:"policy-table-radio-select",isChecked:o.isSelected,onChange:n?()=>{const t=e.findIndex(e=>e.isSelected);-1!==t&&n(e[t],t,!1),n(o,l,!0)}:void 0}))}b.assertNever(t)})}),r.push({parent:2*l,fullWidth:!0,showSelect:!1,cells:[{title:a.createElement(a.Fragment,null,a.createElement(d.ExpandedContent,{ouiaId:o.id,key:o.id+"-content",description:o.description?o.description:p.Messages.tables.policy.emptyState.noDescription,conditions:o.conditions?o.conditions:p.Messages.tables.policy.emptyState.noConditions,actions:o.actions,created:o.ctime,updated:o.mtime}))}]}),r),[]):[])(n,h,e.linkToDetailPolicy,o),[i,n,h,o,e.linkToDetailPolicy]);return e.loading?a.createElement(c.SkeletonTable,{rowSize:e.loadingRowCount||10,columns:j,paddingColumnSize:S,sortBy:I}):i?a.createElement(y.EmptyStateSection,Object.assign({},i,{className:E})):a.createElement("div",Object.assign({},v.getOuiaProps("Policy/Table",e)),a.createElement(l.Table,{"aria-label":p.Messages.tables.policy.title,cells:j,rows:R,actionResolver:N,onSort:t?x:void 0,onCollapse:r?M:void 0,onSelect:e.error||!o||C?void 0:A,sortBy:I,canSelectAll:!1},a.createElement(l.TableHeader,null),a.createElement(l.TableBody,null)))}},422:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandedContent=void 0;const a=o(i(0)),l=i(39),s=i(23),c=i(89),u=i(755),d=i(756),p=i(423),f=i(18),m=i(424),y=i(426),h=i(52),g=l.style({margin:12}),_=l.style({maxWidth:800,marginBottom:12}),v=l.style({marginBottom:12}),b=l.style(Object.assign(Object.assign({backgroundColor:c.global_BackgroundColor_light_300.var},m.padding(18,14)),{margin:5}));t.ExpandedContent=e=>a.createElement(s.Stack,Object.assign({},h.getOuiaProps("Policy/Table/Expanded",e),{className:g}),e.description&&a.createElement(s.StackItem,{className:_},a.createElement(u.Description,{ouiaId:f.ouiaIdConcat(e.ouiaId,"description"),description:e.description})),a.createElement(s.StackItem,{className:v},a.createElement(d.Dates,{ouiaId:f.ouiaIdConcat(e.ouiaId,"dates"),updated:e.updated,created:e.created})),a.createElement(s.StackItem,null,a.createElement(s.Grid,null,a.createElement(s.GridItem,{className:b,span:6},a.createElement(p.Conditions,{ouiaId:f.ouiaIdConcat(e.ouiaId,"conditions"),conditions:e.conditions})),a.createElement(s.GridItem,{className:b,span:6},a.createElement(y.Actions,{ouiaId:f.ouiaIdConcat(e.ouiaId,"actions"),actions:e.actions})))))},423:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Conditions=void 0;const a=o(i(0)),l=i(23),s=i(39),c=i(31),u=i(52),d=s.style({marginBottom:5});t.Conditions=e=>a.createElement("div",Object.assign({},u.getOuiaProps("Policy/Table/Expanded/Conditions",e)),a.createElement(l.Title,{headingLevel:"h2",className:d,size:"md"},"Conditions"),a.createElement(l.Text,null,e.conditions||c.Messages.tables.policy.emptyState.noConditions))},426:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=void 0;const a=o(i(0)),l=i(23),s=i(39),c=i(75),u=i(31),d=i(18),p=i(344),f=i(52),m=i(68),y=s.style({marginBottom:5}),h=s.style({marginBottom:5,marginLeft:10,display:"inline"}),g=s.style({marginBottom:10,marginTop:10,marginLeft:10}),_=s.style({marginLeft:25,marginBottom:8,marginTop:8}),v=e=>a.createElement(l.StackItem,{className:g},a.createElement(e.icon,null),a.createElement(l.Title,{headingLevel:"h2",className:h,size:"md"},e.title),e.children&&a.createElement("div",{className:_},e.children));t.Actions=e=>a.createElement(a.Fragment,null,a.createElement(l.Stack,Object.assign({},f.getOuiaProps("Policy/Table/Expanded/Actions",e)),a.createElement(l.StackItem,null,a.createElement(l.Title,{headingLevel:"h2",className:y,size:"md"},u.Messages.components.actions.title)),0===e.actions.length?a.createElement(l.Text,null," ",u.Messages.components.actions.noActions," "):(e=>{const t=[];for(const i in e){const n=e[i];switch(n.type){case c.ActionType.EMAIL:t.push(a.createElement(a.Fragment,{key:i},a.createElement(v,{title:"Send Email",icon:p.ActionEmailIcon})));break;case c.ActionType.NOTIFICATION:t.push(a.createElement(a.Fragment,{key:i},a.createElement(v,{title:"Send to notification",icon:p.ActionWebhookIcon})));break;default:m.assertNever(n)}}return d.join(t,l.Divider)})(e.actions)))},427:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CreatePolicyWizard=t.formatConditionError=void 0;const a=o(i(0)),l=i(770),s=i(986),c=i(987),u=o(i(988)),d=i(18),p=i(989),f=i(990);t.formatConditionError=e=>e=(e=e.replace("line 1 ","")).replace(/position (\d+)$/,(e,t)=>`position ${+t+1}`),t.CreatePolicyWizard=e=>{const t=c.useSavePolicyMutation(),i=s.useVerifyPolicyMutation(),n=p.useValidatePolicyNameParametrizedQuery(),r=f.useFacts(),o=a.useCallback(e=>{return(0,n.query)(e).then(e=>e.status===u.OK?{created:!1}:{created:!1,error:`Invalid name (Code: ${e.status})`})},[n.query]),m=t.loading||i.loading||n.loading;return a.createElement(a.Fragment,null,e.isOpen&&a.createElement(l.PolicyWizard,{initialValue:e.initialValue||{},onClose:()=>{e.close(void 0)},onSave:i=>t.mutate(i).then(t=>{var n,r,o;if("Policy"===(null===(n=t.payload)||void 0===n?void 0:n.type))return void 0===i.id?d.addSuccessNotification("Created",`Policy "${i.name}" created`):d.addSuccessNotification("Saved",`Policy "${i.name}" has been updated`),e.close&&e.close(t.payload.value),{created:!0};if(t.status===u.NOT_FOUND&&void 0!==i.id)return{created:!1,error:"This policy cannot be found. It may have been deleted by another user. Your changes cannot be saved."};let a=`Unknown Error when trying to ${void 0===i.id?"create":"update"} the policy: (Code ${t.status})`;return"Msg"===(null===(r=t.payload)||void 0===r?void 0:r.type)&&(a=null!==(o=t.payload.value.msg)&&void 0!==o?o:a),{created:!1,error:a}}),onVerify:e=>i.mutate(e).then(t=>{var i;return t.status===u.OK?{isValid:!0,policy:e}:"Msg"===(null===(i=t.payload)||void 0===i?void 0:i.type)&&t.payload.value.msg?{isValid:!1,error:t.payload.value.msg,policy:e}:{isValid:!1,error:`Unknown Error when trying to validate: (Code ${t.status})`,policy:e}}),onValidateName:o,showCreateStep:!!e.policiesExist&&e.showCreateStep,isLoading:m,facts:r,isEditing:e.isEditing}))}},455:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CreatePolicyStepContext=void 0;const a=o(i(0));t.CreatePolicyStepContext=a.createContext(void 0)},484:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyContext=t.Negative_exprContext=t.ValueContext=t.Numerical_valueContext=t.ArrayContext=t.Array_operatorContext=t.String_compare_operatorContext=t.Numeric_compare_operatorContext=t.Boolean_operatorContext=t.Logical_operatorContext=t.ExprContext=t.ObjectContext=t.ExpressionContext=t.ExpressionParser=void 0;const a=i(99),l=i(231),s=i(222),c=i(230),u=i(183),d=i(88),p=i(184),f=i(127),m=i(37),y=i(132),h=o(i(98));class g extends u.Parser{constructor(e){super(e),this._interp=new p.ParserATNSimulator(g._ATN,this)}get vocabulary(){return g.VOCABULARY}get grammarFileName(){return"Expression.g4"}get ruleNames(){return g.ruleNames}get serializedATN(){return g._serializedATN}expression(){let e=new _(this._ctx,this.state);this.enterRule(e,0,g.RULE_expression);try{this.enterOuterAlt(e,1),this.state=26,this.object(0),this.state=27,this.match(g.EOF)}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}object(e){void 0===e&&(e=0);let t=this._ctx,i=this.state,n=new v(this._ctx,i),r=n;this.enterRecursionRule(n,2,g.RULE_object,e);try{let e;switch(this.enterOuterAlt(n,1),this.state=38,this._errHandler.sync(this),this._input.LA(1)){case g.NOT:case g.NEG:this.state=30,this.negative_expr(),this.state=31,this.object(4);break;case g.SIMPLETEXT:case g.STRING:this.state=33,this.expr();break;case g.T__0:this.state=34,this.match(g.T__0),this.state=35,this.object(0),this.state=36,this.match(g.T__1);break;default:throw new c.NoViableAltException(this)}for(this._ctx._stop=this._input.tryLT(-1),this.state=46,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,1,this._ctx);2!==e&&e!==a.ATN.INVALID_ALT_NUMBER;){if(1===e){if(null!=this._parseListeners&&this.triggerExitRuleEvent(),r=n,n=new v(t,i),this.pushNewRecursionContext(n,2,g.RULE_object),this.state=40,!this.precpred(this._ctx,1))throw new s.FailedPredicateException(this,"this.precpred(this._ctx, 1)");this.state=41,this.logical_operator(),this.state=42,this.object(2)}this.state=48,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,1,this._ctx)}}catch(e){if(!(e instanceof f.RecognitionException))throw e;n.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.unrollRecursionContexts(t)}return n}expr(){let e=new b(this._ctx,this.state);this.enterRule(e,4,g.RULE_expr);try{switch(this.state=70,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,2,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=49,this.key();break;case 2:this.enterOuterAlt(e,2),this.state=50,this.key(),this.state=51,this.boolean_operator(),this.state=52,this.value();break;case 3:this.enterOuterAlt(e,3),this.state=54,this.key(),this.state=55,this.numeric_compare_operator(),this.state=56,this.numerical_value();break;case 4:this.enterOuterAlt(e,4),this.state=58,this.key(),this.state=59,this.string_compare_operator(),this.state=60,this.array();break;case 5:this.enterOuterAlt(e,5),this.state=62,this.key(),this.state=63,this.string_compare_operator(),this.state=64,this.value();break;case 6:this.enterOuterAlt(e,6),this.state=66,this.key(),this.state=67,this.array_operator(),this.state=68,this.array()}}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}logical_operator(){let e,t=new E(this._ctx,this.state);this.enterRule(t,6,g.RULE_logical_operator);try{this.enterOuterAlt(t,1),this.state=72,(e=this._input.LA(1))!==g.OR&&e!==g.AND?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}boolean_operator(){let e,t=new P(this._ctx,this.state);this.enterRule(t,8,g.RULE_boolean_operator);try{this.enterOuterAlt(t,1),this.state=74,(e=this._input.LA(1))!==g.EQUAL&&e!==g.NOTEQUAL?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}numeric_compare_operator(){let e,t=new O(this._ctx,this.state);this.enterRule(t,10,g.RULE_numeric_compare_operator);try{this.enterOuterAlt(t,1),this.state=76,0!=(-32&(e=this._input.LA(1)))||0==(1<<e&(1<<g.GT|1<<g.GTE|1<<g.LT|1<<g.LTE))?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}string_compare_operator(){let e,t=new C(this._ctx,this.state);this.enterRule(t,12,g.RULE_string_compare_operator);try{this.enterOuterAlt(t,1),this.state=78,(e=this._input.LA(1))!==g.CONTAINS&&e!==g.MATCHES?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}array_operator(){let e,t=new T(this._ctx,this.state);this.enterRule(t,14,g.RULE_array_operator);try{this.enterOuterAlt(t,1),this.state=80,(e=this._input.LA(1))!==g.CONTAINS&&e!==g.IN?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}array(){let e,t=new S(this._ctx,this.state);this.enterRule(t,16,g.RULE_array);try{switch(this.state=95,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,4,this._ctx)){case 1:for(this.enterOuterAlt(t,1),this.state=82,this.match(g.T__2),this.state=83,this.value(),this.state=88,this._errHandler.sync(this),e=this._input.LA(1);e===g.T__3;)this.state=84,this.match(g.T__3),this.state=85,this.value(),this.state=90,this._errHandler.sync(this),e=this._input.LA(1);this.state=91,this.match(g.T__4);break;case 2:this.enterOuterAlt(t,2),this.state=93,this.match(g.T__2),this.state=94,this.match(g.T__4)}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}numerical_value(){let e=new j(this._ctx,this.state);this.enterRule(e,18,g.RULE_numerical_value);try{this.enterOuterAlt(e,1),this.state=97,this.match(g.NUMBER)}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}value(){let e,t=new x(this._ctx,this.state);this.enterRule(t,20,g.RULE_value);try{this.enterOuterAlt(t,1),this.state=99,(e=this._input.LA(1))!==g.NUMBER&&e!==g.STRING?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}negative_expr(){let e,t=new M(this._ctx,this.state);this.enterRule(t,22,g.RULE_negative_expr);try{this.enterOuterAlt(t,1),this.state=101,(e=this._input.LA(1))!==g.NOT&&e!==g.NEG?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}key(){let e,t=new A(this._ctx,this.state);this.enterRule(t,24,g.RULE_key);try{this.enterOuterAlt(t,1),this.state=103,(e=this._input.LA(1))!==g.SIMPLETEXT&&e!==g.STRING?this._errHandler.recoverInline(this):(this._input.LA(1)===m.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}sempred(e,t,i){switch(t){case 1:return this.object_sempred(e,i)}return!0}object_sempred(e,t){switch(t){case 0:return this.precpred(this._ctx,1)}return!0}static get _ATN(){return g.__ATN||(g.__ATN=(new l.ATNDeserializer).deserialize(h.toCharArray(g._serializedATN))),g.__ATN}}t.ExpressionParser=g,g.T__0=1,g.T__1=2,g.T__2=3,g.T__3=4,g.T__4=5,g.OR=6,g.AND=7,g.NOT=8,g.EQUAL=9,g.NOTEQUAL=10,g.CONTAINS=11,g.MATCHES=12,g.NEG=13,g.GT=14,g.GTE=15,g.LT=16,g.LTE=17,g.IN=18,g.NUMBER=19,g.FLOAT=20,g.INTEGER=21,g.SIMPLETEXT=22,g.STRING=23,g.WS=24,g.RULE_expression=0,g.RULE_object=1,g.RULE_expr=2,g.RULE_logical_operator=3,g.RULE_boolean_operator=4,g.RULE_numeric_compare_operator=5,g.RULE_string_compare_operator=6,g.RULE_array_operator=7,g.RULE_array=8,g.RULE_numerical_value=9,g.RULE_value=10,g.RULE_negative_expr=11,g.RULE_key=12,g.ruleNames=["expression","object","expr","logical_operator","boolean_operator","numeric_compare_operator","string_compare_operator","array_operator","array","numerical_value","value","negative_expr","key"],g._LITERAL_NAMES=[void 0,"'('","')'","'['","','","']'",void 0,void 0,void 0,"'='","'!='",void 0,void 0,void 0,"'>'","'>='","'<'","'<='"],g._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,"OR","AND","NOT","EQUAL","NOTEQUAL","CONTAINS","MATCHES","NEG","GT","GTE","LT","LTE","IN","NUMBER","FLOAT","INTEGER","SIMPLETEXT","STRING","WS"],g.VOCABULARY=new y.VocabularyImpl(g._LITERAL_NAMES,g._SYMBOLIC_NAMES,[]),g._serializedATN="줝쪺֍꾺体؇쉁l\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t)\n/\n\f2\vI\n\b\b\t\t\n\n\n\n\nY\n\n\f\n\n\\\v\n\n\n\n\n\nb\n\n\v\v\f\f\r\r\b\n\f\n\b\t\v\f\r\r\r\n\nh(H\bJ\nL\fNPRacegi \b !\r!\"\")#)$%%&&'')((#($)0*+\f+,\b,--/.*/20.011203I4556\n67\f7I899:\f:;\v;I<==>\b>?\n?I@AAB\bBC\fCIDEEF\tFG\nGIH3H4H8H<H@HDIJK\tK\tLM\tM\vNO\tO\rPQ\tQRS\tSTUUZ\fVWWY\fXVY\\ZXZ[[]\\Z]^^b_``baTa_bcddef\tfgh\t\bhij\t\tj(0HZa";class _ extends d.ParserRuleContext{object(){return this.getRuleContext(0,v)}EOF(){return this.getToken(g.EOF,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_expression}enterRule(e){e.enterExpression&&e.enterExpression(this)}exitRule(e){e.exitExpression&&e.exitExpression(this)}accept(e){return e.visitExpression?e.visitExpression(this):e.visitChildren(this)}}t.ExpressionContext=_;class v extends d.ParserRuleContext{negative_expr(){return this.tryGetRuleContext(0,M)}object(e){return void 0===e?this.getRuleContexts(v):this.getRuleContext(e,v)}expr(){return this.tryGetRuleContext(0,b)}logical_operator(){return this.tryGetRuleContext(0,E)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_object}enterRule(e){e.enterObject&&e.enterObject(this)}exitRule(e){e.exitObject&&e.exitObject(this)}accept(e){return e.visitObject?e.visitObject(this):e.visitChildren(this)}}t.ObjectContext=v;class b extends d.ParserRuleContext{key(){return this.getRuleContext(0,A)}boolean_operator(){return this.tryGetRuleContext(0,P)}value(){return this.tryGetRuleContext(0,x)}numeric_compare_operator(){return this.tryGetRuleContext(0,O)}numerical_value(){return this.tryGetRuleContext(0,j)}string_compare_operator(){return this.tryGetRuleContext(0,C)}array(){return this.tryGetRuleContext(0,S)}array_operator(){return this.tryGetRuleContext(0,T)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_expr}enterRule(e){e.enterExpr&&e.enterExpr(this)}exitRule(e){e.exitExpr&&e.exitExpr(this)}accept(e){return e.visitExpr?e.visitExpr(this):e.visitChildren(this)}}t.ExprContext=b;class E extends d.ParserRuleContext{AND(){return this.tryGetToken(g.AND,0)}OR(){return this.tryGetToken(g.OR,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_logical_operator}enterRule(e){e.enterLogical_operator&&e.enterLogical_operator(this)}exitRule(e){e.exitLogical_operator&&e.exitLogical_operator(this)}accept(e){return e.visitLogical_operator?e.visitLogical_operator(this):e.visitChildren(this)}}t.Logical_operatorContext=E;class P extends d.ParserRuleContext{EQUAL(){return this.tryGetToken(g.EQUAL,0)}NOTEQUAL(){return this.tryGetToken(g.NOTEQUAL,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_boolean_operator}enterRule(e){e.enterBoolean_operator&&e.enterBoolean_operator(this)}exitRule(e){e.exitBoolean_operator&&e.exitBoolean_operator(this)}accept(e){return e.visitBoolean_operator?e.visitBoolean_operator(this):e.visitChildren(this)}}t.Boolean_operatorContext=P;class O extends d.ParserRuleContext{GT(){return this.tryGetToken(g.GT,0)}GTE(){return this.tryGetToken(g.GTE,0)}LT(){return this.tryGetToken(g.LT,0)}LTE(){return this.tryGetToken(g.LTE,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_numeric_compare_operator}enterRule(e){e.enterNumeric_compare_operator&&e.enterNumeric_compare_operator(this)}exitRule(e){e.exitNumeric_compare_operator&&e.exitNumeric_compare_operator(this)}accept(e){return e.visitNumeric_compare_operator?e.visitNumeric_compare_operator(this):e.visitChildren(this)}}t.Numeric_compare_operatorContext=O;class C extends d.ParserRuleContext{CONTAINS(){return this.tryGetToken(g.CONTAINS,0)}MATCHES(){return this.tryGetToken(g.MATCHES,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_string_compare_operator}enterRule(e){e.enterString_compare_operator&&e.enterString_compare_operator(this)}exitRule(e){e.exitString_compare_operator&&e.exitString_compare_operator(this)}accept(e){return e.visitString_compare_operator?e.visitString_compare_operator(this):e.visitChildren(this)}}t.String_compare_operatorContext=C;class T extends d.ParserRuleContext{IN(){return this.tryGetToken(g.IN,0)}CONTAINS(){return this.tryGetToken(g.CONTAINS,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_array_operator}enterRule(e){e.enterArray_operator&&e.enterArray_operator(this)}exitRule(e){e.exitArray_operator&&e.exitArray_operator(this)}accept(e){return e.visitArray_operator?e.visitArray_operator(this):e.visitChildren(this)}}t.Array_operatorContext=T;class S extends d.ParserRuleContext{value(e){return void 0===e?this.getRuleContexts(x):this.getRuleContext(e,x)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_array}enterRule(e){e.enterArray&&e.enterArray(this)}exitRule(e){e.exitArray&&e.exitArray(this)}accept(e){return e.visitArray?e.visitArray(this):e.visitChildren(this)}}t.ArrayContext=S;class j extends d.ParserRuleContext{NUMBER(){return this.getToken(g.NUMBER,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_numerical_value}enterRule(e){e.enterNumerical_value&&e.enterNumerical_value(this)}exitRule(e){e.exitNumerical_value&&e.exitNumerical_value(this)}accept(e){return e.visitNumerical_value?e.visitNumerical_value(this):e.visitChildren(this)}}t.Numerical_valueContext=j;class x extends d.ParserRuleContext{NUMBER(){return this.tryGetToken(g.NUMBER,0)}STRING(){return this.tryGetToken(g.STRING,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_value}enterRule(e){e.enterValue&&e.enterValue(this)}exitRule(e){e.exitValue&&e.exitValue(this)}accept(e){return e.visitValue?e.visitValue(this):e.visitChildren(this)}}t.ValueContext=x;class M extends d.ParserRuleContext{NEG(){return this.tryGetToken(g.NEG,0)}NOT(){return this.tryGetToken(g.NOT,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_negative_expr}enterRule(e){e.enterNegative_expr&&e.enterNegative_expr(this)}exitRule(e){e.exitNegative_expr&&e.exitNegative_expr(this)}accept(e){return e.visitNegative_expr?e.visitNegative_expr(this):e.visitChildren(this)}}t.Negative_exprContext=M;class A extends d.ParserRuleContext{SIMPLETEXT(){return this.tryGetToken(g.SIMPLETEXT,0)}STRING(){return this.tryGetToken(g.STRING,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_key}enterRule(e){e.enterKey&&e.enterKey(this)}exitRule(e){e.exitKey&&e.exitKey(this)}accept(e){return e.visitKey?e.visitKey(this):e.visitChildren(this)}}t.KeyContext=A},485:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(960),t),r(i(961),t),r(i(962),t)},492:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function l(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DeletePolicy=void 0;const l=o(i(0)),s=i(23),c=i(23),u=i(18),d=i(994);t.DeletePolicy=e=>{const{getPolicies:t,onClose:i,onDeleted:n,policy:r}=e,{mutate:o,loading:p}=d.useMassDeletePoliciesMutation(),f=p||e.loading,m=l.useCallback(()=>{i(!1)},[i]),y=l.useCallback(e=>{o(e).then(t=>{var r;let o=e.length;if(200===(null===(r=t.payload)||void 0===r?void 0:r.status)){const i=t.payload.value;o=e.filter(e=>!i.includes(e)).length,t.payload.value.forEach(e=>n&&n(e))}o>0&&(1===o?u.addDangerNotification("Error deleting policy","There was an error when trying to delete a policy."):u.addDangerNotification("Error deleting policies",`There was an error when trying to delete ${o} policies.`)),o!==e.length&&i(!0)})},[o,i,n]),h=l.useCallback(()=>a(void 0,void 0,void 0,(function*(){if(r)y([r.id]);else{if(!t)throw new Error("Expected policy or getPolicies to bet set");try{const e=yield t();y(e)}catch(e){u.addDangerNotification("Error while deleting","An error occurred while trying to delete the selection, please try again."),console.error("Error while fetching selection",e)}}})),[t,y,r]),g=l.useMemo(()=>[l.createElement(s.Button,{key:"confirm",variant:s.ButtonVariant.danger,onClick:h,isDisabled:f},f?l.createElement(c.Spinner,{size:"md"}):"Delete"),l.createElement(s.Button,{key:"cancel",variant:s.ButtonVariant.link,onClick:m,isDisabled:f},"Cancel")],[f,m,h]);let _;return _=e.policy?l.createElement(l.Fragment,null,"Do you want to delete the policy ",l.createElement("b",null,e.policy.name),"?"):1===e.count?l.createElement(l.Fragment,null,"Do you want to delete the selected policy?"):l.createElement(l.Fragment,null,"Do you want to delete the ",l.createElement("b",null,e.count)," selected policies?"),l.createElement(s.Modal,{title:`Delete ${1===e.count?"policy":"policies"}`,isOpen:!0,onClose:m,actions:g,variant:"small"},_)}},493:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.usePolicyToDelete=void 0;const a=o(i(0));t.usePolicyToDelete=()=>{const[e,t]=a.useState(),[i,n]=a.useState(0),r=a.useCallback(()=>{t(void 0),n(0)},[n,t]);return{open:a.useCallback(e=>{"number"==typeof e?(t(void 0),n(e)):(t(e),n(1))},[]),close:r,count:i,policy:e,isOpen:i>0}}},494:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMassChangePolicyEnabledMutation=t.actionCreator=void 0;const n=i(67),r=i(100);t.actionCreator=e=>r.Operations.PostPoliciesIdsEnabled.actionCreator({body:e.policyIds,enabled:e.shouldBeEnabled}),t.useMassChangePolicyEnabledMutation=()=>n.useMutation(t.actionCreator)},497:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useTextFormat=void 0;const a=o(i(0)),l=i(496),s=i(18);t.useTextFormat=(e,t,i="br")=>a.useMemo(()=>{const n=l.format(e,...t);return i?s.join(n.split("\n"),i):n},[i,...t])},498:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NoPermissionsPage=void 0;const a=o(i(0)),l=i(95),s=i(31),c=i(56),u=i(123);t.NoPermissionsPage=()=>a.createElement(a.Fragment,null,a.createElement(l.PageHeader,null,a.createElement(l.PageHeaderTitle,{title:s.Messages.pages.noPermissions.title})),a.createElement(l.Main,null,a.createElement(u.EmptyStateSection,{icon:c.LockIcon,title:s.Messages.pages.noPermissions.emptyState.title,content:s.Messages.pages.noPermissions.emptyState.content})))},499:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerTableEmptyState=void 0;const a=o(i(0)),l=i(123),s=i(31);t.TriggerTableEmptyState=()=>a.createElement(l.EmptyStateSection,{title:s.Messages.tables.trigger.emptyState.notFound.title,content:s.Messages.tables.trigger.emptyState.notFound.content})},500:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useHasPolicyTriggersParametrizedQuery=t.hasTriggersQueryActionCreator=t.useGetPolicyTriggersParametrizedQuery=t.dataToTriggers=t.actionCreator=void 0;const n=i(67),r=i(1020),o=i(18),a=i(100),l=i(189);t.actionCreator=e=>a.Operations.GetPoliciesByIdHistoryTrigger.actionCreator(Object.assign({id:e.policyId},e.page.toQuery())),t.dataToTriggers=l.validationResponseTransformer(e=>{var t,i;if("PagedResponseOfHistoryItem"===e.type){const n=e.value;return Object.assign(Object.assign({},e),{type:"PagedTriggers",value:{count:(null===(t=n.meta)||void 0===t?void 0:t.count)||0,data:r.toTriggers(null!==(i=n.data)&&void 0!==i?i:[])}})}return e}),t.useGetPolicyTriggersParametrizedQuery=()=>o.useTransformQueryResponse(n.useParameterizedQuery(t.actionCreator),t.dataToTriggers);const s=l.validationResponseTransformer(e=>"PagedResponseOfHistoryItem"===e.type?Object.assign(Object.assign({},e),{type:"boolean",value:e.value.data&&e.value.data.length}):e);t.hasTriggersQueryActionCreator=e=>a.Operations.GetPoliciesByIdHistoryTrigger.actionCreator(Object.assign({id:e},o.Page.of(1,1).toQuery())),t.useHasPolicyTriggersParametrizedQuery=()=>o.useTransformQueryResponse(n.useParameterizedQuery(t.hasTriggersQueryActionCreator),s)},52:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOuiaProps=void 0;const n=i(18);t.getOuiaProps=n.getOuiaPropsFactory("Policies")},543:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(i(0)),o=n(i(32)),a=i(135),l=i(372),s=i(18),c=n(i(749)),u=i(67),d=i(368),p=s.createFetchingClient(s.getInsights,{responseInterceptors:[d.validateSchemaResponseInterceptor]});s.initStore(),o.default.render(r.default.createElement(l.Provider,{store:s.getStore()},r.default.createElement(a.BrowserRouter,{basename:s.getBaseName(window.location.pathname)},r.default.createElement(u.ClientContextProvider,{client:p},r.default.createElement(c.default,null)))),document.getElementById("root"))},749:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const a=o(i(0)),l=i(92),s=i(410);i(750);const c=i(144),u=i(18),d=i(233),p=i(498),f=i(1025);t.default=l.withRouter(()=>{const{rbac:e,userSettings:t}=f.useApp();return e?a.createElement(d.AppContext.Provider,{value:{rbac:e,userSettings:t}},e.canReadAll?a.createElement(a.Fragment,null,a.createElement(s.NotificationsPortal,null),a.createElement(c.Routes,null)):a.createElement(p.NoPermissionsPage,null)):a.createElement(u.AppSkeleton,null)})},75:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(419);Object.defineProperty(t,"ActionType",{enumerable:!0,get:function(){return n.ActionType}})},750:function(e,t,i){var n=i(342);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},o=i(12)(n,r);n.locals&&(e.exports=n.locals),e.hot.accept(342,(function(){var t=i(342);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var i,n=0;for(i in e){if(!t||e[i]!==t[i])return!1;n++}for(i in t)n--;return 0===n}(n.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");o(t)})),e.hot.dispose((function(){o()}))},753:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorPage=t.ErrorPageInternal=void 0;const a=o(i(0)),l=i(31),s=i(135),c=i(144),u=i(18);t.ErrorPageInternal=e=>{const t=a.useCallback(()=>{e.history.push(c.linkTo.listPage())},[e.history]);return a.createElement(u.ErrorBoundaryPage,{action:t,actionLabel:l.Messages.pages.error.emptyState.actions.goToIndex,pageHeader:l.Messages.pages.error.title,title:l.Messages.pages.error.emptyState.title,description:l.Messages.pages.error.emptyState.content},e.children)},t.ErrorPage=s.withRouter(t.ErrorPageInternal)},754:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=o(i(0)),s=i(0),c=i(23),u=i(95),d=i(420),p=i(421),f=i(345),m=i(427),y=i(233),h=i(992),g=i(993),_=i(492),v=i(485),b=i(18),E=i(31),P=i(39),O=i(995),C=i(114),T=i(369),S=i(493),j=i(494),x=i(996),M=i(997),A=i(998),I=i(999),w=a(i(162)),N=P.style({paddingBottom:0});t.default=e=>{var t;const[i,n]=l.useState({isOpen:!1}),r=j.useMassChangePolicyEnabledMutation(),o=v.usePolicyFilter(),a=b.useSort(),P=v.usePolicyPage(o.debouncedFilters,w.default.defaultElementsPerPage,a.sortBy),R=x.useGetListPagePolicies(P.page),{query:D}=T.useGetPoliciesQuery(b.Page.of(0,b.Page.NO_SIZE,P.page.filter,P.page.sort),!1),k=S.usePolicyToDelete(),L=s.useContext(y.AppContext);let F=R.loading||r.loading;const B="PagedResponseOfPolicy"===(null===(t=R.payload)||void 0===t?void 0:t.type)?R.payload.value.count:0,V=v.usePolicyRows((e=>{if(200===(null==e?void 0:e.status))return e.value.data})(R.payload),F,B,P.page),{clearSelection:z,loadingSelected:U}=V;F=F||U;const{canWriteAll:G,canReadAll:H}=L.rbac,{query:Q}=R,{mutate:W,loading:q}=r,{open:$}=k,K=C.usePrevious(q);l.useEffect(()=>{z()},[o.debouncedFilters,z]),l.useEffect(()=>{!0!==K||q||Q()},[q,Q,K]);const J=A.useListPageDelete({policyPage:P,policyRows:V,policyToDelete:k,reload:Q,count:B}),X=M.useTableActionResolverCallback({canWriteAll:G,openPolicyToDelete:$,mutateChangePolicyEnabled:W,setPolicyWizardState:n}),Y=I.useToolbarActions({setPolicyWizardState:n,policyRows:V,openPolicyToDelete:$,mutateChangePolicyEnabled:W,exportAllPoliciesQuery:D});l.useEffect(()=>{H&&Q()},[H,Q]);const Z=l.useCallback(e=>{const t=L.userSettings.refresh;e&&(Q(),t()),n({isOpen:!1})},[L.userSettings.refresh,n,Q]),ee=l.useMemo(()=>h.policyTableError({refreshPage:()=>{window.location.reload()},tryAgain:()=>{Q()}},R.error,R.status),[R.error,R.status,Q]);return l.createElement(l.Fragment,null,l.createElement(d.Helmet,null,l.createElement("title",null,"Policies | Red Hat Insights")),l.createElement(u.PageHeader,null,l.createElement(u.PageHeaderTitle,{title:E.Messages.pages.listPage.title})),!L.userSettings.isSubscribedForNotifications&&V.rows.find(e=>e.actions.find(e=>e.type===g.ActionType.EMAIL))&&l.createElement(c.PageSection,{className:N},l.createElement(b.InsightsEmailOptIn,{ouiaId:"list-email-required",content:E.Messages.pages.listPage.emailOptIn,insights:b.getInsights()})),l.createElement(u.Main,null,!1===R.hasPolicies?l.createElement(O.ListPageEmptyState,{createPolicy:G?Y.createCustomPolicy:void 0}):l.createElement(u.Section,null,l.createElement(f.PolicyToolbar,{ouiaId:"main-toolbar",onCreatePolicy:G?Y.createCustomPolicy:void 0,onDeletePolicy:G?Y.onDeletePolicies:void 0,onEnablePolicy:G?Y.onEnablePolicies:void 0,onDisablePolicy:G?Y.onDisablePolicies:void 0,onPaginationChanged:P.changePage,onPaginationSizeChanged:P.changeItemsPerPage,onSelectionChanged:V.onSelectionChanged,selectedCount:V.selectionCount,page:P.page.index,pageCount:V.rows.length,perPage:P.page.size,showPerPageOptions:!0,filters:o.filters,setFilters:o.setFilters,clearFilters:o.clearFilter,count:B,onExport:Y.onExport,showBottomPagination:!0},l.createElement(p.PolicyTable,{ouiaId:"main-table",policies:V.rows,onCollapse:V.onCollapse,onSelect:V.onSelect,actionResolver:X,loading:F,error:ee,onSort:a.onSort,sortBy:a.sortBy,linkToDetailPolicy:!0})))),i.isOpen&&l.createElement(m.CreatePolicyWizard,{isOpen:i.isOpen,close:Z,initialValue:i.template,showCreateStep:i.showCreateStep,policiesExist:!0===R.hasPolicies,isEditing:i.isEditing}),k.isOpen&&l.createElement(_.DeletePolicy,{onClose:J.onCloseDeletePolicy,onDeleted:J.onDeleted,loading:V.loadingSelected,count:k.count,getPolicies:V.getSelected,policy:k.policy}))}},755:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Description=void 0;const a=o(i(0)),l=i(23),s=i(52);t.Description=e=>a.createElement("div",Object.assign({},s.getOuiaProps("Policy/Table/Expanded/Description",e)),a.createElement(l.Title,{headingLevel:"h2",size:"md"},"Description"),a.createElement(l.Text,null," ",e.description," "))},756:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Dates=void 0;const a=o(i(0)),l=i(23),s=i(235),c=i(52);t.Dates=e=>a.createElement(a.Fragment,null,a.createElement(l.Text,Object.assign({},c.getOuiaProps("Policy/Table/Expanded/Dates",e)),"Last updated ",s.format(e.updated,"dd MMM yyyy")," | Created ",s.format(e.created,"dd MMM yyyy")))},764:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DisabledPolicyIcon=void 0;const a=o(i(0)),l=i(56);t.DisabledPolicyIcon=()=>a.createElement(l.OffIcon,null)},765:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EnabledPolicyIcon=void 0;const a=o(i(0)),l=i(56);t.EnabledPolicyIcon=()=>a.createElement(l.CheckCircleIcon,{color:"green"})},766:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebhookIcon=void 0;const l=o(i(0)),s=i(39),c=a(i(767)),u=s.style({verticalAlign:"-0.125em",width:"1em",height:"1em"});t.WebhookIcon=()=>l.createElement("img",{className:u,src:c.default})},767:function(e,t,i){e.exports=i.p+"fonts/WebhookIcon.svg"},768:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionsCell=void 0;const a=o(i(0)),l=i(75),s=i(23),c=i(39),u=i(344),d=i(31),p=i(52),f=i(68),m=c.style({borderRadius:3}),y=c.style({marginRight:5}),h=c.style({minWidth:145}),g=s.TooltipPosition.bottom,_=()=>a.createElement(s.Tooltip,{content:d.Messages.tables.policy.toolTips.email,position:g},a.createElement(u.ActionEmailIcon,null)),v=()=>a.createElement(s.Tooltip,{content:d.Messages.tables.policy.toolTips.hook,position:g},a.createElement(u.ActionWebhookIcon,null));t.ActionsCell=e=>{const t=e.actions.slice(0,4),i=e.actions.slice(4),n=t.map((e,t)=>{let i;switch(e.type){case l.ActionType.EMAIL:i=a.createElement(_,null);break;case l.ActionType.NOTIFICATION:i=a.createElement(v,null);break;default:f.assertNever(e)}return a.createElement(s.SplitItem,{key:t,className:y},i)});return i.length>0&&n.push(a.createElement(s.SplitItem,{key:"remaining",className:y},a.createElement(s.Badge,{className:m,isRead:!0},`${i.length} more`))),a.createElement(s.Split,Object.assign({},p.getOuiaProps("Policy/Table/Actions",e),{className:h}),n)}},769:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LastTriggeredCell=void 0;const a=o(i(0)),l=i(39),s=i(235),c=i(31),u=i(212),d=i(52),p=l.style({marginLeft:10});t.LastTriggeredCell=e=>{let t;if(e.lastTriggered){const i=s.add(e.lastTriggered,{months:1}),n=new Date(Date.now());t=s.isAfter(n,i)?s.format(e.lastTriggered,"MMM dd y"):`${s.formatDistanceToNow(e.lastTriggered)} ${c.Messages.components.lastTriggeredCell.ago}`}else t=c.Messages.components.lastTriggeredCell.never;return a.createElement("div",Object.assign({},d.getOuiaProps("Policy/Table/LastTriggered",e)),e.isEnabled?a.createElement(u.EnabledPolicyIcon,null):a.createElement(u.DisabledPolicyIcon,null),a.createElement("span",{className:p},t))}},770:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyWizard=void 0;const a=o(i(0)),l=i(23),s=i(151),c=i(158),u=i(870),d=i(872),p=i(878),f=i(951),m=i(957),y=i(178),h=i(958),g=i(114),_=i(31),v=i(959),b=i(68),E=(e,t,i,n,r)=>!r&&(e===i||(t?e<=n:e<=i)),P=(e,t)=>!t&&e,O=e=>{const t=s.useFormikContext(),i=t.validateForm,n=t.handleSubmit;a.useEffect(()=>{i()},[e.currentStep,i]),a.useEffect(()=>{e.triggeredAction!==c.WizardActionType.NONE&&n()},[e.triggeredAction,n]);const r={isLoading:e.isLoading,isFormValid:t.isValid,triggerAction:e.triggerAction,verifyResponse:e.verifyResponse,createResponse:e.createResponse,setVerifyResponse:e.setVerifyResponse,facts:e.facts,setMaxStep:e.setMaxStep},o=e.steps[e.currentStep],u=((e,t,i)=>e.isValid?e.isValid(t,i):t.isFormValid)(o,r,t.values);r.isValid=u;const d=e.steps.map(t=>Object.assign(Object.assign({},t),{enableNext:P(u,e.isLoading),canJumpTo:E(t.id,u,e.currentStep,e.maxStep,e.isLoading)}));return a.createElement(l.Form,null,a.createElement(c.WizardContext.Provider,{value:r},a.createElement(l.Wizard,{isOpen:!0,onSave:()=>{e.triggerAction(c.WizardActionType.SAVE)},onClose:e.onClose,steps:d,startAtStep:e.currentStep+1,onNext:e.onMove,onBack:e.onMove,onGoToStep:e.onMove,title:e.isEditing?_.Messages.wizards.policy.titleEdit:_.Messages.wizards.policy.titleNew,description:_.Messages.wizards.policy.description,footer:a.createElement(h.PolicyWizardFooter,{onNext:o.onNext,loadingText:"Loading",isLoading:e.isLoading,error:e.createResponse.error})})))};t.PolicyWizard=e=>{const[t,i]=a.useState(0),[n,r]=a.useState(0),[o,l]=a.useState({type:c.WizardActionType.NONE}),[h,_]=a.useState({isValid:!1}),E=g.useMountedState(),[P,C]=a.useState({created:!1}),T=a.useCallback(e=>{let t,i;const n=new Promise((e,n)=>{t=e,i=n});return l(n=>(n.rejecter&&n.rejecter(),{type:e,resolver:t,rejecter:i})),n},[l]),S=a.useCallback(e=>{l(t=>(e&&t.resolver?t.resolver():t.rejecter&&t.rejecter(),{type:c.WizardActionType.NONE}))},[l]);a.useEffect(()=>{var t;(null===(t=e.initialValue)||void 0===t?void 0:t.conditions)&&_({isValid:!0,policy:e.initialValue})},[e.initialValue]);const j=(e=>{const t=[];return e&&t.push(u.createPolicyStep()),t.push(d.createDetailsStep(),p.createConditionsStep(),f.createActionsStep(),m.createReviewStep({nextButtonText:"Finish"})),t.map((e,t)=>Object.assign(Object.assign({},e),{id:t}))})(e.showCreateStep);return a.createElement(a.Fragment,null,a.createElement(v.CreatePolicyStepContextProvider,{showCreateStep:e.showCreateStep},a.createElement(s.Formik,{initialValues:e.initialValue,initialStatus:{},validateOnMount:!1,validationSchema:j[t].validationSchema,onSubmit:(t,i)=>{i.setSubmitting(!1),l(e=>Object.assign(Object.assign({},e),{type:c.WizardActionType.NONE}));const n=y.PolicyFormSchema.cast(t);switch(i.setValues(n),o.type){case c.WizardActionType.SAVE:e.onSave(n).then(e=>{E()&&(C(e),S(e.created))});break;case c.WizardActionType.VALIDATE_CONDITION:case c.WizardActionType.NONE:case c.WizardActionType.VALIDATE_NAME:break;default:b.assertNever(o.type)}},validate:t=>{const i=y.PolicyFormSchema.cast(t);switch(o.type){case c.WizardActionType.SAVE:case c.WizardActionType.NONE:break;case c.WizardActionType.VALIDATE_CONDITION:e.onVerify(i).then(e=>{_(e),S(e.isValid)});break;case c.WizardActionType.VALIDATE_NAME:e.onValidateName(i).then(e=>{C(e),S(!e.error)});break;default:b.assertNever(o.type)}}},a.createElement(O,{currentStep:t,maxStep:n,isLoading:e.isLoading,triggeredAction:o.type,triggerAction:T,steps:j,verifyResponse:h,createResponse:P,setVerifyResponse:_,onClose:e.onClose,onMove:(e,t)=>{const o=e.id;i(o),o>n&&r(o)},showCreateStep:e.showCreateStep,facts:e.facts,setMaxStep:r,isEditing:e.isEditing}))))}},870:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.createPolicyStep=t.CreatePolicyStep=t.useCreatePolicyStep=void 0;const l=o(i(0)),s=i(23),c=i(18),u=i(158),d=i(31),p=i(871),f=i(151),m=o(i(145)),y=i(0),h=i(125),g=i(114),_=i(455);t.useCreatePolicyStep=()=>{const e=l.useContext(_.CreatePolicyStepContext);if(void 0===e)throw Error("Invalid usage of CreatePolicyStep without valid context");const{copyPolicy:t,setCopyPolicy:i,copiedPolicy:n,setCopiedPolicy:r}=e,o=a(e,["copyPolicy","setCopyPolicy","copiedPolicy","setCopiedPolicy"]),{clearSelection:s}=o.policyRows,{validate:c,validateField:d,setValues:p,setFieldValue:m}=f.useFormikContext(),{setVerifyResponse:v,setMaxStep:b}=y.useContext(u.WizardContext),E=l.useCallback(()=>{i(!1),r({})},[i,r]),P=l.useCallback(()=>{i(!0),r(void 0)},[i,r]);g.useUpdateEffect(()=>{n&&(p(n),t&&v({policy:n,isValid:!0})),b(0),m("isValid",!!n),c&&d("isValid")},[t,n,c,d,m,p,v]),l.useEffect(()=>{t||s()},[t,s]);const O=l.useCallback(e=>{r(h.makeCopyOfPolicy(e))},[r]);return{copyPolicy:t,createFromScratch:E,copyExisting:P,copyFromPolicyHandler:O,copyFromPolicyProps:o}},t.CreatePolicyStep=()=>{const{copyPolicy:e,createFromScratch:i,copyExisting:n,copyFromPolicyHandler:r,copyFromPolicyProps:o}=t.useCreatePolicyStep();return l.createElement(l.Fragment,null,l.createElement(c.Form,{ouiaId:"create-policy-step",className:"pf-c-form"},l.createElement("div",{className:"pf-c-form__group"},l.createElement(s.Title,{headingLevel:"h4",size:"xl",className:"pf-u-mb-sm"},d.Messages.wizards.policy.createPolicy.title),l.createElement(s.Text,{className:c.joinClasses("pf-u-mb-sm","pf-c-title pf-m-sm"),component:s.TextVariants.h6},"Define a new policy:"),l.createElement(s.Radio,{isChecked:!e,name:"new-policy",value:"from-scratch",id:"create-new-custom-policy-from-scratch",onChange:i,label:"From scratch",className:c.joinClasses("pf-u-mb-sm","pf-c-radio")}),l.createElement(s.Radio,{isChecked:e,name:"new-policy",value:"as-copy",id:"create-new-custom-policy-as-copy",onChange:n,label:"As a copy of existing Policy",className:c.joinClasses("pf-u-mb-sm","pf-c-radio")}),e&&l.createElement(l.Fragment,null,l.createElement(p.CopyFromPolicy,Object.assign({onSelect:r},o))))))},t.createPolicyStep=e=>Object.assign({name:d.Messages.wizards.policy.createPolicy.title,component:l.createElement(t.CreatePolicyStep,null),validationSchema:m.object().shape({isValid:m.boolean().oneOf([!0])})},e)},871:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CopyFromPolicy=void 0;const a=o(i(0)),l=i(345),s=i(421),c=i(114);t.CopyFromPolicy=e=>{var t;const{policyFilter:i,policyPage:n,policySort:r,policyQuery:o,policyRows:u}=e;c.useEffectOnce(()=>{o.payload||o.query()});const d=e.onSelect,p=o.payload,f=u.onSelect,m=a.useCallback((e,t,i)=>{f(e,t,i),p&&"PagedResponseOfPolicy"===p.type&&i&&d(p.value.data[t])},[d,f,p]),{pageCount:y,count:h}="PagedResponseOfPolicy"===(null===(t=o.payload)||void 0===t?void 0:t.type)?{count:o.payload.value.count,pageCount:o.payload.value.data.length}:{count:void 0,pageCount:void 0};return a.createElement(a.Fragment,null,a.createElement(l.PolicyToolbar,{ouiaId:"copy-from-policy-toolbar",onPaginationChanged:n.changePage,page:n.page.index,pageCount:y,perPage:n.page.size,showPerPageOptions:!1,hideActions:!0,hideBulkSelect:!0,filters:i.filters,setFilters:i.setFilters,clearFilters:i.clearFilter,count:h},a.createElement(s.PolicyTable,{ouiaId:"copy-from-policy-table",columnsToShow:["radioSelect","name","actions"],policies:u.rows,onSelect:m,loading:o.loading,loadingRowCount:5,onSort:r.onSort,sortBy:r.sortBy,linkToDetailPolicy:!1})))}},872:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createDetailsStep=t.DetailsStep=void 0;const a=o(i(0)),l=i(23),s=i(18),c=i(158),u=i(178),d=i(31),p=i(353);t.DetailsStep=()=>a.createElement(s.Form,{ouiaId:"detail-step"},a.createElement(l.Title,{headingLevel:"h4",size:"xl"},d.Messages.wizards.policy.details.title),a.createElement(s.FormTextInput,{ouiaId:"name",maxLength:p.maxPolicyNameLength,isRequired:!0,label:"Name",type:"text",name:"name",id:"name"}),a.createElement(s.FormTextArea,{ouiaId:"description",label:"Description",type:"text",id:"description",name:"description",resizeOrientation:"vertical"})),t.createDetailsStep=e=>Object.assign({name:d.Messages.wizards.policy.details.title,component:a.createElement(t.DetailsStep,null),validationSchema:u.PolicyFormDetails,onNext:(e,t)=>{e.triggerAction(c.WizardActionType.VALIDATE_NAME).then(t).catch(e=>{console.error("Error when validating:",e)})}},e)},873:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(874);Object.defineProperty(t,"ActionSchema",{enumerable:!0,get:function(){return n.ActionSchema}});var r=i(875);Object.defineProperty(t,"ActionEmailSchema",{enumerable:!0,get:function(){return r.ActionEmailSchema}});var o=i(876);Object.defineProperty(t,"ActionNotificationSchema",{enumerable:!0,get:function(){return o.ActionNotificationSchema}})},874:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionSchema=void 0;const a=o(i(145)),l=i(75);t.ActionSchema=a.object().shape({type:a.mixed().required("Specify the action type").oneOf(Object.values(l.ActionType))})},875:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionEmailSchema=void 0;const a=o(i(145)),l=i(75);t.ActionEmailSchema=a.object().shape({type:a.mixed().oneOf([l.ActionType.EMAIL]).required()})},876:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionNotificationSchema=void 0;const a=o(i(145)),l=i(75);t.ActionNotificationSchema=a.object().shape({type:a.mixed().oneOf([l.ActionType.NOTIFICATION]).required()})},877:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAction=t.isActionNotification=t.isActionEmail=void 0;const n=i(419);t.isActionEmail=e=>e.type===n.ActionType.EMAIL,t.isActionNotification=e=>e.type===n.ActionType.NOTIFICATION,t.isAction=e=>t.isActionEmail(e)||t.isActionNotification(e)},878:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createConditionsStep=void 0;const l=o(i(0)),s=i(23),c=i(56),u=i(89),d=i(18),p=i(158),f=i(178),m=i(151),y=i(39),h=i(31),g=a(i(879)),_=i(880),v=y.style({marginTop:"auto",marginBottom:"auto",marginLeft:8}),b=y.style({width:"100%"}),E=y.style({marginTop:12}),P=y.style({color:u.global_danger_color_100.var}),O=y.style({color:u.global_success_color_200.var}),C=y.style({fontWeight:"bold"}),T=y.style({marginBottom:5}),S=e=>e.loading?l.createElement(s.Split,null,l.createElement(s.SplitItem,null,l.createElement("span",{className:v},l.createElement(s.Spinner,{size:"md"})),l.createElement("span",{className:v}," ",h.Messages.wizards.policy.conditions.validating," "))):e.changed?null:e.isValid?l.createElement(s.Split,null,l.createElement(s.SplitItem,null,l.createElement(c.CheckCircleIcon,{className:v,color:u.global_success_color_200.value})),l.createElement(s.SplitItem,null,l.createElement("div",{className:d.joinClasses(v,O,C)},h.Messages.wizards.policy.conditions.valid))):e.error?l.createElement(s.Stack,null,l.createElement(s.StackItem,null,l.createElement(s.Split,null,l.createElement(s.SplitItem,null,l.createElement(c.ExclamationCircleIcon,{className:v,color:u.global_danger_color_100.value})),l.createElement(s.SplitItem,null,l.createElement("div",{className:d.joinClasses(v,P,C)},h.Messages.wizards.policy.conditions.invalid)))),l.createElement(s.StackItem,null,l.createElement("div",{className:d.joinClasses(v,P)}," ",e.error," "))):null,j=()=>{var e;const t=l.useContext(p.WizardContext),{values:i}=m.useFormikContext(),n=!i.conditions||""===i.conditions||t.isLoading;return l.createElement(d.Form,{ouiaId:"condition-step"},l.createElement(s.Title,{className:T,headingLevel:"h4",size:"xl"},h.Messages.wizards.policy.conditions.title),h.Messages.wizards.policy.conditions.summaryDesc,l.createElement(_.ConditionFieldWithForkmik,{ouiaId:"conditions",label:"Condition text",id:"conditions",name:"conditions",facts:t.facts||[],hint:h.Messages.wizards.policy.conditions.hint}),l.createElement(s.Stack,{className:b},l.createElement(s.StackItem,null,l.createElement(s.Button,{onClick:()=>{t.triggerAction(p.WizardActionType.VALIDATE_CONDITION)},isDisabled:n,variant:s.ButtonVariant.secondary},"Validate condition")),l.createElement(s.StackItem,{className:E},l.createElement(S,Object.assign({loading:t.isLoading},t.verifyResponse,{changed:(null===(e=t.verifyResponse.policy)||void 0===e?void 0:e.conditions)!==i.conditions})))),l.createElement(g.default,null))};t.createConditionsStep=e=>Object.assign({name:h.Messages.wizards.policy.conditions.title,component:l.createElement(j,null),validationSchema:f.PolicyFormConditions,isValid:(e,t)=>{var i;return t.conditions===(null===(i=e.verifyResponse.policy)||void 0===i?void 0:i.conditions)&&e.verifyResponse.isValid}},e)},879:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=o(i(0)),s=i(23),c=i(31),u=i(39),d=a(i(162)),p=i(52),f=u.style({fontFamily:"monospace",fontSize:"14px",fontStyle:"default"}),m=u.style({marginBottom:5}),y=u.style({marginLeft:20});class h extends l.Component{render(){return l.createElement(s.TextContent,{className:y},l.createElement(s.Text,{component:s.TextVariants.p},c.Messages.wizards.policy.hints.hintParagraph1),l.createElement(s.Text,{component:s.TextVariants.a,className:m,href:d.default.pages.factsDocumentation,target:"_blank",rel:"noopener noreferrer"},c.Messages.wizards.policy.hints.hintLinkTitle),l.createElement(s.Text,{component:s.TextVariants.h5,className:"lg"},c.Messages.wizards.policy.hints.hintSyntaxExamplesSection),l.createElement(s.Text,null,c.Messages.wizards.policy.hints.hintQuestion1),l.createElement(s.Text,{component:s.TextVariants.p,className:f},l.createElement("i",null,c.Messages.wizards.policy.hints.hintQuestion1Ans)),l.createElement(s.Text,null,c.Messages.wizards.policy.hints.hintQuestion2),l.createElement(s.Text,{component:s.TextVariants.p,className:f},l.createElement("i",null,c.Messages.wizards.policy.hints.hintQuestion2Ans)),l.createElement(s.Text,null,c.Messages.wizards.policy.hints.hintQuestion3),l.createElement(s.Text,{component:s.TextVariants.p,className:f},l.createElement("i",null,c.Messages.wizards.policy.hints.hintQuestion3Ans)),l.createElement(s.Text,null,c.Messages.wizards.policy.hints.hintQuestion4),l.createElement(s.Text,{component:s.TextVariants.p,className:f},l.createElement("i",null,c.Messages.wizards.policy.hints.hintQuestion4Ans)))}}t.default=e=>l.createElement(l.Fragment,null,l.createElement(s.StackItem,Object.assign({},p.getOuiaProps("Policy/Wizard/Usage",e)),l.createElement(s.ExpandableSection,{toggleText:c.Messages.wizards.policy.hints.hintTitle},l.createElement(h,null))))},880:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionFieldWithForkmik=void 0;const l=o(i(0)),s=i(881),c=i(151),u=i(23);t.ConditionFieldWithForkmik=e=>{const{hint:t}=e,i=a(e,["hint"]),[n,r,{setValue:o}]=c.useField(Object.assign({},i)),d=!r.error||!r.touched,p=l.useCallback(e=>{o(e)},[o]);return l.createElement(u.FormGroup,{fieldId:e.id,helperTextInvalid:r.error,isRequired:e.isRequired,validated:d?"default":"error",label:e.label},l.createElement(s.ConditionField,Object.assign({},i,n,{value:n.value?n.value.toString():"",onSelect:p})),t&&l.createElement(u.Text,{component:u.TextVariants.small},t))}},881:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionField=t.buildOptionList=t.factToOptions=void 0;const a=o(i(0)),l=i(23),s=i(39),c=i(114),u=i(882),d=i(52),p=s.style({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"});t.factToOptions=(e,t,i)=>((e=e.trim()).length>0&&t.length>0&&(e+=" "),i.length>0&&t.length>0&&(i=" "+i),(t||[" "]).map(t=>a.createElement(l.SelectOption,{className:p,key:e+t+i,value:e+t+i},e,a.createElement("b",null,t),i))),t.buildOptionList=(e,i)=>{try{const n=u.computeOptions(e,i);if(n)return t.factToOptions(n.prefix,n.options,n.postfix)}catch(t){console.log(`Exception when computing options for condition [${e}]`,t)}return[]},t.ConditionField=e=>{const{facts:i,onSelect:n,value:r}=e,[o,s]=a.useState(!1),[u,p]=a.useState(),f=a.useCallback(e=>t.buildOptionList(e,i),[i]),m=a.useCallback(e=>{const t=f(r);if(e){let e=t.length>0;1===t.length&&t[0].props.value===r&&(e=!1),s(e)}p(t)},[r,f,p]);c.useUpdateEffect(()=>{m(!0)},[m]),c.useEffectOnce(()=>{m(!1)});const y=a.useCallback(e=>{const t=e.target.value;return n(t),[]},[n]),h=a.useCallback((e,t)=>{n(t.toString()),p(e=>(e&&1===e.length&&e[0].props.value===t&&s(!1),e))},[n]),g=a.useCallback(()=>{n("")},[n]);return a.createElement(l.Select,Object.assign({},d.getOuiaProps("ConditionField",e),{label:e.label,toggleId:e.id,name:e.name,onToggle:()=>s(()=>!o),isOpen:o,selections:r,variant:l.SelectVariant.typeahead,onSelect:h,onFilter:y,onClear:g,typeAheadAriaLabel:"Condition writer",style:{maxWidth:"100%"}}),u)}},882:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeOptions=void 0;const n=i(456),r=i(945),o=i(484),a=i(946),l=e=>e.map(e=>e.value).join(" ");t.computeOptions=(e,t)=>{const i=(e=>{const t=n.CharStreams.fromString(e),i=new r.ExpressionLexer(t);i.removeErrorListeners();const a=new n.CommonTokenStream(i),l=new o.ExpressionParser(a);return l.removeErrorListeners(),l})(e).expression(),s=(new a.ConditionVisitor).visit(i).filter(e=>e.type!==a.ElementType.ERROR);let c=s.pop();const u=[];if(void 0===c)return{prefix:"",options:t.slice(0,10).map(e=>e.name||""),postfix:""};for(;c.type===a.ElementType.CLOSE_ROUND_BRACKET;){const e=s.pop();if(void 0===e)break;u.unshift(c),c=e}const d=l(s),p=l(u),f=c;return f.type===a.ElementType.FACT?{prefix:d,options:t.filter(e=>e.name&&e.name.toUpperCase().includes(f.value.toUpperCase())).slice(0,10).map(e=>e.name||""),postfix:p}:(u.unshift(f),{prefix:d,options:[],postfix:l(u)})}},945:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionLexer=void 0;const a=i(231),l=i(130),s=i(225),c=i(132),u=o(i(98));class d extends l.Lexer{constructor(e){super(e),this._interp=new s.LexerATNSimulator(d._ATN,this)}get vocabulary(){return d.VOCABULARY}get grammarFileName(){return"Expression.g4"}get ruleNames(){return d.ruleNames}get serializedATN(){return d._serializedATN}get channelNames(){return d.channelNames}get modeNames(){return d.modeNames}static get _ATN(){return d.__ATN||(d.__ATN=(new a.ATNDeserializer).deserialize(u.toCharArray(d._serializedATN))),d.__ATN}}t.ExpressionLexer=d,d.T__0=1,d.T__1=2,d.T__2=3,d.T__3=4,d.T__4=5,d.OR=6,d.AND=7,d.NOT=8,d.EQUAL=9,d.NOTEQUAL=10,d.CONTAINS=11,d.MATCHES=12,d.NEG=13,d.GT=14,d.GTE=15,d.LT=16,d.LTE=17,d.IN=18,d.NUMBER=19,d.FLOAT=20,d.INTEGER=21,d.SIMPLETEXT=22,d.STRING=23,d.WS=24,d.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],d.modeNames=["DEFAULT_MODE"],d.ruleNames=["T__0","T__1","T__2","T__3","T__4","OR","AND","NOT","EQUAL","NOTEQUAL","CONTAINS","MATCHES","NEG","GT","GTE","LT","LTE","IN","NUMBER","FLOAT","INTEGER","SIMPLETEXT","STRING","WS","ESC","UNICODE","HEX","ESC_DOT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","NEG_OP"],d._LITERAL_NAMES=[void 0,"'('","')'","'['","','","']'",void 0,void 0,void 0,"'='","'!='",void 0,void 0,void 0,"'>'","'>='","'<'","'<='"],d._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,"OR","AND","NOT","EQUAL","NOTEQUAL","CONTAINS","MATCHES","NEG","GT","GTE","LT","LTE","IN","NUMBER","FLOAT","INTEGER","SIMPLETEXT","STRING","WS"],d.VOCABULARY=new c.VocabularyImpl(d._LITERAL_NAMES,d._SYMBOLIC_NAMES,[]),d._serializedATN='줝쪺֍꾺体؇쉁ģ\b\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t !\t!"\t"#\t#$\t$%\t%&\t&\'\t\'(\t()\t)*\t*+\t+,\t,-\t-.\t./\t/0\t01\t12\t23\t34\t45\t56\t67\t78\t8\b\b\b\b\t\t\t\t\n\n\v\v\v\f\f\f\f\f\f\f\f\f\r\r\r\r\r\r\r\r¯\n¶\n\r·½\n\fÀ\vÅ\n\fÈ\vÎ\n\fÑ\vÔ\n×\n\rØá\n  !!""##$$%%&&\'\'(())**++,,--..//0011223344556677889\t\v\r\b\t\n\v\f\r!#%\')+-/13579;=?ACEGIKMOQSUWY[]_acegikmo$2;002;C\\aac|/02;C\\aac|))^^$$^^\v\f""\n))11^^ddhhppttvv2;CHchCCccDDddEEeeFFffGGggHHhhIIiiJJjjKKkkLLllMMmmNNnnOOooPPppQQqqRRrrSSssTTttUUuuVVvvWWwwXXxxYYyyZZzz[[{{\\\\||ď\t\v\r!#%\')+-/1qsu\tw\vy\r{~ !£#¥%¨\'«)°+µ-¹/Ó1Ö3Ü5â7è9ê;í=ï?ñAóCõE÷GùIûKýMÿOāQăSąUćWĉYċ[č]ď_đaēcĕeėgęiěkĝmğoġqr*rst+tuv]v\bwx.x\nyz_z\f{|W,|}]/}~;U+A!U+W,a1?#?? W,U+a1;K&U+_0S*;a1? I%C"_0o8@ ¡@¡¢?¢ £¤>¤"¥¦>¦§?§$¨©K&©ªU+ª&«®+¬­0­¯+®¬®¯¯(°±+±²0²³+³*´¶\tµ´¶··µ·¸¸,¹¾\tº½\t»½9¼º¼»½À¾¼¾¿¿.À¾ÁÆ)ÂÅ3ÃÅ\nÄÂÄÃÅÈÆÄÆÇÇÉÈÆÉÔ)ÊÏ$ËÎ3ÌÎ\nÍËÍÌÎÑÏÍÏÐÐÒÑÏÒÔ$ÓÁÓÊÔ0Õ×\tÖÕ×ØØÖØÙÙÚÚÛ\bÛ2Üà^Ýá\t\bÞá5ßáo8àÝàÞàßá4âãwãä7äå7åæ7æç7ç6èé\t\té8êë^ëì0ì:íî\t\nî<ïð\t\vð>ñò\t\fò@óô\t\rôBõö\töD÷ø\tøFùú\túHûü\tüJýþ\tþLÿĀ\tĀNāĂ\tĂPăĄ\tĄRąĆ\tĆTćĈ\tĈVĉĊ\tĊXċČ\tČZčĎ\tĎ\\ďĐ\tĐ^đĒ\tĒ`ēĔ\tĔbĕĖ\tĖdėĘ\tĘfęĚ\t ĚhěĜ\t!ĜjĝĞ\t"ĞlğĠ\t#ĠnġĢ#Ģp®·¼¾ÄÆÍÏÓØà\b'},946:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionVisitor=t.ElementType=void 0;const n=i(947),r=i(484),o=i(456);var a;!function(e){e.FACT="FACT",e.VALUE="VALUE",e.LOGICAL_OPERATOR="LOGICAL_OPERATOR",e.BOOLEAN_OPERATOR="BOOLEAN_OPERATOR",e.NUMERIC_COMPARE_OPERATOR="NUMERIC_COMPARE_OPERATOR",e.OPEN_ROUND_BRACKET="OPEN_ROUND_BRACKET",e.CLOSE_ROUND_BRACKET="CLOSE_ROUND_BRACKET",e.UNKNOWN="UNKNOWN",e.ERROR="ERROR"}(a=t.ElementType||(t.ElementType={}));const l=e=>({type:a.FACT,value:e}),s=e=>({type:a.VALUE,value:e}),c=e=>({type:a.LOGICAL_OPERATOR,value:e}),u=e=>({type:a.BOOLEAN_OPERATOR,value:e}),d=e=>({type:a.OPEN_ROUND_BRACKET,value:e}),p=e=>({type:a.CLOSE_ROUND_BRACKET,value:e}),f=e=>({type:a.NUMERIC_COMPARE_OPERATOR,value:e}),m=e=>({type:a.ERROR,value:e}),y=e=>({type:a.UNKNOWN,value:e}),h=e=>0===e.length?void 0:e[0],g=e=>0===e.length?void 0:e[e.length-1];class _ extends n.AbstractParseTreeVisitor{defaultResult(){return[]}aggregateResult(e,t){const i=g(e.filter(e=>e.type!==a.ERROR)),n=h(t.filter(e=>e.type!==a.ERROR));return i&&n&&i.type===a.LOGICAL_OPERATOR&&n.type===a.LOGICAL_OPERATOR&&(n.type=a.ERROR),[...e,...t]}visitTerminal(e){return e.symbol.type===o.Token.EOF?[]:"("===e.text?[d("(")]:")"===e.text?[p(")")]:[y(e.text)]}visitErrorNode(e){return"<missing ')'>"===e.text?[p(")")]:[m(e.text)]}visitLogical_operator(e){return[c(e.text)]}visitBoolean_operator(e){return[u(e.text)]}visitNumeric_compare_operator(e){return[f(e.text)]}visitKey(e){var t;const i=e.SIMPLETEXT();if(i)return[l(i.text)];const n=null===(t=e.STRING())||void 0===t?void 0:t.text;return n&&n.length>=2?[l(n.substr(1,n.length-2))]:[l("")]}visitValue(e){const t=e.NUMBER()||e.STRING();if(!t){if(e.parent instanceof r.ExprContext||(e.parent,r.ArrayContext),e.text)return e.childCount>1&&e.start.inputStream&&e.stop?[s(`"${e.start.inputStream.toString().slice(e.start.startIndex,e.stop.stopIndex+1)}"`)]:[s(`"${e.text}"`)];if(e.start.inputStream&&e.stop&&e.stop.text){let t=e.start.inputStream.toString().slice(e.stop.stopIndex+1,e.start.startIndex).trimLeft();return t.startsWith('"')&&!t.endsWith('"')?t+='"':t.startsWith("'")&&!t.endsWith("'")&&(t+="'"),[s(t)]}return this.visitChildren(e)}return[s(t.text)]}visitNumerical_value(e){return[s(e.text)]}}t.ConditionVisitor=_},951:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createActionsStep=t.ActionsStep=void 0;const a=o(i(0)),l=i(23),s=i(178),c=i(151),u=i(952),d=i(31),p=i(956);t.ActionsStep=()=>{var e;const{validateForm:t,values:i}=c.useFormikContext(),n=null===(e=i.actions)||void 0===e?void 0:e.length;return a.useEffect(()=>{t()},[t,n]),a.createElement(a.Fragment,null,a.createElement(l.Title,{headingLevel:"h4",size:"xl"},d.Messages.wizards.policy.actions.title),a.createElement(c.FieldArray,{name:"actions"},e=>{return a.createElement(a.Fragment,null,a.createElement(p.AddTriggersDropdown,{isTypeEnabled:t=>{var i;return 0===((null===(i=e.form.values.actions)||void 0===i?void 0:i.filter(e=>e.type===t))||[]).length},onTypeSelected:t=>{e.push({type:t})}}),a.createElement(u.ActionsForm,{id:"actions",name:"actions",actions:e.form.values.actions,arrayHelpers:e}))}))},t.createActionsStep=e=>Object.assign({name:d.Messages.wizards.policy.actions.title,component:a.createElement(t.ActionsStep,null),validationSchema:s.PolicyFormActions},e)},952:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionsForm=void 0;const a=i(75),l=i(23),s=i(89),c=o(i(0)),u=i(56),d=i(953),p=i(68),f=i(39),m=i(344),y=f.style({gridGap:s.global_spacer_md.var}),h=f.style({backgroundColor:"white",border:"1px var(--pf-global--BorderColor--200) solid",boxShadow:"none"}),g=f.style({marginLeft:10,display:"inline"});t.ActionsForm=e=>{var t;return c.createElement(l.Form,{className:y},null===(t=e.actions)||void 0===t?void 0:t.map((t,i)=>c.createElement(c.Fragment,{key:i},c.createElement(l.Card,{className:h},c.createElement(l.CardHeader,{"data-codemods":"true"},c.createElement(l.CardActions,null,c.createElement(l.Button,{variant:"plain","aria-label":"Action",onClick:e.arrayHelpers.handleRemove(i)},c.createElement(u.TimesIcon,null))),c.createElement(l.CardTitle,null,c.createElement(c.Fragment,null,c.createElement(m.ActionIcon,{actionType:null==t?void 0:t.type}),c.createElement(l.Title,{headingLevel:"h2",className:g,size:"md"},(null==t?void 0:t.type)?(e=>{switch(e){case a.ActionType.EMAIL:return"Send email";case a.ActionType.NOTIFICATION:return"Send to notification";default:p.assertNever(e)}})(t.type):"")))),c.createElement(l.CardBody,{className:"pf-c-form"},c.createElement(d.ActionForm,{ouiaId:`actions-form.${i.toString()}`,isReadOnly:e.isReadOnly,action:t,prefix:`actions.${i}`}))))))}},953:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionForm=void 0;const a=o(i(0)),l=i(75),s=i(954),c=i(955);t.ActionForm=e=>{var t,i;switch((null===(t=e.action)||void 0===t?void 0:t.type)||void 0){case l.ActionType.EMAIL:return a.createElement(s.ActionEmailForm,Object.assign({},e));case l.ActionType.NOTIFICATION:return a.createElement(c.ActionNotificationForm,Object.assign({},e));case void 0:return null;default:throw new Error("Unexpected action type:["+(null===(i=e.action)||void 0===i?void 0:i.type)+"]")}}},954:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionEmailForm=void 0;const a=o(i(0)),l=i(23),s=i(31),c=i(18),u=i(0),d=i(233),p=i(52);t.ActionEmailForm=e=>{const t=u.useContext(d.AppContext);return a.createElement("div",Object.assign({},p.getOuiaProps("Policy/Action/Email",e)),a.createElement(l.Text,null,"An email will be sent to all users on this account with access to Policies according to their email preferences."),!t.userSettings.isSubscribedForNotifications&&a.createElement(c.InsightsEmailOptIn,{ouiaId:"action-email.wizard-email-required",content:s.Messages.wizards.policy.actions.emailOptIn,insights:c.getInsights()}))}},955:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionNotificationForm=void 0;const l=o(i(0)),s=i(23),c=a(i(162)),u=i(31),d=i(52),p=e=>l.createElement(s.Text,null,e.head,l.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.link),e.tail);t.ActionNotificationForm=e=>{const t=l.useMemo(()=>c.default.pages.notifications(),[]);return l.createElement("div",Object.assign({},d.getOuiaProps("Policy/Action/Hook",e)),l.createElement(p,Object.assign({},u.Messages.components.actionNotificationForm.paragraph1,{url:t})),l.createElement(p,Object.assign({},u.Messages.components.actionNotificationForm.paragraph2,{url:t})))}},956:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AddTriggersDropdown=void 0;const a=o(i(0)),l=i(75),s=i(23),c=i(31),u=i(275),d=i(56),p=i(39),f=i(18),m=i(52),y=p.style({marginBottom:16});t.AddTriggersDropdown=e=>{const[t,i]=a.useState(!1),n=f.getInsights().chrome.isProd,r=Object.values(l.ActionType).filter(e=>!n||e!==l.ActionType.NOTIFICATION).map(t=>a.createElement(s.DropdownItem,{key:t,onClick:()=>(t=>{e.onTypeSelected(t),i(!1)})(t),isDisabled:!e.isTypeEnabled(t)},c.Messages.components.actionType[t]));return a.createElement(s.Dropdown,Object.assign({isOpen:t,dropdownItems:r,isPlain:!0,className:y,toggle:a.createElement(u.Toggle,{isPlain:!0,onToggle:e=>i(e),id:"add-action-toggle"},a.createElement(s.Button,{component:"a",variant:s.ButtonVariant.link,isInline:!0}," Add trigger actions ",a.createElement(d.AngleDownIcon,null)," "))},m.getOuiaProps("Policy/Wizard/AddTrigger",e)))}},957:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createReviewStep=void 0;const a=o(i(0)),l=i(151),s=i(89),c=i(158),u=i(18),d=i(23),p=i(178),f=i(0),m=i(39),y=i(31),h=i(423),g=i(426),_=i(424),v=m.style(Object.assign(Object.assign({backgroundColor:s.global_BackgroundColor_light_300.var},_.padding(18,14)),{margin:5})),b=()=>{const e=f.useContext(c.WizardContext),{values:t}=l.useFormikContext();return a.createElement(a.Fragment,null,a.createElement(u.Form,{ouiaId:"review-step"},a.createElement(d.Title,{headingLevel:"h2",size:"xl"},y.Messages.wizards.policy.review.title),a.createElement(u.Switch,{ouiaId:"is-enabled",isDisabled:e.isLoading,id:"isEnabled",name:"isEnabled",labelOn:y.Messages.wizards.policy.review.policyIsEnabled,labelOff:y.Messages.wizards.policy.review.policyIsDisabled,label:y.Messages.wizards.policy.review.enableThisPolicy}),a.createElement(d.Title,{headingLevel:"h2",size:"md"},y.Messages.wizards.policy.review.policy.details),a.createElement(u.FormText,{ouiaId:"name",label:y.Messages.wizards.policy.review.policy.name,name:"name",id:"name"}),a.createElement(u.FormText,{ouiaId:"description",label:y.Messages.wizards.policy.review.policy.description,name:"description",id:"description"}),a.createElement("div",{className:v},a.createElement(h.Conditions,{ouiaId:"review-step.conditions",conditions:t.conditions})),a.createElement("div",{className:v},a.createElement(g.Actions,{ouiaId:"review-step.actions",actions:t.actions||[]}))))};t.createReviewStep=e=>Object.assign({name:y.Messages.wizards.policy.review.title,component:a.createElement(b,null),validationSchema:p.PolicyFormSchema},e)},958:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyWizardFooter=void 0;const a=o(i(0)),l=i(23),s=i(23),c=i(89),u=i(39),d=i(56),p=i(0),f=i(158),m=u.style({marginTop:"auto",marginBottom:14}),y=u.style({marginRight:5});t.PolicyWizardFooter=e=>{const t=p.useContext(f.WizardContext);return a.createElement(l.WizardFooter,null,a.createElement(l.WizardContextConsumer,null,i=>{const n=e.onNext&&(()=>{e.onNext&&e.onNext(t,i.onNext)});return a.createElement(a.Fragment,null,a.createElement(l.Button,{variant:l.ButtonVariant.primary,type:"submit",onClick:n||i.onNext,isDisabled:e.isLoading||!i.activeStep.enableNext},i.activeStep.nextButtonText||"Next"),!i.activeStep.hideBackButton&&a.createElement(l.Button,{variant:l.ButtonVariant.secondary,onClick:i.onBack,isDisabled:0===i.activeStep.id||e.isLoading},"Back"),!i.activeStep.hideCancelButton&&a.createElement(l.Button,{variant:l.ButtonVariant.link,onClick:i.onClose,isDisabled:e.isLoading},"Cancel"),e.isLoading&&a.createElement("div",{className:m},e.loadingText,"  ",a.createElement(s.Spinner,{size:"md"})),!e.isLoading&&e.error&&a.createElement(l.Split,{className:m},a.createElement(l.SplitItem,null,a.createElement(d.ExclamationCircleIcon,{className:y,color:c.global_danger_color_100.value})),a.createElement(l.SplitItem,null,e.error)))}))}},959:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CreatePolicyStepContextProvider=t.defaultPerPage=void 0;const a=o(i(0)),l=i(485),s=i(18),c=i(369),u=i(114),d=i(455);t.defaultPerPage=5,t.CreatePolicyStepContextProvider=e=>{var i;const[n,r]=a.useState(!1),[o,p]=a.useState({}),f=l.usePolicyFilter(void 0,!1),m=s.useSort(),y=l.usePolicyPage(f.debouncedFilters,t.defaultPerPage,m.sortBy),h=c.useGetPoliciesQuery(y.page,!1);let g=void 0,_=0;"PagedResponseOfPolicy"===(null===(i=h.payload)||void 0===i?void 0:i.type)&&(g=h.payload.value.data,_=h.payload.value.count);const v=l.usePolicyRows(g,h.loading,_,y.page),{query:b}=h;return u.useUpdateEffect(()=>{e.showCreateStep&&b()},[b,y.page,f.debouncedFilters,e.showCreateStep]),e.showCreateStep?a.createElement(d.CreatePolicyStepContext.Provider,{value:{copyPolicy:n,setCopyPolicy:r,copiedPolicy:o,setCopiedPolicy:p,policyFilter:f,policyPage:y,policySort:m,policyQuery:h,policyRows:v}},e.children):a.createElement(a.Fragment,null,e.children)}},960:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usePolicyFilter=void 0;const n=i(346),r=i(18),o=i(68),a=e=>r.useUrlStateString("name",e),l=e=>r.useUrlStateExclusiveOptions("enabled",["Enabled","Disabled",""],""),s=e=>{switch(e){case n.PolicyFilterColumn.NAME:return a;case n.PolicyFilterColumn.IS_ACTIVE:return l;default:o.assertNever(e)}};t.usePolicyFilter=(e=250,t=!0)=>r.useFilters(n.PolicyFilterColumn,e,t?s:void 0)},961:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.usePolicyPage=void 0;const a=o(i(0)),l=i(18),s=i(346);t.usePolicyPage=(e,t,i)=>{const[n,r]=a.useState(1),[o,c]=a.useState(t);return a.useEffect(()=>{r(1)},[r,e]),{page:a.useMemo(()=>{const t=new l.Filter,r=l.stringValue(e[s.PolicyFilterColumn.NAME]).trim(),a=l.stringValue(e[s.PolicyFilterColumn.IS_ACTIVE]).trim();return""!==r&&t.and(s.PolicyFilterColumn.NAME,l.Operator.ILIKE,`%${r}%`),""!==a&&t.and(s.PolicyFilterColumn.IS_ACTIVE,l.Operator.BOOLEAN_IS,"Enabled"===a?"true":"false"),l.Page.of(n,o,t,i)},[n,o,i,e]),changePage:a.useCallback((e,t)=>{r(t)},[r]),changeItemsPerPage:a.useCallback((e,t)=>{r(1),c(t)},[r,c])}}},962:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.usePolicyRows=void 0;const a=o(i(0)),l=i(345),s=i(18),c=i(114),u=i(963),d=i(68),p=new s.ImmutableContainerSet(void 0,s.ImmutableContainerSetMode.INCLUDE),f=new s.ImmutableContainerSet(void 0,s.ImmutableContainerSetMode.EXCLUDE);t.usePolicyRows=(e,t,i,n)=>{const[r,o]=a.useState([]),[m,y]=a.useState(p),h=c.usePrevious(e),{query:g,loading:_}=u.useGetPoliciesIdsQuery(),v=a.useCallback(()=>{y(p),o(e=>e.map(e=>Object.assign(Object.assign({},e),{isOpen:!1,isSelected:!1})))},[y]);a.useEffect(()=>{t||!e?o([]):e!==h&&o(null==e?void 0:e.map(e=>Object.assign(Object.assign({},e),{isOpen:!1,isSelected:m.contains(e.id)})))},[e,t,o,h,m]);const b=a.useCallback((e,t,i)=>{o(n=>{const r=[...n];return r[t]=Object.assign(Object.assign({},e),{isOpen:i}),r})},[o]),E=a.useCallback(e=>{y(t=>t.remove(e))},[y]),P=a.useCallback((e,t,i)=>{y(t=>i?t.add(e.id):t.remove(e.id)),o(n=>{const r=[...n];return r[t]=Object.assign(Object.assign({},e),{isSelected:i}),r})},[y]),O=a.useCallback(e=>{e===l.SelectionCommand.NONE?(y(p),o(e=>e.map(e=>Object.assign(Object.assign({},e),{isSelected:!1})))):e===l.SelectionCommand.PAGE?(y(e=>e.addIterable(r.map(e=>e.id))),o(e=>e.map(e=>Object.assign(Object.assign({},e),{isSelected:!0})))):e===l.SelectionCommand.ALL?(y(f),o(e=>e.map(e=>Object.assign(Object.assign({},e),{isSelected:!0})))):d.assertNever(e)},[r]),C=a.useMemo(()=>m.size(i),[m,i]),T=a.useCallback(()=>m.mode===s.ImmutableContainerSetMode.INCLUDE?Promise.resolve(m.values()):g(n).then(e=>{var t;if(e.error)throw e.errorObject;let i=[];if(200===(null===(t=e.payload)||void 0===t?void 0:t.status)){const t=new Set(e.payload.value);m.values().forEach(e=>{t.delete(e)}),i=t}return Array.from(i.values())}),[g,n,m]);return{rows:r,onCollapse:b,onSelect:P,onSelectionChanged:O,selectionCount:C,clearSelection:v,getSelected:T,loadingSelected:_,selected:m,removeSelection:E}}},963:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGetPoliciesIdsQuery=t.actionCreator=void 0;const n=i(67),r=i(100);t.actionCreator=e=>r.Operations.GetPoliciesIds.actionCreator(e.toQuery()),t.useGetPoliciesIdsQuery=()=>n.useParameterizedQuery(t.actionCreator)},986:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useVerifyPolicyMutation=t.actionCreator=void 0;const n=i(67),r=i(125),o=i(100);t.actionCreator=e=>o.Operations.PostPoliciesValidate.actionCreator({body:r.toServerPolicy(e)}),t.useVerifyPolicyMutation=()=>n.useMutation(t.actionCreator)},987:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSavePolicyMutation=t.savePolicyActionCreator=void 0;const n=i(125),r=i(67),o=i(100),a=i(189),l=i(18);t.savePolicyActionCreator=e=>e.id?o.Operations.PutPoliciesByPolicyId.actionCreator({policyId:e.id,body:n.toServerPolicy(e)}):o.Operations.PostPolicies.actionCreator({alsoStore:!0,body:n.toServerPolicy(e)});const s=a.validationResponseTransformer(e=>"Policy"===e.type?a.validatedResponse("Policy",e.status,n.toPolicy(e.value),e.errors):e);t.useSavePolicyMutation=()=>l.useTransformQueryResponse(r.useMutation(t.savePolicyActionCreator),s)},989:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useValidatePolicyNameParametrizedQuery=t.actionCreator=void 0;const n=i(67),r=i(100);t.actionCreator=e=>{var t;return r.Operations.PostPoliciesValidateName.actionCreator({body:null!==(t=e.name)&&void 0!==t?t:"",id:e.id})},t.useValidatePolicyNameParametrizedQuery=()=>n.useParameterizedQuery(t.actionCreator)},990:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFacts=void 0;const n=i(0),r=i(991);t.useFacts=()=>{const[e,t]=n.useState(),{payload:i}=r.useGetFactsQuery(!0);return n.useEffect(()=>{200===(null==i?void 0:i.status)&&t(i.value)},[i,t]),e}},991:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGetFactsQuery=t.actionCreator=void 0;const n=i(67),r=i(100);t.actionCreator=r.Operations.GetFacts.actionCreator,t.useGetFactsQuery=e=>n.useQuery(t.actionCreator(),e)},992:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.policyTableError=void 0;const n=i(56),r=i(89),o=i(31);t.policyTableError=(e,t,i)=>{if(t)switch(i){case 404:return{icon:n.PlusCircleIcon,title:o.Messages.tables.policy.emptyState.notFound.title,content:o.Messages.tables.policy.emptyState.notFound.content};case 401:return{icon:n.ExclamationCircleIcon,title:"Refresh your browser",content:"Your session expired while using the application",action:e.refreshPage,actionLabel:"Reload page"};case 500:case 502:return{icon:n.ExclamationCircleIcon,iconColor:r.global_danger_color_200.value,title:"Internal server error",content:"The server was unable to process the request, please try again.",action:e.tryAgain,actionLabel:"Try again"};default:return{icon:n.ExclamationCircleIcon,iconColor:r.global_danger_color_200.value,title:"Unable to connect",content:"There was an error retrieving data. Check your connection and try again.",action:e.tryAgain,actionLabel:"Try again"}}}},993:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(75),t)},994:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMassDeletePoliciesMutation=t.actionCreator=void 0;const n=i(67),r=i(100);t.actionCreator=e=>r.Operations.DeletePoliciesIds.actionCreator({body:e}),t.useMassDeletePoliciesMutation=()=>n.useMutation(t.actionCreator)},995:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ListPageEmptyState=void 0;const a=o(i(0)),l=i(56),s=i(31),c=i(18),u=i(123),d=()=>a.createElement("br",null);t.ListPageEmptyState=e=>a.createElement(u.EmptyStateSection,{icon:l.CubesIcon,title:s.Messages.pages.listPage.emptyState.title,content:c.join(s.Messages.pages.listPage.emptyState.text,d),action:e.createPolicy,actionLabel:"Create policy"})},996:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGetListPagePolicies=void 0;const n=i(369),r=i(0);t.useGetListPagePolicies=e=>{const t=n.useGetPoliciesQuery(e,!1),i=n.useHasPoliciesQuery(),[o,a]=r.useState(),l=r.useMemo(()=>!e.hasFilter()&&1===e.index,[e]),s=r.useCallback(()=>{const e=t.query,n=i.query;return e().then(e=>{if(404===e.status){if(!l)return a(void 0),n().then(t=>(404===t.status?a(!1):200===t.status?a(!0):a(void 0),e));a(!1)}else 200===e.status?a(!0):a(void 0);return e})},[t.query,i.query,l]),c=r.useCallback(()=>{const e=t.abort,n=i.abort;e(),n()},[t.abort,i.abort]),u=r.useCallback(()=>{const e=t.reset,n=i.reset;e(),n()},[t.reset,i.reset]);return Object.assign(Object.assign({},t),{query:s,abort:c,reset:u,status:t.status,loading:i.loading||t.loading,errorObject:i.errorObject||t.errorObject,error:i.error||t.error,hasPolicies:o})}},997:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useTableActionResolverCallback=void 0;const a=o(i(0)),l=i(125);t.useTableActionResolverCallback=e=>{const{canWriteAll:t,openPolicyToDelete:i,mutateChangePolicyEnabled:n,setPolicyWizardState:r}=e;return a.useCallback(e=>t?[{title:e.isEnabled?"Disable":"Enable",onClick:()=>{n({policyIds:[e.id],shouldBeEnabled:!e.isEnabled})}},{title:"Edit",onClick:()=>{r({isOpen:!0,template:e,showCreateStep:!1,isEditing:!0})}},{title:"Duplicate",onClick:()=>{r({isOpen:!0,template:l.makeCopyOfPolicy(e),showCreateStep:!1,isEditing:!1})}},{title:"Delete",onClick:()=>{i(e)}}]:[],[t,i,n,r])}},998:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useListPageDelete=void 0;const a=o(i(0)),l=i(18);t.useListPageDelete=e=>{const{rows:t,onSelect:i,removeSelection:n,clearSelection:r,selectionCount:o}=e.policyRows,{changePage:s}=e.policyPage,{index:c,size:u}=e.policyPage.page,{close:d,policy:p}=e.policyToDelete,{reload:f,count:m}=e;return{onDeleted:a.useCallback(e=>{const r=t.findIndex(t=>t.id===e);-1===r?n(e):i(t[r],r,!1)},[t,i,n]),onCloseDeletePolicy:a.useCallback(e=>{if(e){f();const e=p?1:o,t=l.Page.lastPageForElements(m-e,u);t.index<c&&s(void 0,t.index),r()}d()},[f,m,d,r,s,c,o,u,p])}}},999:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useToolbarActions=void 0;const l=o(i(0)),s=a(i(495)),c=i(235),u=i(18),d=i(1e3);t.useToolbarActions=e=>{const{setPolicyWizardState:t,exportAllPoliciesQuery:i,mutateChangePolicyEnabled:n,openPolicyToDelete:r}=e,{selected:o,selectionCount:a,getSelected:p,rows:f}=e.policyRows;return{createCustomPolicy:l.useCallback(()=>{t({isOpen:!0,showCreateStep:!0,template:void 0,isEditing:!1})},[t]),onDeletePolicies:l.useCallback(()=>{if(1===a){const e=f.find(e=>o.contains(e.id));if(e)return void r(e)}r(a)},[a,r,o,f]),onDisablePolicies:l.useCallback(()=>p().then(e=>n({shouldBeEnabled:!1,policyIds:e})),[n,p]),onEnablePolicies:l.useCallback(()=>p().then(e=>n({shouldBeEnabled:!0,policyIds:e})),[n,p]),onExport:l.useCallback((e,t)=>{const n=d.policyExporterFactory(u.exporterTypeFromString(t));return i().then(e=>{var t;"PagedResponseOfPolicy"===(null===(t=e.payload)||void 0===t?void 0:t.type)?s.default(n.export(e.payload.value.data),`policies-${c.format(new Date(Date.now()),"y-dd-MM")}.${n.type}`):u.addDangerNotification("Unable to download policies","We were unable to download the policies for exporting")})},[i])}}}});
//# sourceMappingURL=App.js.map